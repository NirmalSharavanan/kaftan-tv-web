!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var i=[],n=t.document,o=Object.getPrototypeOf,r=i.slice,a=i.concat,s=i.push,l=i.indexOf,d={},c=d.toString,u=d.hasOwnProperty,h=u.toString,p=h.call(Object),f={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},g=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,nonce:!0,noModule:!0};function y(t,e,i){var o,r,a=(i=i||n).createElement("script");if(a.text=t,e)for(o in v)(r=e[o]||e.getAttribute&&e.getAttribute(o))&&a.setAttribute(o,r);i.head.appendChild(a).parentNode.removeChild(a)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[c.call(t)]||"object":typeof t}var _="3.4.1",w=function(t,e){return new w.fn.init(t,e)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function T(t){var e=!!t&&"length"in t&&t.length,i=b(t);return!m(t)&&!g(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}w.fn=w.prototype={jquery:_,constructor:w,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},w.extend=w.fn.extend=function(){var t,e,i,n,o,r,a=arguments[0]||{},s=1,l=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],"__proto__"!==e&&a!==n&&(d&&n&&(w.isPlainObject(n)||(o=Array.isArray(n)))?(i=a[e],r=o&&!Array.isArray(i)?[]:o||w.isPlainObject(i)?i:{},o=!1,a[e]=w.extend(d,r,n)):void 0!==n&&(a[e]=n));return a},w.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==c.call(t)||(e=o(t))&&("function"!=typeof(i=u.call(e,"constructor")&&e.constructor)||h.call(i)!==p))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){y(t,{nonce:e&&e.nonce})},each:function(t,e){var i,n=0;if(T(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(x,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(T(Object(t))?w.merge(i,"string"==typeof t?[t]:t):s.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:l.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,a=!i;o<r;o++)!e(t[o],o)!==a&&n.push(t[o]);return n},map:function(t,e,i){var n,o,r=0,s=[];if(T(t))for(n=t.length;r<n;r++)null!=(o=e(t[r],r,i))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,i))&&s.push(o);return a.apply([],s)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=i[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var C=function(t){var e,i,n,o,r,a,s,l,d,c,u,h,p,f,m,g,v,y,b,_="sizzle"+1*new Date,w=t.document,x=0,T=0,C=lt(),k=lt(),E=lt(),S=lt(),A=function(t,e){return t===e&&(u=!0),0},O={}.hasOwnProperty,I=[],D=I.pop,P=I.push,L=I.push,R=I.slice,B=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+M+"*("+F+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+M+"*\\]",W=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",z=new RegExp(M+"+","g"),H=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),q=new RegExp("^"+M+"*,"+M+"*"),V=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),G=new RegExp(W),$=new RegExp("^"+F+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),it=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){h()},at=_t(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{L.apply(I=R.call(w.childNodes),w.childNodes)}catch(e){L={apply:I.length?function(t,e){P.apply(t,R.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function st(t,e,n,o){var r,s,d,c,u,f,v,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return n;if(!o&&((e?e.ownerDocument||e:w)!==p&&h(e),e=e||p,m)){if(11!==x&&(u=J.exec(t)))if(r=u[1]){if(9===x){if(!(d=e.getElementById(r)))return n;if(d.id===r)return n.push(d),n}else if(y&&(d=y.getElementById(r))&&b(e,d)&&d.id===r)return n.push(d),n}else{if(u[2])return L.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return L.apply(n,e.getElementsByClassName(r)),n}if(i.qsa&&!S[t+" "]&&(!g||!g.test(t))&&(1!==x||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===x&&U.test(t)){for((c=e.getAttribute("id"))?c=c.replace(nt,ot):e.setAttribute("id",c=_),s=(f=a(t)).length;s--;)f[s]="#"+c+" "+bt(f[s]);v=f.join(","),y=tt.test(t)&&vt(e.parentNode)||e}try{return L.apply(n,y.querySelectorAll(v)),n}catch(e){S(t,!0)}finally{c===_&&e.removeAttribute("id")}}}return l(t.replace(H,"$1"),e,n,o)}function lt(){var t=[];return function e(i,o){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=o}}function dt(t){return t[_]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=e}function ht(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return dt(function(e){return e=+e,dt(function(i,n){for(var o,r=t([],i.length,e),a=r.length;a--;)i[o=r[a]]&&(i[o]=!(n[o]=i[o]))})})}function vt(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}for(e in i=st.support={},r=st.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!Y.test(t.namespaceURI||e&&e.nodeName||"HTML")},h=st.setDocument=function(t){var e,o,a=t?t.ownerDocument||t:w;return a!==p&&9===a.nodeType&&a.documentElement&&(f=(p=a).documentElement,m=!r(p),w!==p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",rt,!1):o.attachEvent&&o.attachEvent("onunload",rt)),i.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),i.getElementsByTagName=ct(function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length}),i.getElementsByClassName=Z.test(p.getElementsByClassName),i.getById=ct(function(t){return f.appendChild(t).id=_,!p.getElementsByName||!p.getElementsByName(_).length}),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&m){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&m){var i,n,o,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(o=e.getElementsByName(t),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(i.qsa=Z.test(p.querySelectorAll))&&(ct(function(t){f.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+M+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+M+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+_+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+M+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(i.matchesSelector=Z.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ct(function(t){i.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",W)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(f.compareDocumentPosition),b=e||Z.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===p||t.ownerDocument===w&&b(w,t)?-1:e===p||e.ownerDocument===w&&b(w,e)?1:c?B(c,t)-B(c,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,a=[t],s=[e];if(!o||!r)return t===p?-1:e===p?1:o?-1:r?1:c?B(c,t)-B(c,e):0;if(o===r)return ht(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?ht(a[n],s[n]):a[n]===w?-1:s[n]===w?1:0}),p},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&h(t),i.matchesSelector&&m&&!S[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var n=y.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){S(e,!0)}return 0<st(e,p,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!==p&&h(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==p&&h(t);var o=n.attrHandle[e.toLowerCase()],r=o&&O.call(n.attrHandle,e.toLowerCase())?o(t,e,!m):void 0;return void 0!==r?r:i.attributes||!m?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},st.escape=function(t){return(t+"").replace(nt,ot)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],o=0,r=0;if(u=!i.detectDuplicates,c=!i.sortStable&&t.slice(0),t.sort(A),u){for(;e=t[r++];)e===t[r]&&(o=n.push(r));for(;o--;)t.splice(n[o],1)}return c=null,t},o=st.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(n=st.selectors={cacheLength:50,createPseudo:dt,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&G.test(i)&&(e=a(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+M+")"+t+"("+M+"|$)"))&&C(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(n){var o=st.attr(n,t);return null==o?"!="===e:!e||(o+="","="===e?o===i:"!="===e?o!==i:"^="===e?i&&0===o.indexOf(i):"*="===e?i&&-1<o.indexOf(i):"$="===e?i&&o.slice(-i.length)===i:"~="===e?-1<(" "+o.replace(z," ")+" ").indexOf(i):"|="===e&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var d,c,u,h,p,f,m=r!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(r){for(;m;){for(h=e;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(b=(p=(d=(c=(u=(h=g)[_]||(h[_]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]||[])[0]===x&&d[1])&&d[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(b=p=0)||f.pop();)if(1===h.nodeType&&++b&&h===e){c[t]=[x,p,b];break}}else if(y&&(b=p=(d=(c=(u=(h=e)[_]||(h[_]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]||[])[0]===x&&d[1]),!1===b)for(;(h=++p&&h&&h[m]||(b=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&((c=(u=h[_]||(h[_]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]=[x,b]),h!==e)););return(b-=o)===n||b%n==0&&0<=b/n}}},PSEUDO:function(t,e){var i,o=n.pseudos[t]||n.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return o[_]?o(e):1<o.length?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?dt(function(t,i){for(var n,r=o(t,e),a=r.length;a--;)t[n=B(t,r[a])]=!(i[n]=r[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:dt(function(t){var e=[],i=[],n=s(t.replace(H,"$1"));return n[_]?dt(function(t,e,i,o){for(var r,a=n(t,null,o,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,o,r){return e[0]=t,n(e,null,r,i),e[0]=null,!i.pop()}}),has:dt(function(t){return function(e){return 0<st(t,e).length}}),contains:dt(function(t){return t=t.replace(et,it),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:dt(function(t){return $.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,i){return[i<0?i+e:i]}),even:gt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:gt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:gt(function(t,e,i){for(var n=i<0?i+e:e<i?e:i;0<=--n;)t.push(n);return t}),gt:gt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ft(e);function yt(){}function bt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function _t(t,e,i){var n=e.dir,o=e.next,r=o||n,a=i&&"parentNode"===r,s=T++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||a)return t(e,i,o);return!1}:function(e,i,l){var d,c,u,h=[x,s];if(l){for(;e=e[n];)if((1===e.nodeType||a)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||a)if(c=(u=e[_]||(e[_]={}))[e.uniqueID]||(u[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[n]||e;else{if((d=c[r])&&d[0]===x&&d[1]===s)return h[2]=d[2];if((c[r]=h)[2]=t(e,i,l))return!0}return!1}}function wt(t){return 1<t.length?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function xt(t,e,i,n,o){for(var r,a=[],s=0,l=t.length,d=null!=e;s<l;s++)(r=t[s])&&(i&&!i(r,n,o)||(a.push(r),d&&e.push(s)));return a}function Tt(t,e,i,n,o,r){return n&&!n[_]&&(n=Tt(n)),o&&!o[_]&&(o=Tt(o,r)),dt(function(r,a,s,l){var d,c,u,h=[],p=[],f=a.length,m=r||function(t,e,i){for(var n=0,o=e.length;n<o;n++)st(t,e[n],i);return i}(e||"*",s.nodeType?[s]:s,[]),g=!t||!r&&e?m:xt(m,h,t,s,l),v=i?o||(r?t:f||n)?[]:a:g;if(i&&i(g,v,s,l),n)for(d=xt(v,p),n(d,[],s,l),c=d.length;c--;)(u=d[c])&&(v[p[c]]=!(g[p[c]]=u));if(r){if(o||t){if(o){for(d=[],c=v.length;c--;)(u=v[c])&&d.push(g[c]=u);o(null,v=[],d,l)}for(c=v.length;c--;)(u=v[c])&&-1<(d=o?B(r,u):h[c])&&(r[d]=!(a[d]=u))}}else v=xt(v===a?v.splice(f,v.length):v),o?o(null,a,v,l):L.apply(a,v)})}function Ct(t){for(var e,i,o,r=t.length,a=n.relative[t[0].type],s=a||n.relative[" "],l=a?1:0,c=_t(function(t){return t===e},s,!0),u=_t(function(t){return-1<B(e,t)},s,!0),h=[function(t,i,n){var o=!a&&(n||i!==d)||((e=i).nodeType?c(t,i,n):u(t,i,n));return e=null,o}];l<r;l++)if(i=n.relative[t[l].type])h=[_t(wt(h),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[_]){for(o=++l;o<r&&!n.relative[t[o].type];o++);return Tt(1<l&&wt(h),1<l&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(H,"$1"),i,l<o&&Ct(t.slice(l,o)),o<r&&Ct(t=t.slice(o)),o<r&&bt(t))}h.push(i)}return wt(h)}return yt.prototype=n.filters=n.pseudos,n.setFilters=new yt,a=st.tokenize=function(t,e){var i,o,r,a,s,l,d,c=k[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],d=n.preFilter;s;){for(a in i&&!(o=q.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=V.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(H," ")}),s=s.slice(i.length)),n.filter)!(o=K[a].exec(s))||d[a]&&!(o=d[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return e?s.length:s?st.error(t):k(t,l).slice(0)},s=st.compile=function(t,e){var i,o,r,s,l,c,u=[],f=[],g=E[t+" "];if(!g){for(e||(e=a(t)),i=e.length;i--;)(g=Ct(e[i]))[_]?u.push(g):f.push(g);(g=E(t,(o=f,s=0<(r=u).length,l=0<o.length,c=function(t,e,i,a,c){var u,f,g,v=0,y="0",b=t&&[],_=[],w=d,T=t||l&&n.find.TAG("*",c),C=x+=null==w?1:Math.random()||.1,k=T.length;for(c&&(d=e===p||e||c);y!==k&&null!=(u=T[y]);y++){if(l&&u){for(f=0,e||u.ownerDocument===p||(h(u),i=!m);g=o[f++];)if(g(u,e||p,i)){a.push(u);break}c&&(x=C)}s&&((u=!g&&u)&&v--,t&&b.push(u))}if(v+=y,s&&y!==v){for(f=0;g=r[f++];)g(b,_,e,i);if(t){if(0<v)for(;y--;)b[y]||_[y]||(_[y]=D.call(a));_=xt(_)}L.apply(a,_),c&&!t&&0<_.length&&1<v+r.length&&st.uniqueSort(a)}return c&&(x=C,d=w),b},s?dt(c):c))).selector=t}return g},l=st.select=function(t,e,i,o){var r,l,d,c,u,h="function"==typeof t&&t,p=!o&&a(t=h.selector||t);if(i=i||[],1===p.length){if(2<(l=p[0]=p[0].slice(0)).length&&"ID"===(d=l[0]).type&&9===e.nodeType&&m&&n.relative[l[1].type]){if(!(e=(n.find.ID(d.matches[0].replace(et,it),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=K.needsContext.test(t)?0:l.length;r--&&!n.relative[c=(d=l[r]).type];)if((u=n.find[c])&&(o=u(d.matches[0].replace(et,it),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(r,1),!(t=o.length&&bt(l)))return L.apply(i,o),i;break}}return(h||s(t,p))(o,e,!m,i,!e||tt.test(t)&&vt(e.parentNode)||e),i},i.sortStable=_.split("").sort(A).join("")===_,i.detectDuplicates=!!u,h(),i.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),i.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ut(N,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),st}(t);w.find=C,w.expr=C.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=C.uniqueSort,w.text=C.getText,w.isXMLDoc=C.isXML,w.contains=C.contains,w.escapeSelector=C.escape;var k=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&w(t).is(i))break;n.push(t)}return n},E=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},S=w.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(t,e,i){return m(e)?w.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?w.grep(t,function(t){return t===e!==i}):"string"!=typeof e?w.grep(t,function(t){return-1<l.call(e,t)!==i}):w.filter(e,t,i)}w.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?w.find.matchesSelector(n,t)?[n]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,i,n=this.length,o=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<n;e++)if(w.contains(o[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)w.find(t,o[e],i);return 1<n?w.uniqueSort(i):i},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&S.test(t)?w(t):t||[],!1).length}});var D,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,i){var o,r;if(!t)return this;if(i=i||D,"string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:P.exec(t))||!o[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(o[1]){if(w.merge(this,w.parseHTML(o[1],(e=e instanceof w?e[0]:e)&&e.nodeType?e.ownerDocument||e:n,!0)),O.test(o[1])&&w.isPlainObject(e))for(o in e)m(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return(r=n.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,D=w(n);var L=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function B(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,o=this.length,r=[],a="string"!=typeof t&&w(t);if(!S.test(t))for(;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&w.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(1<r.length?w.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?l.call(w(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,i){return k(t,"parentNode",i)},next:function(t){return B(t,"nextSibling")},prev:function(t){return B(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,i){return k(t,"nextSibling",i)},prevUntil:function(t,e,i){return k(t,"previousSibling",i)},siblings:function(t){return E((t.parentNode||{}).firstChild,t)},children:function(t){return E(t.firstChild)},contents:function(t){return"undefined"!=typeof t.contentDocument?t.contentDocument:(A(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},function(t,e){w.fn[t]=function(i,n){var o=w.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=w.filter(n,o)),1<this.length&&(R[t]||w.uniqueSort(o),L.test(t)&&o.reverse()),this.pushStack(o)}});var N=/[^\x20\t\r\n\f]+/g;function M(t){return t}function F(t){throw t}function j(t,e,i,n){var o;try{t&&m(o=t.promise)?o.call(t).done(e).fail(i):t&&m(o=t.then)?o.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(t){var e;t="string"==typeof t?(e={},w.each(t.match(N)||[],function(t,i){e[i]=!0}),e):w.extend({},t);var i,n,o,r,a=[],s=[],l=-1,d=function(){for(r=r||t.once,o=i=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&t.stopOnFalse&&(l=a.length,n=!1);t.memory||(n=!1),i=!1,r&&(a=n?[]:"")},c={add:function(){return a&&(n&&!i&&(l=a.length-1,s.push(n)),function e(i){w.each(i,function(i,n){m(n)?t.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==b(n)&&e(n)})}(arguments),n&&!i&&d()),this},remove:function(){return w.each(arguments,function(t,e){for(var i;-1<(i=w.inArray(e,a,i));)a.splice(i,1),i<=l&&l--}),this},has:function(t){return t?-1<w.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||i||(a=n=""),this},locked:function(){return!!r},fireWith:function(t,e){return r||(e=[t,(e=e||[]).slice?e.slice():e],s.push(e),i||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!o}};return c},w.extend({Deferred:function(e){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return w.Deferred(function(e){w.each(i,function(i,n){var o=m(t[n[4]])&&t[n[4]];r[n[1]](function(){var t=o&&o.apply(this,arguments);t&&m(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(e,n,o){var r=0;function a(e,i,n,o){return function(){var s=this,l=arguments,d=function(){var t,d;if(!(e<r)){if((t=n.apply(s,l))===i.promise())throw new TypeError("Thenable self-resolution");m(d=t&&("object"==typeof t||"function"==typeof t)&&t.then)?o?d.call(t,a(r,i,M,o),a(r,i,F,o)):d.call(t,a(++r,i,M,o),a(r,i,F,o),a(r,i,M,i.notifyWith)):(n!==M&&(s=void 0,l=[t]),(o||i.resolveWith)(s,l))}},c=o?d:function(){try{d()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,c.stackTrace),r<=e+1&&(n!==F&&(s=void 0,l=[t]),i.rejectWith(s,l))}};e?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),t.setTimeout(c))}}return w.Deferred(function(t){i[0][3].add(a(0,t,m(o)?o:M,t.notifyWith)),i[1][3].add(a(0,t,m(e)?e:M)),i[2][3].add(a(0,t,m(n)?n:F))}).promise()},promise:function(t){return null!=t?w.extend(t,o):o}},r={};return w.each(i,function(t,e){var a=e[2],s=e[5];o[e[1]]=a.add,s&&a.add(function(){n=s},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),a.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=a.fireWith}),o.promise(r),e&&e.call(r,r),r},when:function(t){var e=arguments.length,i=e,n=Array(i),o=r.call(arguments),a=w.Deferred(),s=function(t){return function(i){n[t]=this,o[t]=1<arguments.length?r.call(arguments):i,--e||a.resolveWith(n,o)}};if(e<=1&&(j(t,a.done(s(i)).resolve,a.reject,!e),"pending"===a.state()||m(o[i]&&o[i].then)))return a.then();for(;i--;)j(o[i],s(i),a.reject);return a.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&W.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},w.readyException=function(e){t.setTimeout(function(){throw e})};var z=w.Deferred();function H(){n.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),w.ready()}w.fn.ready=function(t){return z.then(t).catch(function(t){w.readyException(t)}),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||z.resolveWith(n,[w])}}),w.ready.then=z.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?t.setTimeout(w.ready):(n.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var q=function(t,e,i,n,o,r,a){var s=0,l=t.length,d=null==i;if("object"===b(i))for(s in o=!0,i)q(t,e,s,i[s],!0,r,a);else if(void 0!==n&&(o=!0,m(n)||(a=!0),d&&(a?(e.call(t,n),e=null):(d=e,e=function(t,e,i){return d.call(w(t),i)})),e))for(;s<l;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return o?t:d?e.call(t):l?e(t[0],i):r},V=/^-ms-/,U=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function $(t){return t.replace(V,"ms-").replace(U,G)}var K=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=w.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},K(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[$(e)]=i;else for(n in e)o[$(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][$(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map($):(e=$(e))in n?[e]:e.match(N)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||w.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var X=new Y,Q=new Y,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function tt(t,e,i){var n,o;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(o=i)||"false"!==o&&("null"===o?null:o===+o+""?+o:Z.test(o)?JSON.parse(o):o)}catch(t){}Q.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return Q.hasData(t)||X.hasData(t)},data:function(t,e,i){return Q.access(t,e,i)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,i){return X.access(t,e,i)},_removeData:function(t,e){X.remove(t,e)}}),w.fn.extend({data:function(t,e){var i,n,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=Q.get(r),1===r.nodeType&&!X.get(r,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=$(n.slice(5)),tt(r,n,o[n]));X.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){Q.set(this,t)}):q(this,function(e){var i;if(r&&void 0===e)return void 0!==(i=Q.get(r,t))?i:void 0!==(i=tt(r,t))?i:void 0;this.each(function(){Q.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),w.extend({queue:function(t,e,i){var n;if(t)return n=X.get(t,e=(e||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=X.access(t,e,w.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){var i=w.queue(t,e=e||"fx"),n=i.length,o=i.shift(),r=w._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,function(){w.dequeue(t,e)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return X.get(t,i)||X.access(t,i,{empty:w.Callbacks("once memory").add(function(){X.remove(t,[e+"queue",i])})})}}),w.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?w.queue(this[0],t):void 0===e?this:this.each(function(){var i=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&w.dequeue(this,t)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=w.Deferred(),r=this,a=this.length,s=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=X.get(r[a],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(e)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],ot=n.documentElement,rt=function(t){return w.contains(t.ownerDocument,t)},at={composed:!0};ot.getRootNode&&(rt=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(at)===t.ownerDocument});var st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===w.css(t,"display")},lt=function(t,e,i,n){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];for(r in o=i.apply(t,n||[]),e)t.style[r]=a[r];return o};function dt(t,e,i,n){var o,r,a=20,s=n?function(){return n.cur()}:function(){return w.css(t,e,"")},l=s(),d=i&&i[3]||(w.cssNumber[e]?"":"px"),c=t.nodeType&&(w.cssNumber[e]||"px"!==d&&+l)&&it.exec(w.css(t,e));if(c&&c[3]!==d){for(l/=2,d=d||c[3],c=+l||1;a--;)w.style(t,e,c+d),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),c/=r;w.style(t,e,(c*=2)+d),i=i||[]}return i&&(c=+c||+l||0,o=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=o)),o}var ct={};function ut(t,e){for(var i,n,o,r,a,s,l,d=[],c=0,u=t.length;c<u;c++)(n=t[c]).style&&(i=n.style.display,e?("none"===i&&(d[c]=X.get(n,"display")||null,d[c]||(n.style.display="")),""===n.style.display&&st(n)&&(d[c]=(l=a=r=void 0,a=(o=n).ownerDocument,(l=ct[s=o.nodeName])||(r=a.body.appendChild(a.createElement(s)),l=w.css(r,"display"),r.parentNode.removeChild(r),"none"===l&&(l="block"),ct[s]=l)))):"none"!==i&&(d[c]="none",X.set(n,"display",i)));for(c=0;c<u;c++)null!=d[c]&&(t[c].style.display=d[c]);return t}w.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){st(this)?w(this).show():w(this).hide()})}});var ht=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i,mt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){var i;return i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?w.merge([t],i):i}function vt(t,e){for(var i=0,n=t.length;i<n;i++)X.set(t[i],"globalEval",!e||X.get(e[i],"globalEval"))}mt.optgroup=mt.option,mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td;var yt,bt,_t=/<|&#?\w+;/;function wt(t,e,i,n,o){for(var r,a,s,l,d,c,u=e.createDocumentFragment(),h=[],p=0,f=t.length;p<f;p++)if((r=t[p])||0===r)if("object"===b(r))w.merge(h,r.nodeType?[r]:r);else if(_t.test(r)){for(a=a||u.appendChild(e.createElement("div")),s=(pt.exec(r)||["",""])[1].toLowerCase(),a.innerHTML=(l=mt[s]||mt._default)[1]+w.htmlPrefilter(r)+l[2],c=l[0];c--;)a=a.lastChild;w.merge(h,a.childNodes),(a=u.firstChild).textContent=""}else h.push(e.createTextNode(r));for(u.textContent="",p=0;r=h[p++];)if(n&&-1<w.inArray(r,n))o&&o.push(r);else if(d=rt(r),a=gt(u.appendChild(r),"script"),d&&vt(a),i)for(c=0;r=a[c++];)ft.test(r.type||"")&&i.push(r);return u}yt=n.createDocumentFragment().appendChild(n.createElement("div")),(bt=n.createElement("input")).setAttribute("type","radio"),bt.setAttribute("checked","checked"),bt.setAttribute("name","t"),yt.appendChild(bt),f.checkClone=yt.cloneNode(!0).cloneNode(!0).lastChild.checked,yt.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!yt.cloneNode(!0).lastChild.defaultValue;var xt=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ct=/^([^.]*)(?:\.(.+)|)/;function kt(){return!0}function Et(){return!1}function St(t,e){return t===function(){try{return n.activeElement}catch(t){}}()==("focus"===e)}function At(t,e,i,n,o,r){var a,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=void 0),e)At(t,s,i,n,e[s],r);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Et;else if(!o)return t;return 1===r&&(a=o,(o=function(t){return w().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),t.each(function(){w.event.add(this,e,o,n,i)})}function Ot(t,e,i){i?(X.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var n,o,a=X.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=r.call(arguments),X.set(this,e,a),n=i(this,e),this[e](),a!==(o=X.get(this,e))||n?X.set(this,e,!1):o={},a!==o)return t.stopImmediatePropagation(),t.preventDefault(),o.value}else a.length&&(X.set(this,e,{value:w.event.trigger(w.extend(a[0],w.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===X.get(t,e)&&w.event.add(t,e,kt)}w.event={global:{},add:function(t,e,i,n,o){var r,a,s,l,d,c,u,h,p,f,m,g=X.get(t);if(g)for(i.handler&&(i=(r=i).handler,o=r.selector),o&&w.find.matchesSelector(ot,o),i.guid||(i.guid=w.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(e){return"undefined"!=typeof w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),d=(e=(e||"").match(N)||[""]).length;d--;)p=m=(s=Ct.exec(e[d])||[])[1],f=(s[2]||"").split(".").sort(),p&&(u=w.event.special[p]||{},u=w.event.special[p=(o?u.delegateType:u.bindType)||p]||{},c=w.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:f.join(".")},r),(h=l[p])||((h=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,a)||t.addEventListener&&t.addEventListener(p,a)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),w.event.global[p]=!0)},remove:function(t,e,i,n,o){var r,a,s,l,d,c,u,h,p,f,m,g=X.hasData(t)&&X.get(t);if(g&&(l=g.events)){for(d=(e=(e||"").match(N)||[""]).length;d--;)if(p=m=(s=Ct.exec(e[d])||[])[1],f=(s[2]||"").split(".").sort(),p){for(u=w.event.special[p]||{},h=l[p=(n?u.delegateType:u.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=h.length;r--;)c=h[r],!o&&m!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(r,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(t,c));a&&!h.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||w.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)w.event.remove(t,p+e[d],i,n,!0);w.isEmptyObject(l)&&X.remove(t,"handle events")}},dispatch:function(t){var e,i,n,o,r,a,s=w.event.fix(t),l=new Array(arguments.length),d=(X.get(this,"events")||{})[s.type]||[],c=w.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=w.event.handlers.call(this,s,d),e=0;(o=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==r.namespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(n=((w.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var i,n,o,r,a,s=[],l=e.delegateCount,d=t.target;if(l&&d.nodeType&&!("click"===t.type&&1<=t.button))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==t.type||!0!==d.disabled)){for(r=[],a={},i=0;i<l;i++)void 0===a[o=(n=e[i]).selector+" "]&&(a[o]=n.needsContext?-1<w(o,this).index(d):w.find(o,this,null,[d]).length),a[o]&&r.push(n);r.length&&s.push({elem:d,handlers:r})}return d=this,l<e.length&&s.push({elem:d,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ht.test(e.type)&&e.click&&A(e,"input")&&Ot(e,"click",kt),!1},trigger:function(t){var e=this||t;return ht.test(e.type)&&e.click&&A(e,"input")&&Ot(e,"click"),!0},_default:function(t){var e=t.target;return ht.test(e.type)&&e.click&&A(e,"input")&&X.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?kt:Et,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=kt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=kt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=kt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Tt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(t,e){w.event.special[t]={setup:function(){return Ot(this,t,St),!1},trigger:function(){return Ot(this,t),!0},delegateType:e}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,o=t.handleObj;return n&&(n===this||w.contains(this,n))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),w.fn.extend({on:function(t,e,i,n){return At(this,t,e,i,n)},one:function(t,e,i,n){return At(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,w(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Et),this.each(function(){w.event.remove(this,t,i,e)})}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Dt=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Bt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Mt(t,e){var i,n,o,r,a,s,l,d;if(1===e.nodeType){if(X.hasData(t)&&(r=X.access(t),a=X.set(e,r),d=r.events))for(o in delete a.handle,a.events={},d)for(i=0,n=d[o].length;i<n;i++)w.event.add(e,o,d[o][i]);Q.hasData(t)&&(s=Q.access(t),l=w.extend({},s),Q.set(e,l))}}function Ft(t,e,i,n){e=a.apply([],e);var o,r,s,l,d,c,u=0,h=t.length,p=h-1,g=e[0],v=m(g);if(v||1<h&&"string"==typeof g&&!f.checkClone&&Pt.test(g))return t.each(function(o){var r=t.eq(o);v&&(e[0]=g.call(this,o,r.html())),Ft(r,e,i,n)});if(h&&(r=(o=wt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===o.childNodes.length&&(o=r),r||n)){for(l=(s=w.map(gt(o,"script"),Bt)).length;u<h;u++)d=o,u!==p&&(d=w.clone(d,!0,!0),l&&w.merge(s,gt(d,"script"))),i.call(t[u],d,u);if(l)for(c=s[s.length-1].ownerDocument,w.map(s,Nt),u=0;u<l;u++)ft.test((d=s[u]).type||"")&&!X.access(d,"globalEval")&&w.contains(c,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?w._evalUrl&&!d.noModule&&w._evalUrl(d.src,{nonce:d.nonce||d.getAttribute("nonce")}):y(d.textContent.replace(Lt,""),d,c))}return t}function jt(t,e,i){for(var n,o=e?w.filter(e,t):t,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||w.cleanData(gt(n)),n.parentNode&&(i&&rt(n)&&vt(gt(n,"script")),n.parentNode.removeChild(n));return t}w.extend({htmlPrefilter:function(t){return t.replace(It,"<$1></$2>")},clone:function(t,e,i){var n,o,r,a,s,l,d,c=t.cloneNode(!0),u=rt(t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(a=gt(c),n=0,o=(r=gt(t)).length;n<o;n++)s=r[n],"input"===(d=(l=a[n]).nodeName.toLowerCase())&&ht.test(s.type)?l.checked=s.checked:"input"!==d&&"textarea"!==d||(l.defaultValue=s.defaultValue);if(e)if(i)for(r=r||gt(t),a=a||gt(c),n=0,o=r.length;n<o;n++)Mt(r[n],a[n]);else Mt(t,c);return 0<(a=gt(c,"script")).length&&vt(a,!u&&gt(t,"script")),c},cleanData:function(t){for(var e,i,n,o=w.event.special,r=0;void 0!==(i=t[r]);r++)if(K(i)){if(e=i[X.expando]){if(e.events)for(n in e.events)o[n]?w.event.remove(i,n):w.removeEvent(i,n,e.handle);i[X.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),w.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return q(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ft(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)})},prepend:function(){return Ft(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(gt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return q(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!mt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,function(e){var i=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(gt(this)),i&&i.replaceChild(e,this))},t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){w.fn[t]=function(t){for(var i,n=[],o=w(t),r=o.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),w(o[a])[e](i),s.apply(n,i.get());return this.pushStack(n)}});var Wt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),zt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Ht=new RegExp(nt.join("|"),"i");function qt(t,e,i){var n,o,r,a,s=t.style;return(i=i||zt(t))&&(""!==(a=i.getPropertyValue(e)||i[e])||rt(t)||(a=w.style(t,e)),!f.pixelBoxStyles()&&Wt.test(a)&&Ht.test(e)&&(n=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(d).appendChild(c);var e=t.getComputedStyle(c);o="1%"!==e.top,l=12===i(e.marginLeft),c.style.right="60%",s=36===i(e.right),r=36===i(e.width),c.style.position="absolute",a=12===i(c.offsetWidth/3),ot.removeChild(d),c=null}}function i(t){return Math.round(parseFloat(t))}var o,r,a,s,l,d=n.createElement("div"),c=n.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),o},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a}}))}();var Ut=["Webkit","Moz","ms"],Gt=n.createElement("div").style,$t={};function Kt(t){return w.cssProps[t]||$t[t]||(t in Gt?t:$t[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Ut.length;i--;)if((t=Ut[i]+e)in Gt)return t}(t)||t)}var Yt=/^(none|table(?!-c[ea]).+)/,Xt=/^--/,Qt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,i){var n=it.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function te(t,e,i,n,o,r){var a="width"===e?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=w.css(t,i+nt[a],!0,o)),n?("content"===i&&(l-=w.css(t,"padding"+nt[a],!0,o)),"margin"!==i&&(l-=w.css(t,"border"+nt[a]+"Width",!0,o))):(l+=w.css(t,"padding"+nt[a],!0,o),"padding"!==i?l+=w.css(t,"border"+nt[a]+"Width",!0,o):s+=w.css(t,"border"+nt[a]+"Width",!0,o));return!n&&0<=r&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-s-.5))||0),l}function ee(t,e,i){var n=zt(t),o=(!f.boxSizingReliable()||i)&&"border-box"===w.css(t,"boxSizing",!1,n),r=o,a=qt(t,e,n),s="offset"+e[0].toUpperCase()+e.slice(1);if(Wt.test(a)){if(!i)return a;a="auto"}return(!f.boxSizingReliable()&&o||"auto"===a||!parseFloat(a)&&"inline"===w.css(t,"display",!1,n))&&t.getClientRects().length&&(o="border-box"===w.css(t,"boxSizing",!1,n),(r=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+te(t,e,i||(o?"border":"content"),r,n,a)+"px"}function ie(t,e,i,n,o){return new ie.prototype.init(t,e,i,n,o)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=qt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=$(e),l=Xt.test(e),d=t.style;if(l||(e=Kt(s)),a=w.cssHooks[e]||w.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(o=a.get(t,!1,n))?o:d[e];"string"==(r=typeof i)&&(o=it.exec(i))&&o[1]&&(i=dt(t,e,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||(w.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==i||0!==e.indexOf("background")||(d[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l?d.setProperty(e,i):d[e]=i))}},css:function(t,e,i,n){var o,r,a,s=$(e);return Xt.test(e)||(e=Kt(s)),(a=w.cssHooks[e]||w.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,i)),void 0===o&&(o=qt(t,e,n)),"normal"===o&&e in Zt&&(o=Zt[e]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),w.each(["height","width"],function(t,e){w.cssHooks[e]={get:function(t,i,n){if(i)return!Yt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ee(t,e,n):lt(t,Qt,function(){return ee(t,e,n)})},set:function(t,i,n){var o,r=zt(t),a=!f.scrollboxSize()&&"absolute"===r.position,s=(a||n)&&"border-box"===w.css(t,"boxSizing",!1,r),l=n?te(t,e,n,s,r):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-te(t,e,"border",!1,r)-.5)),l&&(o=it.exec(i))&&"px"!==(o[3]||"px")&&(t.style[e]=i,i=w.css(t,e)),Jt(0,i,l)}}}),w.cssHooks.marginLeft=Vt(f.reliableMarginLeft,function(t,e){if(e)return(parseFloat(qt(t,"marginLeft"))||t.getBoundingClientRect().left-lt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(t,e){w.cssHooks[t+e]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+nt[n]+e]=r[n]||r[n-2]||r[0];return o}},"margin"!==t&&(w.cssHooks[t+e].set=Jt)}),w.fn.extend({css:function(t,e){return q(this,function(t,e,i){var n,o,r={},a=0;if(Array.isArray(e)){for(n=zt(t),o=e.length;a<o;a++)r[e[a]]=w.css(t,e[a],!1,n);return r}return void 0!==i?w.style(t,e,i):w.css(t,e)},t,e,1<arguments.length)}}),((w.Tween=ie).prototype={constructor:ie,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(w.cssNumber[i]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,i=ie.propHooks[this.prop];return this.pos=e=this.options.duration?w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ie.propHooks._default.set(this),this}}).init.prototype=ie.prototype,(ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ie.prototype.init,w.fx.step={};var ne,oe,re,ae,se=/^(?:toggle|show|hide)$/,le=/queueHooks$/;function de(){oe&&(!1===n.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(de):t.setTimeout(de,w.fx.interval),w.fx.tick())}function ce(){return t.setTimeout(function(){ne=void 0}),ne=Date.now()}function ue(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=nt[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function he(t,e,i){for(var n,o=(pe.tweeners[e]||[]).concat(pe.tweeners["*"]),r=0,a=o.length;r<a;r++)if(n=o[r].call(i,e,t))return n}function pe(t,e,i){var n,o,r=0,a=pe.prefilters.length,s=w.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=ne||ce(),i=Math.max(0,d.startTime+d.duration-e),n=1-(i/d.duration||0),r=0,a=d.tweens.length;r<a;r++)d.tweens[r].run(n);return s.notifyWith(t,[d,n,i]),n<1&&a?i:(a||s.notifyWith(t,[d,1,0]),s.resolveWith(t,[d]),!1)},d=s.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:e,originalOptions:i,startTime:ne||ce(),duration:i.duration,tweens:[],createTween:function(e,i){var n=w.Tween(t,d.opts,e,i,d.opts.specialEasing[e]||d.opts.easing);return d.tweens.push(n),n},stop:function(e){var i=0,n=e?d.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)d.tweens[i].run(1);return e?(s.notifyWith(t,[d,1,0]),s.resolveWith(t,[d,e])):s.rejectWith(t,[d,e]),this}}),c=d.props;for(function(t,e){var i,n,o,r,a;for(i in t)if(o=e[n=$(i)],r=t[i],Array.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(a=w.cssHooks[n])&&"expand"in a)for(i in r=a.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=o);else e[n]=o}(c,d.opts.specialEasing);r<a;r++)if(n=pe.prefilters[r].call(d,t,c,d.opts))return m(n.stop)&&(w._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return w.map(c,he,d),m(d.opts.start)&&d.opts.start.call(t,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:d,queue:d.opts.queue})),d}w.Animation=w.extend(pe,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return dt(i.elem,t,it.exec(e),i),i}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(N);for(var i,n=0,o=t.length;n<o;n++)(pe.tweeners[i=t[n]]=pe.tweeners[i]||[]).unshift(e)},prefilters:[function(t,e,i){var n,o,r,a,s,l,d,c,u="width"in e||"height"in e,h=this,p={},f=t.style,m=t.nodeType&&st(t),g=X.get(t,"fxshow");for(n in i.queue||(null==(a=w._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,w.queue(t,"fx").length||a.empty.fire()})})),e)if(se.test(o=e[n])){if(delete e[n],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||w.style(t,n)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(n in u&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(d=g&&g.display)&&(d=X.get(t,"display")),"none"===(c=w.css(t,"display"))&&(d?c=d:(ut([t],!0),d=t.style.display||d,c=w.css(t,"display"),ut([t]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===w.css(t,"float")&&(l||(h.done(function(){f.display=d}),null==d&&(d="none"===(c=f.display)?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=X.access(t,"fxshow",{display:d}),r&&(g.hidden=!m),m&&ut([t],!0),h.done(function(){for(n in m||ut([t]),X.remove(t,"fxshow"),p)w.style(t,n,p[n])})),l=he(m?g[n]:0,n,h),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?pe.prefilters.unshift(t):pe.prefilters.push(t)}}),w.speed=function(t,e,i){var n=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||m(t)&&t,duration:t,easing:i&&e||e&&!m(e)&&e};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in w.fx.speeds?w.fx.speeds[n.duration]:w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(t,e,i,n){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=w.isEmptyObject(t),r=w.speed(e,i,n),a=function(){var e=pe(this,w.extend({},t),r);(o||X.get(this,"finish"))&&e.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=w.timers,a=X.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&le.test(o)&&n(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(i),e=!1,r.splice(o,1));!e&&i||w.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=X.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],r=w.timers,a=n?n.length:0;for(i.finish=!0,w.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),w.each(["toggle","show","hide"],function(t,e){var i=w.fn[e];w.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ue(e,!0),t,n,o)}}),w.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){w.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(ne=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),ne=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){oe||(oe=!0,de())},w.fx.stop=function(){oe=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,i){return e=w.fx&&w.fx.speeds[e]||e,this.queue(i=i||"fx",function(i,n){var o=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(o)}})},re=n.createElement("input"),ae=n.createElement("select").appendChild(n.createElement("option")),re.type="checkbox",f.checkOn=""!==re.value,f.optSelected=ae.selected,(re=n.createElement("input")).value="t",re.type="radio",f.radioValue="t"===re.value;var fe,me=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return q(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof t.getAttribute?w.prop(t,e,i):(1===r&&w.isXMLDoc(t)||(o=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?fe:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=w.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&A(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,o=e&&e.match(N);if(o&&1===t.nodeType)for(;i=o[n++];)t.removeAttribute(i)}}),fe={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var i=me[e]||w.find.attr;me[e]=function(t,e,n){var o,r,a=e.toLowerCase();return n||(r=me[a],me[a]=o,o=null!=i(t,e,n)?a:null,me[a]=r),o}});var ge=/^(?:input|select|textarea|button)$/i,ve=/^(?:a|area)$/i;function ye(t){return(t.match(N)||[]).join(" ")}function be(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(N)||[]}w.fn.extend({prop:function(t,e){return q(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({prop:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&w.isXMLDoc(t)||(o=w.propHooks[e=w.propFix[e]||e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||ve.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(t){return null},set:function(t){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(t){var e,i,n,o,r,a,s,l=0;if(m(t))return this.each(function(e){w(this).addClass(t.call(this,e,be(this)))});if((e=_e(t)).length)for(;i=this[l++];)if(o=be(i),n=1===i.nodeType&&" "+ye(o)+" "){for(a=0;r=e[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(s=ye(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,o,r,a,s,l=0;if(m(t))return this.each(function(e){w(this).removeClass(t.call(this,e,be(this)))});if(!arguments.length)return this.attr("class","");if((e=_e(t)).length)for(;i=this[l++];)if(o=be(i),n=1===i.nodeType&&" "+ye(o)+" "){for(a=0;r=e[a++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");o!==(s=ye(n))&&i.setAttribute("class",s)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):m(t)?this.each(function(i){w(this).toggleClass(t.call(this,i,be(this),e),e)}):this.each(function(){var e,o,r,a;if(n)for(o=0,r=w(this),a=_e(t);e=a[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||((e=be(this))&&X.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":X.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+ye(be(i))+" ").indexOf(e))return!0;return!1}});var we=/\r/g;w.fn.extend({val:function(t){var e,i,n,o=this[0];return arguments.length?(n=m(t),this.each(function(i){var o;1===this.nodeType&&(null==(o=n?t.call(this,i,w(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=w.map(o,function(t){return null==t?"":t+""})),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=w.valHooks[o.type]||w.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(we,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ye(w.text(t))}},select:{get:function(t){var e,i,n,o=t.options,r=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?r+1:o.length;for(n=r<0?l:a?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!A(i.parentNode,"optgroup"))){if(e=w(i).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var i,n,o=t.options,r=w.makeArray(e),a=o.length;a--;)((n=o[a]).selected=-1<w.inArray(w.valHooks.option.get(n),r))&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},f.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),f.focusin="onfocusin"in t;var xe=/^(?:focusinfocus|focusoutblur)$/,Te=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,i,o,r){var a,s,l,d,c,h,p,f,v=[o||n],y=u.call(e,"type")?e.type:e,b=u.call(e,"namespace")?e.namespace.split("."):[];if(s=f=l=o=o||n,3!==o.nodeType&&8!==o.nodeType&&!xe.test(y+w.event.triggered)&&(-1<y.indexOf(".")&&(y=(b=y.split(".")).shift(),b.sort()),c=y.indexOf(":")<0&&"on"+y,(e=e[w.expando]?e:new w.Event(y,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=o),i=null==i?[e]:w.makeArray(i,[e]),p=w.event.special[y]||{},r||!p.trigger||!1!==p.trigger.apply(o,i))){if(!r&&!p.noBubble&&!g(o)){for(xe.test((d=p.delegateType||y)+y)||(s=s.parentNode);s;s=s.parentNode)v.push(s),l=s;l===(o.ownerDocument||n)&&v.push(l.defaultView||l.parentWindow||t)}for(a=0;(s=v[a++])&&!e.isPropagationStopped();)f=s,e.type=1<a?d:p.bindType||y,(h=(X.get(s,"events")||{})[e.type]&&X.get(s,"handle"))&&h.apply(s,i),(h=c&&s[c])&&h.apply&&K(s)&&(e.result=h.apply(s,i),!1===e.result&&e.preventDefault());return e.type=y,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(v.pop(),i)||!K(o)||c&&m(o[y])&&!g(o)&&((l=o[c])&&(o[c]=null),w.event.triggered=y,e.isPropagationStopped()&&f.addEventListener(y,Te),o[y](),e.isPropagationStopped()&&f.removeEventListener(y,Te),w.event.triggered=void 0,l&&(o[c]=l)),e.result}},simulate:function(t,e,i){var n=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(n,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),f.focusin||w.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=X.access(n,e);o||n.addEventListener(t,i,!0),X.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=X.access(n,e)-1;o?X.access(n,e,o):(n.removeEventListener(t,i,!0),X.remove(n,e))}}});var Ce=t.location,ke=Date.now(),Ee=/\?/;w.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),i};var Se=/\[\]$/,Ae=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Ie=/^(?:input|select|textarea|keygen)/i;function De(t,e,i,n){var o;if(Array.isArray(e))w.each(e,function(e,o){i||Se.test(t)?n(t,o):De(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,i,n)});else if(i||"object"!==b(e))n(t,e);else for(o in e)De(t+"["+o+"]",e[o],i,n)}w.param=function(t,e){var i,n=[],o=function(t,e){var i=m(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){o(this.name,this.value)});else for(i in t)De(i,t[i],e,o);return n.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Ie.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}}):{name:e.name,value:i.replace(Ae,"\r\n")}}).get()}});var Pe=/%20/g,Le=/#.*$/,Re=/([?&])_=[^&]*/,Be=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:GET|HEAD)$/,Me=/^\/\//,Fe={},je={},We="*/".concat("*"),ze=n.createElement("a");function He(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,r=e.toLowerCase().match(N)||[];if(m(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function qe(t,e,i,n){var o={},r=t===je;function a(s){var l;return o[s]=!0,w.each(t[s]||[],function(t,s){var d=s(e,i,n);return"string"!=typeof d||r||o[d]?r?!(l=d):void 0:(e.dataTypes.unshift(d),a(d),!1)}),l}return a(e.dataTypes[0])||!o["*"]&&a("*")}function Ve(t,e){var i,n,o=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&w.extend(!0,t,n),t}ze.href=Ce.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ve(Ve(t,w.ajaxSettings),e):Ve(w.ajaxSettings,t)},ajaxPrefilter:He(Fe),ajaxTransport:He(je),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0);var o,r,a,s,l,d,c,u,h,p,f=w.ajaxSetup({},i=i||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?w(m):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),b=f.statusCode||{},_={},x={},T="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Be.exec(a);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(t,e){return null==c&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)C.always(t[C.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||T;return o&&o.abort(e),k(0,e),this}};if(v.promise(C),f.url=((e||f.url||Ce.href)+"").replace(Me,Ce.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(N)||[""],null==f.crossDomain){d=n.createElement("a");try{d.href=f.url,d.href=d.href,f.crossDomain=ze.protocol+"//"+ze.host!=d.protocol+"//"+d.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),qe(Fe,f,i,C),c)return C;for(h in(u=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ne.test(f.type),r=f.url.replace(Le,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Pe,"+")):(p=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Ee.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Re,"$1"),p=(Ee.test(r)?"&":"?")+"_="+ke+++p),f.url=r+p),f.ifModified&&(w.lastModified[r]&&C.setRequestHeader("If-Modified-Since",w.lastModified[r]),w.etag[r]&&C.setRequestHeader("If-None-Match",w.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+We+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(m,C,f)||c))return C.abort();if(T="abort",y.add(f.complete),C.done(f.success),C.fail(f.error),o=qe(je,f,i,C)){if(C.readyState=1,u&&g.trigger("ajaxSend",[C,f]),c)return C;f.async&&0<f.timeout&&(l=t.setTimeout(function(){C.abort("timeout")},f.timeout));try{c=!1,o.send(_,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,i,n,s){var d,h,p,_,x,T=i;c||(c=!0,l&&t.clearTimeout(l),o=void 0,a=s||"",C.readyState=0<e?4:0,d=200<=e&&e<300||304===e,n&&(_=function(t,e,i){for(var n,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),i[r]}(f,C,n)),_=function(t,e,i,n){var o,r,a,s,l,d={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)d[a.toLowerCase()]=t.converters[a];for(r=c.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=d[l+" "+r]||d["* "+r]))for(o in d)if((s=o.split(" "))[1]===r&&(a=d[l+" "+s[0]]||d["* "+s[0]])){!0===a?a=d[o]:!0!==d[o]&&(r=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(f,_,C,d),d?(f.ifModified&&((x=C.getResponseHeader("Last-Modified"))&&(w.lastModified[r]=x),(x=C.getResponseHeader("etag"))&&(w.etag[r]=x)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=_.state,h=_.data,d=!(p=_.error))):(p=T,!e&&T||(T="error",e<0&&(e=0))),C.status=e,C.statusText=(i||T)+"",d?v.resolveWith(m,[h,T,C]):v.rejectWith(m,[C,T,p]),C.statusCode(b),b=void 0,u&&g.trigger(d?"ajaxSuccess":"ajaxError",[C,f,d?h:p]),y.fireWith(m,[C,T]),u&&(g.trigger("ajaxComplete",[C,f]),--w.active||w.event.trigger("ajaxStop")))}return C},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,e){w[e]=function(t,i,n,o){return m(i)&&(o=o||n,n=i,i=void 0),w.ajax(w.extend({url:t,type:e,dataType:o,data:i,success:n},w.isPlainObject(t)&&t))}}),w._evalUrl=function(t,e){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return m(t)?this.each(function(e){w(this).wrapInner(t.call(this,e))}):this.each(function(){var e=w(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=m(t);return this.each(function(i){w(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Ue={0:200,1223:204},Ge=w.ajaxSettings.xhr();f.cors=!!Ge&&"withCredentials"in Ge,f.ajax=Ge=!!Ge,w.ajaxTransport(function(e){var i,n;if(f.cors||Ge&&!e.crossDomain)return{send:function(o,r){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);i=function(t){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Ue[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=s.ontimeout=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{s.send(e.hasContent&&e.data||null)}catch(o){if(i)throw o}},abort:function(){i&&i()}}}),w.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(o,r){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),n.head.appendChild(e[0])},abort:function(){i&&i()}}});var $e,Ke=[],Ye=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||w.expando+"_"+ke++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(e,i,n){var o,r,a,s=!1!==e.jsonp&&(Ye.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ye,"$1"+o):!1!==e.jsonp&&(e.url+=(Ee.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||w.error(o+" was not called"),a[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){a=arguments},n.always(function(){void 0===r?w(t).removeProp(o):t[o]=r,e[o]&&(e.jsonpCallback=i.jsonpCallback,Ke.push(o)),a&&m(r)&&r(a[0]),a=r=void 0}),"script"}),f.createHTMLDocument=(($e=n.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$e.childNodes.length),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(f.createHTMLDocument?((o=(e=n.implementation.createHTMLDocument("")).createElement("base")).href=n.location.href,e.head.appendChild(o)):e=n),a=!i&&[],(r=O.exec(t))?[e.createElement(r[1])]:(r=wt([t],e,a),a&&a.length&&w(a).remove(),w.merge([],r.childNodes)));var o,r,a},w.fn.load=function(t,e,i){var n,o,r,a=this,s=t.indexOf(" ");return-1<s&&(n=ye(t.slice(s)),t=t.slice(0,s)),m(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<a.length&&w.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,a.html(n?w("<div>").append(w.parseHTML(t)).find(n):t)}).always(i&&function(t,e){a.each(function(){i.apply(this,r||[t.responseText,e,t])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w.expr.pseudos.animated=function(t){return w.grep(w.timers,function(e){return t===e.elem}).length},w.offset={setOffset:function(t,e,i){var n,o,r,a,s,l,d=w.css(t,"position"),c=w(t),u={};"static"===d&&(t.style.position="relative"),s=c.offset(),r=w.css(t,"top"),l=w.css(t,"left"),("absolute"===d||"fixed"===d)&&-1<(r+l).indexOf("auto")?(a=(n=c.position()).top,o=n.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),m(e)&&(e=e.call(t,i,w.extend({},s))),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+o),"using"in e?e.using.call(t,u):c.css(u)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){w.offset.setOffset(this,t,e)});var e,i,n=this[0];return n?n.getClientRects().length?{top:(e=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:e.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],o={top:0,left:0};if("fixed"===w.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((o=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),o.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-w.css(n,"marginTop",!0),left:e.left-o.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||ot})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;w.fn[t]=function(n){return q(this,function(t,n,o){var r;if(g(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):t[n]=o},t,n,arguments.length)}}),w.each(["top","left"],function(t,e){w.cssHooks[e]=Vt(f.pixelPosition,function(t,i){if(i)return i=qt(t,e),Wt.test(i)?w(t).position()[e]+"px":i})}),w.each({Height:"height",Width:"width"},function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){w.fn[n]=function(o,r){var a=arguments.length&&(i||"boolean"!=typeof o),s=i||(!0===o||!0===r?"margin":"border");return q(this,function(e,i,o){var r;return g(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?w.css(e,i,s):w.style(e,i,o,s)},e,a?o:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){w.fn[e]=function(t,i){return 0<arguments.length?this.on(e,null,t,i):this.trigger(e)}}),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),w.proxy=function(t,e){var i,n,o;if("string"==typeof e&&(i=t[e],e=t,t=i),m(t))return n=r.call(arguments,2),(o=function(){return t.apply(e||this,n.concat(r.call(arguments)))}).guid=t.guid=t.guid||w.guid++,o},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=A,w.isFunction=m,w.isWindow=g,w.camelCase=$,w.type=b,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Xe=t.jQuery,Qe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Qe),e&&t.jQuery===w&&(t.jQuery=Xe),w},e||(t.jQuery=t.$=w),w}),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=t.getBoundingClientRect(),i={};for(var n in e)i[n]=e[n];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var a=o(r);i.top+=a.top,i.bottom+=a.top,i.left+=a.left,i.right+=a.left}}return i}function r(t){var e=(getComputedStyle(t)||{}).position,i=[];if("fixed"===e)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var o=void 0;try{o=getComputedStyle(n)}catch(t){}if("undefined"==typeof o||null===o)return i.push(n),i;/(auto|scroll)/.test(o.overflow+o.overflowY+o.overflowX)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(o.position)>=0)&&i.push(n)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function a(){C&&document.body.removeChild(C),C=null}function s(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var i=e.documentElement,n=o(t),r=S();return n.top-=r.top,n.left-=r.left,"undefined"==typeof n.width&&(n.width=document.body.scrollWidth-n.left-n.right),"undefined"==typeof n.height&&(n.height=document.body.scrollHeight-n.top-n.bottom),n.top=n.top-i.clientTop,n.left=n.left-i.clientLeft,n.right=e.body.clientWidth-n.width-n.left,n.bottom=e.body.clientHeight-n.height-n.top,n}function l(t){return t.offsetParent||document.documentElement}function d(){if(A)return A;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");c(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;i===n&&(n=e.clientWidth),document.body.removeChild(e);var o=i-n;return A={width:o,height:o}}function c(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var i in e)({}).hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t}function u(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var i=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),n=f(t).replace(i," ");m(t,n)}}function h(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{u(t,e);var i=f(t)+" "+e;m(t,i)}}function p(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var i=f(t);return new RegExp("(^| )"+e+"( |$)","gi").test(i)}function f(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function m(t,e){t.setAttribute("class",e)}function g(t,e,i){i.forEach(function(i){-1===e.indexOf(i)&&p(t,i)&&u(t,i)}),e.forEach(function(e){p(t,e)||h(t,e)})}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+i>=e&&e>=t-i}function y(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function b(){for(var t={top:0,left:0},e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach(function(e){var i=e.top,n=e.left;"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof n&&(n=parseFloat(n,10)),t.top+=i,t.left+=n}),t}function _(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function w(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&function(){var t=e,i=s(e),n=i,o=getComputedStyle(e);if(e=[n.left,n.top,i.width+n.left,i.height+n.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}G.forEach(function(t,i){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[i]+=parseFloat(o["border"+t+"Width"]):e[i]-=parseFloat(o["border"+t+"Width"])})}(),e}var x=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),T=void 0;"undefined"==typeof T&&(T={modules:[]});var C=null,k=function(){var t=0;return function(){return++t}}(),E={},S=function(){var t=C;t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",k()),c(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),C=t);var e=t.getAttribute("data-tether-id");return"undefined"==typeof E[e]&&(E[e]=o(t),I(function(){delete E[e]})),E[e]},A=null,O=[],I=function(t){O.push(t)},D=function(){for(var t=void 0;t=O.pop();)t()},P=function(){function t(){n(this,t)}return x(t,[{key:"on",value:function(t,e,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:n})}},{key:"once",value:function(t,e,i){this.on(t,e,i,!0)}},{key:"off",value:function(t,e){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var i=0;i<this.bindings[t].length;)this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):++i}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],a=r.once,s=r.ctx;"undefined"==typeof s&&(s=this),r.handler.apply(s,n),a?this.bindings[t].splice(e,1):++e}}}}]),t}();T.Utils={getActualBoundingClientRect:o,getScrollParents:r,getBounds:s,getOffsetParent:l,extend:c,addClass:h,removeClass:u,hasClass:p,updateClasses:g,defer:I,flush:D,uniqueId:k,Evented:P,getScrollBarSize:d,removeUtilElements:a};var L=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},R=(x=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),function(t,e,i){for(var n=!0;n;){var o=t,r=e,a=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var d=Object.getPrototypeOf(o);if(null===d)return;t=d,e=r,i=a,n=!0,s=d=void 0}});if("undefined"==typeof T)throw new Error("You must include the utils.js file before tether.js");var r=($=T.Utils).getScrollParents,l=(s=$.getBounds,$.getOffsetParent),h=(c=$.extend,$.addClass),u=$.removeClass,d=(g=$.updateClasses,I=$.defer,D=$.flush,$.getScrollBarSize),a=$.removeUtilElements,B=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<e.length;++i){var n=e[i];if(void 0!==t.style[n])return n}}(),N=[],M=function(){N.forEach(function(t){t.position(!1)}),D()};!function(){var t=null,e=null,i=null,n=function n(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(i=setTimeout(n,250))):void("undefined"!=typeof t&&y()-t<10||(null!=i&&(clearTimeout(i),i=null),t=y(),M(),e=y()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,n)})}();var F={center:"center",left:"right",right:"left"},j={middle:"middle",top:"bottom",bottom:"top"},W={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},z=function(t){var e=t.left,i=t.top;return"undefined"!=typeof W[t.left]&&(e=W[t.left]),"undefined"!=typeof W[t.top]&&(i=W[t.top]),{left:e,top:i}},H=function(t){var e=t.split(" "),i=L(e,2);return{top:i[0],left:i[1]}},q=H,V=function(t){function e(t){var i=this;n(this,e),R(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),N.push(this),this.history=[],this.setOptions(t,!1),T.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(i)}),this.position()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,P),x(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=c({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var n=this.options,o=n.target,a=n.targetModifier;if(this.element=n.element,this.target=o,this.targetModifier=a,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),h(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&h(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=q(this.options.targetAttachment),this.attachment=q(this.options.attachment),this.offset=H(this.options.offset),this.targetOffset=H(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),this.scrollParents="scroll-handle"===this.targetModifier?[this.target]:r(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return s(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((r={height:(t=s(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=s(e);var i=getComputedStyle(e),n=0;(e.scrollWidth>e.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body)&&(n=15);var o=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-n,r={width:15,height:.975*o*(o/e.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},a=0;return o<408&&this.target===document.body&&(a=-11e-5*Math.pow(o,2)-.00727*o+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24)),r.top=this.target.scrollTop/(e.scrollHeight-o)*(o-r.height-a)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&h(this.target,this.getClass("enabled")),h(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;u(this.target,this.getClass("enabled")),u(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),N.forEach(function(e,i){e===t&&N.splice(i,1)}),0===N.length&&a()}},{key:"updateAttachClasses",value:function(t,e){var i=this;t=t||this.attachment,e=e||this.targetAttachment,"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var o=[];["left","top","bottom","right","middle","center"].forEach(function(t){o.push(i.getClass("element-attached")+"-"+t),o.push(i.getClass("target-attached")+"-"+t)}),I(function(){"undefined"!=typeof i._addAttachClasses&&(g(i.element,i._addAttachClasses,o),!1!==i.options.addTargetClasses&&g(i.target,i._addAttachClasses,o),delete i._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var i=function(t,e){var i=t.left,n=t.top;return"auto"===i&&(i=F[e.left]),"auto"===n&&(n=j[e.top]),{left:i,top:n}}(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);var n=this.cache("element-bounds",function(){return s(t.element)}),o=n.width,r=n.height;if(0===o&&0===r&&"undefined"!=typeof this.lastSize){var a=this.lastSize;o=a.width,r=a.height}else this.lastSize={width:o,height:r};var c=this.cache("target-bounds",function(){return t.getTargetBounds()}),u=c,h=_(z(this.attachment),{width:o,height:r}),p=_(z(i),u),f=_(this.offset,{width:o,height:r}),m=_(this.targetOffset,u);h=b(h,f),p=b(p,m);for(var g=c.left+p.left-h.left,v=c.top+p.top-h.top,y=0;y<T.modules.length;++y){var w=T.modules[y].position.call(this,{left:g,top:v,targetAttachment:i,targetPos:c,elementPos:n,offset:h,targetOffset:p,manualOffset:f,manualTargetOffset:m,scrollbarSize:E,attachment:this.attachment});if(!1===w)return!1;"undefined"!=typeof w&&"object"==typeof w&&(v=w.top,g=w.left)}var x={page:{top:v,left:g},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-r+innerHeight,left:g-pageXOffset,right:pageXOffset-g-o+innerWidth}},C=this.target.ownerDocument,k=C.defaultView,E=void 0;return k.innerHeight>C.documentElement.clientHeight&&(E=this.cache("scrollbar-size",d),x.viewport.bottom-=E.height),k.innerWidth>C.documentElement.clientWidth&&(E=this.cache("scrollbar-size",d),x.viewport.right-=E.width),-1!==["","static"].indexOf(C.body.style.position)&&-1!==["","static"].indexOf(C.body.parentElement.style.position)||(x.page.bottom=C.body.scrollHeight-v-r,x.page.right=C.body.scrollWidth-g-o),"undefined"!=typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&"undefined"==typeof this.targetModifier&&function(){var e=t.cache("target-offsetparent",function(){return l(t.target)}),i=t.cache("target-offsetparent-bounds",function(){return s(e)}),n=getComputedStyle(e),o=i,r={};["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(n["border"+t+"Width"])}),i.right=C.body.scrollWidth-i.left-o.width+r.right,i.bottom=C.body.scrollHeight-i.top-o.height+r.bottom,x.page.top>=i.top+r.top&&x.page.bottom>=i.bottom&&x.page.left>=i.left+r.left&&x.page.right>=i.right&&(x.offset={top:x.page.top-i.top+e.scrollTop-r.top,left:x.page.left-i.left+e.scrollLeft-r.left})}(),this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),e&&D(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var i={};for(var n in t)for(var o in i[n]={},t[n]){for(var r=!1,a=0;a<this.history.length;++a){var s=this.history[a];if("undefined"!=typeof s[n]&&!v(s[n][o],t[n][o])){r=!0;break}}r||(i[n][o]=!0)}var d={top:"",left:"",right:"",bottom:""},u=function(t,i){if(!1!==("undefined"!=typeof e.options.optimizations?e.options.optimizations.gpu:null)){var n=void 0,o=void 0;t.top?(d.top=0,n=i.top):(d.bottom=0,n=-i.bottom),t.left?(d.left=0,o=i.left):(d.right=0,o=-i.right),window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches||(o=Math.round(o),n=Math.round(n))),d[B]="translateX("+o+"px) translateY("+n+"px)","msTransform"!==B&&(d[B]+=" translateZ(0)")}else t.top?d.top=i.top+"px":d.bottom=i.bottom+"px",t.left?d.left=i.left+"px":d.right=i.right+"px"},h=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(d.position="absolute",u(i.page,t.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(d.position="fixed",u(i.viewport,t.viewport)):"undefined"!=typeof i.offset&&i.offset.top&&i.offset.left?function(){d.position="absolute";var n=e.cache("target-offsetparent",function(){return l(e.target)});l(e.element)!==n&&I(function(){e.element.parentNode.removeChild(e.element),n.appendChild(e.element)}),u(i.offset,t.offset),h=!0}():(d.position="absolute",u({top:!0,left:!0},t.page)),!h)if(this.options.bodyElement)this.options.bodyElement.appendChild(this.element);else{for(var p=!0,f=this.element.parentNode;f&&1===f.nodeType&&"BODY"!==f.tagName;){if("static"!==getComputedStyle(f).position){p=!1;break}f=f.parentNode}p||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var m={},g=!1;for(var o in d){var y=d[o];this.element.style[o]!==y&&(g=!0,m[o]=y)}g&&I(function(){c(e.element.style,m),e.trigger("repositioned")})}}}]),e}();V.modules=[],T.position=M;var U=c(V,T),c=(L=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=($=T.Utils).getBounds,$.extend),G=(g=$.updateClasses,I=$.defer,["left","top","right","bottom"]);T.modules.push({position:function(t){var e=this,i=t.top,n=t.left,o=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",function(){return s(e.element)}),a=r.height,l=r.width;if(0===l&&0===a&&"undefined"!=typeof this.lastSize){var d=this.lastSize;l=d.width,a=d.height}var u=this.cache("target-bounds",function(){return e.getTargetBounds()}),h=u.height,p=u.width,f=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,i=t.pinnedClass;e&&f.push(e),i&&f.push(i)}),f.forEach(function(t){["left","top","right","bottom"].forEach(function(e){f.push(t+"-"+e)})});var m=[],v=c({},o),y=c({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,s=t.attachment,d=t.pin;"undefined"==typeof s&&(s="");var c=void 0,u=void 0;if(s.indexOf(" ")>=0){var f=s.split(" "),g=L(f,2);u=g[0],c=g[1]}else c=u=s;var b=w(e,r);"target"!==u&&"both"!==u||(i<b[1]&&"top"===v.top&&(i+=h,v.top="bottom"),i+a>b[3]&&"bottom"===v.top&&(i-=h,v.top="top")),"together"===u&&("top"===v.top&&("bottom"===y.top&&i<b[1]?(i+=h,v.top="bottom",i+=a,y.top="top"):"top"===y.top&&i+a>b[3]&&i-(a-h)>=b[1]&&(i-=a-h,v.top="bottom",y.top="bottom")),"bottom"===v.top&&("top"===y.top&&i+a>b[3]?(i-=h,v.top="top",i-=a,y.top="bottom"):"bottom"===y.top&&i<b[1]&&i+(2*a-h)<=b[3]&&(i+=a-h,v.top="top",y.top="top")),"middle"===v.top&&(i+a>b[3]&&"top"===y.top?(i-=a,y.top="bottom"):i<b[1]&&"bottom"===y.top&&(i+=a,y.top="top"))),"target"!==c&&"both"!==c||(n<b[0]&&"left"===v.left&&(n+=p,v.left="right"),n+l>b[2]&&"right"===v.left&&(n-=p,v.left="left")),"together"===c&&(n<b[0]&&"left"===v.left?"right"===y.left?(n+=p,v.left="right",n+=l,y.left="left"):"left"===y.left&&(n+=p,v.left="right",n-=l,y.left="right"):n+l>b[2]&&"right"===v.left?"left"===y.left?(n-=p,v.left="left",n-=l,y.left="right"):"right"===y.left&&(n-=p,v.left="left",n+=l,y.left="left"):"center"===v.left&&(n+l>b[2]&&"left"===y.left?(n-=l,y.left="right"):n<b[0]&&"right"===y.left&&(n+=l,y.left="left"))),"element"!==u&&"both"!==u||(i<b[1]&&"bottom"===y.top&&(i+=a,y.top="top"),i+a>b[3]&&"top"===y.top&&(i-=a,y.top="bottom")),"element"!==c&&"both"!==c||(n<b[0]&&("right"===y.left?(n+=l,y.left="left"):"center"===y.left&&(n+=l/2,y.left="left")),n+l>b[2]&&("left"===y.left?(n-=l,y.left="right"):"center"===y.left&&(n-=l/2,y.left="right"))),"string"==typeof d?d=d.split(",").map(function(t){return t.trim()}):!0===d&&(d=["top","left","right","bottom"]),d=d||[];var _=[],x=[];i<b[1]&&(d.indexOf("top")>=0?(i=b[1],_.push("top")):x.push("top")),i+a>b[3]&&(d.indexOf("bottom")>=0?(i=b[3]-a,_.push("bottom")):x.push("bottom")),n<b[0]&&(d.indexOf("left")>=0?(n=b[0],_.push("left")):x.push("left")),n+l>b[2]&&(d.indexOf("right")>=0?(n=b[2]-l,_.push("right")):x.push("right")),_.length&&function(){var t;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),m.push(t),_.forEach(function(e){m.push(t+"-"+e)})}(),x.length&&function(){var t;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),m.push(t),x.forEach(function(e){m.push(t+"-"+e)})}(),(_.indexOf("left")>=0||_.indexOf("right")>=0)&&(y.left=v.left=!1),(_.indexOf("top")>=0||_.indexOf("bottom")>=0)&&(y.top=v.top=!1),v.top===o.top&&v.left===o.left&&y.top===e.attachment.top&&y.left===e.attachment.left||(e.updateAttachClasses(y,v),e.trigger("update",{attachment:y,targetAttachment:v}))}),I(function(){!1!==e.options.addTargetClasses&&g(e.target,m,f),g(e.element,m,f)}),{top:i,left:n}}});var $,s=($=T.Utils).getBounds,g=$.updateClasses;return I=$.defer,T.modules.push({position:function(t){var e=this,i=t.top,n=t.left,o=this.cache("element-bounds",function(){return s(e.element)}),r=o.height,a=o.width,l=this.getTargetBounds(),d=i+r,c=n+a,u=[];i<=l.bottom&&d>=l.top&&["left","right"].forEach(function(t){var e=l[t];e!==n&&e!==c||u.push(t)}),n<=l.right&&c>=l.left&&["top","bottom"].forEach(function(t){var e=l[t];e!==i&&e!==d||u.push(t)});var h=[],p=[];return h.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(t){h.push(e.getClass("abutted")+"-"+t)}),u.length&&p.push(this.getClass("abutted")),u.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),I(function(){!1!==e.options.addTargetClasses&&g(e.target,p,h),g(e.element,p,h)}),!0}}),L=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},T.modules.push({position:function(t){var e=t.top,i=t.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:e,left:i}));var o=void 0,r=void 0;if("string"==typeof n){(n=n.split(" "))[1]=n[1]||n[0];var a=L(n,2);o=a[0],r=a[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=n.top,r=n.left;return{top:e+=o,left:i+=r}}}}),U}),function(t,e,i,n){"use strict";var o,r=["","webkit","Moz","MS","ms","o"],a=e.createElement("div"),s="function",l=Math.round,d=Math.abs,c=Date.now;function u(t,e,i){return setTimeout(y(t,i),e)}function h(t,e,i){return!!Array.isArray(t)&&(p(t,i[e],i),!0)}function p(t,e,i){var o;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(o=0;o<t.length;)e.call(i,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function f(e,i,n){var o="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,o,n),e.apply(this,arguments)}}o="function"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==n&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e}:Object.assign;var m=f(function(t,e,i){for(var o=Object.keys(e),r=0;r<o.length;)(!i||i&&t[o[r]]===n)&&(t[o[r]]=e[o[r]]),r++;return t},"extend","Use `assign`."),g=f(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function v(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&o(n,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return typeof t==s?t.apply(e&&e[0]||n,e):t}function _(t,e){return t===n?e:t}function w(t,e,i){p(k(e),function(e){t.addEventListener(e,i,!1)})}function x(t,e,i){p(k(e),function(e){t.removeEventListener(e,i,!1)})}function T(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function k(t){return t.trim().split(/\s+/g)}function E(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function S(t){return Array.prototype.slice.call(t,0)}function A(t,e,i){for(var n=[],o=[],r=0;r<t.length;){var a=e?t[r][e]:t[r];E(o,a)<0&&n.push(t[r]),o[r]=a,r++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function O(t,e){for(var i,o,a=e[0].toUpperCase()+e.slice(1),s=0;s<r.length;){if((o=(i=r[s])?i+a:e)in t)return o;s++}return n}var I=1;function D(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}var P="ontouchstart"in t,L=O(t,"PointerEvent")!==n,R=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=25,N=1,M=4,F=8,j=1,W=2,z=4,H=8,q=16,V=W|z,U=H|q,G=V|U,$=["x","y"],K=["clientX","clientY"];function Y(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&i.handler(e)},this.init()}function X(t,e,i){var o=i.pointers.length,r=i.changedPointers.length,a=e&N&&o-r==0,s=e&(M|F)&&o-r==0;i.isFirst=!!a,i.isFinal=!!s,a&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,o=e.pointers,r=o.length;i.firstInput||(i.firstInput=Q(e)),r>1&&!i.firstMultiple?i.firstMultiple=Q(e):1===r&&(i.firstMultiple=!1);var a=i.firstInput,s=i.firstMultiple,l=s?s.center:a.center,u=e.center=Z(o);e.timeStamp=c(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=it(l,u),e.distance=et(l,u),function(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==N&&r.eventType!==M||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}(i,e),e.offsetDirection=tt(e.deltaX,e.deltaY);var h,p,f=J(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=f.x,e.overallVelocityY=f.y,e.overallVelocity=d(f.x)>d(f.y)?f.x:f.y,e.scale=s?(h=s.pointers,et((p=o)[0],p[1],K)/et(h[0],h[1],K)):1,e.rotation=s?function(t,e){return it(o[1],o[0],K)+it(t[1],t[0],K)}(s.pointers):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,o,r,a,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=F&&(l>B||s.velocity===n)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=J(l,c,u);o=h.x,r=h.y,i=d(h.x)>d(h.y)?h.x:h.y,a=tt(c,u),t.lastInterval=e}else i=s.velocity,o=s.velocityX,r=s.velocityY,a=s.direction;e.velocity=i,e.velocityX=o,e.velocityY=r,e.direction=a}(i,e);var m=t.element;T(e.srcEvent.target,m)&&(m=e.srcEvent.target),e.target=m}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:l(t.pointers[i].clientX),clientY:l(t.pointers[i].clientY)},i++;return{timeStamp:c(),pointers:e,center:Z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Z(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:l(i/e),y:l(n/e)}}function J(t,e,i){return{x:e/t||0,y:i/t||0}}function tt(t,e){return t===e?j:d(t)>=d(e)?t<0?W:z:e<0?H:q}function et(t,e,i){i||(i=$);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function it(t,e,i){return i||(i=$),180*Math.atan2(e[i[1]]-t[i[1]],e[i[0]]-t[i[0]])/Math.PI}Y.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(D(this.element),this.evWin,this.domHandler)}};var nt={mousedown:N,mousemove:2,mouseup:M},ot="mousedown",rt="mousemove mouseup";function at(){this.evEl=ot,this.evWin=rt,this.pressed=!1,Y.apply(this,arguments)}v(at,Y,{handler:function(t){var e=nt[t.type];e&N&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=M),this.pressed&&(e&M&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var st={pointerdown:N,pointermove:2,pointerup:M,pointercancel:F,pointerout:F},lt={2:"touch",3:"pen",4:"mouse",5:"kinect"},dt="pointerdown",ct="pointermove pointerup pointercancel";function ut(){this.evEl=dt,this.evWin=ct,Y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(dt="MSPointerDown",ct="MSPointerMove MSPointerUp MSPointerCancel"),v(ut,Y,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=st[n],r=lt[t.pointerType]||t.pointerType,a="touch"==r,s=E(e,t.pointerId,"pointerId");o&N&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):o&(M|F)&&(i=!0),s<0||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(s,1))}});var ht={touchstart:N,touchmove:2,touchend:M,touchcancel:F},pt="touchstart",ft="touchstart touchmove touchend touchcancel";function mt(){this.evTarget=pt,this.evWin=ft,this.started=!1,Y.apply(this,arguments)}v(mt,Y,{handler:function(t){var e=ht[t.type];if(e===N&&(this.started=!0),this.started){var i=(function(t,e){var i=S(t.touches),n=S(t.changedTouches);return e&(M|F)&&(i=A(i.concat(n),"identifier",!0)),[i,n]}).call(this,t,e);e&(M|F)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var gt={touchstart:N,touchmove:2,touchend:M,touchcancel:F},vt="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=vt,this.targetIds={},Y.apply(this,arguments)}v(yt,Y,{handler:function(t){var e=gt[t.type],i=(function(t,e){var i=S(t.touches),n=this.targetIds;if(e&(2|N)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,a=S(t.changedTouches),s=[],l=this.target;if(r=i.filter(function(t){return T(t.target,l)}),e===N)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<a.length;)n[a[o].identifier]&&s.push(a[o]),e&(M|F)&&delete n[a[o].identifier],o++;return s.length?[A(r.concat(s),"identifier",!0),s]:void 0}).call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var bt=2500;function _t(){Y.apply(this,arguments);var t=y(this.handler,this);this.touch=new yt(this.manager,t),this.mouse=new at(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function wt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},bt)}}v(_t,Y,{handler:function(t,e,i){var n="mouse"==i.pointerType;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if("touch"==i.pointerType)(function(t,e){t&N?(this.primaryTouch=e.changedPointers[0].identifier,wt.call(this,e)):t&(M|F)&&wt.call(this,e)}).call(this,e,i);else if(n&&(function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),a=Math.abs(i-o.y);if(r<=25&&a<=25)return!0}return!1}).call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var xt=O(a.style,"touchAction"),Tt=xt!==n,Ct=function(){if(!Tt)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!i||t.CSS.supports("touch-action",n)}),e}();function kt(t,e){this.manager=t,this.set(e)}kt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Tt&&this.manager.element.style&&Ct[t]&&(this.manager.element.style[xt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(C(t,"none"))return"none";var e=C(t,"pan-x"),i=C(t,"pan-y");return e&&i?"none":e||i?e?"pan-x":"pan-y":C(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,o=C(n,"none")&&!Ct.none,r=C(n,"pan-y")&&!Ct["pan-y"],a=C(n,"pan-x")&&!Ct["pan-x"];if(o&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!a||!r)return o||r&&i&V||a&&i&U?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Et=1,St=2,At=4,Ot=8,It=Ot,Dt=16;function Pt(t){this.options=o({},this.defaults,t||{}),this.id=I++,this.manager=null,this.options.enable=_(this.options.enable,!0),this.state=Et,this.simultaneous={},this.requireFail=[]}function Lt(t){return t&Dt?"cancel":t&Ot?"end":t&At?"move":t&St?"start":""}function Rt(t){return t==q?"down":t==H?"up":t==W?"left":t==z?"right":""}function Bt(t,e){var i=e.manager;return i?i.get(t):t}function Nt(){Pt.apply(this,arguments)}function Mt(){Nt.apply(this,arguments),this.pX=null,this.pY=null}function Ft(){Nt.apply(this,arguments)}function jt(){Pt.apply(this,arguments),this._timer=null,this._input=null}function Wt(){Nt.apply(this,arguments)}function zt(){Nt.apply(this,arguments)}function Ht(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function qt(t,e){return(e=e||{}).recognizers=_(e.recognizers,qt.defaults.preset),new Vt(t,e)}function Vt(t,e){var i;this.options=o({},qt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(L?ut:R?yt:P?_t:at))(i,X),this.touchAction=new kt(this,this.options.touchAction),Ut(this,!0),p(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Ut(t,e){var i,n=t.element;n.style&&(p(t.options.cssProps,function(o,r){i=O(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Pt.prototype={defaults:{},set:function(t){return o(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(h(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Bt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return h(t,"dropRecognizeWith",this)?this:(t=Bt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(h(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=Bt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(h(t,"dropRequireFailure",this))return this;t=Bt(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Ot&&n(e.options.event+Lt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Ot&&n(e.options.event+Lt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Et)))return!1;t++}return!0},recognize:function(t){var e=o({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(It|Dt|32)&&(this.state=Et),this.state=this.process(e),this.state&(St|At|Ot|Dt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},v(Nt,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(St|At),o=this.attrTest(t);return n&&(i&F||!o)?e|Dt:n||o?i&M?e|Ot:e&St?e|At:St:32}}),v(Mt,Nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var t=this.options.direction,e=[];return t&V&&e.push("pan-y"),t&U&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,a=t.deltaY;return o&e.direction||(e.direction&V?(o=0===r?j:r<0?W:z,i=r!=this.pX,n=Math.abs(t.deltaX)):(o=0===a?j:a<0?H:q,i=a!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return Nt.prototype.attrTest.call(this,t)&&(this.state&St||!(this.state&St)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Rt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),v(Ft,Nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&St)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),v(jt,Pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(M|F)&&!o)this.reset();else if(t.eventType&N)this.reset(),this._timer=u(function(){this.state=It,this.tryEmit()},e.time,this);else if(t.eventType&M)return It;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===It&&(t&&t.eventType&M?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),v(Wt,Nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&St)}}),v(zt,Nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:V|U,pointers:1},getTouchAction:function(){return Mt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(V|U)?e=t.overallVelocity:i&V?e=t.overallVelocityX:i&U&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&t.eventType&M},emit:function(t){var e=Rt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),v(Ht,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&N&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=M)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||et(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=It,this.tryEmit()},e.interval,this),St):It}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==It&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),qt.VERSION="2.0.7",qt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Wt,{enable:!1}],[Ft,{enable:!1},["rotate"]],[zt,{direction:V}],[Mt,{direction:V},["swipe"]],[Ht],[Ht,{event:"doubletap",taps:2},["tap"]],[jt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Vt.prototype={set:function(t){return o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&It)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(St|At|Ot)&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(h(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(h(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=E(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==n&&e!==n){var i=this.handlers;return p(k(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==n){var i=this.handlers;return p(k(t),function(t){e?i[t]&&i[t].splice(E(i[t],e),1):delete i[t]}),this}},emit:function(t,i){this.options.domEvents&&function(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}(t,i);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](i),o++}},destroy:function(){this.element&&Ut(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(qt,{INPUT_START:N,INPUT_MOVE:2,INPUT_END:M,INPUT_CANCEL:F,STATE_POSSIBLE:Et,STATE_BEGAN:St,STATE_CHANGED:At,STATE_ENDED:Ot,STATE_RECOGNIZED:It,STATE_CANCELLED:Dt,STATE_FAILED:32,DIRECTION_NONE:j,DIRECTION_LEFT:W,DIRECTION_RIGHT:z,DIRECTION_UP:H,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:V,DIRECTION_VERTICAL:U,DIRECTION_ALL:G,Manager:Vt,Input:Y,TouchAction:kt,TouchInput:yt,MouseInput:at,PointerEventInput:ut,TouchMouseInput:_t,SingleTouchInput:mt,Recognizer:Pt,AttrRecognizer:Nt,Tap:Ht,Pan:Mt,Swipe:zt,Pinch:Ft,Rotate:Wt,Press:jt,on:w,off:x,each:p,merge:g,extend:m,assign:o,inherit:v,bindFn:y,prefixed:O}),("undefined"!=typeof t?t:"undefined"!=typeof self?self:{}).Hammer=qt,"function"==typeof define&&define.amd?define(function(){return qt}):"undefined"!=typeof module&&module.exports?module.exports=qt:t.Hammer=qt}(window,document),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e((t=t||self).bootstrap={},t.jQuery,t.Popper)}(this,function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){r(t,e,i[e])})}return t}e=e&&e.hasOwnProperty("default")?e.default:e,i=i&&i.hasOwnProperty("default")?i.default:i;var s={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var i=t.getAttribute("href");e=i&&"#"!==i?i.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var i=e(t).css("transition-duration"),n=e(t).css("transition-delay"),o=parseFloat(i),r=parseFloat(n);return o||r?(i=i.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(i)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){e(t).trigger("transitionend")},supportsTransitionEnd:function(){return Boolean("transitionend")},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,i){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var o=i[n],r=e[n],a=r&&s.isElement(r)?"element":{}.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(a))throw new Error(t.toUpperCase()+': Option "'+n+'" provided type "'+a+'" but expected type "'+o+'".')}},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?s.findShadowRoot(t.parentNode):null}};e.fn.emulateTransitionEnd=function(t){var i=this,n=!1;return e(this).one(s.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||s.triggerTransitionEnd(i)},t),this},e.event.special[s.TRANSITION_END]={bindType:"transitionend",delegateType:"transitionend",handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var l=e.fn.alert,d=function(){function t(t){this._element=t}var i=t.prototype;return i.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},i.dispose=function(){e.removeData(this._element,"bs.alert"),this._element=null},i._getRootElement=function(t){var i=s.getSelectorFromElement(t),n=!1;return i&&(n=document.querySelector(i)),n||(n=e(t).closest(".alert")[0]),n},i._triggerCloseEvent=function(t){var i=e.Event("close.bs.alert");return e(t).trigger(i),i},i._removeElement=function(t){var i=this;if(e(t).removeClass("show"),e(t).hasClass("fade")){var n=s.getTransitionDurationFromElement(t);e(t).one(s.TRANSITION_END,function(e){return i._destroyElement(t,e)}).emulateTransitionEnd(n)}else this._destroyElement(t)},i._destroyElement=function(t){e(t).detach().trigger("closed.bs.alert").remove()},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),o=n.data("bs.alert");o||(o=new t(this),n.data("bs.alert",o)),"close"===i&&o[i](this)})},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),t}();e(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',d._handleDismiss(new d)),e.fn.alert=d._jQueryInterface,e.fn.alert.Constructor=d,e.fn.alert.noConflict=function(){return e.fn.alert=l,d._jQueryInterface};var c=e.fn.button,u=function(){function t(t){this._element=t}var i=t.prototype;return i.toggle=function(){var t=!0,i=!0,n=e(this._element).closest('[data-toggle="buttons"]')[0];if(n){var o=this._element.querySelector('input:not([type="hidden"])');if(o){if("radio"===o.type)if(o.checked&&this._element.classList.contains("active"))t=!1;else{var r=n.querySelector(".active");r&&e(r).removeClass("active")}if(t){if(o.hasAttribute("disabled")||n.hasAttribute("disabled")||o.classList.contains("disabled")||n.classList.contains("disabled"))return;o.checked=!this._element.classList.contains("active"),e(o).trigger("change")}o.focus(),i=!1}}i&&this._element.setAttribute("aria-pressed",!this._element.classList.contains("active")),t&&e(this._element).toggleClass("active")},i.dispose=function(){e.removeData(this._element,"bs.button"),this._element=null},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data("bs.button");n||(n=new t(this),e(this).data("bs.button",n)),"toggle"===i&&n[i]()})},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),t}();e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){t.preventDefault();var i=t.target;e(i).hasClass("btn")||(i=e(i).closest(".btn")),u._jQueryInterface.call(e(i),"toggle")}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){var i=e(t.target).closest(".btn")[0];e(i).toggleClass("focus",/^focus(in)?$/.test(t.type))}),e.fn.button=u._jQueryInterface,e.fn.button.Constructor=u,e.fn.button.noConflict=function(){return e.fn.button=c,u._jQueryInterface};var h="carousel",p=e.fn[h],f={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},m={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},g={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},v={TOUCH:"touch",PEN:"pen"},y=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(g.INDICATORS),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var i=t.prototype;return i.next=function(){this._isSliding||this._slide("next")},i.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},i.prev=function(){this._isSliding||this._slide("prev")},i.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(g.NEXT_PREV)&&(s.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},i.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},i.to=function(t){var i=this;this._activeElement=this._element.querySelector(g.ACTIVE_ITEM);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)e(this._element).one("slid.bs.carousel",function(){return i.to(t)});else{if(n===t)return this.pause(),void this.cycle();this._slide(t>n?"next":"prev",this._items[t])}},i.dispose=function(){e(this._element).off(".bs.carousel"),e.removeData(this._element,"bs.carousel"),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},i._getConfig=function(t){return t=a({},f,t),s.typeCheckConfig(h,t,m),t},i._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;e>0&&this.prev(),e<0&&this.next()}},i._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on("keydown.bs.carousel",function(e){return t._keydown(e)}),"hover"===this._config.pause&&e(this._element).on("mouseenter.bs.carousel",function(e){return t.pause(e)}).on("mouseleave.bs.carousel",function(e){return t.cycle(e)}),this._config.touch&&this._addTouchEventListeners()},i._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var i=function(e){t._pointerEvent&&v[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},n=function(e){t._pointerEvent&&v[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval))};e(this._element.querySelectorAll(g.ITEM_IMG)).on("dragstart.bs.carousel",function(t){return t.preventDefault()}),this._pointerEvent?(e(this._element).on("pointerdown.bs.carousel",function(t){return i(t)}),e(this._element).on("pointerup.bs.carousel",function(t){return n(t)}),this._element.classList.add("pointer-event")):(e(this._element).on("touchstart.bs.carousel",function(t){return i(t)}),e(this._element).on("touchmove.bs.carousel",function(e){return function(e){t.touchDeltaX=e.originalEvent.touches&&e.originalEvent.touches.length>1?0:e.originalEvent.touches[0].clientX-t.touchStartX}(e)}),e(this._element).on("touchend.bs.carousel",function(t){return n(t)}))}},i._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},i._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(g.ITEM)):[],this._items.indexOf(t)},i._getItemByDirection=function(t,e){var i="next"===t,n="prev"===t,o=this._getItemIndex(e);if((n&&0===o||i&&o===this._items.length-1)&&!this._config.wrap)return e;var r=(o+("prev"===t?-1:1))%this._items.length;return-1===r?this._items[this._items.length-1]:this._items[r]},i._triggerSlideEvent=function(t,i){var n=this._getItemIndex(t),o=this._getItemIndex(this._element.querySelector(g.ACTIVE_ITEM)),r=e.Event("slide.bs.carousel",{relatedTarget:t,direction:i,from:o,to:n});return e(this._element).trigger(r),r},i._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var i=[].slice.call(this._indicatorsElement.querySelectorAll(g.ACTIVE));e(i).removeClass("active");var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&e(n).addClass("active")}},i._slide=function(t,i){var n,o,r,a=this,l=this._element.querySelector(g.ACTIVE_ITEM),d=this._getItemIndex(l),c=i||l&&this._getItemByDirection(t,l),u=this._getItemIndex(c),h=Boolean(this._interval);if("next"===t?(n="carousel-item-left",o="carousel-item-next",r="left"):(n="carousel-item-right",o="carousel-item-prev",r="right"),c&&e(c).hasClass("active"))this._isSliding=!1;else if(!this._triggerSlideEvent(c,r).isDefaultPrevented()&&l&&c){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(c);var p=e.Event("slid.bs.carousel",{relatedTarget:c,direction:r,from:d,to:u});if(e(this._element).hasClass("slide")){e(c).addClass(o),s.reflow(c),e(l).addClass(n),e(c).addClass(n);var f=parseInt(c.getAttribute("data-interval"),10);f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=f):this._config.interval=this._config.defaultInterval||this._config.interval;var m=s.getTransitionDurationFromElement(l);e(l).one(s.TRANSITION_END,function(){e(c).removeClass(n+" "+o).addClass("active"),e(l).removeClass("active "+o+" "+n),a._isSliding=!1,setTimeout(function(){return e(a._element).trigger(p)},0)}).emulateTransitionEnd(m)}else e(l).removeClass("active"),e(c).addClass("active"),this._isSliding=!1,e(this._element).trigger(p);h&&this.cycle()}},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data("bs.carousel"),o=a({},f,e(this).data());"object"==typeof i&&(o=a({},o,i));var r="string"==typeof i?i:o.slide;if(n||(n=new t(this,o),e(this).data("bs.carousel",n)),"number"==typeof i)n.to(i);else if("string"==typeof r){if("undefined"==typeof n[r])throw new TypeError('No method named "'+r+'"');n[r]()}else o.interval&&o.ride&&(n.pause(),n.cycle())})},t._dataApiClickHandler=function(i){var n=s.getSelectorFromElement(this);if(n){var o=e(n)[0];if(o&&e(o).hasClass("carousel")){var r=a({},e(o).data(),e(this).data()),l=this.getAttribute("data-slide-to");l&&(r.interval=!1),t._jQueryInterface.call(e(o),r),l&&e(o).data("bs.carousel").to(l),i.preventDefault()}}},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return f}}]),t}();e(document).on("click.bs.carousel.data-api",g.DATA_SLIDE,y._dataApiClickHandler),e(window).on("load.bs.carousel.data-api",function(){for(var t=[].slice.call(document.querySelectorAll(g.DATA_RIDE)),i=0,n=t.length;i<n;i++){var o=e(t[i]);y._jQueryInterface.call(o,o.data())}}),e.fn[h]=y._jQueryInterface,e.fn[h].Constructor=y,e.fn[h].noConflict=function(){return e.fn[h]=p,y._jQueryInterface};var b="collapse",_=e.fn[b],w={toggle:!0,parent:""},x={toggle:"boolean",parent:"(string|element)"},T={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},C=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=[].slice.call(document.querySelectorAll(T.DATA_TOGGLE)),n=0,o=i.length;n<o;n++){var r=i[n],a=s.getSelectorFromElement(r),l=[].slice.call(document.querySelectorAll(a)).filter(function(e){return e===t});null!==a&&l.length>0&&(this._selector=a,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var i=t.prototype;return i.toggle=function(){e(this._element).hasClass("show")?this.hide():this.show()},i.show=function(){var i,n,o=this;if(!(this._isTransitioning||e(this._element).hasClass("show")||(this._parent&&0===(i=[].slice.call(this._parent.querySelectorAll(T.ACTIVES)).filter(function(t){return"string"==typeof o._config.parent?t.getAttribute("data-parent")===o._config.parent:t.classList.contains("collapse")})).length&&(i=null),i&&(n=e(i).not(this._selector).data("bs.collapse"))&&n._isTransitioning))){var r=e.Event("show.bs.collapse");if(e(this._element).trigger(r),!r.isDefaultPrevented()){i&&(t._jQueryInterface.call(e(i).not(this._selector),"hide"),n||e(i).data("bs.collapse",null));var a=this._getDimension();e(this._element).removeClass("collapse").addClass("collapsing"),this._element.style[a]=0,this._triggerArray.length&&e(this._triggerArray).removeClass("collapsed").attr("aria-expanded",!0),this.setTransitioning(!0);var l="scroll"+(a[0].toUpperCase()+a.slice(1)),d=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(){e(o._element).removeClass("collapsing").addClass("collapse").addClass("show"),o._element.style[a]="",o.setTransitioning(!1),e(o._element).trigger("shown.bs.collapse")}).emulateTransitionEnd(d),this._element.style[a]=this._element[l]+"px"}}},i.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass("show")){var i=e.Event("hide.bs.collapse");if(e(this._element).trigger(i),!i.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",s.reflow(this._element),e(this._element).addClass("collapsing").removeClass("collapse").removeClass("show");var o=this._triggerArray.length;if(o>0)for(var r=0;r<o;r++){var a=this._triggerArray[r],l=s.getSelectorFromElement(a);null!==l&&(e([].slice.call(document.querySelectorAll(l))).hasClass("show")||e(a).addClass("collapsed").attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[n]="";var d=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(){t.setTransitioning(!1),e(t._element).removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")}).emulateTransitionEnd(d)}}},i.setTransitioning=function(t){this._isTransitioning=t},i.dispose=function(){e.removeData(this._element,"bs.collapse"),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},i._getConfig=function(t){return(t=a({},w,t)).toggle=Boolean(t.toggle),s.typeCheckConfig(b,t,x),t},i._getDimension=function(){return e(this._element).hasClass("width")?"width":"height"},i._getParent=function(){var i,n=this;s.isElement(this._config.parent)?(i=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(i=this._config.parent[0])):i=document.querySelector(this._config.parent);var o=[].slice.call(i.querySelectorAll('[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'));return e(o).each(function(e,i){n._addAriaAndCollapsedClass(t._getTargetFromElement(i),[i])}),i},i._addAriaAndCollapsedClass=function(t,i){var n=e(t).hasClass("show");i.length&&e(i).toggleClass("collapsed",!n).attr("aria-expanded",n)},t._getTargetFromElement=function(t){var e=s.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),r=a({},w,n.data(),"object"==typeof i&&i?i:{});if(!o&&r.toggle&&/show|hide/.test(i)&&(r.toggle=!1),o||(o=new t(this,r),n.data("bs.collapse",o)),"string"==typeof i){if("undefined"==typeof o[i])throw new TypeError('No method named "'+i+'"');o[i]()}})},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return w}}]),t}();e(document).on("click.bs.collapse.data-api",T.DATA_TOGGLE,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var i=e(this),n=s.getSelectorFromElement(this),o=[].slice.call(document.querySelectorAll(n));e(o).each(function(){var t=e(this),n=t.data("bs.collapse")?"toggle":i.data();C._jQueryInterface.call(t,n)})}),e.fn[b]=C._jQueryInterface,e.fn[b].Constructor=C,e.fn[b].noConflict=function(){return e.fn[b]=_,C._jQueryInterface};var k="dropdown",E=e.fn[k],S=new RegExp("38|40|27"),A={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},O={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},I=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var n=t.prototype;return n.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass("disabled")){var n=t._getParentFromElement(this._element),o=e(this._menu).hasClass("show");if(t._clearMenus(),!o){var r={relatedTarget:this._element},a=e.Event("show.bs.dropdown",r);if(e(n).trigger(a),!a.isDefaultPrevented()){if(!this._inNavbar){if("undefined"==typeof i)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var l=this._element;"parent"===this._config.reference?l=n:s.isElement(this._config.reference)&&(l=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(l=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(n).addClass("position-static"),this._popper=new i(l,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(n).closest(".navbar-nav").length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass("show"),e(n).toggleClass("show").trigger(e.Event("shown.bs.dropdown",r))}}}},n.show=function(){if(!(this._element.disabled||e(this._element).hasClass("disabled")||e(this._menu).hasClass("show"))){var i={relatedTarget:this._element},n=e.Event("show.bs.dropdown",i),o=t._getParentFromElement(this._element);e(o).trigger(n),n.isDefaultPrevented()||(e(this._menu).toggleClass("show"),e(o).toggleClass("show").trigger(e.Event("shown.bs.dropdown",i)))}},n.hide=function(){if(!this._element.disabled&&!e(this._element).hasClass("disabled")&&e(this._menu).hasClass("show")){var i={relatedTarget:this._element},n=e.Event("hide.bs.dropdown",i),o=t._getParentFromElement(this._element);e(o).trigger(n),n.isDefaultPrevented()||(e(this._menu).toggleClass("show"),e(o).toggleClass("show").trigger(e.Event("hidden.bs.dropdown",i)))}},n.dispose=function(){e.removeData(this._element,"bs.dropdown"),e(this._element).off(".bs.dropdown"),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},n.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},n._addEventListeners=function(){var t=this;e(this._element).on("click.bs.dropdown",function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},n._getConfig=function(t){return t=a({},this.constructor.Default,e(this._element).data(),t),s.typeCheckConfig(k,t,this.constructor.DefaultType),t},n._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(".dropdown-menu"))}return this._menu},n._getPlacement=function(){var t=e(this._element.parentNode),i="bottom-start";return t.hasClass("dropup")?(i="top-start",e(this._menu).hasClass("dropdown-menu-right")&&(i="top-end")):t.hasClass("dropright")?i="right-start":t.hasClass("dropleft")?i="left-start":e(this._menu).hasClass("dropdown-menu-right")&&(i="bottom-end"),i},n._detectNavbar=function(){return e(this._element).closest(".navbar").length>0},n._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=a({},e.offsets,t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},n._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data("bs.dropdown");if(n||(n=new t(this,"object"==typeof i?i:null),e(this).data("bs.dropdown",n)),"string"==typeof i){if("undefined"==typeof n[i])throw new TypeError('No method named "'+i+'"');n[i]()}})},t._clearMenus=function(i){if(!i||3!==i.which&&("keyup"!==i.type||9===i.which))for(var n=[].slice.call(document.querySelectorAll('[data-toggle="dropdown"]')),o=0,r=n.length;o<r;o++){var a=t._getParentFromElement(n[o]),s=e(n[o]).data("bs.dropdown"),l={relatedTarget:n[o]};if(i&&"click"===i.type&&(l.clickEvent=i),s){var d=s._menu;if(e(a).hasClass("show")&&!(i&&("click"===i.type&&/input|textarea/i.test(i.target.tagName)||"keyup"===i.type&&9===i.which)&&e.contains(a,i.target))){var c=e.Event("hide.bs.dropdown",l);e(a).trigger(c),c.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),n[o].setAttribute("aria-expanded","false"),e(d).removeClass("show"),e(a).removeClass("show").trigger(e.Event("hidden.bs.dropdown",l)))}}}},t._getParentFromElement=function(t){var e,i=s.getSelectorFromElement(t);return i&&(e=document.querySelector(i)),e||t.parentNode},t._dataApiKeydownHandler=function(i){if((/input|textarea/i.test(i.target.tagName)?!(32===i.which||27!==i.which&&(40!==i.which&&38!==i.which||e(i.target).closest(".dropdown-menu").length)):S.test(i.which))&&(i.preventDefault(),i.stopPropagation(),!this.disabled&&!e(this).hasClass("disabled"))){var n=t._getParentFromElement(this),o=e(n).hasClass("show");if(o&&(!o||27!==i.which&&32!==i.which)){var r=[].slice.call(n.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"));if(0!==r.length){var a=r.indexOf(i.target);38===i.which&&a>0&&a--,40===i.which&&a<r.length-1&&a++,a<0&&(a=0),r[a].focus()}}else{if(27===i.which){var s=n.querySelector('[data-toggle="dropdown"]');e(s).trigger("focus")}e(this).trigger("click")}}},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return A}},{key:"DefaultType",get:function(){return O}}]),t}();e(document).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',I._dataApiKeydownHandler).on("keydown.bs.dropdown.data-api",".dropdown-menu",I._dataApiKeydownHandler).on("click.bs.dropdown.data-api keyup.bs.dropdown.data-api",I._clearMenus).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',function(t){t.preventDefault(),t.stopPropagation(),I._jQueryInterface.call(e(this),"toggle")}).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}),e.fn[k]=I._jQueryInterface,e.fn[k].Constructor=I,e.fn[k].noConflict=function(){return e.fn[k]=E,I._jQueryInterface};var D=e.fn.modal,P={backdrop:!0,keyboard:!0,focus:!0,show:!0},L={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},R={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},B=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(R.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var i=t.prototype;return i.toggle=function(t){return this._isShown?this.hide():this.show(t)},i.show=function(t){var i=this;if(!this._isShown&&!this._isTransitioning){e(this._element).hasClass("fade")&&(this._isTransitioning=!0);var n=e.Event("show.bs.modal",{relatedTarget:t});e(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on("click.dismiss.bs.modal",R.DATA_DISMISS,function(t){return i.hide(t)}),e(this._dialog).on("mousedown.dismiss.bs.modal",function(){e(i._element).one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i._element)&&(i._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return i._showElement(t)}))}},i.hide=function(t){var i=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=e.Event("hide.bs.modal");if(e(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var o=e(this._element).hasClass("fade");if(o&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off("focusin.bs.modal"),e(this._element).removeClass("show"),e(this._element).off("click.dismiss.bs.modal"),e(this._dialog).off("mousedown.dismiss.bs.modal"),o){var r=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,function(t){return i._hideModal(t)}).emulateTransitionEnd(r)}else this._hideModal()}}},i.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return e(t).off(".bs.modal")}),e(document).off("focusin.bs.modal"),e.removeData(this._element,"bs.modal"),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},i.handleUpdate=function(){this._adjustDialog()},i._getConfig=function(t){return t=a({},P,t),s.typeCheckConfig("modal",t,L),t},i._showElement=function(t){var i=this,n=e(this._element).hasClass("fade");this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),e(this._dialog).hasClass("modal-dialog-scrollable")?this._dialog.querySelector(R.MODAL_BODY).scrollTop=0:this._element.scrollTop=0,n&&s.reflow(this._element),e(this._element).addClass("show"),this._config.focus&&this._enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t}),r=function(){i._config.focus&&i._element.focus(),i._isTransitioning=!1,e(i._element).trigger(o)};if(n){var a=s.getTransitionDurationFromElement(this._dialog);e(this._dialog).one(s.TRANSITION_END,r).emulateTransitionEnd(a)}else r()},i._enforceFocus=function(){var t=this;e(document).off("focusin.bs.modal").on("focusin.bs.modal",function(i){document!==i.target&&t._element!==i.target&&0===e(t._element).has(i.target).length&&t._element.focus()})},i._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on("keydown.dismiss.bs.modal",function(e){27===e.which&&(e.preventDefault(),t.hide())}):this._isShown||e(this._element).off("keydown.dismiss.bs.modal")},i._setResizeEvent=function(){var t=this;this._isShown?e(window).on("resize.bs.modal",function(e){return t.handleUpdate(e)}):e(window).off("resize.bs.modal")},i._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){e(document.body).removeClass("modal-open"),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger("hidden.bs.modal")})},i._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},i._showBackdrop=function(t){var i=this,n=e(this._element).hasClass("fade")?"fade":"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),e(this._backdrop).appendTo(document.body),e(this._element).on("click.dismiss.bs.modal",function(t){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===i._config.backdrop?i._element.focus():i.hide())}),n&&s.reflow(this._backdrop),e(this._backdrop).addClass("show"),!t)return;if(!n)return void t();var o=s.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(s.TRANSITION_END,t).emulateTransitionEnd(o)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass("show");var r=function(){i._removeBackdrop(),t&&t()};if(e(this._element).hasClass("fade")){var a=s.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(s.TRANSITION_END,r).emulateTransitionEnd(a)}else r()}else t&&t()},i._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},i._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},i._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},i._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var i=[].slice.call(document.querySelectorAll(R.FIXED_CONTENT)),n=[].slice.call(document.querySelectorAll(R.STICKY_CONTENT));e(i).each(function(i,n){var o=n.style.paddingRight,r=e(n).css("padding-right");e(n).data("padding-right",o).css("padding-right",parseFloat(r)+t._scrollbarWidth+"px")}),e(n).each(function(i,n){var o=n.style.marginRight,r=e(n).css("margin-right");e(n).data("margin-right",o).css("margin-right",parseFloat(r)-t._scrollbarWidth+"px")});var o=document.body.style.paddingRight,r=e(document.body).css("padding-right");e(document.body).data("padding-right",o).css("padding-right",parseFloat(r)+this._scrollbarWidth+"px")}e(document.body).addClass("modal-open")},i._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(R.FIXED_CONTENT));e(t).each(function(t,i){var n=e(i).data("padding-right");e(i).removeData("padding-right"),i.style.paddingRight=n||""});var i=[].slice.call(document.querySelectorAll(""+R.STICKY_CONTENT));e(i).each(function(t,i){var n=e(i).data("margin-right");"undefined"!=typeof n&&e(i).css("margin-right",n).removeData("margin-right")});var n=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},i._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(i,n){return this.each(function(){var o=e(this).data("bs.modal"),r=a({},P,e(this).data(),"object"==typeof i&&i?i:{});if(o||(o=new t(this,r),e(this).data("bs.modal",o)),"string"==typeof i){if("undefined"==typeof o[i])throw new TypeError('No method named "'+i+'"');o[i](n)}else r.show&&o.show(n)})},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return P}}]),t}();e(document).on("click.bs.modal.data-api",R.DATA_TOGGLE,function(t){var i,n=this,o=s.getSelectorFromElement(this);o&&(i=document.querySelector(o));var r=e(i).data("bs.modal")?"toggle":a({},e(i).data(),e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var l=e(i).one("show.bs.modal",function(t){t.isDefaultPrevented()||l.one("hidden.bs.modal",function(){e(n).is(":visible")&&n.focus()})});B._jQueryInterface.call(e(i),r,this)}),e.fn.modal=B._jQueryInterface,e.fn.modal.Constructor=B,e.fn.modal.noConflict=function(){return e.fn.modal=D,B._jQueryInterface};var N=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],M=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,F=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function j(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),o=Object.keys(e),r=[].slice.call(n.body.querySelectorAll("*")),a=function(t,i){var n=r[t],a=n.nodeName.toLowerCase();if(-1===o.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var s=[].slice.call(n.attributes),l=[].concat(e["*"]||[],e[a]||[]);s.forEach(function(t){(function(t,e){var i=t.nodeName.toLowerCase();if(-1!==e.indexOf(i))return-1===N.indexOf(i)||Boolean(t.nodeValue.match(M)||t.nodeValue.match(F));for(var n=e.filter(function(t){return t instanceof RegExp}),o=0,r=n.length;o<r;o++)if(i.match(n[o]))return!0;return!1})(t,l)||n.removeAttribute(t.nodeName)})},s=0,l=r.length;s<l;s++)a(s);return n.body.innerHTML}var W=e.fn.tooltip,z=new RegExp("(^|\\s)bs-tooltip\\S+","g"),H=["sanitize","whiteList","sanitizeFn"],q={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},V={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},U={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},G={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},$=function(){function t(t,e){if("undefined"==typeof i)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var n=t.prototype;return n.enable=function(){this._isEnabled=!0},n.disable=function(){this._isEnabled=!1},n.toggleEnabled=function(){this._isEnabled=!this._isEnabled},n.toggle=function(t){if(this._isEnabled)if(t){var i=this.constructor.DATA_KEY,n=e(t.currentTarget).data(i);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(e(this.getTipElement()).hasClass("show"))return void this._leave(null,this);this._enter(null,this)}},n.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},n.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var n=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(n);var o=s.findShadowRoot(this.element),r=e.contains(null!==o?o:this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!r)return;var a=this.getTipElement(),l=s.getUID(this.constructor.NAME);a.setAttribute("id",l),this.element.setAttribute("aria-describedby",l),this.setContent(),this.config.animation&&e(a).addClass("fade");var d="function"==typeof this.config.placement?this.config.placement.call(this,a,this.element):this.config.placement,c=this._getAttachment(d);this.addAttachmentClass(c);var u=this._getContainer();e(a).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(a).appendTo(u),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new i(this.element,a,{placement:c,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}}),e(a).addClass("show"),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var h=function(){t.config.animation&&t._fixTransition();var i=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),"out"===i&&t._leave(null,t)};if(e(this.tip).hasClass("fade")){var p=s.getTransitionDurationFromElement(this.tip);e(this.tip).one(s.TRANSITION_END,h).emulateTransitionEnd(p)}else h()}},n.hide=function(t){var i=this,n=this.getTipElement(),o=e.Event(this.constructor.Event.HIDE),r=function(){"show"!==i._hoverState&&n.parentNode&&n.parentNode.removeChild(n),i._cleanTipClass(),i.element.removeAttribute("aria-describedby"),e(i.element).trigger(i.constructor.Event.HIDDEN),null!==i._popper&&i._popper.destroy(),t&&t()};if(e(this.element).trigger(o),!o.isDefaultPrevented()){if(e(n).removeClass("show"),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,e(this.tip).hasClass("fade")){var a=s.getTransitionDurationFromElement(n);e(n).one(s.TRANSITION_END,r).emulateTransitionEnd(a)}else r();this._hoverState=""}},n.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},n.isWithContent=function(){return Boolean(this.getTitle())},n.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-tooltip-"+t)},n.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},n.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(".tooltip-inner")),this.getTitle()),e(t).removeClass("fade show")},n.setElementContent=function(t,i){"object"!=typeof i||!i.nodeType&&!i.jquery?this.config.html?(this.config.sanitize&&(i=j(i,this.config.whiteList,this.config.sanitizeFn)),t.html(i)):t.text(i):this.config.html?e(i).parent().is(t)||t.empty().append(i):t.text(e(i).text())},n.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},n._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=a({},e.offsets,t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},n._getContainer=function(){return!1===this.config.container?document.body:s.isElement(this.config.container)?e(this.config.container):e(document).find(this.config.container)},n._getAttachment=function(t){return V[t.toUpperCase()]},n._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach(function(i){if("click"===i)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if("manual"!==i){var n="hover"===i?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,o="hover"===i?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(n,t.config.selector,function(e){return t._enter(e)}).on(o,t.config.selector,function(e){return t._leave(e)})}}),e(this.element).closest(".modal").on("hide.bs.modal",function(){t.element&&t.hide()}),this.config.selector?this.config=a({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},n._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},n._enter=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusin"===t.type?"focus":"hover"]=!0),e(i.getTipElement()).hasClass("show")||"show"===i._hoverState?i._hoverState="show":(clearTimeout(i._timeout),i._hoverState="show",i.config.delay&&i.config.delay.show?i._timeout=setTimeout(function(){"show"===i._hoverState&&i.show()},i.config.delay.show):i.show())},n._leave=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusout"===t.type?"focus":"hover"]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState="out",i.config.delay&&i.config.delay.hide?i._timeout=setTimeout(function(){"out"===i._hoverState&&i.hide()},i.config.delay.hide):i.hide())},n._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},n._getConfig=function(t){var i=e(this.element).data();return Object.keys(i).forEach(function(t){-1!==H.indexOf(t)&&delete i[t]}),"number"==typeof(t=a({},this.constructor.Default,i,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),s.typeCheckConfig("tooltip",t,this.constructor.DefaultType),t.sanitize&&(t.template=j(t.template,t.whiteList,t.sanitizeFn)),t},n._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},n._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(z);null!==i&&i.length&&t.removeClass(i.join(""))},n._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},n._fixTransition=function(){var t=this.getTipElement(),i=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass("fade"),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data("bs.tooltip"),o="object"==typeof i&&i;if((n||!/dispose|hide/.test(i))&&(n||(n=new t(this,o),e(this).data("bs.tooltip",n)),"string"==typeof i)){if("undefined"==typeof n[i])throw new TypeError('No method named "'+i+'"');n[i]()}})},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return U}},{key:"NAME",get:function(){return"tooltip"}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return G}},{key:"EVENT_KEY",get:function(){return".bs.tooltip"}},{key:"DefaultType",get:function(){return q}}]),t}();e.fn.tooltip=$._jQueryInterface,e.fn.tooltip.Constructor=$,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=W,$._jQueryInterface};var K=e.fn.popover,Y=new RegExp("(^|\\s)bs-popover\\S+","g"),X=a({},$.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Q=a({},$.DefaultType,{content:"(string|element|function)"}),Z={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},J=function(t){var i,n;function r(){return t.apply(this,arguments)||this}n=t,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n;var a=r.prototype;return a.isWithContent=function(){return this.getTitle()||this._getContent()},a.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-popover-"+t)},a.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},a.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var i=this._getContent();"function"==typeof i&&(i=i.call(this.element)),this.setElementContent(t.find(".popover-body"),i),t.removeClass("fade show")},a._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},a._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(Y);null!==i&&i.length>0&&t.removeClass(i.join(""))},r._jQueryInterface=function(t){return this.each(function(){var i=e(this).data("bs.popover"),n="object"==typeof t?t:null;if((i||!/dispose|hide/.test(t))&&(i||(i=new r(this,n),e(this).data("bs.popover",i)),"string"==typeof t)){if("undefined"==typeof i[t])throw new TypeError('No method named "'+t+'"');i[t]()}})},o(r,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return X}},{key:"NAME",get:function(){return"popover"}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return Z}},{key:"EVENT_KEY",get:function(){return".bs.popover"}},{key:"DefaultType",get:function(){return Q}}]),r}($);e.fn.popover=J._jQueryInterface,e.fn.popover.Constructor=J,e.fn.popover.noConflict=function(){return e.fn.popover=K,J._jQueryInterface};var tt="scrollspy",et=e.fn[tt],it={offset:10,method:"auto",target:""},nt={offset:"number",method:"string",target:"(string|element)"},ot={ACTIVATE:"activate.bs.scrollspy",SCROLL:"scroll.bs.scrollspy",LOAD_DATA_API:"load.bs.scrollspy.data-api"},rt={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},at=function(){function t(t,i){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(i),this._selector=this._config.target+" "+rt.NAV_LINKS+","+this._config.target+" "+rt.LIST_ITEMS+","+this._config.target+" "+rt.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on(ot.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var i=t.prototype;return i.refresh=function(){var t=this,i="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":"position":this._config.method,n="position"===i?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var o,r=s.getSelectorFromElement(t);if(r&&(o=document.querySelector(r)),o){var a=o.getBoundingClientRect();if(a.width||a.height)return[e(o)[i]().top+n,r]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},i.dispose=function(){e.removeData(this._element,"bs.scrollspy"),e(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},i._getConfig=function(t){if("string"!=typeof(t=a({},it,"object"==typeof t&&t?t:{})).target){var i=e(t.target).attr("id");i||(i=s.getUID(tt),e(t.target).attr("id",i)),t.target="#"+i}return s.typeCheckConfig(tt,t,nt),t},i._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},i._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},i._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},i._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;)this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&("undefined"==typeof this._offsets[o+1]||t<this._offsets[o+1])&&this._activate(this._targets[o])}},i._activate=function(t){this._activeTarget=t,this._clear();var i=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),n=e([].slice.call(document.querySelectorAll(i.join(","))));n.hasClass("dropdown-item")?(n.closest(rt.DROPDOWN).find(rt.DROPDOWN_TOGGLE).addClass("active"),n.addClass("active")):(n.addClass("active"),n.parents(rt.NAV_LIST_GROUP).prev(rt.NAV_LINKS+", "+rt.LIST_ITEMS).addClass("active"),n.parents(rt.NAV_LIST_GROUP).prev(rt.NAV_ITEMS).children(rt.NAV_LINKS).addClass("active")),e(this._scrollElement).trigger(ot.ACTIVATE,{relatedTarget:t})},i._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains("active")}).forEach(function(t){return t.classList.remove("active")})},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data("bs.scrollspy");if(n||(n=new t(this,"object"==typeof i&&i),e(this).data("bs.scrollspy",n)),"string"==typeof i){if("undefined"==typeof n[i])throw new TypeError('No method named "'+i+'"');n[i]()}})},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return it}}]),t}();e(window).on(ot.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(rt.DATA_SPY)),i=t.length;i--;){var n=e(t[i]);at._jQueryInterface.call(n,n.data())}}),e.fn[tt]=at._jQueryInterface,e.fn[tt].Constructor=at,e.fn[tt].noConflict=function(){return e.fn[tt]=et,at._jQueryInterface};var st=e.fn.tab,lt=function(){function t(t){this._element=t}var i=t.prototype;return i.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass("active")||e(this._element).hasClass("disabled"))){var i,n,o=e(this._element).closest(".nav, .list-group")[0],r=s.getSelectorFromElement(this._element);if(o){var a="UL"===o.nodeName||"OL"===o.nodeName?"> li > .active":".active";n=(n=e.makeArray(e(o).find(a)))[n.length-1]}var l=e.Event("hide.bs.tab",{relatedTarget:this._element}),d=e.Event("show.bs.tab",{relatedTarget:n});if(n&&e(n).trigger(l),e(this._element).trigger(d),!d.isDefaultPrevented()&&!l.isDefaultPrevented()){r&&(i=document.querySelector(r)),this._activate(this._element,o);var c=function(){var i=e.Event("hidden.bs.tab",{relatedTarget:t._element}),o=e.Event("shown.bs.tab",{relatedTarget:n});e(n).trigger(i),e(t._element).trigger(o)};i?this._activate(i,i.parentNode,c):c()}}},i.dispose=function(){e.removeData(this._element,"bs.tab"),this._element=null},i._activate=function(t,i,n){var o=this,r=(!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?e(i).children(".active"):e(i).find("> li > .active"))[0],a=n&&r&&e(r).hasClass("fade"),l=function(){return o._transitionComplete(t,r,n)};if(r&&a){var d=s.getTransitionDurationFromElement(r);e(r).removeClass("show").one(s.TRANSITION_END,l).emulateTransitionEnd(d)}else l()},i._transitionComplete=function(t,i,n){if(i){e(i).removeClass("active");var o=e(i.parentNode).find("> .dropdown-menu .active")[0];o&&e(o).removeClass("active"),"tab"===i.getAttribute("role")&&i.setAttribute("aria-selected",!1)}if(e(t).addClass("active"),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),s.reflow(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&e(t.parentNode).hasClass("dropdown-menu")){var r=e(t).closest(".dropdown")[0];if(r){var a=[].slice.call(r.querySelectorAll(".dropdown-toggle"));e(a).addClass("active")}t.setAttribute("aria-expanded",!0)}n&&n()},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),o=n.data("bs.tab");if(o||(o=new t(this),n.data("bs.tab",o)),"string"==typeof i){if("undefined"==typeof o[i])throw new TypeError('No method named "'+i+'"');o[i]()}})},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),t}();e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(t){t.preventDefault(),lt._jQueryInterface.call(e(this),"show")}),e.fn.tab=lt._jQueryInterface,e.fn.tab.Constructor=lt,e.fn.tab.noConflict=function(){return e.fn.tab=st,lt._jQueryInterface};var dt=e.fn.toast,ct={animation:"boolean",autohide:"boolean",delay:"number"},ut={animation:!0,autohide:!0,delay:500},ht=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var i=t.prototype;return i.show=function(){var t=this;e(this._element).trigger("show.bs.toast"),this._config.animation&&this._element.classList.add("fade");var i=function(){t._element.classList.remove("showing"),t._element.classList.add("show"),e(t._element).trigger("shown.bs.toast"),t._config.autohide&&t.hide()};if(this._element.classList.remove("hide"),this._element.classList.add("showing"),this._config.animation){var n=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,i).emulateTransitionEnd(n)}else i()},i.hide=function(t){var i=this;this._element.classList.contains("show")&&(e(this._element).trigger("hide.bs.toast"),t?this._close():this._timeout=setTimeout(function(){i._close()},this._config.delay))},i.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains("show")&&this._element.classList.remove("show"),e(this._element).off("click.dismiss.bs.toast"),e.removeData(this._element,"bs.toast"),this._element=null,this._config=null},i._getConfig=function(t){return t=a({},ut,e(this._element).data(),"object"==typeof t&&t?t:{}),s.typeCheckConfig("toast",t,this.constructor.DefaultType),t},i._setListeners=function(){var t=this;e(this._element).on("click.dismiss.bs.toast",'[data-dismiss="toast"]',function(){return t.hide(!0)})},i._close=function(){var t=this,i=function(){t._element.classList.add("hide"),e(t._element).trigger("hidden.bs.toast")};if(this._element.classList.remove("show"),this._config.animation){var n=s.getTransitionDurationFromElement(this._element);e(this._element).one(s.TRANSITION_END,i).emulateTransitionEnd(n)}else i()},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),o=n.data("bs.toast");if(o||(o=new t(this,"object"==typeof i&&i),n.data("bs.toast",o)),"string"==typeof i){if("undefined"==typeof o[i])throw new TypeError('No method named "'+i+'"');o[i](this)}})},o(t,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return ct}},{key:"Default",get:function(){return ut}}]),t}();e.fn.toast=ht._jQueryInterface,e.fn.toast.Constructor=ht,e.fn.toast.noConflict=function(){return e.fn.toast=dt,ht._jQueryInterface},function(){if("undefined"==typeof e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=s,t.Alert=d,t.Button=u,t.Carousel=y,t.Collapse=C,t.Dropdown=I,t.Modal=B,t.Popover=J,t.Scrollspy=at,t.Tab=lt,t.Toast=ht,t.Tooltip=$,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e,i,n){function o(e,i){this.settings=null,this.options=t.extend({},o.Defaults,i),this.$element=t(e),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},t.each(["onResize","onThrottledResize"],t.proxy(function(e,i){this._handlers[i]=t.proxy(this[i],this)},this)),t.each(o.Plugins,t.proxy(function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)},this)),t.each(o.Workers,t.proxy(function(e,i){this._pipe.push({filter:i.filter,run:t.proxy(i.run,this)})},this)),this.setup(),this.initialize()}o.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:e,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},o.Width={Default:"default",Inner:"inner",Outer:"outer"},o.Type={Event:"event",State:"state"},o.Plugins={},o.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",i=this.settings.rtl,n={width:"auto","margin-left":i?e:"","margin-right":i?"":e};!!this.settings.autoWidth&&this.$stage.children().css(n),t.css=n}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,o=!this.settings.autoWidth,r=[];for(t.items={merge:!1,width:e};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,t.items.merge=i>1||t.items.merge,r[n]=o?e*i:this._items[n].width();this._widths=r}},{filter:["items","settings"],run:function(){var e=[],i=this._items,n=this.settings,o=Math.max(2*n.items,4),r=2*Math.ceil(i.length/2),a=n.loop&&i.length?n.rewind?o:Math.max(o,r):0,s="",l="";for(a/=2;a>0;)e.push(this.normalize(e.length/2,!0)),s+=i[e[e.length-1]][0].outerHTML,e.push(this.normalize(i.length-1-(e.length-1)/2,!0)),l=i[e[e.length-1]][0].outerHTML+l,a-=1;this._clones=e,t(s).addClass("cloned").appendTo(this.$stage),t(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t=this.settings.rtl?1:-1,e=this._clones.length+this._items.length,i=-1,n=0,o=0,r=[];++i<e;)n=r[i-1]||0,o=this._widths[this.relative(i)]+this.settings.margin,r.push(n+o*t);this._coordinates=r}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,i={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],n.eq(e).css(t.css);else i&&(t.css.width=t.items.width,n.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,n,o=this.settings.rtl?1:-1,r=2*this.settings.stagePadding,a=this.coordinates(this.current())+r,s=a+this.width()*o,l=[];for(i=0,n=this._coordinates.length;i<n;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+r*o,(this.op(t,"<=",a)&&this.op(t,">",s)||this.op(e,"<",a)&&this.op(e,">",s))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],o.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=t("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()))},o.prototype.initializeItems=function(){var e=this.$element.find(".owl-item");if(e.length)return this._items=e.get().map(function(e){return t(e)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},o.prototype.initialize=function(){var t,e;this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")&&(t=this.$element.find("img"),e=this.$element.children(this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:void 0).width(),t.length&&e<=0&&this.preloadAutoWidthImages(t)),this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},o.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},o.prototype.setup=function(){var e=this.viewport(),i=this.options.responsive,n=-1,o=null;i?(t.each(i,function(t){t<=e&&t>n&&(n=Number(t))}),"function"==typeof(o=t.extend({},this.options,i[n])).stagePadding&&(o.stagePadding=o.stagePadding()),delete o.responsive,o.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):o=t.extend({},this.options),this.trigger("change",{property:{name:"settings",value:o}}),this._breakpoint=n,this.settings=o,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},o.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},o.prototype.prepare=function(e){var i=this.trigger("prepare",{content:e});return i.data||(i.data=t("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(e)),this.trigger("prepared",{content:i.data}),i.data},o.prototype.update=function(){for(var e=0,i=this._pipe.length,n=t.proxy(function(t){return this[t]},this._invalidated),o={};e<i;)(this._invalidated.all||t.grep(this._pipe[e].filter,n).length>0)&&this._pipe[e].run(o),e++;this._invalidated={},!this.is("valid")&&this.enter("valid")},o.prototype.width=function(t){switch(t=t||o.Width.Default){case o.Width.Inner:case o.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},o.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},o.prototype.onThrottledResize=function(){e.clearTimeout(this.resizeTimer),this.resizeTimer=e.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},o.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},o.prototype.registerEventHandlers=function(){t.support.transition&&this.$stage.on(t.support.transition.end+".owl.core",t.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(e,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",t.proxy(this.onDragEnd,this)))},o.prototype.onDragStart=function(e){var n=null;3!==e.which&&(t.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(t.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===e.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=t(e.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(e),t(i).on("mouseup.owl.core touchend.owl.core",t.proxy(this.onDragEnd,this)),t(i).one("mousemove.owl.core touchmove.owl.core",t.proxy(function(e){var n=this.difference(this._drag.pointer,this.pointer(e));t(i).on("mousemove.owl.core touchmove.owl.core",t.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(e.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},o.prototype.onDragMove=function(t){var e=null,i=null,n=null,o=this.difference(this._drag.pointer,this.pointer(t)),r=this.difference(this._drag.stage.start,o);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(e=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-e,r.x=((r.x-e)%i+i)%i+e):(e=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),n=this.settings.pullDrag?-1*o.x/5:0,r.x=Math.max(Math.min(r.x,e+n),i+n)),this._drag.stage.current=r,this.animate(r.x))},o.prototype.onDragEnd=function(e){var n=this.difference(this._drag.pointer,this.pointer(e)),o=this._drag.stage.current,r=n.x>0^this.settings.rtl?"left":"right";t(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(o.x,0!==n.x?r:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=r,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},o.prototype.closest=function(e,i){var n=-1,o=this.width(),r=this.coordinates();return this.settings.freeDrag||t.each(r,t.proxy(function(t,a){return"left"===i&&e>a-30&&e<a+30?n=t:"right"===i&&e>a-o-30&&e<a-o+30?n=t+1:this.op(e,"<",a)&&this.op(e,">",void 0!==r[t+1]?r[t+1]:a-o)&&(n="left"===i?t+1:t),-1===n},this)),this.settings.loop||(this.op(e,">",r[this.minimum()])?n=e=this.minimum():this.op(e,"<",r[this.maximum()])&&(n=e=this.maximum())),n},o.prototype.animate=function(e){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),t.support.transform3d&&t.support.transition?this.$stage.css({transform:"translate3d("+e+"px,0px,0px)",transition:this.speed()/1e3+"s"}):i?this.$stage.animate({left:e+"px"},this.speed(),this.settings.fallbackEasing,t.proxy(this.onTransitionEnd,this)):this.$stage.css({left:e+"px"})},o.prototype.is=function(t){return this._states.current[t]&&this._states.current[t]>0},o.prototype.current=function(t){if(void 0===t)return this._current;if(0!==this._items.length){if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});void 0!==e.data&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current}},o.prototype.invalidate=function(e){return"string"===t.type(e)&&(this._invalidated[e]=!0,this.is("valid")&&this.leave("valid")),t.map(this._invalidated,function(t,e){return e})},o.prototype.reset=function(t){void 0!==(t=this.normalize(t))&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},o.prototype.normalize=function(t,e){var i=this._items.length,n=e?0:this._clones.length;return!this.isNumeric(t)||i<1?t=void 0:(t<0||t>=i+n)&&(t=((t-n/2)%i+i)%i+n/2),t},o.prototype.relative=function(t){return this.normalize(t-=this._clones.length/2,!0)},o.prototype.maximum=function(t){var e,i,n,o=this.settings,r=this._coordinates.length;if(o.loop)r=this._clones.length/2+this._items.length-1;else if(o.autoWidth||o.merge){if(e=this._items.length)for(i=this._items[--e].width(),n=this.$element.width();e--&&!((i+=this._items[e].width()+this.settings.margin)>n););r=e+1}else r=o.center?this._items.length-1:this._items.length-o.items;return t&&(r-=this._clones.length/2),Math.max(r,0)},o.prototype.minimum=function(t){return t?0:this._clones.length/2},o.prototype.items=function(t){return void 0===t?this._items.slice():(t=this.normalize(t,!0),this._items[t])},o.prototype.mergers=function(t){return void 0===t?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},o.prototype.clones=function(e){var i=this._clones.length/2,n=i+this._items.length,o=function(t){return t%2==0?n+t/2:i-(t+1)/2};return t.map(this._clones,void 0===e?function(t,e){return o(e)}:function(t,i){return t===e?o(i):null})},o.prototype.speed=function(t){return void 0!==t&&(this._speed=t),this._speed},o.prototype.coordinates=function(e){var i,n=1,o=e-1;return void 0===e?t.map(this._coordinates,t.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(this.settings.rtl&&(n=-1,o=e+1),i=this._coordinates[e],i+=(this.width()-i+(this._coordinates[o]||0))/2*n):i=this._coordinates[o]||0,i=Math.ceil(i))},o.prototype.duration=function(t,e,i){return 0===i?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},o.prototype.to=function(t,e){var i=this.current(),n=null,o=t-this.relative(i),r=(o>0)-(o<0),a=this._items.length,s=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(o)>a/2&&(o+=-1*r*a),(n=(((t=i+o)-s)%a+a)%a+s)!==t&&n-o<=l&&n-o>0&&(t=n,this.reset(i=n-o))):t=this.settings.rewind?(t%(l+=1)+l)%l:Math.max(s,Math.min(l,t)),this.speed(this.duration(i,t,e)),this.current(t),this.isVisible()&&this.update()},o.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},o.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},o.prototype.onTransitionEnd=function(t){if(void 0!==t&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},o.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==e?n=t(this.options.responsiveBaseElement).width():e.innerWidth?n=e.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},o.prototype.replace=function(e){this.$stage.empty(),this._items=[],e&&(e=e instanceof jQuery?e:t(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter(function(){return 1===this.nodeType}).each(t.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},o.prototype.add=function(e,i){var n=this.relative(this._current);i=void 0===i?this._items.length:this.normalize(i,!0),e=e instanceof jQuery?e:t(e),this.trigger("add",{content:e,position:i}),e=this.prepare(e),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(e),0!==this._items.length&&this._items[i-1].after(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(e),this._items.splice(i,0,e),this._mergers.splice(i,0,1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[n]&&this.reset(this._items[n].index()),this.invalidate("items"),this.trigger("added",{content:e,position:i})},o.prototype.remove=function(t){void 0!==(t=this.normalize(t,!0))&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},o.prototype.preloadAutoWidthImages=function(e){e.each(t.proxy(function(e,i){this.enter("pre-loading"),i=t(i),t(new Image).one("load",t.proxy(function(t){i.attr("src",t.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},o.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),t(i).off(".owl.core"),!1!==this.settings.responsive&&(e.clearTimeout(this.resizeTimer),this.off(e,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},o.prototype.op=function(t,e,i){var n=this.settings.rtl;switch(e){case"<":return n?t>i:t<i;case">":return n?t<i:t>i;case">=":return n?t<=i:t>=i;case"<=":return n?t>=i:t<=i}},o.prototype.on=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)},o.prototype.off=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)},o.prototype.trigger=function(e,i,n,r,a){var s={item:{count:this._items.length,index:this.current()}},l=t.camelCase(t.grep(["on",e,n],function(t){return t}).join("-").toLowerCase()),d=t.Event([e,"owl",n||"carousel"].join(".").toLowerCase(),t.extend({relatedTarget:this},s,i));return this._supress[e]||(t.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(d)}),this.register({type:o.Type.Event,name:e}),this.$element.trigger(d),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,d)),d},o.prototype.enter=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){void 0===this._states.current[e]&&(this._states.current[e]=0),this._states.current[e]++},this))},o.prototype.leave=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]--},this))},o.prototype.register=function(e){if(e.type===o.Type.Event){if(t.event.special[e.name]||(t.event.special[e.name]={}),!t.event.special[e.name].owl){var i=t.event.special[e.name]._default;t.event.special[e.name]._default=function(t){return!i||!i.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&t.namespace.indexOf("owl")>-1:i.apply(this,arguments)},t.event.special[e.name].owl=!0}}else e.type===o.Type.State&&(this._states.tags[e.name]=this._states.tags[e.name]?this._states.tags[e.name].concat(e.tags):e.tags,this._states.tags[e.name]=t.grep(this._states.tags[e.name],t.proxy(function(i,n){return t.inArray(i,this._states.tags[e.name])===n},this)))},o.prototype.suppress=function(e){t.each(e,t.proxy(function(t,e){this._supress[e]=!0},this))},o.prototype.release=function(e){t.each(e,t.proxy(function(t,e){delete this._supress[e]},this))},o.prototype.pointer=function(t){var i={x:null,y:null};return(t=(t=t.originalEvent||t||e.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},o.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},o.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.fn.owlCarousel=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this),r=n.data("owl.carousel");r||(r=new o(this,"object"==typeof e&&e),n.data("owl.carousel",r),t.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(e,i){r.register({type:o.Type.Event,name:i}),r.$element.on(i+".owl.carousel.core",t.proxy(function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([i]),r[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},r))})),"string"==typeof e&&"_"!==e.charAt(0)&&r[e].apply(r,i)})},t.fn.owlCarousel.Constructor=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(e){this._core=e,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this._core.$element.on(this._handlers)};o.Defaults={autoRefresh:!0,autoRefreshInterval:500},o.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=e.setInterval(t.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},o.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},o.prototype.destroy=function(){var t,i;for(t in e.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoRefresh=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":t.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type))for(var i=this._core.settings,n=i.center&&Math.ceil(i.items/2)||i.items,o=i.center&&-1*n||0,r=(e.property&&void 0!==e.property.value?e.property.value:this._core.current())+o,a=this._core.clones().length,s=t.proxy(function(t,e){this.load(e)},this);o++<n;)this.load(a/2+this._core.relative(r)),a&&t.each(this._core.clones(this._core.relative(r)),s),r++},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this._core.$element.on(this._handlers)};o.Defaults={lazyLoad:!1},o.prototype.load=function(i){var n=this._core.$stage.children().eq(i),o=n&&n.find(".owl-lazy");!o||t.inArray(n.get(0),this._loaded)>-1||(o.each(t.proxy(function(i,n){var o,r=t(n),a=e.devicePixelRatio>1&&r.attr("data-src-retina")||r.attr("data-src")||r.attr("data-srcset");this._core.trigger("load",{element:r,url:a},"lazy"),r.is("img")?r.one("load.owl.lazy",t.proxy(function(){r.css("opacity",1),this._core.trigger("loaded",{element:r,url:a},"lazy")},this)).attr("src",a):r.is("source")?r.one("load.owl.lazy",t.proxy(function(){this._core.trigger("loaded",{element:r,url:a},"lazy")},this)).attr("srcset",a):((o=new Image).onload=t.proxy(function(){r.css({"background-image":'url("'+a+'")',opacity:"1"}),this._core.trigger("loaded",{element:r,url:a},"lazy")},this),o.src=a)},this)),this._loaded.push(n.get(0)))},o.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Lazy=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(i){this._core=i,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&"position"===t.property.name&&(console.log("update called"),this.update())},this),"loaded.owl.lazy":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var n=this;t(e).on("load",function(){n._core.settings.autoHeight&&n.update()}),t(e).resize(function(){n._core.settings.autoHeight&&(null!=n._intervalId&&clearTimeout(n._intervalId),n._intervalId=setTimeout(function(){n.update()},250))})};o.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},o.prototype.update=function(){var e,i=this._core._current,n=i+this._core.settings.items,o=this._core.$stage.children().toArray().slice(i,n),r=[];t.each(o,function(e,i){r.push(t(i).height())}),e=Math.max.apply(null,r),this._core.$stage.parent().height(e).addClass(this._core.settings.autoHeightClass)},o.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(e){this._core=e,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,t(e.content)))}},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",t.proxy(function(t){this.play(t)},this))};o.Defaults={video:!1,videoHeight:!1,videoWidth:!1},o.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",n=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),o=t.attr("data-width")||this._core.settings.videoWidth,r=t.attr("data-height")||this._core.settings.videoHeight,a=t.attr("href");if(!a)throw new Error("Missing video URL.");if((n=a.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}this._videos[a]={type:i,id:n=n[6],width:o,height:r},e.attr("data-video",a),this.thumbnail(t,this._videos[a])},o.prototype.thumbnail=function(e,i){var n,o=i.width&&i.height?'style="width:'+i.width+"px;height:"+i.height+'px;"':"",r=e.find("img"),a="src",s="",l=this._core.settings,d=function(t){n='<div class="owl-video-play-icon"></div>',e.after(l.lazyLoad?'<div class="owl-video-tn '+s+'" '+a+'="'+t+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+t+')"></div>'),e.after(n)};if(e.wrap('<div class="owl-video-wrapper"'+o+"></div>"),this._core.settings.lazyLoad&&(a="data-src",s="owl-lazy"),r.length)return d(r.attr(a)),r.remove(),!1;"youtube"===i.type?d("//img.youtube.com/vi/"+i.id+"/hqdefault.jpg"):"vimeo"===i.type?t.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){d(t[0].thumbnail_large)}}):"vzaar"===i.type&&t.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){d(t.framegrab_url)}})},o.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},o.prototype.play=function(e){var i,n=t(e.target).closest("."+this._core.settings.itemClass),o=this._videos[n.attr("data-video")],r=o.width||"100%",a=o.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),"youtube"===o.type?i='<iframe width="'+r+'" height="'+a+'" src="//www.youtube.com/embed/'+o.id+"?autoplay=1&rel=0&v="+o.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===o.type?i='<iframe src="//player.vimeo.com/video/'+o.id+'?autoplay=1" width="'+r+'" height="'+a+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===o.type&&(i='<iframe frameborder="0"height="'+a+'"width="'+r+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+o.id+'/player?autoplay=true"></iframe>'),t('<div class="owl-video-frame">'+i+"</div>").insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},o.prototype.isInFullScreen=function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return e&&t(e).parent().hasClass("owl-video-frame")},o.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Video=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(e){this.core=e,this.core.options=t.extend({},o.Defaults,this.core.options),this.swapping=!0,this.previous=void 0,this.next=void 0,this.handlers={"change.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":t.proxy(function(t){t.namespace&&(this.swapping="translated"==t.type)},this),"translate.owl.carousel":t.proxy(function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};o.Defaults={animateOut:!1,animateIn:!1},o.prototype.swap=function(){if(1===this.core.settings.items&&t.support.animation&&t.support.transition){this.core.speed(0);var e,i=t.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),o=this.core.$stage.children().eq(this.next),r=this.core.settings.animateIn,a=this.core.settings.animateOut;this.core.current()!==this.previous&&(a&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(t.support.animation.end,i).css({left:e+"px"}).addClass("animated owl-animated-out").addClass(a)),r&&o.one(t.support.animation.end,i).addClass("animated owl-animated-in").addClass(r))}},o.prototype.clear=function(e){t(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},o.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Animate=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(e){this._core=e,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":t.proxy(function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":t.proxy(function(t,e,i){t.namespace&&this.play(e,i)},this),"stop.owl.autoplay":t.proxy(function(t){t.namespace&&this.stop()},this),"mouseover.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=t.extend({},o.Defaults,this._core.options)};o.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},o.prototype._next=function(n){this._call=e.setTimeout(t.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},o.prototype.read=function(){return(new Date).getTime()-this._time},o.prototype.play=function(i,n){var o;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,o=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):e.clearTimeout(this._call),this._time+=this.read()%i-o,this._timeout=i,this._call=e.setTimeout(t.proxy(this._next,this,n),i-o)},o.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,e.clearTimeout(this._call),this._core.leave("rotating"))},o.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,e.clearTimeout(this._call))},o.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){"use strict";var o=function(e){this._core=e,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":t.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+t(e.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())},this),"remove.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&this.draw()},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this.$element.on(this._handlers)};o.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},o.prototype.initialize=function(){var e,i=this._core.settings;for(e in this._controls.$relative=(i.navContainer?t(i.navContainer):t("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=t("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",t.proxy(function(t){this.prev(i.navSpeed)},this)),this._controls.$next=t("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",t.proxy(function(t){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[t('<button role="button">').addClass(i.dotClass).append(t("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?t(i.dotsContainer):t("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",t.proxy(function(e){var n=t(e.target).parent().is(this._controls.$absolute)?t(e.target).index():t(e.target).parent().index();e.preventDefault(),this.to(n,i.dotsSpeed)},this)),this._overrides)this._core[e]=t.proxy(this[e],this)},o.prototype.destroy=function(){var t,e,i,n,o;for(t in o=this._core.settings,this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)"$relative"===e&&o.navContainer?this._controls[e].html(""):this._controls[e].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},o.prototype.update=function(){var t,e,i=this._core.clones().length/2,n=i+this._core.items().length,o=this._core.maximum(!0),r=this._core.settings,a=r.center||r.autoWidth||r.dotsData?1:r.dotsEach||r.items;if("page"!==r.slideBy&&(r.slideBy=Math.min(r.slideBy,r.items)),r.dots||"page"==r.slideBy)for(this._pages=[],t=i,e=0;t<n;t++){if(e>=a||0===e){if(this._pages.push({start:Math.min(o,t-i),end:t-i+a-1}),Math.min(o,t-i)===o)break;e=0}e+=this._core.mergers(this._core.relative(t))}},o.prototype.draw=function(){var e,i=this._core.settings,n=this._core.items().length<=i.items,o=this._core.relative(this._core.current()),r=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!r&&o<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!r&&o>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(e=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==e?this._controls.$absolute.html(this._templates.join("")):e>0?this._controls.$absolute.append(new Array(e+1).join(this._templates[0])):e<0&&this._controls.$absolute.children().slice(e).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(t.inArray(this.current(),this._pages)).addClass("active"))},o.prototype.onTrigger=function(e){var i=this._core.settings;e.page={index:t.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},o.prototype.current=function(){var e=this._core.relative(this._core.current());return t.grep(this._pages,t.proxy(function(t,i){return t.start<=e&&t.end>=e},this)).pop()},o.prototype.getPosition=function(e){var i,n,o=this._core.settings;return"page"==o.slideBy?(i=t.inArray(this.current(),this._pages),n=this._pages.length,e?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,e?i+=o.slideBy:i-=o.slideBy),i},o.prototype.next=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},o.prototype.prev=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},o.prototype.to=function(e,i,n){var o;!n&&this._pages.length?(o=this._pages.length,t.proxy(this._overrides.to,this._core)(this._pages[(e%o+o)%o].start,i)):t.proxy(this._overrides.to,this._core)(e,i)},t.fn.owlCarousel.Constructor.Plugins.Navigation=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){"use strict";var o=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":t.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&t(e).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=e.content}},this),"changed.owl.carousel":t.proxy(function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),o=t.map(this._hashes,function(t,e){return t===n?e:null}).join();if(!o||e.location.hash.slice(1)===o)return;e.location.hash=o}},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this.$element.on(this._handlers),t(e).on("hashchange.owl.navigation",t.proxy(function(t){var i=e.location.hash.substring(1),n=this._core.$stage.children(),o=this._hashes[i]&&n.index(this._hashes[i]);void 0!==o&&o!==this._core.current()&&this._core.to(this._core.relative(o),!1,!0)},this))};o.Defaults={URLhashListener:!1},o.prototype.destroy=function(){var i,n;for(i in t(e).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},t.fn.owlCarousel.Constructor.Plugins.Hash=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=t("<support>").get(0).style,r="Webkit Moz O ms".split(" "),a={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}};function s(e,i){var a=!1,s=e.charAt(0).toUpperCase()+e.slice(1);return t.each((e+" "+r.join(s+" ")+s).split(" "),function(t,e){if(o[e]!==n)return a=!i||e,!1}),a}function l(t){return s(t,!0)}!!s("transition")&&(t.support.transition=new String(l("transition")),t.support.transition.end=a.transition.end[t.support.transition]),!!s("animation")&&(t.support.animation=new String(l("animation")),t.support.animation.end=a.animation.end[t.support.animation]),s("transform")&&(t.support.transform=new String(l("transform")),t.support.transform3d=!!s("perspective"))}(window.Zepto||window.jQuery,window,document),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=8)}([function(t,e,i){"use strict";function n(){}function o(t){var e=self.console[t];return e?function(){for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];n[0]&&(n[0]=function(t,e){return"["+t+"] > "+n[0]}(t)),e.apply(self.console,n)}:n}i.d(e,"a",function(){return l}),i.d(e,"b",function(){return d});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a={trace:n,debug:n,log:n,warn:n,info:n,error:n},s=a,l=function(t){if(!0===t||"object"===(void 0===t?"undefined":r(t))){!function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];i.forEach(function(e){s[e]=t[e]?t[e].bind(t):o(e)})}(t,"debug","log","info","warn","error");try{s.log()}catch(t){s=a}}else s=a},d=a},function(t,e,i){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},o={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,i){for(var n=i,o=0;t.isHeader(e,i);)o+=10,o+=t._readSize(e,i+6),t.isFooter(e,i+10)&&(o+=10),i+=o;if(o>0)return e.subarray(n,n+o)},t._readSize=function(t,e){var i=0;return i=(127&t[e])<<21,i|=(127&t[e+1])<<14,(i|=(127&t[e+2])<<7)|127&t[e+3]},t.getTimeStamp=function(e){for(var i=t.getID3Frames(e),n=0;n<i.length;n++){var o=i[n];if(t.isTimeStampFrame(o))return t._readTimeStamp(o)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var i=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4);return{type:i,size:n,data:e.subarray(10,10+n)}},t.getID3Frames=function(e){for(var i=0,n=[];t.isHeader(e,i);){for(var o=t._readSize(e,i+6),r=(i+=10)+o;i+8<r;){var a=t._getFrameData(e.subarray(i)),s=t._decodeFrame(a);s&&n.push(s),i+=a.size+10}t.isFooter(e,i)&&(i+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,1&e[3]&&(i+=47721858.84),Math.round(i)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var i=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(i.length+1));return{key:e.type,info:i,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var i=1,n=t._utf8ArrayToStr(e.data.subarray(i)),o=t._utf8ArrayToStr(e.data.subarray(i+=n.length+1));return{key:e.type,info:n,data:o}}var r=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:r}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var i=1,n=t._utf8ArrayToStr(e.data.subarray(i)),o=t._utf8ArrayToStr(e.data.subarray(i+=n.length+1));return{key:e.type,info:n,data:o}}var r=t._utf8ArrayToStr(e.data);return{key:e.type,data:r}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.length,n=void 0,o=void 0,r=void 0,a="",s=0;s<i;){if(0===(n=t[s++])&&e)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:o=t[s++],a+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=t[s++],r=t[s++],a+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&r)<<0)}}return a},t}(),o=n._utf8ArrayToStr;e.a=n},function(t,e,i){"use strict";var n=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.subtle=e,this.aesIV=i}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),o=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.subtle=e,this.key=i}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),r=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),i=new Uint32Array(4),n=0;n<4;n++)i[n]=e.getUint32(4*n);return i},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,i=this.subMix,n=i[0],o=i[1],r=i[2],a=i[3],s=this.invSubMix,l=s[0],d=s[1],c=s[2],u=s[3],h=new Uint32Array(256),p=0,f=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=f^f<<1^f<<2^f<<3^f<<4;t[p]=g=g>>>8^255&g^99,e[g]=p;var v=h[p],y=h[v],b=h[y],_=257*h[g]^16843008*g;n[p]=_<<24|_>>>8,o[p]=_<<16|_>>>16,r[p]=_<<8|_>>>24,a[p]=_,l[g]=(_=16843009*b^65537*y^257*v^16843008*p)<<24|_>>>8,d[g]=_<<16|_>>>16,c[g]=_<<8|_>>>24,u[g]=_,p?(p=v^h[h[h[b^v]]],f^=h[h[f]]):p=f=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),i=!0,n=0;n<e.length&&i;)i=e[n]===this.key[n],n++;if(!i){this.key=e;var o=this.keySize=e.length;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size="+o);var r=this.ksRows=4*(o+6+1),a=void 0,s=void 0,l=this.keySchedule=new Uint32Array(r),d=this.invKeySchedule=new Uint32Array(r),c=this.sBox,u=this.rcon,h=this.invSubMix,p=h[0],f=h[1],m=h[2],g=h[3],v=void 0,y=void 0;for(a=0;a<r;a++)a<o?v=l[a]=e[a]:(y=v,a%o==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=u[a/o|0]<<24):o>6&&a%o==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),l[a]=v=(l[a-o]^y)>>>0);for(s=0;s<r;s++)a=r-s,y=3&s?l[a]:l[a-4],d[s]=s<4||a<=4?y:p[c[y>>>24]]^f[c[y>>>16&255]]^m[c[y>>>8&255]]^g[c[255&y]],d[s]=d[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,i){for(var n,o,r=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,d=l[0],c=l[1],u=l[2],h=l[3],p=this.uint8ArrayToUint32Array_(i),f=p[0],m=p[1],g=p[2],v=p[3],y=new Int32Array(t),b=new Int32Array(y.length),_=void 0,w=void 0,x=void 0,T=void 0,C=void 0,k=void 0,E=void 0,S=void 0,A=void 0,O=void 0,I=void 0,D=void 0,P=this.networkToHostOrderSwap;e<y.length;){for(A=P(y[e]),O=P(y[e+1]),I=P(y[e+2]),D=P(y[e+3]),C=A^a[0],k=D^a[1],E=I^a[2],S=O^a[3],n=4,o=1;o<r;o++)w=d[k>>>24]^c[E>>16&255]^u[S>>8&255]^h[255&C]^a[n+1],x=d[E>>>24]^c[S>>16&255]^u[C>>8&255]^h[255&k]^a[n+2],T=d[S>>>24]^c[C>>16&255]^u[k>>8&255]^h[255&E]^a[n+3],C=_=d[C>>>24]^c[k>>16&255]^u[E>>8&255]^h[255&S]^a[n],k=w,E=x,S=T,n+=4;_=s[C>>>24]<<24^s[k>>16&255]<<16^s[E>>8&255]<<8^s[255&S]^a[n],w=s[k>>>24]<<24^s[E>>16&255]<<16^s[S>>8&255]<<8^s[255&C]^a[n+1],x=s[E>>>24]<<24^s[S>>16&255]<<16^s[C>>8&255]<<8^s[255&k]^a[n+2],T=s[S>>>24]<<24^s[C>>16&255]<<16^s[k>>8&255]<<8^s[255&E]^a[n+3],n+=3,b[e]=P(_^f),b[e+1]=P(T^m),b[e+2]=P(x^g),b[e+3]=P(w^v),f=A,m=O,g=I,v=D,e+=4}return b.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),a=i(2),s=i(0),l=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=i,this.logEnabled=!0;try{var n=crypto||self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,i,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.b.log("JS AES decrypt"),this.logEnabled=!1);var d=this.decryptor;d||(this.decryptor=d=new r),d.expandKey(e),a(d.decrypt(t,0,i))}else{this.logEnabled&&(s.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new o(c,e)),this.fastAesKey.expandKey().then(function(o){new n(c,i).decrypt(t,o).catch(function(n){l.onWebCryptoError(n,t,e,i,a)}).then(function(t){a(t)})}).catch(function(n){l.onWebCryptoError(n,t,e,i,a)})}},t.prototype.onWebCryptoError=function(t,e,i,n,o){this.config.enableSoftwareAES?(s.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,i,n,o)):(s.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=l},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,a,s,l,d;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r(i=this._events[t]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(o(i))for(s=Array.prototype.slice.call(arguments,1),a=(d=i.slice()).length,l=0;l<a;l++)d[l].apply(this,s);return!0},i.prototype.on=i.prototype.addListener=function(t,e){var a;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(a=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.once=function(t,e){function i(){this.removeListener(t,i),o||(o=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var o=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,r,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(i=this._events[t]).length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(s=a;s-- >0;)if(i[s]===e||i[s].listener&&i[s].listener===e){r=s;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){!function(e){var i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var o=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return o.path=a.normalizePath(o.path),a.buildURLFromParts(o)}var r=this.parseURL(e);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=a.normalizePath(r.path),a.buildURLFromParts(r)):e;var s=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var d={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(d.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var c=s.path,u=c.substring(0,c.lastIndexOf("/")+1)+r.path;d.path=a.normalizePath(u)}else d.path=s.path,r.params||(d.params=s.params,r.query||(d.query=s.query));return null===d.path&&(d.path=i.alwaysNormalize?a.normalizePath(r.path):r.path),a.buildURLFromParts(d)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(o,"");t.length!==(t=t.replace(r,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=a}()},function(t,e,i){"use strict";function n(t,e){return 255===t[e]&&240==(246&t[e+1])}function o(t,e){return 1&t[e+1]?7:9}function r(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function a(t,e){return!!(e+1<t.length&&n(t,e))}function s(t,e){if(e+1<t.length&&n(t,e)){var i=o(t,e);e+5<t.length&&(i=r(t,e));var a=e+i;if(a===t.length||a+1<t.length&&n(t,a))return!0}return!1}function l(t,e,i,n,o){if(!t.samplerate){var r=function(t,e,i,n){var o,r,a,s,l,d=navigator.userAgent.toLowerCase(),c=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return o=1+((192&e[i+2])>>>6),(r=(60&e[i+2])>>>2)>u.length-1?void t.trigger(Event.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+r}):(s=(1&e[i+2])<<2,m.b.log("manifest codec:"+n+",ADTS data:type:"+o+",sampleingIndex:"+r+"["+u[r]+"Hz],channelConfig:"+(s|=(192&e[i+3])>>>6)),/firefox/i.test(d)?r>=6?(o=5,l=new Array(4),a=r-3):(o=2,l=new Array(2),a=r):-1!==d.indexOf("android")?(o=2,l=new Array(2),a=r):(o=5,l=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&r>=6?a=r-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(r>=6&&1===s||/vivaldi/i.test(d))||!n&&1===s)&&(o=2,l=new Array(2)),a=r)),l[0]=o<<3,l[0]|=(14&r)>>1,l[1]|=(1&r)<<7,l[1]|=s<<3,5===o&&(l[1]|=(14&a)>>1,l[2]=(1&a)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:u[r],channelCount:s,codec:"mp4a.40."+o,manifestCodec:c})}(e,i,n,o);t.config=r.config,t.samplerate=r.samplerate,t.channelCount=r.channelCount,t.codec=r.codec,t.manifestCodec=r.manifestCodec,m.b.log("parsed codec:"+t.codec+",rate:"+r.samplerate+",nb channel:"+r.channelCount)}}function d(t){return 9216e4/t}function c(t,e,i,n,a){var s,l,d=t.length;if(s=o(t,e),l=r(t,e),(l-=s)>0&&e+s+l<=d)return{headerLength:s,frameLength:l,stamp:i+n*a}}function u(t,e,i,n,o){var r=c(e,i,n,o,d(t.samplerate));if(r){var a=r.stamp,s=r.headerLength,l=r.frameLength,u={unit:e.subarray(i+s,i+s+l),pts:a,dts:a};return t.samples.push(u),t.len+=l,{sample:u,length:l+s}}}var h=i(1),p=i(2),f=i(4),m=i(0),g=i(3),v=function(){function t(e,i,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=n,this.remuxer=i}return t.prototype.resetInitSegment=function(t,e,i,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(g.a.getID3Data(t,0)||[]).length,i=t.length;e<i;e++)if(s(t,e))return m.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,i,n){for(var o=this._audioTrack,r=g.a.getID3Data(t,0)||[],s=g.a.getTimeStamp(r),d=s?90*s:9e4*e,c=0,h=d,p=t.length,f=r.length,v=[{pts:h,dts:h,data:r}];f<p-1;)if(a(t,f)&&f+5<p){l(o,this.observer,t,f,o.manifestCodec);var y=u(o,t,f,d,c);if(!y){m.b.log("Unable to parse AAC frame");break}f+=y.length,h=y.sample.pts,c++}else g.a.isHeader(t,f)?(r=g.a.getID3Data(t,f),v.push({pts:h,dts:h,data:r}),f+=r.length):f++;this.remuxer.remux(o,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},e,i,n)},t.prototype.destroy=function(){},t}(),y=Math.pow(2,32)-1,b=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.remuxer=i}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,i,n,o){if(e&&e.byteLength){var r=this.initData=t.parseInitSegment(e);null==i&&(i="mp4a.40.5"),null==n&&(n="avc1.42e01e");var a={};r.audio&&r.video?a.audiovideo={container:"video/mp4",codec:i+","+n,initSegment:o?e:null}:(r.audio&&(a.audio={container:"audio/mp4",codec:i,initSegment:o?e:null}),r.video&&(a.video={container:"video/mp4",codec:n,initSegment:o?e:null})),this.observer.trigger(h.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else i&&(this.audioCodec=i),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var i=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return i<0?4294967296+i:i},t.writeUint32=function(t,e,i){t.data&&(e+=t.start,t=t.data),t[e]=i>>24,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},t.findBox=function(e,i){var n,o,r,a,s,l,d,c=[];if(e.data?(l=e.start,a=e.end,e=e.data):(l=0,a=e.byteLength),!i.length)return null;for(n=l;n<a;)o=t.readUint32(e,n),r=t.bin2str(e.subarray(n+4,n+8)),d=o>1?n+o:a,r===i[0]&&(1===i.length?c.push({data:e,start:n+8,end:d}):(s=t.findBox({data:e,start:n+8,end:d},i.slice(1))).length&&(c=c.concat(s))),n=d;return c},t.parseInitSegment=function(e){var i=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var n=t.findBox(e,["tkhd"])[0];if(n){var o=n.data[n.start],r=0===o?12:20,a=t.readUint32(n,r),s=t.findBox(e,["mdia","mdhd"])[0];if(s){var l=t.readUint32(s,r=0===(o=s.data[s.start])?12:20),d=t.findBox(e,["mdia","hdlr"])[0];if(d){var c={soun:"audio",vide:"video"}[t.bin2str(d.data.subarray(d.start+8,d.start+12))];if(c){var u=t.findBox(e,["mdia","minf","stbl","stsd"]);if(u.length){var h=t.bin2str((u=u[0]).data.subarray(u.start+12,u.start+16));m.b.log("MP4Demuxer:"+c+":"+h+" found")}i[a]={timescale:l,type:c},i[c]={timescale:l,id:a}}}}}}),i},t.getStartDTS=function(e,i){var n,o,r;return n=t.findBox(i,["moof","traf"]),o=[].concat.apply([],n.map(function(i){return t.findBox(i,["tfhd"]).map(function(n){var o,r;return o=t.readUint32(n,4),r=e[o].timescale||9e4,t.findBox(i,["tfdt"]).map(function(e){var i,n;return i=e.data[e.start],n=t.readUint32(e,4),1===i&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0]/r})})),r=Math.min.apply(null,o),isFinite(r)?r:0},t.offsetStartDTS=function(e,i,n){t.findBox(i,["moof","traf"]).map(function(i){return t.findBox(i,["tfhd"]).map(function(o){var r=t.readUint32(o,4),a=e[r].timescale||9e4;t.findBox(i,["tfdt"]).map(function(e){var i=e.data[e.start],o=t.readUint32(e,4);if(0===i)t.writeUint32(e,4,o-n*a);else{o*=Math.pow(2,32),o+=t.readUint32(e,8),o-=n*a,o=Math.max(o,0);var r=Math.floor(o/(y+1)),s=Math.floor(o%(y+1));t.writeUint32(e,4,r),t.writeUint32(e,8,s)}})})})},t.prototype.append=function(e,i,n,o){var r=this.initData;r||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),r=this.initData);var a,s=this.initPTS;if(void 0===s){var l=t.getStartDTS(r,e);this.initPTS=s=l-i,this.observer.trigger(h.a.INIT_PTS_FOUND,{initPTS:s})}t.offsetStartDTS(r,e,s),a=t.getStartDTS(r,e),this.remuxer.remux(r.audio,r.video,null,null,a,n,o,e)},t.prototype.destroy=function(){},t}(),_={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,i,n,o){if(!(i+24>e.length)){var r=this.parseHeader(e,i);if(r&&i+r.frameLength<=e.length){var a=n+o*(9e4*r.samplesPerFrame/r.sampleRate),s={unit:e.subarray(i,i+r.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(s),t.len+=r.frameLength,{sample:s,length:r.frameLength}}}},parseHeader:function(t,e){var i=t[e+1]>>3&3,n=t[e+1]>>1&3,o=t[e+2]>>4&15,r=t[e+2]>>2&3;if(1!==i&&0!==o&&15!==o&&3!==r){var a=_.SamplingRateMap[3*(3===i?0:2===i?1:2)+r],s=_.SamplesCoefficients[i][n],l=_.BytesInSlot[n],d=8*s*l;return{sampleRate:a,channelCount:t[e+3]>>6==3?1:2,frameLength:parseInt(s*(1e3*_.BitratesMap[14*(3===i?3-n:3===n?3:4)+o-1])/a+(t[e+2]>>1&1),10)*l,samplesPerFrame:d}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var i=this.parseHeader(t,e),n=4;i&&i.frameLength&&(n=i.frameLength);var o=e+n;if(o===t.length||o+1<t.length&&this.isHeaderPattern(t,o))return!0}return!1}},w=_,x=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,i=t.byteLength-e,n=new Uint8Array(4),o=Math.min(4,e);if(0===o)throw new Error("no bytes available");n.set(t.subarray(i,i+o)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*o,this.bytesAvailable-=o},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),i=this.word>>>32-e;return t>32&&m.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?i<<e|this.readBits(e):i},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,i=8,n=8;for(e=0;e<t;e++)0!==n&&(n=(i+this.readEG()+256)%256),i=0===n?i:n},t.prototype.readSPS=function(){var t,e,i,n,o,r,a,s=0,l=0,d=0,c=0,u=this.readUByte.bind(this),h=this.readBits.bind(this),p=this.readUEG.bind(this),f=this.readBoolean.bind(this),m=this.skipBits.bind(this),g=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(u(),t=u(),h(5),m(3),u(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=p();if(3===b&&m(1),v(),v(),m(1),f())for(r=3!==b?8:12,a=0;a<r;a++)f()&&y(a<6?16:64)}v();var _=p();if(0===_)p();else if(1===_)for(m(1),g(),g(),e=p(),a=0;a<e;a++)g();v(),m(1),i=p(),n=p(),0===(o=h(1))&&m(1),m(1),f()&&(s=p(),l=p(),d=p(),c=p());var w=[1,1];if(f()&&f())switch(u()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(i+1)-2*s-2*l),height:(2-o)*(n+1)*16-(o?2:4)*(d+c),pixelRatio:w}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),T=function(){function t(e,i,n,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.decryptdata=n,this.discardEPB=o,this.decrypter=new f.a(e,i)}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,i,n){var o=t[e].unit,r=o.subarray(16,o.length-o.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length),s=this;this.decryptBuffer(a,function(r){r=new Uint8Array(r),o.set(r,16),n||s.decryptAacSamples(t,e+1,i)})},t.prototype.decryptAacSamples=function(t,e,i){for(;;e++){if(e>=t.length)return void i();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,i,n),!n)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,i=new Int8Array(e),n=0,o=32;o<=t.length-16;o+=160,n+=16)i.set(t.subarray(o,o+16),n);return i},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var i=0,n=32;n<=t.length-16;n+=160,i+=16)t.set(e.subarray(i,i+16),n);return t},t.prototype.decryptAvcSample=function(t,e,i,n,o,r){var a=this.discardEPB(o.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){o.data=l.getAvcDecryptedUnit(a,s),r||l.decryptAvcSamples(t,e,i+1,n)})},t.prototype.decryptAvcSamples=function(t,e,i,n){for(;;e++,i=0){if(e>=t.length)return void n();for(var o=t[e].units;!(i>=o.length);i++){var r=o[i];if(!(r.length<=48||1!==r.type&&5!==r.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,i,n,r,a),!a)return}}}},t}(),C={video:0,audio:1,id3:2,text:3},k=function(){function t(e,i,n,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=n,this.typeSupported=o,this.remuxer=i,this.sampleAes=null}return t.prototype.setDecryptData=function(t){this.sampleAes=null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?new T(this.observer,this.config,t,this.discardEPB):null},t.probe=function(e){var i=t._syncOffset(e);return!(i<0||(i&&m.b.warn("MPEG2-TS detected but first sync word found @ offset "+i+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),i=0;i<e;){if(71===t[i]&&71===t[i+188]&&71===t[i+376])return i;i++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:C[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,i,n,o){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",o),this._audioTrack=t.createTrack("audio",o),this._id3Track=t.createTrack("id3",o),this._txtTrack=t.createTrack("text",o),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=i,this.videoCodec=n,this._duration=o},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,i,n,o){var r,a,s,l,d,c=e.length,u=!1;this.contiguous=n;var f=this.pmtParsed,g=this._avcTrack,v=this._audioTrack,y=this._id3Track,b=g.pid,_=v.pid,w=y.pid,x=this._pmtId,T=g.pesData,C=v.pesData,k=y.pesData,E=this._parsePAT,S=this._parsePMT,A=this._parsePES,O=this._parseAVCPES.bind(this),I=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),L=t._syncOffset(e);for(c-=(c+L)%188,r=L;r<c;r+=188)if(71===e[r]){if(a=!!(64&e[r+1]),s=((31&e[r+1])<<8)+e[r+2],(48&e[r+3])>>4>1){if((l=r+5+e[r+4])===r+188)continue}else l=r+4;switch(s){case b:a&&(T&&(d=A(T))&&O(d,!1),T={data:[],size:0}),T&&(T.data.push(e.subarray(l,r+188)),T.size+=r+188-l);break;case _:a&&(C&&(d=A(C))&&(v.isAAC?I(d):D(d)),C={data:[],size:0}),C&&(C.data.push(e.subarray(l,r+188)),C.size+=r+188-l);break;case w:a&&(k&&(d=A(k))&&P(d),k={data:[],size:0}),k&&(k.data.push(e.subarray(l,r+188)),k.size+=r+188-l);break;case 0:a&&(l+=e[l]+1),x=this._pmtId=E(e,l);break;case x:a&&(l+=e[l]+1);var R=S(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=R.avc)>0&&(g.pid=b),(_=R.audio)>0&&(v.pid=_,v.isAAC=R.isAAC),(w=R.id3)>0&&(y.pid=w),u&&!f&&(m.b.log("reparse from beginning"),u=!1,r=L-188),f=this.pmtParsed=!0;break;case 17:case 8191:break;default:u=!0}}else this.observer.trigger(h.a.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(d=A(T))?(O(d,!0),g.pesData=null):g.pesData=T,C&&(d=A(C))?(v.isAAC?I(d):D(d),v.pesData=null):(C&&C.size&&m.b.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=C),k&&(d=A(k))?(P(d),y.pesData=null):y.pesData=k,null==this.sampleAes?this.remuxer.remux(v,g,y,this._txtTrack,i,n,o):this.decryptAndRemux(v,g,y,this._txtTrack,i,n,o)},t.prototype.decryptAndRemux=function(t,e,i,n,o,r,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,i,n,o,r,a)})}else this.decryptAndRemuxAvc(t,e,i,n,o,r,a)},t.prototype.decryptAndRemuxAvc=function(t,e,i,n,o,r,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,i,n,o,r,a)})}else this.remuxer.remux(t,e,i,n,o,r,a)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,i,n){var o,r,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(o=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<o;){switch(r=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){m.b.log("unkown stream type:"+t[e]);break}case 15:-1===a.audio&&(a.audio=r);break;case 21:-1===a.id3&&(a.id3=r);break;case 219:if(!n){m.b.log("unkown stream type:"+t[e]);break}case 27:-1===a.avc&&(a.avc=r);break;case 3:case 4:i?-1===a.audio&&(a.audio=r,a.isAAC=!1):m.b.log("MPEG audio found, not supported in this browser for now");break;case 36:m.b.warn("HEVC stream type found, not supported for now");break;default:m.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return a},t.prototype._parsePES=function(t){var e,i,n,o,r,a,s,l,d=0,c=t.data;if(!t||0===t.size)return null;for(;c[0].length<19&&c.length>1;){var u=new Uint8Array(c[0].length+c[1].length);u.set(c[0]),u.set(c[1],c[0].length),c[0]=u,c.splice(1,1)}if(1===((e=c[0])[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;192&(i=e[7])&&((a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2)>4294967295&&(a-=8589934592),64&i?((s=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(m.b.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),t.size-=l=(o=e[8])+9,r=new Uint8Array(t.size);for(var h=0,p=c.length;h<p;h++){var f=(e=c[h]).byteLength;if(l){if(l>f){l-=f;continue}e=e.subarray(l),f-=l,l=0}r.set(e,d),d+=f}return n&&(n-=o+3),{data:r,pts:a,dts:s,len:n}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var i=e.samples,n=i.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,i.push(t)):e.dropped++}t.debug.length&&m.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var i,n,o,r=this,a=this._avcTrack,s=this._parseAVCNALu(t.data),l=this.avcSample,d=!1,c=this.pushAccesUnit.bind(this),u=function(t,e,i,n){return{key:t,pts:e,dts:i,units:[],debug:n}};t.data=null,l&&s.length&&!a.audFound&&(c(l,a),l=this.avcSample=u(!1,t.pts,t.dts,"")),s.forEach(function(e){switch(e.type){case 1:n=!0,l||(l=r.avcSample=u(!0,t.pts,t.dts,"")),l.frame=!0;var s=e.data;if(d&&s.length>4){var h=new x(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=r.avcSample=u(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(i=new x(r.discardEPB(e.data))).readUByte();for(var p=0,f=0,m=!1,g=0;!m&&i.bytesAvailable>1;){p=0;do{p+=g=i.readUByte()}while(255===g);f=0;do{f+=g=i.readUByte()}while(255===g);if(4===p&&0!==i.bytesAvailable){if(m=!0,181===i.readUByte()&&49===i.readUShort()&&1195456820===i.readUInt()&&3===i.readUByte()){var v=i.readUByte(),y=31&v,b=[v,i.readUByte()];for(o=0;o<y;o++)b.push(i.readUByte()),b.push(i.readUByte()),b.push(i.readUByte());r._insertSampleInOrder(r._txtTrack.samples,{type:3,pts:t.pts,bytes:b})}}else if(f<i.bytesAvailable)for(o=0;o<f;o++)i.readUByte()}break;case 7:if(n=!0,d=!0,!a.sps){var _=(i=new x(e.data)).readSPS();a.width=_.width,a.height=_.height,a.pixelRatio=_.pixelRatio,a.sps=[e.data],a.duration=r._duration;var w=e.data.subarray(1,4),T="avc1.";for(o=0;o<3;o++){var C=w[o].toString(16);C.length<2&&(C="0"+C),T+=C}a.codec=T}break;case 8:n=!0,a.pps||(a.pps=[e.data]);break;case 9:n=!1,a.audFound=!0,l&&c(l,a),l=r.avcSample=u(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}l&&n&&l.units.push(e)}),e&&l&&(c(l,a),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var i=t.length;if(i>0){if(e.pts>=t[i-1].pts)t.push(e);else for(var n=i-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var i=this._avcTrack.samples;t=i[i.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e,i,n,o,r=0,a=t.byteLength,s=this._avcTrack,l=s.naluState||0,d=l,c=[],u=-1;for(-1===l&&(u=0,o=31&t[0],l=0,r=1);r<a;)if(e=t[r++],l)if(1!==l)if(e)if(1===e){if(u>=0)n={data:t.subarray(u,r-l-1),type:o},c.push(n);else{var h=this._getLastNalUnit();if(h&&(d&&r<=4-d&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-d)),(i=r-l-1)>0)){var p=new Uint8Array(h.data.byteLength+i);p.set(h.data,0),p.set(t.subarray(0,i),h.data.byteLength),h.data=p}}r<a?(u=r,o=31&t[r],l=0):l=-1}else l=0;else l=3;else l=e?0:2;else l=e?0:1;if(u>=0&&l>=0&&(n={data:t.subarray(u,a),type:o,state:l},c.push(n)),0===c.length){var f=this._getLastNalUnit();if(f){var m=new Uint8Array(f.data.byteLength+t.byteLength);m.set(f.data,0),m.set(t,f.data.byteLength),f.data=m}}return s.naluState=l,c},t.prototype.discardEPB=function(t){for(var e,i,n=t.byteLength,o=[],r=1;r<n-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(o.push(r+2),r+=2):r++;if(0===o.length)return t;e=n-o.length,i=new Uint8Array(e);var a=0;for(r=0;r<e;a++,r++)a===o[0]&&(a++,o.shift()),i[r]=t[a];return i},t.prototype._parseAACPES=function(t){var e,i,n,o,r,s,c,f=this._audioTrack,g=t.data,v=t.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var _=new Uint8Array(y.byteLength+g.byteLength);_.set(y,0),_.set(g,y.byteLength),g=_}for(n=0,r=g.length;n<r-1&&!a(g,n);n++);if(!n||(n<r-1?(s="AAC PES did not start with ADTS header,offset:"+n,c=!1):(s="no ADTS header found in AAC PES",c=!0),m.b.warn("parsing error:"+s),this.observer.trigger(h.a.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_PARSING_ERROR,fatal:c,reason:s}),!c)){if(l(f,this.observer,g,n,this.audioCodec),i=0,e=d(f.samplerate),y&&b){var w=b+e;Math.abs(w-v)>1&&(m.b.log("AAC: align PTS for overlapping frames by "+Math.round((w-v)/90)),v=w)}for(;n<r;)if(a(g,n)&&n+5<r){var x=u(f,g,n,v,i);if(!x)break;n+=x.length,o=x.sample.pts,i++}else n++;y=n<r?g.subarray(n,r):null,this.aacOverFlow=y,this.aacLastPTS=o}},t.prototype._parseMPEGPES=function(t){for(var e=t.data,i=e.length,n=0,o=0,r=t.pts;o<i;)if(w.isHeader(e,o)){var a=w.appendFrame(this._audioTrack,e,o,r,n);if(!a)break;o+=a.length,n++}else o++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),E=function(){function t(e,i,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=n,this.remuxer=i}return t.prototype.resetInitSegment=function(t,e,i,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,i,n=g.a.getID3Data(t,0);if(n&&void 0!==g.a.getTimeStamp(n))for(e=n.length,i=Math.min(t.length-1,e+100);e<i;e++)if(w.probe(t,e))return m.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,i,n){for(var o=g.a.getID3Data(t,0),r=g.a.getTimeStamp(o),a=r?90*r:9e4*e,s=o.length,l=t.length,d=0,c=0,u=this._audioTrack,h=[{pts:a,dts:a,data:o}];s<l;)if(w.isHeader(t,s)){var p=w.appendFrame(u,t,s,a,d);if(!p)break;s+=p.length,c=p.sample.pts,d++}else g.a.isHeader(t,s)?(o=g.a.getID3Data(t,s),h.push({pts:c,dts:c,data:o}),s+=o.length):s++;this.remuxer.remux(u,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,i,n)},t.prototype.destroy=function(){},t}(),S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),A=Math.pow(2,32)-1,O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:i,audio:n};var o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=r,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,l,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,o))},t.box=function(t){for(var e,i=Array.prototype.slice.call(arguments,1),n=8,o=i.length,r=o;o--;)n+=i[o].byteLength;for((e=new Uint8Array(n))[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),o=0,n=8;o<r;o++)e.set(i[o],n),n+=i[o].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,i){i*=e;var n=Math.floor(i/(A+1)),o=Math.floor(i%(A+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return t.box(t.types.minf,"audio"===e.type?t.box(t.types.smhd,t.SMHD):t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,i,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,i))},t.moov=function(e){for(var i=e.length,n=[];i--;)n[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var i=e.length,n=[];i--;)n[i]=t.trex(e[i]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,i){i*=e;var n=Math.floor(i/(A+1)),o=Math.floor(i%(A+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,r)},t.sdtp=function(e){var i,n,o=e.samples||[],r=new Uint8Array(4+o.length);for(n=0;n<o.length;n++)r[n+4]=(i=o[n].flags).dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,r)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var i,n,o,r=[],a=[];for(i=0;i<e.sps.length;i++)r.push((o=(n=e.sps[i]).byteLength)>>>8&255),r.push(255&o),r=r.concat(Array.prototype.slice.call(n));for(i=0;i<e.pps.length;i++)a.push((o=(n=e.pps[i]).byteLength)>>>8&255),a.push(255&o),a=a.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(a))),l=e.width,d=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var i=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var i=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))},t.stsd=function(e){return t.box(t.types.stsd,t.STSD,"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.mp4a(e):t.mp3(e):t.avc1(e))},t.tkhd=function(e){var i=e.id,n=e.duration*e.timescale,o=e.width,r=e.height,a=Math.floor(n/(A+1)),s=Math.floor(n%(A+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,r>>8&255,255&r,0,0]))},t.traf=function(e,i){var n=t.sdtp(e),o=e.id,r=Math.floor(i/(A+1)),a=Math.floor(i%(A+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(e,n.length+16+20+8+16+8+8),n)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var i=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,i){var n,o,r,a,s,l,d=e.samples||[],c=d.length,u=12+16*c,h=new Uint8Array(u);for(h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,(i+=8+u)>>>24&255,i>>>16&255,i>>>8&255,255&i],0),n=0;n<c;n++)h.set([(r=(o=d[n]).duration)>>>24&255,r>>>16&255,r>>>8&255,255&r,(a=o.size)>>>24&255,a>>>16&255,a>>>8&255,255&a,(s=o.flags).isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,(l=o.cts)>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var i,n=t.moov(e);return(i=new Uint8Array(t.FTYP.byteLength+n.byteLength)).set(t.FTYP),i.set(n,t.FTYP.byteLength),i},t}(),I=function(){function t(e,i,n,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=i,this.typeSupported=n;var r=navigator.userAgent;this.isSafari=o&&o.indexOf("Apple")>-1&&r&&!r.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,i,n,o,r,a){if(this.ISGenerated||this.generateIS(t,e,o),this.ISGenerated){var s=t.samples.length,l=e.samples.length,d=o,c=o;if(s&&l){var u=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;d+=Math.max(0,u),c+=Math.max(0,-u)}if(s){t.timescale||(m.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,o));var p=this.remuxAudio(t,d,r,a);if(l){var f=void 0;p&&(f=p.endPTS-p.startPTS),e.timescale||(m.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,o)),this.remuxVideo(e,c,r,f,a)}}else{var g=void 0;l&&(g=this.remuxVideo(e,c,r,a)),g&&t.codec&&this.remuxEmptyAudio(t,d,r,g)}}i.samples.length&&this.remuxID3(i,o),n.samples.length&&this.remuxText(n,o),this.observer.trigger(h.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,i){var n,o,r=this.observer,a=t.samples,s=e.samples,l=this.typeSupported,d="audio/mp4",c={},u={tracks:c},f=void 0===this._initPTS;if(f&&(n=o=1/0),t.config&&a.length&&(t.timescale=t.samplerate,m.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(d="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),c.audio={container:d,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:O.initSegment([t]),metadata:{channelCount:t.channelCount}},f&&(n=o=a[0].pts-t.inputTimeScale*i)),e.sps&&e.pps&&s.length){var g=e.inputTimeScale;e.timescale=g,c.video={container:"video/mp4",codec:e.codec,initSegment:O.initSegment([e]),metadata:{width:e.width,height:e.height}},f&&(n=Math.min(n,s[0].pts-g*i),o=Math.min(o,s[0].dts-g*i),this.observer.trigger(h.a.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(c).length?(r.trigger(h.a.FRAG_PARSING_INIT_SEGMENT,u),this.ISGenerated=!0,f&&(this._initPTS=n,this._initDTS=o)):r.trigger(h.a.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,i,n,o){var r,a,s,l,d,c,u,f=8,g=t.timescale,v=t.samples,y=[],b=v.length,_=this._PTSNormalize,w=this._initDTS,x=this.nextAvcDts,T=this.isSafari;T&&(i|=v.length&&x&&(o&&Math.abs(e-x/g)<.1||Math.abs(v[0].pts-x-w)<g/5)),i||(x=e*g),v.forEach(function(t){t.pts=_(t.pts-w,x),t.dts=_(t.dts-w,x)}),v.sort(function(t,e){return t.dts-e.dts||t.pts-e.pts||t.id-e.id});var C=v.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(C<0){m.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(C/90)+" ms to overcome this issue");for(var k=0;k<v.length;k++)v[k].dts+=C}var E=v[0];d=Math.max(E.dts,0),l=Math.max(E.pts,0);var S=Math.round((d-x)/90);i&&S&&(S>1?m.b.log("AVC:"+S+" ms hole between fragments detected,filling it"):S<-1&&m.b.log("AVC:"+-S+" ms overlapping between fragments detected"),v[0].dts=d=x,l=Math.max(l-S,x),v[0].pts=l,m.b.log("Video/PTS/DTS adjusted: "+Math.round(l/90)+"/"+Math.round(d/90)+",delta:"+S+" ms")),E=v[v.length-1],u=Math.max(E.dts,0),c=Math.max(E.pts,0,u),T&&(r=Math.round((u-d)/(v.length-1)));for(var A=0,I=0,D=0;D<b;D++){for(var P=v[D],L=P.units,R=L.length,B=0,N=0;N<R;N++)B+=L[N].data.length;I+=B,A+=R,P.length=B,P.dts=T?d+D*r:Math.max(P.dts,d),P.pts=Math.max(P.pts,P.dts)}var M=I+4*A+8;try{a=new Uint8Array(M)}catch(t){return void this.observer.trigger(h.a.ERROR,{type:p.b.MUX_ERROR,details:p.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var F=new DataView(a.buffer);F.setUint32(0,M),a.set(O.types.mdat,4);for(var j=0;j<b;j++){for(var W=v[j],z=W.units,H=0,q=void 0,V=0,U=z.length;V<U;V++){var G=z[V],$=G.data,K=G.data.byteLength;F.setUint32(f,K),a.set($,f+=4),f+=K,H+=4+K}if(T)q=Math.max(0,r*Math.round((W.pts-W.dts)/r));else{if(j<b-1)r=v[j+1].dts-W.dts;else{var Y=this.config,X=W.dts-v[j>0?j-1:j].dts;if(Y.stretchShortVideoTrack){var Q=Math.floor(Math.min(Y.maxBufferHole,Y.maxSeekHole)*g),Z=(n?l+n*g:this.nextAudioPts)-W.pts;Z>Q?((r=Z-X)<0&&(r=X),m.b.log("It is approximately "+Z/90+" ms to the next segment; using duration "+r/90+" ms for the last video frame.")):r=X}else r=X}q=Math.round(W.pts-W.dts)}y.push({size:H,duration:r,cts:q,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:W.key?2:1,isNonSync:W.key?0:1}})}this.nextAvcDts=u+r;var J=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var tt=y[0].flags;tt.dependsOn=2,tt.isNonSync=0}t.samples=y,s=O.moof(t.sequenceNumber++,d,t),t.samples=[];var et={data1:s,data2:a,startPTS:l/g,endPTS:(c+r)/g,startDTS:d/g,endDTS:this.nextAvcDts/g,type:"video",nb:y.length,dropped:J};return this.observer.trigger(h.a.FRAG_PARSING_DATA,et),et},t.prototype.remuxAudio=function(t,e,i,n){var o,r,a,s,l,d,c,u=t.inputTimeScale,f=u/t.timescale,g=(t.isAAC?1024:1152)*f,v=this._PTSNormalize,y=this._initDTS,b=!t.isAAC&&this.typeSupported.mpeg,_=t.samples,w=[],x=this.nextAudioPts;if(i|=_.length&&x&&(n&&Math.abs(e-x/u)<.1||Math.abs(_[0].pts-x-y)<20*g),_.forEach(function(t){t.pts=t.dts=v(t.pts-y,e*u)}),0!==(_=_.filter(function(t){return t.pts>=0})).length){if(i||(x=n?e*u:_[0].pts),t.isAAC)for(var T=this.config.maxAudioFramesDrift,C=0,k=x;C<_.length;){var E,A=_[C];E=A.pts-k;var I=Math.abs(1e3*E/u);if(E<=-T*g)m.b.warn("Dropping 1 audio frame @ "+(k/u).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),_.splice(C,1),t.len-=A.unit.length;else if(E>=T*g&&I<1e4&&k){var D=Math.round(E/g);m.b.warn("Injecting "+D+" audio frame @ "+(k/u).toFixed(3)+"s due to "+Math.round(1e3*E/u)+" ms gap.");for(var P=0;P<D;P++){var L=Math.max(k,0);(a=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(m.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=A.unit.subarray()),_.splice(C,0,{unit:a,pts:L,dts:L}),t.len+=a.length,k+=g,C++}A.pts=A.dts=k,k+=g,C++}else Math.abs(E),A.pts=A.dts=k,k+=g,C++}for(var R=0,B=_.length;R<B;R++){var N=_[R],M=N.unit,F=N.pts;if(void 0!==c)r.duration=Math.round((F-c)/f);else{var j=Math.round(1e3*(F-x)/u),W=0;if(i&&t.isAAC&&j){if(j>0&&j<1e4)W=Math.round((F-x)/g),m.b.log(j+" ms hole between AAC samples detected,filling it"),W>0&&((a=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(a=M.subarray()),t.len+=W*a.length);else if(j<-12){m.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(x/u).toFixed(3)+"s/"+(F/u).toFixed(3)+"s/"+-j+"ms"),t.len-=M.byteLength;continue}F=x}if(d=F,!(t.len>0))return;var z=b?t.len:t.len+8;o=b?0:8;try{s=new Uint8Array(z)}catch(t){return void this.observer.trigger(h.a.ERROR,{type:p.b.MUX_ERROR,details:p.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating audio mdat "+z})}b||(new DataView(s.buffer).setUint32(0,z),s.set(O.types.mdat,4));for(var H=0;H<W;H++)(a=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(m.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=M.subarray()),s.set(a,o),o+=a.byteLength,w.push(r={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}})}s.set(M,o);var q=M.byteLength;o+=q,w.push(r={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),c=F}var V=0,U=w.length;if(U>=2&&(r.duration=V=w[U-2].duration),U){this.nextAudioPts=x=c+f*V,t.len=0,t.samples=w,l=b?new Uint8Array:O.moof(t.sequenceNumber++,d/f,t),t.samples=[];var G=d/u,$=x/u,K={data1:l,data2:s,startPTS:G,endPTS:$,startDTS:G,endDTS:$,type:"audio",nb:U};return this.observer.trigger(h.a.FRAG_PARSING_DATA,K),K}return null}},t.prototype.remuxEmptyAudio=function(t,e,i,n){var o=t.inputTimeScale,r=this.nextAudioPts,a=(void 0!==r?r:n.startDTS*o)+this._initDTS,s=o/(t.samplerate?t.samplerate:o)*1024,l=Math.ceil((n.endDTS*o+this._initDTS-a)/s),d=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(m.b.warn("remux empty Audio"),d){for(var c=[],u=0;u<l;u++){var h=a+u*s;c.push({unit:d,pts:h,dts:h}),t.len+=d.length}t.samples=c,this.remuxAudio(t,e,i)}else m.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.prototype.remuxID3=function(t,e){var i,n=t.samples.length,o=t.inputTimeScale,r=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)(i=t.samples[s]).pts=(i.pts-r)/o,i.dts=(i.dts-a)/o;this.observer.trigger(h.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var i,n=t.samples.length,o=t.inputTimeScale,r=this._initPTS;if(n){for(var a=0;a<n;a++)(i=t.samples[a]).pts=(i.pts-r)/o;this.observer.trigger(h.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var i;if(void 0===e)return t;for(i=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=i;return t},t}(),D=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,i,n,o,r,a,s){var l=this.observer,d="";t&&(d+="audio"),e&&(d+="video"),l.trigger(h.a.FRAG_PARSING_DATA,{data1:s,startPTS:o,startDTS:o,type:d,nb:1,dropped:0}),l.trigger(h.a.FRAG_PARSED)},t}(),P=function(){function t(e,i,n,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.typeSupported=i,this.config=n,this.vendor=o}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,i,n,o,r,a,s,l,d,c,u){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var p=this.decrypter;null==p&&(p=this.decrypter=new f.a(this.observer,this.config));var m,g=this;try{m=performance.now()}catch(t){m=Date.now()}p.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var p;try{p=performance.now()}catch(t){p=Date.now()}g.observer.trigger(h.a.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:p}}),g.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),n,o,r,a,s,l,d,c,u)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),n,o,r,a,s,l,d,c,u)},t.prototype.pushDecrypted=function(t,e,i,n,o,r,a,s,l,d,c,u){var f=this.demuxer;if(!f||a&&!this.probe(t)){for(var m=this.observer,g=this.typeSupported,y=this.config,_=[{demux:k,remux:I},{demux:b,remux:D},{demux:v,remux:I},{demux:E,remux:I}],w=0,x=_.length;w<x;w++){var T=_[w],C=T.demux.probe;if(C(t)){var S=this.remuxer=new T.remux(m,y,g,this.vendor);f=new T.demux(m,S,y,g),this.probe=C;break}}if(!f)return void m.trigger(h.a.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=f}var A=this.remuxer;(a||s)&&(f.resetInitSegment(i,n,o,d),A.resetInitSegment()),a&&(f.resetTimeStamp(u),A.resetTimeStamp(u)),"function"==typeof f.setDecryptData&&f.setDecryptData(e),f.append(t,r,l,c)},t}();e.a=P},function(t,e,i){"use strict";function n(t,e){var i=R[e];return!!i&&!0===i[t.slice(0,4)]}function o(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)return null;for(var i=null,n=0;n<t.length;n++){var o=t[n];o.id===e&&(i=o)}return i}function s(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function l(t,e,i){var n=t[e],o=t[i],r=o.startPTS;isNaN(r)?o.start=i>e?n.start+n.duration:Math.max(n.start-o.duration,0):i>e?(n.duration=r-n.start,n.duration<0&&A.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(o.duration=n.start-r,o.duration<0&&A.b.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!"))}function d(t,e,i,n,o,r){var a=i;if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-i);e.deltaPTS=isNaN(e.deltaPTS)?s:Math.max(s,e.deltaPTS),a=Math.max(i,e.startPTS),i=Math.min(i,e.startPTS),n=Math.max(n,e.endPTS),o=Math.min(o,e.startDTS),r=Math.max(r,e.endDTS)}var d=i-e.start;e.start=e.startPTS=i,e.maxStartPTS=a,e.endPTS=n,e.startDTS=o,e.endDTS=r,e.duration=n-i;var c,u,h,p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;for((u=t.fragments)[c=p-t.startSN]=e,h=c;h>0;h--)l(u,h,h-1);for(h=c;h<u.length-1;h++)l(u,h,h+1);return t.PTSKnown=!0,d}function c(t,e){var i,n=Math.max(t.startSN,e.startSN)-e.startSN,o=Math.min(t.endSN,e.endSN)-e.startSN,r=e.startSN-t.startSN,a=t.fragments,s=e.fragments,l=0;if(o<n)e.PTSKnown=!1;else{for(var c=n;c<=o;c++){var u=a[r+c],h=s[c];h&&u&&(l=u.cc-h.cc,isNaN(u.startPTS)||(h.start=h.startPTS=u.startPTS,h.endPTS=u.endPTS,h.duration=u.duration,h.backtracked=u.backtracked,h.dropped=u.dropped,i=h))}if(l)for(A.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<s.length;c++)s[c].cc+=l;if(i)d(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(r>=0&&r<a.length){var p=a[r].start;for(c=0;c<s.length;c++)s[c].start+=p}e.PTSKnown=t.PTSKnown}}function u(t,e){e.fragments.forEach(function(e){if(e){var i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}),e.PTSKnown=!0}function h(t,e,i){if(function(t,e,i){var n=!1;return e&&e.details&&i&&(i.endCC>i.startCC||t&&t.cc<i.startCC)&&(n=!0),n}(t,e,i)){var n=function(t,e){var i=t.fragments,n=e.fragments;if(n.length&&i.length){var o=function(t,e){for(var i=null,n=0;n<t.length;n+=1){var o=t[n];if(o&&o.cc===e){i=o;break}}return i}(i,n[0].cc);return!o||o&&!o.startPTS?void A.b.log("No frag in previous level to align on"):o}A.b.log("No fragments to align")}(e.details,i);n&&(A.b.log("Adjusting PTS using last level due to CC increase within current level"),u(n.start,i))}if(!1===i.PTSKnown&&e&&e.details){var o=(i.programDateTime-e.details.programDateTime)/1e3+e.details.fragments[0].start;isNaN(o)||(A.b.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),u(o,i))}}function p(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Ct,this.regionList=[]}function f(){this.values=Object.create(null)}function m(t,e,i,n){var o=n?t.split(n):[t];for(var r in o)if("string"==typeof o[r]){var a=o[r].split(i);2===a.length&&e(a[0],a[1])}}function g(t,e,i){function n(){var e=function(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function o(){t=t.replace(/^\s+/,"")}var r=t;if(o(),e.startTime=n(),o(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),o(),e.endTime=n(),o(),function(t,e){var n=new f;m(t,function(t,e){switch(t){case"region":for(var o=i.length-1;o>=0;o--)if(i[o].id===e){n.set(t,i[o].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var r=e.split(","),a=r[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===r.length&&n.alt("lineAlign",r[1],["start",Et,"end"]);break;case"position":r=e.split(","),n.percent(t,r[0]),2===r.length&&n.alt("positionAlign",r[1],["start",Et,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",Et,"end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var o=n.get("line","auto");"auto"===o&&-1===kt.line&&(o=-1),e.line=o,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",Et);var r=n.get("position","auto");"auto"===r&&50===kt.position&&(r="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=r}(t,e)}function v(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function y(t,e,i,n){for(var o,r,a,s,l,d=window.VTTCue||window.TextTrackCue,c=0;c<n.rows.length;c++)if(a=!0,s=0,l="",!(o=n.rows[c]).isEmpty()){for(var u=0;u<o.chars.length;u++)o.chars[u].uchar.match(/\s/)&&a?s++:(l+=o.chars[u].uchar,a=!1);o.cueStartTime=e,e===i&&(i+=1e-4),r=new d(e,i,v(l.trim())),s>=16?s--:s++,r.line=navigator.userAgent.match(/Firefox\//)?c+1:c>7?c-2:c+1,r.align="left",r.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(r)}}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function w(t,e,i,n){return Math.min(e,n)-Math.max(t,i)}function x(t){for(var e=[],i=0;i<t.length;i++)"subtitles"===t[i].kind&&e.push(t[i]);return e}Object.defineProperty(e,"__esModule",{value:!0});var T={};i.d(T,"newCue",function(){return y});var C=i(6),k=i.n(C),E=i(1),S=i(2),A=i(0),O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.unregisterListeners()},t.prototype.isEventHandler=function(){return"object"===O(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){try{(function(t,e){var i="on"+t.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,e)}).call(this,t,e).call()}catch(e){A.b.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(E.a.ERROR,{type:S.b.OTHER_ERROR,details:S.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),D=/^(\d+)x(\d+)$/,P=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,L=function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(i)&&(this[i]=e[i])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var i=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)i[n]=parseInt(e.slice(2*n,2*n+2),16);return i}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=D.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,i={};for(P.lastIndex=0;null!==(e=P.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[e[1]]=n}return i},t}(),R={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},B=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),N=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,M=/#EXT-X-MEDIA:(.*)/g,F=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),j=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,W=function(){function t(){r(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return B(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=k.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),z=function(){function t(){r(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var i=t;return t&&t.method&&t.uri&&!t.iv&&((i=new W).method=t.method,i.baseuri=t.baseuri,i.reluri=t.reluri,i.iv=this.createInitializationVector(e)),i},t.prototype.cloneObj=function(t){return JSON.parse(JSON.stringify(t))},B(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=k.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);t[0]=1===e.length?this.lastByteRangeEndOffset||0:parseInt(e[1]),t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),t}(),H=function(t){function e(i){r(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MANIFEST_LOADING,E.a.LEVEL_LOADING,E.a.AUDIO_TRACK_LOADING,E.a.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},I.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:"manifest"})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:"audioTrack",id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},e.prototype.load=function(t,e){var i=this.loaders[e.type];if(void 0!==i){var n=i.context;if(n&&n.url===t)return void A.b.trace("playlist request ongoing");A.b.warn("abort previous loader for type:"+e.type),i.abort()}var o,r,a=this.hls.config,s=void 0,l=void 0,d=void 0,c=void 0;"manifest"===e.type?(s=a.manifestLoadingMaxRetry,l=a.manifestLoadingTimeOut,d=a.manifestLoadingRetryDelay,c=a.manifestLoadingMaxRetryTimeout):"level"===e.type?(s=0,l=a.levelLoadingTimeOut):(s=a.levelLoadingMaxRetry,l=a.levelLoadingTimeOut,d=a.levelLoadingRetryDelay,c=a.levelLoadingMaxRetryTimeout,A.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),i=this.loaders[e.type]=e.loader=void 0!==a.pLoader?new a.pLoader(a):new a.loader(a),e.url=t,e.responseType="",o={timeout:l,maxRetry:s,retryDelay:d,maxRetryDelay:c},r={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(e,o,r)},e.prototype.resolve=function(t,e){return k.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.prototype.parseMasterPlaylist=function(t,e){var i=[],o=void 0;for(N.lastIndex=0;null!=(o=N.exec(t));){var r={},a=r.attrs=new L(o[1]);r.url=this.resolve(o[2],e);var s=a.decimalResolution("RESOLUTION");s&&(r.width=s.width,r.height=s.height),r.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),r.name=a.NAME,function(t,e){["video","audio"].forEach(function(i){var o=t.filter(function(t){return n(t,i)});if(o.length){var r=o.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[i+"Codec"]=r.length>0?r[0]:o[0],t=t.filter(function(t){return-1===o.indexOf(t)})}}),e.unknownCodecs=t}([].concat((a.CODECS||"").split(/[ ,]+/)),r),r.videoCodec&&-1!==r.videoCodec.indexOf("avc1")&&(r.videoCodec=this.avc1toavcoti(r.videoCodec)),i.push(r)}return i},e.prototype.parseMasterPlaylistMedia=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=void 0,r=[],s=0;for(M.lastIndex=0;null!==(o=M.exec(t));){var l={},d=new L(o[1]);if(d.TYPE===i){if(l.groupId=d["GROUP-ID"],l.name=d.NAME,l.type=i,l.default="YES"===d.DEFAULT,l.autoselect="YES"===d.AUTOSELECT,l.forced="YES"===d.FORCED,d.URI&&(l.url=this.resolve(d.URI,e)),l.lang=d.LANGUAGE,l.name||(l.name=l.lang),n.length){var c=a(n,l.groupId);l.audioCodec=c?c.codec:n[0].codec}l.id=s++,r.push(l)}}return r},e.prototype.avc1toavcoti=function(t){var e,i=t.split(".");return i.length>2?(e=i.shift()+".",e+=parseInt(i.shift()).toString(16),e+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):e=t,e},e.prototype.parseLevelPlaylist=function(t,e,i,n){var o,r,a=0,s=0,l={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},d=new W,c=0,u=null,h=new z;for(F.lastIndex=0;null!==(o=F.exec(t));){var p=o[1];if(p){h.duration=parseFloat(p);var f=(" "+o[2]).slice(1);h.title=f||null,h.tagList.push(f?["INF",p,f]:["INF",p])}else if(o[3]){if(!isNaN(h.duration)){var m=a++;h.type=n,h.start=s,h.levelkey=d,h.sn=m,h.level=i,h.cc=c,h.baseurl=e,h.relurl=(" "+o[3]).slice(1),l.fragments.push(h),u=h,s+=h.duration,h=new z}}else if(o[4]){if(h.rawByteRange=(" "+o[4]).slice(1),u){var g=u.byteRangeEndOffset;g&&(h.lastByteRangeEndOffset=g)}}else if(o[5])h.rawProgramDateTime=(" "+o[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(o[5]))-1e3*s));else{for(o=o[0].match(j),r=1;r<o.length&&void 0===o[r];r++);var v=(" "+o[r+1]).slice(1),y=(" "+o[r+2]).slice(1);switch(o[r]){case"#":h.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":l.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(v);break;case"TARGETDURATION":l.targetduration=parseFloat(v);break;case"VERSION":l.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":c++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(v);break;case"KEY":var b=new L(v),_=b.enumeratedString("METHOD"),w=b.URI,x=b.hexadecimalInteger("IV");_&&(d=new W,w&&["AES-128","SAMPLE-AES"].indexOf(_)>=0&&(d.method=_,d.baseuri=e,d.reluri=w,d.key=null,d.iv=x));break;case"START":var T=new L(v).decimalFloatingPoint("TIME-OFFSET");isNaN(T)||(l.startTimeOffset=T);break;case"MAP":var C=new L(v);h.relurl=C.URI,h.rawByteRange=C.BYTERANGE,h.baseurl=e,h.level=i,h.type=n,h.sn="initSegment",l.initSegment=h,h=new z;break;default:A.b.warn("line parsed but not handled: "+o)}}}return(h=u)&&!h.relurl&&(l.fragments.pop(),s-=h.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=c,l},e.prototype.loadsuccess=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.data,r=t.url,a=i.type,s=i.id,l=i.level,d=this.hls;if(this.loaders[a]=void 0,void 0!==r&&0!==r.indexOf("data:")||(r=i.url),e.tload=performance.now(),0===o.indexOf("#EXTM3U"))if(o.indexOf("#EXTINF:")>0){var c="audioTrack"!==a&&"subtitleTrack"!==a,u=isNaN(l)?isNaN(s)?0:s:l,h=this.parseLevelPlaylist(o,r,u,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");h.tload=e.tload,"manifest"===a&&d.trigger(E.a.MANIFEST_LOADED,{levels:[{url:r,details:h}],audioTracks:[],url:r,stats:e,networkDetails:n}),e.tparsed=performance.now(),h.targetduration?c?d.trigger(E.a.LEVEL_LOADED,{details:h,level:l||0,id:s||0,stats:e,networkDetails:n}):"audioTrack"===a?d.trigger(E.a.AUDIO_TRACK_LOADED,{details:h,id:s,stats:e,networkDetails:n}):"subtitleTrack"===a&&d.trigger(E.a.SUBTITLE_TRACK_LOADED,{details:h,id:s,stats:e,networkDetails:n}):d.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:S.a.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"invalid targetduration",networkDetails:n})}else{var p=this.parseMasterPlaylist(o,r);if(p.length){var f=p.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),m=this.parseMasterPlaylistMedia(o,r,"AUDIO",f),g=this.parseMasterPlaylistMedia(o,r,"SUBTITLES");if(m.length){var v=!1;m.forEach(function(t){t.url||(v=!0)}),!1===v&&p[0].audioCodec&&!p[0].attrs.AUDIO&&(A.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main"}))}d.trigger(E.a.MANIFEST_LOADED,{levels:p,audioTracks:m,subtitles:g,url:r,stats:e,networkDetails:n})}else d.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:S.a.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"no level found in manifest",networkDetails:n})}else d.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:S.a.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"no EXTM3U delimiter",networkDetails:n})},e.prototype.loaderror=function(t,e){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.loader;switch(e.type){case"manifest":i=S.a.MANIFEST_LOAD_ERROR,n=!0;break;case"level":i=S.a.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":i=S.a.AUDIO_TRACK_LOAD_ERROR,n=!1}r&&(r.abort(),this.loaders[e.type]=void 0),this.hls.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:i,fatal:n,url:r.url,loader:r,response:t,context:e,networkDetails:o})},e.prototype.loadtimeout=function(t,e){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.loader;switch(e.type){case"manifest":i=S.a.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":i=S.a.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":i=S.a.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}r&&(r.abort(),this.loaders[e.type]=void 0),this.hls.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:i,fatal:n,url:r.url,loader:r,context:e,networkDetails:o})},e}(I),q=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.FRAG_LOADING));return n.loaders={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){var t=this.loaders;for(var e in t){var i=t[e];i&&i.destroy()}this.loaders={},I.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,i=e.type,n=this.loaders[i],o=this.hls.config;e.loaded=0,n&&(A.b.warn("abort previous fragment loader for type:"+i),n.abort()),n=this.loaders[i]=e.loader=void 0!==o.fLoader?new o.fLoader(o):new o.loader(o);var r,a,s=void 0;s={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var l=e.byteRangeStartOffset,d=e.byteRangeEndOffset;isNaN(l)||isNaN(d)||(s.rangeStart=l,s.rangeEnd=d),r={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(s,r,a)},e.prototype.loadsuccess=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.data,r=i.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(E.a.FRAG_LOADED,{payload:o,frag:r,stats:e,networkDetails:n})},e.prototype.loaderror=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:S.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:i})},e.prototype.loadtimeout=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:S.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:i})},e.prototype.loadprogress=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.frag;o.loaded=t.loaded,this.hls.trigger(E.a.FRAG_LOAD_PROGRESS,{frag:o,stats:t,networkDetails:n})},e}(I),V=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},I.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,i=e.type,n=this.loaders[i],o=e.decryptdata,r=o.uri;if(r!==this.decrypturl||null===this.decryptkey){var a,s,l,d=this.hls.config;n&&(A.b.warn("abort previous key loader for type:"+i),n.abort()),e.loader=this.loaders[i]=new d.loader(d),this.decrypturl=r,this.decryptkey=null,a={url:r,frag:e,responseType:"arraybuffer"},s={timeout:d.fragLoadingTimeOut,maxRetry:d.fragLoadingMaxRetry,retryDelay:d.fragLoadingRetryDelay,maxRetryDelay:d.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(a,s,l)}else this.decryptkey&&(o.key=this.decryptkey,this.hls.trigger(E.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,i){var n=i.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(E.a.KEY_LOADED,{frag:n})},e.prototype.loaderror=function(t,e){var i=e.frag,n=i.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:S.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:t})},e.prototype.loadtimeout=function(t,e){var i=e.frag,n=i.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(E.a.ERROR,{type:S.b.NETWORK_ERROR,details:S.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},e}(I),U=function(t,e){for(var i=0,n=t.length-1,o=null,r=null;i<=n;){var a=e(r=t[o=(i+n)/2|0]);if(a>0)i=o+1;else{if(!(a<0))return r;n=o-1}}return null},G={isBuffered:function(t,e){try{if(t)for(var i=t.buffered,n=0;n<i.length;n++)if(e>=i.start(n)&&e<=i.end(n))return!0}catch(t){}return!1},bufferInfo:function(t,e,i){try{if(t){var n,o=t.buffered,r=[];for(n=0;n<o.length;n++)r.push({start:o.start(n),end:o.end(n)});return this.bufferedInfo(r,e,i)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,i){var n,o,r,a,s,l=[];for(t.sort(function(t,e){return t.start-e.start||e.end-t.end}),s=0;s<t.length;s++){var d=l.length;if(d){var c=l[d-1].end;t[s].start-c<i?t[s].end>c&&(l[d-1].end=t[s].end):l.push(t[s])}else l.push(t[s])}for(s=0,n=0,o=r=e;s<l.length;s++){var u=l[s].start,h=l[s].end;if(e+i>=u&&e<h)o=u,n=(r=h)-e;else if(e+i<u){a=u;break}}return{len:n,start:o,end:r,nextStart:a}}},$=i(7),K=i(5),Y=i.n(K),X=i(9),Q=i.n(X),Z=s(),J=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.id=i;var n=this.observer=new Y.a,o=e.config;n.trigger=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];n.emit.apply(n,[t,t].concat(i))},n.off=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];n.removeListener.apply(n,[t].concat(i))};var r=(function(t,i){(i=i||{}).frag=this.frag,i.id=this.id,e.trigger(t,i)}).bind(this);n.on(E.a.FRAG_DECRYPTED,r),n.on(E.a.FRAG_PARSING_INIT_SEGMENT,r),n.on(E.a.FRAG_PARSING_DATA,r),n.on(E.a.FRAG_PARSED,r),n.on(E.a.ERROR,r),n.on(E.a.FRAG_PARSING_METADATA,r),n.on(E.a.FRAG_PARSING_USERDATA,r),n.on(E.a.INIT_PTS_FOUND,r);var a={mp4:Z.isTypeSupported("video/mp4"),mpeg:Z.isTypeSupported("audio/mpeg"),mp3:Z.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(o.enableWorker&&"undefined"!=typeof Worker){A.b.log("demuxing in webworker");var l=void 0;try{l=this.w=Q()(10),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(t){e.trigger(E.a.ERROR,{type:S.b.OTHER_ERROR,details:S.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:a,vendor:s,id:i,config:JSON.stringify(o)})}catch(t){A.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&URL.revokeObjectURL(l.objectURL),this.demuxer=new $.a(n,a,o,s),this.w=void 0}}else this.demuxer=new $.a(n,a,o,s)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var i=this.observer;i&&(i.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,i,n,o,r,a,s){var l=this.w,d=isNaN(o.startDTS)?o.start:o.startDTS,c=o.decryptdata,u=this.frag,h=!(u&&o.cc===u.cc),p=!(u&&o.level===u.level),f=!p&&u&&o.sn===u.sn+1;if(h&&A.b.log(this.id+":discontinuity detected"),p&&A.b.log(this.id+":switch detected"),this.frag=o,l)l.postMessage({cmd:"demux",data:t,decryptdata:c,initSegment:e,audioCodec:i,videoCodec:n,timeOffset:d,discontinuity:h,trackSwitch:p,contiguous:f,duration:r,accurateTimeOffset:a,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,c,e,i,n,d,h,p,f,r,a,s)}},t.prototype.onWorkerMessage=function(t){var e=t.data,i=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case E.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,i.trigger(e.event,e.data)}},t}(),tt=function(t){for(var e="",i=t.length,n=0;n<i;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e},et=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),it={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},nt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.MANIFEST_LOADING,E.a.MANIFEST_PARSED,E.a.LEVEL_LOADED,E.a.KEY_LOADED,E.a.FRAG_LOADED,E.a.FRAG_LOAD_EMERGENCY_ABORTED,E.a.FRAG_PARSING_INIT_SEGMENT,E.a.FRAG_PARSING_DATA,E.a.FRAG_PARSED,E.a.ERROR,E.a.AUDIO_TRACK_SWITCHING,E.a.AUDIO_TRACK_SWITCHED,E.a.BUFFER_CREATED,E.a.BUFFER_APPENDED,E.a.BUFFER_FLUSHED));return n.config=i.config,n.audioCodecSwap=!1,n.ticks=0,n._state=it.STOPPED,n.ontick=n.tick.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),I.prototype.destroy.call(this),this.state=it.STOPPED},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&-1===t&&(A.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=it.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=it.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=it.STOPPED,this.forceStartLoad=!1},e.prototype.tick=function(){1==++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){switch(this.state){case it.ERROR:break;case it.BUFFER_FLUSHING:this.fragLoadError=0;break;case it.IDLE:this._doTickIdle();break;case it.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=it.IDLE);break;case it.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),i=this.retryDate;(!i||e>=i||this.media&&this.media.seeking)&&(A.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=it.IDLE)}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&e.startFragPrefetch)){var n;n=this.loadedmetadata?i.currentTime:this.nextLoadPosition;var o=t.nextLoadLevel,r=this.levels[o];if(r){var a=r.bitrate,s=void 0;s=a?Math.max(8*e.maxBufferSize/a,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var l=G.bufferInfo(this.mediaBuffer?this.mediaBuffer:i,n,e.maxBufferHole),d=l.len;if(!(d>=s)){A.b.trace("buffer length of "+d.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=o;var c=r.details;if(void 0===c||!0===c.live&&this.levelLastLoaded!==o)return void(this.state=it.WAITING_LEVEL);var u=this.fragPrevious;if(!c.live&&u&&!u.backtracked&&u.sn===c.endSN&&!l.nextStart&&Math.min(i.duration,u.start+u.duration)-Math.max(l.end,u.start)<=Math.max(.2,u.duration)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(E.a.BUFFER_EOS,h),void(this.state=it.ENDED)}this._fetchPayloadOrEos(n,l,c)}}}},e.prototype._fetchPayloadOrEos=function(t,e,i){var n=this.fragPrevious,o=this.level,r=i.fragments,a=r.length;if(0!==a){var s=r[0].start,l=r[a-1].start+r[a-1].duration,d=e.end,c=void 0;if(i.initSegment&&!i.initSegment.data)c=i.initSegment;else if(i.live){var u=this.config.initialLiveManifestSize;if(a<u)return void A.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+u);if(null===(c=this._ensureFragmentAtLivePoint(i,d,s,l,n,r,a)))return}else d<s&&(c=r[0]);c||(c=this._findFragment(s,n,a,r,d,l,i)),c&&this._loadFragmentOrKey(c,o,i,t,d)}},e.prototype._ensureFragmentAtLivePoint=function(t,e,i,n,o,r,a){var s=this.hls.config,l=this.media,d=void 0;if(e<Math.max(i-s.maxFragLookUpTolerance,n-(void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration))){var c=this.liveSyncPosition=this.computeLivePosition(i,t);A.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),e=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c),this.nextLoadPosition=c}if(t.PTSKnown&&e>n&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(o){var u=o.sn+1;if(u>=t.startSN&&u<=t.endSN){var h=r[u-t.startSN];o.cc===h.cc&&A.b.log("live playlist, switching playlist, load frag with next SN: "+(d=h).sn)}d||(d=U(r,function(t){return o.cc-t.cc}))&&A.b.log("live playlist, switching playlist, load frag with same CC: "+d.sn)}d||(d=r[Math.min(a-1,Math.round(a/2))],A.b.log("live playlist, switching playlist, unknown, load middle frag : "+d.sn))}return d},e.prototype._findFragment=function(t,e,i,n,o,r,a){var s=this.hls.config,l=void 0,d=void 0,c=s.maxFragLookUpTolerance,u=e?n[e.sn-n[0].sn+1]:void 0,h=function(t){var e=Math.min(c,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=o?1:t.start-e>o&&t.start?-1:0};if(o<r?(o>r-c&&(c=0),d=u&&!h(u)?u:U(n,h)):d=n[i-1],d){var p=(l=d).sn-a.startSN,f=n[p-1],m=n[p+1];if(e&&l.sn===e.sn)if(e&&l.level===e.level&&!l.backtracked)if(l.sn<a.endSN){var g=e.deltaPTS;g&&g>s.maxBufferHole&&e.dropped&&p?(l=f,A.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):A.b.log("SN just loaded, load next one: "+(l=m).sn)}else l=null;else l.backtracked&&(m&&m.backtracked?(A.b.warn("Already backtracked from fragment "+m.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+m.sn),l=m):(A.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,f?(f.loadCounter&&f.loadCounter--,(l=f).backtracked=!0):p&&(l=null)))}return l},e.prototype._loadFragmentOrKey=function(t,e,i,n,o){var r=this.hls,a=r.config;if(!t.decryptdata||null==t.decryptdata.uri||null!=t.decryptdata.key){if(A.b.log("Loading "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+e+", currentTime:"+n.toFixed(3)+",bufferEnd:"+o.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var s=a.fragLoadingLoopThreshold;if(t.loadCounter>s&&Math.abs(this.fragLoadIdx-t.loadIdx)<s)return void r.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,t.autoLevel=r.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),r.trigger(E.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new J(r,"main")),void(this.state=it.FRAG_LOADING)}A.b.log("Loading key for "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+e),this.state=it.KEY_LOADING,r.trigger(E.a.KEY_LOADING,{frag:t})},e.prototype.getBufferedFrag=function(t){return U(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t,e,i=this.media;if(i&&i.readyState&&!1===i.seeking&&((e=i.currentTime)>i.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),G.isBuffered(i,e)?t=this.getBufferedFrag(e):G.isBuffered(i,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(E.a.FRAG_CHANGED,{frag:n});var o=n.level;this.fragPlaying&&this.fragPlaying.level===o||this.hls.trigger(E.a.LEVEL_SWITCHED,{level:o}),this.fragPlaying=n}}},e.prototype.immediateLevelSwitch=function(){if(A.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,G.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,i=void 0,n=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)i=0;else{var o=this.fragLastKbps;i=o&&this.fragCurrent?this.fragCurrent.duration*this.levels[this.hls.nextLoadLevel].bitrate/(1e3*o)+1:0}if((n=this.getBufferedFrag(t.currentTime+i))&&(n=this.followingBufferedFrag(n))){var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=it.BUFFER_FLUSHING;var i={startOffset:t,endOffset:e};this.altAudio&&(i.type="video"),this.hls.trigger(E.a.BUFFER_FLUSHING,i)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(A.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0,t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,i=this.config;isNaN(e)||A.b.log("media seeking to "+e.toFixed(3));var n=G.bufferInfo(this.mediaBuffer?this.mediaBuffer:t,e,this.config.maxBufferHole);if(this.state===it.FRAG_LOADING){var o=this.fragCurrent;if(0===n.len&&o){var r=i.maxFragLookUpTolerance;e<o.start-r||e>o.start+o.duration+r?(o.loader&&(A.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=it.IDLE):A.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===it.ENDED&&(0===n.len&&(this.fragPrevious=0),this.state=it.IDLE);t&&(this.lastCurrentTime=e),this.state!==it.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*i.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||A.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){A.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){A.b.log("trigger BUFFER_RESET"),this.hls.trigger(E.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e,i=!1,n=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(i=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=i&&n,this.audioCodecSwitch&&A.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var o=this.config;(o.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(o.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,i=t.level,n=this.levels[this.levelLastLoaded],o=this.levels[i],r=e.totalduration,a=0;if(A.b.log("level "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var s=o.details;s&&e.fragments.length>0?(c(s,e),this.liveSyncPosition=this.computeLivePosition(a=e.fragments[0].start,s),e.PTSKnown&&!isNaN(a)?A.b.log("live playlist sliding:"+a.toFixed(3)):(A.b.log("live playlist - outdated PTS, unknown sliding"),h(this.fragPrevious,n,e))):(A.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,h(this.fragPrevious,n,e))}else e.PTSKnown=!1;if(o.details=e,this.levelLastLoaded=i,this.hls.trigger(E.a.LEVEL_UPDATED,{details:e,level:i}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;isNaN(l)?e.live?(this.startPosition=this.computeLivePosition(a,e),A.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(A.b.log("negative start time offset "+l+", count from end of last fragment"),l=a+r+l),A.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===it.WAITING_LEVEL&&(this.state=it.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===it.KEY_LOADING&&(this.state=it.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag;if(this.state===it.FRAG_LOADING&&e&&"main"===i.type&&i.level===e.level&&i.sn===e.sn){var n=t.stats,o=this.levels[e.level],r=o.details;if(A.b.log("Loaded  "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=n,!0===i.bitrateTest&&this.hls.nextLoadLevel)this.state=it.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(E.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=it.IDLE,n.tparsed=n.tbuffered=performance.now(),r.initSegment.data=t.payload,this.hls.trigger(E.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else{this.state=it.PARSING;var a=r.totalduration,s=e.level,l=e.sn,d=this.config.defaultAudioCodec||o.audioCodec;this.audioCodecSwap&&(A.b.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,A.b.log("Parsing "+l+" of ["+r.startSN+" ,"+r.endSN+"],level "+s+", cc "+e.cc);var c=this.demuxer;c||(c=this.demuxer=new J(this.hls,"main"));var u=this.media;c.push(t.payload,r.initSegment?r.initSegment.data:[],d,o.videoCodec,e,a,!(u&&u.seeking)&&(r.PTSKnown||!r.live),void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===it.PARSING){var n,o,r=t.tracks;if(r.audio&&this.altAudio&&delete r.audio,o=r.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(A.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&A.b.log("Android: force audio codec to "+(a="mp4a.40.2")),o.levelCodec=a,o.id=t.id}for(n in(o=r.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=t.id),this.hls.trigger(E.a.BUFFER_CODECS,r),r){A.b.log("main track:"+n+",container:"+(o=r[n]).container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var l=o.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(E.a.BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,i=this.fragCurrent,n=t.frag;if(i&&"main"===t.id&&n.sn===i.sn&&n.level===i.level&&("audio"!==t.type||!this.altAudio)&&this.state===it.PARSING){var o=this.levels[this.level],r=i;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),A.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)A.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=o.details;if(!a||r.sn!==a.startSN)return A.b.warn("missing video frame(s), backtracking fragment"),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=it.IDLE,this.fragPrevious=r,void this.tick();A.b.warn("missing video frame(s) on first frag, appending with gap")}else r.backtracked=!1;var s=d(o.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(E.a.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(i){i&&i.length&&e.state===it.PARSING&&(e.appended=!0,e.pendingBuffering=!0,l.trigger(E.a.BUFFER_APPENDING,{type:t.type,data:i,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===it.PARSING&&(this.stats.tparsed=performance.now(),this.state=it.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=t.id;if(!t.url){if(this.mediaBuffer!==this.media){A.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(A.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=it.IDLE}var n=this.hls;n.trigger(E.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=!!this.hls.audioTracks[t.id].url;if(e){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(A.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=e,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,i=void 0,n=void 0,o=!1;for(var r in e){var a=e[r];"main"===a.id?(n=r,i=a,"video"===r&&(this.videoBuffer=e[r].buffer)):o=!0}o&&i?(A.b.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==it.PARSING&&e!==it.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==it.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;A.b.log("main buffered : "+tt(e.buffered));var i=this._bufferedFrags.filter(function(t){return G.isBuffered(e,(t.startPTS+t.endPTS)/2)});i.push(t),this._bufferedFrags=i.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(E.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=it.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var i=!!this.media&&G.isBuffered(this.media,this.media.currentTime)&&G.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case S.a.FRAG_LOAD_ERROR:case S.a.FRAG_LOAD_TIMEOUT:case S.a.KEY_LOAD_ERROR:case S.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);e.loadCounter=0,A.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=it.FRAG_LOADING_WAITING_RETRY}else A.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=it.ERROR;break;case S.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(i?(this._reduceMaxBufferLength(e.duration),this.state=it.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=it.ERROR));break;case S.a.LEVEL_LOAD_ERROR:case S.a.LEVEL_LOAD_TIMEOUT:this.state!==it.ERROR&&(t.fatal?(this.state=it.ERROR,A.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==it.WAITING_LEVEL||(this.state=it.IDLE));break;case S.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==it.PARSING&&this.state!==it.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=it.IDLE):(A.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,A.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*e.fragLoadingLoopThreshold))},e.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var i=t.currentTime,n=this.mediaBuffer?this.mediaBuffer:t,o=n.buffered;if(!this.loadedmetadata&&o.length){this.loadedmetadata=!0;var r=t.seeking?i:this.startPosition,a=G.isBuffered(n,r),s=o.start(0),l=!a&&Math.abs(r-s)<e.maxSeekHole;(i!==r||l)&&(A.b.log("target start position:"+r),l&&A.b.log("target start position not buffered, seek to buffered.start(0) "+(r=s)),A.b.log("adjust currentTime from "+i+" to "+r),t.currentTime=r)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var d=G.bufferInfo(t,i,0),c=!(t.paused||t.ended||0===t.buffered.length);if(i!==this.lastCurrentTime)this.stallReported&&(A.b.warn("playback not stuck anymore @"+i+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(c){var u=performance.now(),h=this.hls;if(this.stalled){var p=u-this.stalled,f=d.len,m=this.nudgeRetry||0;if(f<=.5&&p>1e3*e.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,A.b.warn("playback stalling in low buffer @"+i),h.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:f}));var g=d.nextStart,v=g-i;if(g&&v<e.maxSeekHole&&v>0){this.nudgeRetry=++m;var y=m*e.nudgeOffset;A.b.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+g+" + nudge "+y),t.currentTime=g+y,this.stalled=void 0,h.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:g+y-i})}}else if(f>.5&&p>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,A.b.warn("playback stalling in high buffer @"+i),h.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:f})),this.stalled=void 0,this.nudgeRetry=++m,m<e.nudgeMaxRetry){var b=t.currentTime,_=b+m*e.nudgeOffset;A.b.log("adjust currentTime from "+b+" to "+_),t.currentTime=_,h.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else A.b.error("still stuck in high buffer @"+i+" after "+e.nudgeMaxRetry+", raise fatal error"),h.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=u,this.stallReported=!1}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=it.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return G.isBuffered(t,(e.startPTS+e.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=it.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){return t+Math.max(0,e.totalduration-(void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration))},et(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,A.b.log("main stream:"+e+"->"+t),this.hls.trigger(E.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(I),ot=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),rt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MANIFEST_LOADED,E.a.LEVEL_LOADED,E.a.FRAG_LOADED,E.a.ERROR));return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},e.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],i=void 0,n={},r=null,a=!1,s=!1,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,a=a||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===l&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),void 0===(r=n[t.bitrate])?(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)):r.url.push(t.url)}),!0===a&&!0===s&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,i=t.videoCodec;return(!e||o(e))&&(!i||o(i))}),t.audioTracks&&(d=t.audioTracks.filter(function(t){return!t.audioCodec||o(t.audioCodec,"audio")})),e.length>0){i=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var c=0;c<e.length;c++)if(e[c].bitrate===i){this._firstLevel=c,A.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(E.a.MANIFEST_PARSED,{levels:e,audioTracks:d,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:a,altAudio:d.length>0})}else this.hls.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,i=this.hls;if(t>=0&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){A.b.log("switching to level "+t),this.currentLevelIndex=t;var n=e[t];n.level=t,i.trigger(E.a.LEVEL_SWITCH,n),i.trigger(E.a.LEVEL_SWITCHING,n)}var o=e[t],r=o.details;if(!r||!0===r.live){var a=o.urlId;i.trigger(E.a.LEVEL_LOADING,{url:o.url[a],level:t,id:a})}}else i.trigger(E.a.ERROR,{type:S.b.OTHER_ERROR,details:S.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(!0!==t.fatal){var e=!1,i=!1,n=void 0;switch(t.details){case S.a.FRAG_LOAD_ERROR:case S.a.FRAG_LOAD_TIMEOUT:case S.a.FRAG_LOOP_LOADING_ERROR:case S.a.KEY_LOAD_ERROR:case S.a.KEY_LOAD_TIMEOUT:n=t.frag.level,i=!0;break;case S.a.LEVEL_LOAD_ERROR:case S.a.LEVEL_LOAD_TIMEOUT:n=t.context.level,e=!0;break;case S.a.REMUX_ALLOC_ERROR:n=t.level,e=!0}void 0!==n&&this.recoverLevel(t,n,e,i)}else t.type===S.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.recoverLevel=function(t,e,i,n){var o=this,r=this.hls.config,a=t.details,s=this._levels[e],l=void 0,d=void 0,c=void 0;if(s.loadError++,s.fragmentError=n,!0===i){if(!(this.levelRetryCount+1<=r.levelLoadingMaxRetry))return A.b.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);d=Math.min(Math.pow(2,this.levelRetryCount)*r.levelLoadingRetryDelay,r.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return o.loadLevel()},d),t.levelRetry=!0,this.levelRetryCount++,A.b.warn("level controller, "+a+", retry in "+d+" ms, current retry count is "+this.levelRetryCount)}!0!==i&&!0!==n||((l=s.url.length)>1&&s.loadError<l?(A.b.warn("level controller, "+a+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(A.b.warn("level controller, "+a+": switch to "+(c=0===e?this._levels.length-1:e-1)),this.hls.nextAutoLevel=this.currentLevelIndex=c):!0===n&&(A.b.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var i=this._levels[e.level];void 0!==i&&(i.fragmentError=!1,i.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,i=t.level;if(i===this.currentLevelIndex){var n=this._levels[i];!1===n.fragmentError&&(n.loadError=0,this.levelRetryCount=0);var o=t.details;if(o.live){var r=1e3*(o.averagetargetduration?o.averagetargetduration:o.targetduration),a=n.details;a&&o.endSN===a.endSN&&(r/=2,A.b.log("same live playlist, reload twice faster")),r-=performance.now()-t.stats.trequest,r=Math.max(1e3,Math.round(r)),A.b.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},r)}else this.cleanTimer()}},e.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&t.url.length>0&&this.hls.trigger(E.a.LEVEL_LOADING,{url:t.url[e=t.urlId],level:this.currentLevelIndex,id:e})},ot(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(I),at=i(3),st=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){I.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media},e.prototype.onMediaDetaching=function(){this.media=void 0},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,i=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,o=0;o<i.length;o++){var r=at.a.getID3Frames(i[o].data);if(r){var a=i[o].pts,s=o<i.length-1?i[o+1].pts:e.endPTS;a===s&&(s+=1e-4);for(var l=0;l<r.length;l++){var d=r[l];if(!at.a.isTimeStampFrame(d)){var c=new n(a,s,"");c.value=d,this.id3Track.addCue(c)}}}}},e}(I),lt=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var i=Math.pow(this.alpha_,t);this.estimate_=e*(1-i)+i*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),dt=function(){function t(e,i,n,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new lt(i),this.fast_=new lt(n)}return t.prototype.sample=function(t,e){var i=8e3*e/(t=Math.max(t,this.minDelayMs_)),n=t/1e3;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),ct=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ut=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.FRAG_LOADING,E.a.FRAG_LOADED,E.a.FRAG_BUFFERED,E.a.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=i,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.clearTimer(),I.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var i=this.hls,n=i.config,o=void 0,r=void 0;i.levels[t.frag.level].details.live?(o=n.abrEwmaFastLive,r=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,r=n.abrEwmaSlowVoD),this._bwEstimator=new dt(i,r,o,n.abrEwmaDefaultEstimate)}this.fragCurrent=e}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,i=this.fragCurrent,n=i.loader,o=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return A.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var r=n.stats;if(e&&r&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&i.autoLevel&&i.level){var a=performance.now()-r.trequest,s=Math.abs(e.playbackRate);if(a>500*i.duration/s){var l=t.levels,d=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/a),c=l[i.level],u=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,h=r.total?r.total:Math.max(r.loaded,Math.round(i.duration*u/8)),p=e.currentTime,f=(h-r.loaded)/d,m=(G.bufferInfo(e,p,t.config.maxBufferHole).end-p)/s;if(m<2*i.duration/s&&f>m){var g=void 0,v=void 0;for(v=i.level-1;v>o;v--){var y=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if((g=i.duration*y/(6.4*d))<m)break}g<f&&(A.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+f.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=v,this._bwEstimator.sample(a,r.loaded),n.abort(),this.clearTimer(),t.trigger(E.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:r}))}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var i=this.hls.levels[e.level],n=(i.loaded?i.loaded.bytes:0)+t.stats.loaded,o=(i.loaded?i.loaded.duration:0)+t.frag.duration;i.loaded={bytes:n,duration:o},i.realBitrate=Math.round(8*n/o)}if(t.frag.bitrateTest){var r=t.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,i=t.frag;if(!(!0===e.aborted||1!==i.loadCounter||"main"!==i.type||isNaN(i.sn)||i.bitrateTest&&e.tload!==e.tbuffered)){var n=e.tparsed-e.trequest;A.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(n,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),this.bitrateTestDelay=i.bitrateTest?n/1e3:0}},e.prototype.onError=function(t){switch(t.details){case S.a.FRAG_LOAD_ERROR:case S.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,i,n,o,r,a,s,l){for(var d=o;d>=n;d--){var c,u=l[d].details,h=u?u.totalduration/u.fragments.length:e,p=!!u&&u.live;c=d<=t?a*i:s*i;var f=l[d].realBitrate?Math.max(l[d].realBitrate,l[d].bitrate):l[d].bitrate,m=f*h/c;if(A.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+d+"/"+Math.round(c)+"/"+f+"/"+h+"/"+r+"/"+m),c>f&&(!m||p&&!this.bitrateTestDelay||m<r))return d}return-1},ct(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var i=this._nextABRAutoLevel;return-1!==t&&(i=Math.min(t,i)),i},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,i=t.levels,n=t.config,o=t.minAutoLevel,r=t.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=r?r.currentTime:0,d=r&&0!==r.playbackRate?Math.abs(r.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,u=(G.bufferInfo(r,l,n.maxBufferHole).end-l)/d,h=this._findBestLevel(a,s,c,o,e,u,n.abrBandWidthFactor,n.abrBandWidthUpFactor,i);if(h>=0)return h;A.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,f=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===u){var g=this.bitrateTestDelay;g&&(p=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-g,A.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),f=m=1)}return h=this._findBestLevel(a,s,c,o,e,u+p,f,m,i),Math.max(h,0)}}]),e}(I),ht=s(),pt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHING,E.a.MEDIA_DETACHING,E.a.MANIFEST_PARSED,E.a.BUFFER_RESET,E.a.BUFFER_APPENDING,E.a.BUFFER_CODECS,E.a.BUFFER_EOS,E.a.BUFFER_FLUSHING,E.a.LEVEL_PTS_UPDATED,E.a.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n._live=null,n._objectUrl=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){I.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=this.tracks.audio;if("audio"===t.type&&e&&"audio/mpeg"===e.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-t.start)>.1){var n=i.updating;try{i.abort()}catch(t){n=!0,A.b.warn("can not abort audio buffer: "+t)}n?this.audioTimestampOffset=t.start:(A.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,i=t.video||t.levels.length&&t.audio,n=0;t.altAudio&&(e||i)&&A.b.log((n=(e?1:0)+(i?1:0))+" sourceBuffer(s) expected"),this.sourceBufferNb=n},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var i=this.mediaSource=new ht;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),i.addEventListener("sourceopen",this.onmso),i.addEventListener("sourceended",this.onmse),i.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(i),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){A.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){A.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):A.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(E.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){A.b.log("media source opened"),this.hls.trigger(E.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){A.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){A.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;A.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,i=this.segments.reduce(function(t,i){return i.parent===e?t+1:t},0);this.hls.trigger(E.a.BUFFER_APPENDED,{parent:e,pending:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){A.b.error("sourceBuffer error:",t),this.hls.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var i=t[e];try{this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.onsbue),i.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,i=this.mediaSource;for(var n in t)if(!e[n]){var o=t[n],r=o.levelCodec||o.codec,a=o.container+";codecs="+r;A.b.log("creating sourceBuffer("+a+")");try{var s=e[n]=i.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[n]={codec:r,container:o.container},o.buffer=s}catch(t){A.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(E.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){A.b.error("sourceBuffer error:",t.event),this.hls.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,i=t.type;for(var n in e)i&&n!==i||e[n].ended||(e[n].ended=!0,A.b.log(n+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var i in t){var n=t[i];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}A.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){A.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer)if(!0===this.sourceBuffer[i].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(A.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(A.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,i=this.sourceBuffer;try{for(var n in i)e+=i[n].buffered.length}catch(t){A.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(E.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,i=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void A.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){var n=i.shift();try{var o=e[n.type];o?o.updating?i.unshift(n):(o.ended=!1,this.parent=n.parent,o.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){A.b.error("error while trying to append buffer:"+e.message),i.unshift(n);var r={type:S.b.MEDIA_ERROR,parent:n.parent};if(22===e.code)return this.segments=[],r.details=S.a.BUFFER_FULL_ERROR,r.fatal=!1,void t.trigger(E.a.ERROR,r);if(this.appendError?this.appendError++:this.appendError=1,r.details=S.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry)return A.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],r.fatal=!0,void t.trigger(E.a.ERROR,r);r.fatal=!1,t.trigger(E.a.ERROR,r)}}}},e.prototype.flushBuffer=function(t,e,i){var n,o,r,a,s,l,d=this.sourceBuffer;if(Object.keys(d).length){if(A.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var c in d)if(!i||c===i){if((n=d[c]).ended=!1,n.updating)return A.b.warn("cannot flush, sb updating in progress"),!1;try{for(o=0;o<n.buffered.length;o++)if(r=n.buffered.start(o),a=n.buffered.end(o),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,l=e):(s=Math.max(r,t),l=Math.min(a,e)),Math.min(l,a)-s>.5)return this.flushBufferCounter++,A.b.log("flush "+c+" ["+s+","+l+"], of ["+r+","+a+"], pos:"+this.media.currentTime),n.remove(s,l),!1}catch(t){A.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else A.b.warn("abort flushing too many retries");A.b.log("buffer flushed")}return!0},e}(I),ft=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),mt=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.FPS_DROP_LEVEL_CAPPING,E.a.MEDIA_ATTACHING,E.a.MANIFEST_PARSED))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,o){return e.isLevelAllowed(o,i.restrictedLevels)&&o<=t});return e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,i){if(!t||t&&!t.length)return-1;for(var n=t.length-1,o=0;o<t.length;o+=1){var r=t[o];if((r.width>=e||r.height>=i)&&function(t,e){return!e||r.width!==e.width||r.height!==e.height}(0,t[o+1])){n=o;break}}return n},ft(e,[{key:"mediaWidth",get:function(){var t=void 0,i=this.media;return i&&(t=i.width||i.clientWidth||i.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,i=this.media;return i&&(t=i.height||i.clientHeight||i.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(I),gt=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHING))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},e.prototype.checkFPS=function(t,e,i){var n=performance.now();if(e){if(this.lastTime){var o=i-this.lastDroppedFrames,r=e-this.lastDecodedFrames,a=1e3*o/(n-this.lastTime),s=this.hls;if(s.trigger(E.a.FPS_DROP,{currentDropped:o,currentDecoded:r,totalDroppedFrames:i}),a>0&&o>s.config.fpsDroppedMonitoringThreshold*r){var l=s.currentLevel;A.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===s.autoLevelCapping||s.autoLevelCapping>=l)&&(s.trigger(E.a.FPS_DROP_LEVEL_CAPPING,{level:l-=1,droppedLevel:s.currentLevel}),s.autoLevelCapping=l,s.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(I),vt=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,i){this.context=t,this.config=e,this.callbacks=i,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t=this.loader=new XMLHttpRequest;var i=this.stats;i.tfirst=0,i.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(i){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,i=e.readyState,n=this.stats,o=this.context,r=this.config;if(!n.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===i){var a=e.status;if(a>=200&&a<300){n.tload=Math.max(n.tfirst,performance.now());var s,l=void 0;s="arraybuffer"===o.responseType?(l=e.response).byteLength:(l=e.responseText).length,n.loaded=n.total=s,this.callbacks.onSuccess({url:e.responseURL,data:l},n,o,e)}else n.retry>=r.maxRetry||a>=400&&a<499?(A.b.error(a+" while loading "+o.url),this.callbacks.onError({code:a,text:e.statusText},o,e)):(A.b.warn(a+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),r.timeout)},t.prototype.loadtimeout=function(){A.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,i=this.stats;i.loaded=t.loaded,t.lengthComputable&&(i.total=t.total);var n=this.callbacks.onProgress;n&&n(i,this.context,null,e)},t}(),yt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),bt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MANIFEST_LOADING,E.a.MANIFEST_PARSED,E.a.AUDIO_TRACK_LOADED,E.a.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.cleanTimer(),I.prototype.destroy.call(this)},e.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.tick=function(){1==++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){this.updateTrack(this.trackId)},e.prototype.onError=function(t){t.fatal&&t.type===S.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestParsed=function(t){var e=this,i=t.audioTracks||[],n=!1;this.tracks=i,this.hls.trigger(E.a.AUDIO_TRACKS_UPDATED,{audioTracks:i});var o=0;i.forEach(function(t){if(t.default&&!n)return e.audioTrack=o,void(n=!0);o++}),!1===n&&i.length&&(A.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},e.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(A.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},e.prototype.setAudioTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,A.b.log("switching to audioTrack "+t);var e=this.tracks[t],i=this.hls,n=e.url,o={id:t,type:e.type,url:n};i.trigger(E.a.AUDIO_TRACK_SWITCH,o),i.trigger(E.a.AUDIO_TRACK_SWITCHING,o);var r=e.details;!n||void 0!==r&&!0!==r.live||(A.b.log("(re)loading playlist for audioTrack "+t),i.trigger(E.a.AUDIO_TRACK_LOADING,{url:n,id:t}))}},e.prototype.updateTrack=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,A.b.log("updating audioTrack "+t);var e=this.tracks[t],i=e.url,n=e.details;!i||void 0!==n&&!0!==n.live||(A.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(E.a.AUDIO_TRACK_LOADING,{url:i,id:t}))}},yt(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(I),_t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),wt={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},xt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.AUDIO_TRACKS_UPDATED,E.a.AUDIO_TRACK_SWITCHING,E.a.AUDIO_TRACK_LOADED,E.a.KEY_LOADED,E.a.FRAG_LOADED,E.a.FRAG_PARSING_INIT_SEGMENT,E.a.FRAG_PARSING_DATA,E.a.FRAG_PARSED,E.a.ERROR,E.a.BUFFER_RESET,E.a.BUFFER_CREATED,E.a.BUFFER_APPENDED,E.a.BUFFER_FLUSHED,E.a.INIT_PTS_FOUND));return n.config=i.config,n.audioCodecSwap=!1,n.ticks=0,n._state=wt.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),I.prototype.destroy.call(this),this.state=wt.STOPPED},e.prototype.onInitPtsFound=function(t){var e=t.frag.cc,i=t.initPTS;"main"===t.id&&(this.initPTS[e]=i,this.videoTrackCC=e,A.b.log("InitPTS for cc:"+e+" found from video track:"+i),this.state===wt.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,e>0&&-1===t?(A.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=wt.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=wt.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=wt.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=wt.STOPPED},e.prototype.tick=function(){1==++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){var t,e,i,n=this.hls,o=n.config;switch(this.state){case wt.ERROR:case wt.PAUSED:case wt.BUFFER_FLUSHING:break;case wt.STARTING:this.state=wt.WAITING_TRACK,this.loadedmetadata=!1;break;case wt.IDLE:var r=this.tracks;if(!r)break;if(!this.media&&(this.startFragRequested||!o.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=G.bufferInfo(a,t,o.maxBufferHole),d=G.bufferInfo(s,t,o.maxBufferHole),c=l.len,u=l.end,h=this.fragPrevious,p=Math.max(o.maxBufferLength,d.len),f=this.audioSwitch,m=this.trackId;if((c<p||f)&&m<r.length){if(void 0===(i=r[m].details)){this.state=wt.WAITING_TRACK;break}if(!f&&!i.live&&h&&h.sn===i.endSN&&!l.nextStart&&(!this.media.seeking||this.media.duration-u<h.duration/2)){this.hls.trigger(E.a.BUFFER_EOS,{type:"audio"}),this.state=wt.ENDED;break}var g=i.fragments,v=g.length,y=g[0].start,b=g[v-1].start+g[v-1].duration,_=void 0;if(f)if(i.live&&!i.PTSKnown)A.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),u=0;else if(u=t,i.PTSKnown&&t<y){if(!(l.end>y||l.nextStart))return;A.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=y+.05}if(i.initSegment&&!i.initSegment.data)_=i.initSegment;else if(u<=y){if(_=g[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=function(t,e){return U(g,function(t){return t.cc<e?1:t.cc>e?-1:0})}(0,this.videoTrackCC)),i.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var w=l.nextStart?l.nextStart:y;return A.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(w+.05)),void(this.media.currentTime=w+.05)}}else{var x=void 0,T=o.maxFragLookUpTolerance,C=h?g[h.sn-g[0].sn+1]:void 0,k=function(t){var e=Math.min(T,t.duration);return t.start+t.duration-e<=u?1:t.start-e>u&&t.start?-1:0};u<b?(u>b-T&&(T=0),x=C&&!k(C)?C:U(g,k)):x=g[v-1],x&&(_=x,y=x.start,h&&_.level===h.level&&_.sn===h.sn&&(_.sn<i.endSN?A.b.log("SN just loaded, load next one: "+(_=g[_.sn+1-i.startSN]).sn):_=null))}if(_)if(_.decryptdata&&null!=_.decryptdata.uri&&null==_.decryptdata.key)A.b.log("Loading key for "+_.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+m),this.state=wt.KEY_LOADING,n.trigger(E.a.KEY_LOADING,{frag:_});else{if(A.b.log("Loading "+_.sn+", cc: "+_.cc+" of ["+i.startSN+" ,"+i.endSN+"],track "+m+", currentTime:"+t+",bufferEnd:"+u.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,_.loadCounter){_.loadCounter++;var O=o.fragLoadingLoopThreshold;if(_.loadCounter>O&&Math.abs(this.fragLoadIdx-_.loadIdx)<O)return void n.trigger(E.a.ERROR,{type:S.b.MEDIA_ERROR,details:S.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:_})}else _.loadCounter=1;_.loadIdx=this.fragLoadIdx,this.fragCurrent=_,this.startFragRequested=!0,isNaN(_.sn)||(this.nextLoadPosition=_.start+_.duration),n.trigger(E.a.FRAG_LOADING,{frag:_}),this.state=wt.FRAG_LOADING}}break;case wt.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=wt.IDLE);break;case wt.FRAG_LOADING_WAITING_RETRY:var I=performance.now(),D=this.retryDate;a=this.media,(!D||I>=D||a&&a.seeking)&&(A.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=wt.IDLE);break;case wt.WAITING_INIT_PTS:var P=this.videoTrackCC;if(void 0===this.initPTS[P])break;var L=this.waitingFragment;if(L){var R=L.frag.cc;P!==R?(e=this.tracks[this.trackId]).details&&e.details.live&&(A.b.warn("Waiting fragment CC ("+R+") does not match video track CC ("+P+")"),this.waitingFragment=null,this.state=wt.IDLE):(this.state=wt.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=wt.IDLE}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var i=this.config;this.tracks&&i.autoStartLoad&&this.startLoad(i.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(A.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){this.state===wt.ENDED&&(this.state=wt.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onAudioTracksUpdated=function(t){A.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=wt.PAUSED,this.waitingFragment=null,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=wt.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,i=t.id,n=this.tracks[i];if(A.b.log("track "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+e.totalduration),e.live){var o=n.details;o&&e.fragments.length>0?(c(o,e),A.b.log(e.PTSKnown?"live audio playlist sliding:"+e.fragments[0].start.toFixed(3):"live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,A.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(n.details=e,!this.startFragRequested){if(-1===this.startPosition){var r=e.startTimeOffset;isNaN(r)?this.startPosition=0:(A.b.log("start time offset found in playlist, adjust startPosition to "+r),this.startPosition=r)}this.nextLoadPosition=this.startPosition}this.state===wt.WAITING_TRACK&&(this.state=wt.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===wt.KEY_LOADING&&(this.state=wt.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag;if(this.state===wt.FRAG_LOADING&&e&&"audio"===i.type&&i.level===e.level&&i.sn===e.sn){var n=this.tracks[this.trackId],o=n.details,r=o.totalduration,a=e.level,s=e.sn,l=e.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",c=this.stats=t.stats;if("initSegment"===s)this.state=wt.IDLE,c.tparsed=c.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(E.a.FRAG_BUFFERED,{stats:c,frag:e,id:"audio"}),this.tick();else{this.state=wt.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new J(this.hls,"audio"));var u=this.initPTS[l],h=o.initSegment?o.initSegment.data:[];o.initSegment||void 0!==u?(this.pendingBuffering=!0,A.b.log("Demuxing "+s+" of ["+o.startSN+" ,"+o.endSN+"],track "+a),this.demuxer.push(t.payload,h,d,null,e,r,!1,u)):(A.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+o.startSN+" ,"+o.endSN+"],track "+a),this.waitingFragment=t,this.state=wt.WAITING_INIT_PTS)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===wt.PARSING){var n=t.tracks,o=void 0;if(n.video&&delete n.video,o=n.audio){o.levelCodec=o.codec,o.id=t.id,this.hls.trigger(E.a.BUFFER_CODECS,n),A.b.log("audio track:audio,container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var r=o.initSegment;if(r){var a={type:"audio",data:r,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(E.a.BUFFER_APPENDING,a))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,i=this.fragCurrent,n=t.frag;if(i&&"audio"===t.id&&"audio"===t.type&&n.sn===i.sn&&n.level===i.level&&this.state===wt.PARSING){var o=this.trackId,r=this.tracks[o],a=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),A.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),d(r.details,i,t.startPTS,t.endPTS);var s=this.media,l=!1;if(this.audioSwitch&&s)if(s.readyState){var c=s.currentTime;A.b.log("switching audio track : currentTime:"+c),c>=t.startPTS&&(A.b.log("switching audio track : flushing all audio"),this.state=wt.BUFFER_FLUSHING,a.trigger(E.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,this.audioSwitch=!1,a.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,a.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:o});var u=this.pendingData;this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&u.push({type:t.type,data:e,parent:"audio",content:"data"})}),!l&&u.length&&(u.forEach(function(t){e.state===wt.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(E.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===wt.PARSING&&(this.stats.tparsed=performance.now(),this.state=wt.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==wt.PARSING&&e!==wt.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==wt.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,i=this.hls;t&&(this.fragPrevious=t,e.tbuffered=performance.now(),i.trigger(E.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"}),A.b.log("audio buffered : "+tt((this.mediaBuffer?this.mediaBuffer:this.media).buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger(E.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=wt.IDLE),this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case S.a.FRAG_LOAD_ERROR:case S.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var n=this.config;if(i<=n.fragLoadingMaxRetry){this.fragLoadError=i,e.loadCounter=0;var o=Math.min(Math.pow(2,i-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);A.b.warn("audioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=performance.now()+o,this.state=wt.FRAG_LOADING_WAITING_RETRY}else A.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=wt.ERROR}break;case S.a.FRAG_LOOP_LOADING_ERROR:case S.a.AUDIO_TRACK_LOAD_ERROR:case S.a.AUDIO_TRACK_LOAD_TIMEOUT:case S.a.KEY_LOAD_ERROR:case S.a.KEY_LOAD_TIMEOUT:this.state!==wt.ERROR&&(this.state=t.fatal?wt.ERROR:wt.IDLE,A.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case S.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===wt.PARSING||this.state===wt.PARSED)){var r=this.mediaBuffer,a=this.media.currentTime;if(r&&G.isBuffered(r,a)&&G.isBuffered(r,a+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,A.b.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*s.fragLoadingLoopThreshold),this.state=wt.IDLE}else A.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=wt.BUFFER_FLUSHING,this.hls.trigger(E.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(A.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(E.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=wt.PARSED):(this.state=wt.IDLE,this.fragPrevious=null,this.tick())},_t(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,A.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(I),Tt=function(){function t(t){return"string"==typeof t&&!!r[t.toLowerCase()]&&t.toLowerCase()}function e(t){return"string"==typeof t&&!!a[t.toLowerCase()]&&t.toLowerCase()}function i(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function n(n,r,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),d={};l?s=document.createElement("custom"):d.enumerable=!0,s.hasBeenReset=!1;var c="",u=!1,h=n,p=r,f=a,m=null,g="",v=!0,y="auto",b="start",_=50,w="middle",x=50,T="middle";if(Object.defineProperty(s,"id",i({},d,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},d,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(s,"startTime",i({},d,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},d,{get:function(){return p},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},d,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},d,{get:function(){return m},set:function(t){m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},d,{get:function(){return g},set:function(e){var i=t(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},d,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},d,{get:function(){return y},set:function(t){if("number"!=typeof t&&t!==o)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},d,{get:function(){return b},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");b=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},d,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},d,{get:function(){return w},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");w=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},d,{get:function(){return x},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");x=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},d,{get:function(){return T},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");T=i,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var o="auto",r={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}(),Ct=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};f.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var kt=new Tt(0,0,0),Et="middle"===kt.align?"middle":"center";p.prototype={parse:function(t){function e(){var t=i.buffer,e=0;for(t=v(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}var i=this;t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var n;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var o=(n=e()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var r=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(r?r=!1:n=e(),i.state){case"HEADER":/:/.test(n)?m(n,function(t,e){switch(t){case"Region":console.log("parse region",e)}},/:/):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(i.cue=new Tt(0,0,""),i.state="CUE",-1===n.indexOf("--\x3e")){i.cue.id=n;continue}case"CUE":try{g(n,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("--\x3e");if(!n||a&&(r=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=n;continue;case"BADCUE":n||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var St=p,At={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ot=function(t){var e=t;return At.hasOwnProperty(t)&&(e=At[t]),String.fromCharCode(e)},It=15,Dt=100,Pt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Lt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Rt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Bt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Nt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Mt={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseLevel>=this.verboseFilter[t]&&console.log(this.time+" ["+t+"] "+e)}},Ft=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e},jt=function(){function t(e,i,n,o,r){b(this,t),this.foreground=e||"white",this.underline=i||!1,this.italics=n||!1,this.background=o||"black",this.flash=r||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],i=0;i<e.length;i++){var n=e[i];t.hasOwnProperty(n)&&(this[n]=t[n])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Wt=function(){function t(e,i,n,o,r,a){b(this,t),this.uchar=e||" ",this.penState=new jt(i,n,o,r,a)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),zt=function(){function t(){b(this,t),this.chars=[];for(var e=0;e<Dt;e++)this.chars.push(new Wt);this.pos=0,this.currPenState=new jt}return t.prototype.equals=function(t){for(var e=!0,i=0;i<Dt;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<Dt;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<Dt;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(Mt.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Dt&&(Mt.log("ERROR","Too large cursor position "+this.pos),this.pos=Dt)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=Ot(t);this.pos>=Dt?Mt.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},t.prototype.clearFromPos=function(t){var e;for(e=t;e<Dt;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,i=0;i<Dt;i++){var n=this.chars[i].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Ht=function(){function t(){b(this,t),this.rows=[];for(var e=0;e<It;e++)this.rows.push(new zt);this.currRow=It-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<It;t++)this.rows[t].clear();this.currRow=It-1},t.prototype.equals=function(t){for(var e=!0,i=0;i<It;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<It;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<It;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){Mt.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){Mt.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var i=0;i<It;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){var r=o.rows[n].cueStartTime;if(r&&r<Mt.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[e-this.nrRollUpRows+a+1].copy(o.rows[n+a])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=Math.max(t.indent-1,0);s.setCursor(t.indent),t.color=s.chars[l].penState.foreground}this.setPen({foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1})},t.prototype.setBkgData=function(t){Mt.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null!==this.nrRollUpRows){Mt.log("TEXT",this.getDisplayText());var t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Mt.log("INFO","Rolling up")}else Mt.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],i="",n=0;n<It;n++){var o=this.rows[n].getTextString();o&&e.push(t?"Row "+(n+1)+": '"+o+"'":o.trim())}return e.length>0&&(i=t?"["+e.join(" | ")+"]":e.join("\n")),i},t.prototype.getTextAndFormat=function(){return this.rows},t}(),qt=function(){function t(e,i){b(this,t),this.chNr=e,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new Ht,this.nonDisplayedMemory=new Ht,this.lastOutputScreen=new Ht,this.currRollUpRow=this.displayedMemory.rows[It-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[It-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,Mt.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);Mt.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Mt.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){Mt.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){Mt.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){Mt.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){Mt.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){Mt.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){Mt.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){Mt.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){Mt.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){Mt.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){Mt.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){Mt.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(Mt.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,Mt.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){Mt.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var i=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}Mt.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Mt.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),Vt=function(){function t(e,i,n){b(this,t),this.field=e||1,this.outputs=[i,n],this.channels=[new qt(1,i),new qt(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var i,n,o,r=!1;this.lastTime=t,Mt.setTime(t);for(var a=0;a<e.length;a+=2)o=127&e[a+1],0!=(n=127&e[a])||0!==o?(Mt.log("DATA","["+Ft([e[a],e[a+1]])+"] -> ("+Ft([n,o])+")"),(i=this.parseCmd(n,o))||(i=this.parseMidrow(n,o)),i||(i=this.parsePAC(n,o)),i||(i=this.parseBackgroundAttributes(n,o)),!i&&(r=this.parseChars(n,o))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(r):Mt.log("WARNING","No channel found yet. TEXT-MODE?")),i?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,Mt.log("WARNING","Couldn't parse cleaned data "+Ft([n,o])+" orig: "+Ft([e[a],e[a+1]])))):this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var i;if(!((20===t||28===t)&&32<=e&&e<=47||(23===t||31===t)&&33<=e&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Mt.log("DEBUG","Repeated command ("+Ft([t,e])+") is dropped"),!0;var n=this.channels[(i=20===t||23===t?1:2)-1];return 20===t||28===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},t.prototype.parseMidrow=function(t,e){var i=null;return(17===t||25===t)&&32<=e&&e<=47&&((i=17===t?1:2)!==this.currChNr?(Mt.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[i-1].ccMIDROW(e),Mt.log("DEBUG","MIDROW ("+Ft([t,e])+")"),!0))},t.prototype.parsePAC=function(t,e){var i;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127||(16===t||24===t)&&64<=e&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;i=t<=23?1:2;var n=this.interpretPAC(64<=e&&e<=95?1===i?Pt[t]:Rt[t]:1===i?Lt[t]:Bt[t],e);return this.channels[i-1].setPAC(n),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},t.prototype.interpretPAC=function(t,e){var i,n={color:null,italics:!1,indent:null,underline:!1,row:t};return n.underline=1==(1&(i=e>95?e-96:e-64)),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},t.prototype.parseChars=function(t,e){var i,n=null,o=null,r=null;if(t>=25?(n=2,r=t-8):(n=1,r=t),17<=r&&r<=19?(Mt.log("INFO","Special char '"+Ot(i=17===r?e+80:18===r?e+112:e+144)+"' in channel "+n),o=[i]):32<=t&&t<=127&&(o=0===e?[t]:[t,e]),o){var a=Ft(o);Mt.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return o},t.prototype.parseBackgroundAttributes=function(t,e){var i,n,o,r;return!(!((16===t||24===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&45<=e&&e<=47)||(i={},16===t||24===t?(n=Math.floor((e-32)/2),i.background=Nt[n],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0)),o=t<24?1:2,r=this.channels[o-1],r.setBkgData(i),this.lastCmdA=null,this.lastCmdB=null,0))},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),Ut=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.timelineController=e,this.track=i,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,i){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=i,this.timelineController.createCaptionsTrack(this.track)},t}(),Gt=function(t,e,i){return t.substr(i||0,e.length)===e},$t=function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return(e>>>0).toString()},Kt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHING,E.a.MEDIA_DETACHING,E.a.FRAG_PARSING_USERDATA,E.a.FRAG_DECRYPTED,E.a.MANIFEST_LOADING,E.a.MANIFEST_LOADED,E.a.FRAG_LOADED,E.a.LEVEL_SWITCHING,E.a.INIT_PTS_FOUND));if(n.hls=i,n.config=i.config,n.enabled=!0,n.Cues=i.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var o=new Ut(n,1),r=new Ut(n,2);n.cea608Parser=new Vt(0,o,r)}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.addCues=function(t,e,i,n){for(var o=this.cueRanges,r=!1,a=o.length;a--;){var s=o[a],l=w(s[0],s[1],e,i);if(l>=0&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],i),r=!0,l/(i-e)>.5))return}r||o.push([e,i]),this.Cues.newCue(this[t],e,i,n)},e.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var i=0;i<e.textTracks.length;i++){var n=e.textTracks[i];if(!0===n["textTrack"+t])return n}return null},e.prototype.sendAddTrackEvent=function(t,e){var i=null;try{i=new window.Event("addtrack")}catch(t){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)},e.prototype.createCaptionsTrack=function(t){var e="textTrack"+t;if(!this[e]){var i=this.getExistingTrack(t);if(i)this[e]=i,_(this[e]),this.sendAddTrackEvent(this[e],this.media);else{var n=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config.captionsTextTrack1LanguageCode);n&&(n[e]=!0,this[e]=n)}}},e.prototype.createTextTrack=function(t,e,i){var n=this.media;if(n)return n.addTextTrack(t,e,i)},e.prototype.destroy=function(){I.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){_(this.textTrack1),_(this.textTrack2)},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var i=0;i<e.length;i++)_(e[i])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var i=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,n){var o=void 0;if(n<i.length){var r=i[n];(function(t,e){return r&&r.label===e.name&&!(r.textTrack1||r.textTrack2)})(0,t)&&(o=r)}o||(o=e.createTextTrack("subtitles",t.name,t.lang)),o.mode=t.default?"showing":"hidden",e.textTracks.push(o)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,i=t.payload;if("main"===e.type){var n=e.sn;if(n!==this.lastSn+1){var o=this.cea608Parser;o&&o.reset()}this.lastSn=n}else if("subtitle"===e.type)if(i.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var r=e.decryptdata;null!=r&&null!=r.key&&"AES-128"===r.method||this._parseVTTs(e,i)}else this.hls.trigger(E.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var i=this.vttCCs;i[t.cc]||(i[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.textTracks,o=this.hls;!function(t,e,i,n,o,r){var a=Object(at.b)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",l=0,d=0,c=0,u=[],h=void 0,p=!0,f=new St;f.oncue=function(t){var e=i[n],o=i.ccOffset;e&&e.new&&(void 0!==d?o=i.ccOffset=e.start:function(t,e,i){var n=t[e],o=t[n.prevCC];if(!o||!o.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;o&&o.new;)t.ccOffset+=n.start-o.start,n.new=!1,o=t[(n=o).prevCC];t.presentationOffset=i}(i,n,c)),c&&(o=c+i.ccOffset-i.presentationOffset),t.startTime+=o-d,t.endTime+=o-d,t.id=$t(t.startTime.toString())+$t(t.endTime.toString())+$t(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&u.push(t)},f.onparsingerror=function(t){h=t},f.onflush=function(){h&&r?r(h):o(u)},a.forEach(function(t){if(p){if(Gt(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach(function(t){Gt(t,"LOCAL:")?s=t.substr(6):Gt(t,"MPEGTS:")&&(l=parseInt(t.substr(7)))});try{l-=e=e<0?e+8589934592:e,d=function(t){var e=parseInt(t.substr(-3)),i=parseInt(t.substr(-6,2)),n=parseInt(t.substr(-9,2)),o=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(i)||isNaN(n)||isNaN(o)?-1:(e+=1e3*i,e+=6e4*n,e+=36e5*o)}(s)/1e3,c=l/9e4,-1===d&&(h=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){h=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}f.parse(t+"\n")}),f.flush()}(e,this.initPTS,i,t.cc,function(e){var i=n[t.trackId];e.forEach(function(t){if(!i.cues.getCueById(t.id))try{i.addCue(t)}catch(n){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,i.addCue(e)}}),o.trigger(E.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){A.b.log("Failed to parse VTT cue: "+e),o.trigger(E.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},e.prototype.onFragDecrypted=function(t){var e=t.payload,i=t.frag;if("subtitle"===i.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(i,e)}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var i=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,i)}},e.prototype.extractCea608Data=function(t){for(var e,i,n,o=31&t[0],r=2,a=[],s=0;s<o;s++)e=t[r++],i=127&t[r++],n=127&t[r++],0===i&&0===n||0!=(4&e)&&0==(3&e)&&(a.push(i),a.push(n));return a},e}(I),Yt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Xt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHED,E.a.MEDIA_DETACHING,E.a.MANIFEST_LOADING,E.a.MANIFEST_LOADED,E.a.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n.subtitleDisplay=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=x(this.media.textTracks),i=0;i<e.length;i++)"showing"===e[i].mode&&(t=i);this.subtitleTrack=t}},e.prototype.destroy=function(){I.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,i=t.subtitles||[];this.tracks=i,this.trackId=-1,this.hls.trigger(E.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:i}),i.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var i=e.details;void 0!==i&&!0!==i.live||(A.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(E.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(A.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},e.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=x(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(e[this.trackId].mode="hidden"),this.trackId=t,A.b.log("switching to subtitle track "+t),this.hls.trigger(E.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t){var i=this.tracks[t];this.subtitleDisplay&&(e[t].mode="showing");var n=i.details;void 0!==n&&!0!==n.live||(A.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(E.a.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))}}},Yt(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),e}(I),Qt=i(4),Zt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},Jt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,E.a.MEDIA_ATTACHED,E.a.ERROR,E.a.KEY_LOADED,E.a.FRAG_LOADED,E.a.SUBTITLE_TRACKS_UPDATED,E.a.SUBTITLE_TRACK_SWITCH,E.a.SUBTITLE_TRACK_LOADED,E.a.SUBTITLE_FRAG_PROCESSED));return n.config=i.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.state=Zt.STOPPED,n.currentTrackId=-1,n.ticks=0,n.decrypter=new Qt.a(i.observer,i.config),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){I.prototype.destroy.call(this),this.state=Zt.STOPPED},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(E.a.FRAG_LOADING,{frag:t}),this.state=Zt.FRAG_LOADING}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=Zt.IDLE,this.nextFrag()},e.prototype.onMediaAttached=function(){this.state=Zt.IDLE},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.tick=function(){var t=this;1==++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(function(){t.tick()},1),this.ticks=0)},e.prototype.doTick=function(){var t=this;switch(this.state){case Zt.IDLE:var e,i=this.tracks,n=this.currentTrackId,o=this.vttFragSNsProcessed[n],r=this.vttFragQueues[n],a=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!i)break;if(n<i.length&&(e=i[n].details),void 0===e)break;e.fragments.forEach(function(e){o.indexOf(e.sn)>-1||e.sn===a||function(t){return r.some(function(e){return e.sn===t.sn})}(e)||(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key?(A.b.log("Loading key for "+e.sn),t.state=Zt.KEY_LOADING,t.hls.trigger(E.a.KEY_LOADING,{frag:e})):(e.trackId=n,r.push(e),t.nextFrag()))})}},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;A.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.clearVttFragQueues()},e.prototype.onSubtitleTrackLoaded=function(){this.tick()},e.prototype.onKeyLoaded=function(){this.state===Zt.KEY_LOADING&&(this.state=Zt.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag.decryptdata,n=t.frag,o=this.hls;if(this.state===Zt.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var r;try{r=performance.now()}catch(t){r=Date.now()}this.decrypter.decrypt(t.payload,i.key.buffer,i.iv.buffer,function(t){var e;try{e=performance.now()}catch(t){e=Date.now()}o.trigger(E.a.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:r,tdecrypt:e}})})}},e}(I),te={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:vt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:ut,bufferController:pt,capLevelController:mt,fpsController:gt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};te.subtitleStreamController=Jt,te.subtitleTrackController=Xt,te.timelineController=Kt,te.cueHandler=T,te.enableCEA708Captions=!0,te.enableWebVTT=!0,te.captionsTextTrack1Label="English",te.captionsTextTrack1LanguageCode="en",te.captionsTextTrack2Label="Spanish",te.captionsTextTrack2LanguageCode="es",te.audioStreamController=xt,te.audioTrackController=bt;var ee=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ie=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=t.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in n)o in i||(i[o]=n[o]);if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(i.liveMaxLatencyDuration<=i.liveSyncDuration||void 0===i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(A.a)(i.debug),this.config=i,this._autoLevelCapping=-1;var r=this.observer=new Y.a;r.trigger=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.emit.apply(r,[t,t].concat(i))},r.off=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.removeListener.apply(r,[t].concat(i))},this.on=r.on.bind(r),this.off=r.off.bind(r),this.trigger=r.trigger.bind(r);var a=this.abrController=new i.abrController(this),s=new i.bufferController(this),l=new i.capLevelController(this),d=new i.fpsController(this),c=new H(this),u=new q(this),h=new V(this),p=new st(this),f=[this.levelController=new rt(this),this.streamController=new nt(this)],m=i.audioStreamController;m&&f.push(new m(this)),this.networkControllers=f;var g=[c,u,h,a,s,l,d,p];if(m=i.audioTrackController){var v=new m(this);this.audioTrackController=v,g.push(v)}if(m=i.subtitleTrackController){var y=new m(this);this.subtitleTrackController=y,g.push(y)}[i.subtitleStreamController,i.timelineController].forEach(function(t){t&&g.push(new t(e))}),this.coreComponents=g}return t.isSupported=function(){return t=s(),e=window.SourceBuffer||window.WebKitSourceBuffer,!(!t||"function"!=typeof t.isTypeSupported||!t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||e&&(!e.prototype||"function"!=typeof e.prototype.appendBuffer||"function"!=typeof e.prototype.remove));var t,e},ee(t,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return E.a}},{key:"ErrorTypes",get:function(){return S.b}},{key:"ErrorDetails",get:function(){return S.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:te},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){A.b.log("destroy"),this.trigger(E.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){A.b.log("attachMedia"),this.media=t,this.trigger(E.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){A.b.log("detachMedia"),this.trigger(E.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=k.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),A.b.log("loadSource:"+t),this.url=t,this.trigger(E.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;A.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){A.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){A.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){A.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},ee(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){A.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){A.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){A.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){A.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){A.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){A.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,i=t?t.length:0,n=0;n<i;n++)if((t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate)>e)return n;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e.default=ie},function(t,e,i){function n(t){var e=[],i=t.toString(),n=i.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!n)return e;for(var o,r=new RegExp("(\\\\n|\\W)"+(n[1]+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");o=r.exec(i);)e.push(o[3]);return e}function o(t,e){for(var i=[e],o=[],r={};i.length;){var a=i.pop();if(!r[a]&&t[a]){r[a]=!0,o.push(a);var s=n(t[a]);i=i.concat(s)}}return o}t.exports=function(t,e){var n=i.m,r=(e=e||{}).all?Object.keys(n):o(n,t),a="("+(function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var n=e(e.s=ENTRY_MODULE);return n.default||n}).toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+r.map(function(t){return JSON.stringify(t)+": "+n[t].toString()}).join(",")+"})(self);",s=new window.Blob([a],{type:"text/javascript"});if(e.bare)return s;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(l);return d.objectURL=l,d}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),o=i(1),r=i(0),a=i(5),s=i.n(a);e.default=function(t){var e=new s.a;e.trigger=function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];e.emit.apply(e,[t,t].concat(n))},e.off=function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];e.removeListener.apply(e,[t].concat(n))};var i=function(e,i){t.postMessage({event:e,data:i})};t.addEventListener("message",function(o){var a=o.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.demuxer=new n.a(e,a.typeSupported,s,a.vendor);try{Object(r.a)(!0===s.debug)}catch(t){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),e.on(o.a.FRAG_DECRYPTED,i),e.on(o.a.FRAG_PARSING_INIT_SEGMENT,i),e.on(o.a.FRAG_PARSED,i),e.on(o.a.ERROR,i),e.on(o.a.FRAG_PARSING_METADATA,i),e.on(o.a.FRAG_PARSING_USERDATA,i),e.on(o.a.INIT_PTS_FOUND,i),e.on(o.a.FRAG_PARSING_DATA,function(e,i){var n=[],o={event:e,data:i};i.data1&&(o.data1=i.data1.buffer,n.push(i.data1.buffer),delete i.data1),i.data2&&(o.data2=i.data2.buffer,n.push(i.data2.buffer),delete i.data2),t.postMessage(o,n)})}}]).default}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=109)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(17),o=i(18),r=i(19),a=i(45),s=i(46),l=i(47),d=i(48),c=i(49),u=i(12),h=i(32),p=i(33),f=i(31),m=i(1);e.default={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:n.default,Format:o.default,Leaf:r.default,Embed:d.default,Scroll:a.default,Block:l.default,Inline:s.default,Text:c.default,Attributor:{Attribute:u.default,Class:h.default,Style:p.default,Store:f.default}}},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=this;return(i=t.call(this,e="[Parchment] "+e)||this).message=e,i.name=i.constructor.name,i}return o(e,t),e}(Error);e.ParchmentError=r;var a,s={},l={},d={},c={};function u(t,e){var i;if(void 0===e&&(e=a.ANY),"string"==typeof t)i=c[t]||s[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)i=c.text;else if("number"==typeof t)t&a.LEVEL&a.BLOCK?i=c.block:t&a.LEVEL&a.INLINE&&(i=c.inline);else if(t instanceof HTMLElement){var n=(t.getAttribute("class")||"").split(/\s+/);for(var o in n)if(i=l[n[o]])break;i=i||d[t.tagName]}return null==i?null:e&a.LEVEL&i.scope&&e&a.TYPE&i.scope?i:null}e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(a=e.Scope||(e.Scope={})),e.create=function(t,e){var i=u(t);if(null==i)throw new r("Unable to create "+t+" blot");return new i(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:i.create(e),e)},e.find=function t(i,n){return void 0===n&&(n=!1),null==i?null:null!=i[e.DATA_KEY]?i[e.DATA_KEY].blot:n?t(i.parentNode,n):null},e.query=u,e.register=function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e.length>1)return e.map(function(e){return t(e)});var n=e[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new r("Invalid definition");if("abstract"===n.blotName)throw new r("Cannot register abstract class");return c[n.blotName||n.attrName]=n,"string"==typeof n.keyName?s[n.keyName]=n:(null!=n.className&&(l[n.className]=n),null!=n.tagName&&(n.tagName=Array.isArray(n.tagName)?n.tagName.map(function(t){return t.toUpperCase()}):n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(t){null!=d[t]&&null!=n.className||(d[t]=n)}))),n}},function(t,e,i){var n=i(51),o=i(11),r=i(3),a=i(20),s=String.fromCharCode(0),l=function(t){this.ops=Array.isArray(t)?t:null!=t&&Array.isArray(t.ops)?t.ops:[]};l.prototype.insert=function(t,e){var i={};return 0===t.length?this:(i.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var i={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)},l.prototype.push=function(t){var e=this.ops.length,i=this.ops[e-1];if(t=r(!0,{},t),"object"==typeof i){if("number"==typeof t.delete&&"number"==typeof i.delete)return this.ops[e-1]={delete:i.delete+t.delete},this;if("number"==typeof i.delete&&null!=t.insert&&"object"!=typeof(i=this.ops[(e-=1)-1]))return this.ops.unshift(t),this;if(o(t.attributes,i.attributes)){if("string"==typeof t.insert&&"string"==typeof i.insert)return this.ops[e-1]={insert:i.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof i.retain)return this.ops[e-1]={retain:i.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],i=[];return this.forEach(function(n){(t(n)?e:i).push(n)}),[e,i]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce(function(t,e){return e.insert?t+a.length(e):e.delete?t-e.delete:t},0)},l.prototype.length=function(){return this.reduce(function(t,e){return t+a.length(e)},0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var i=[],n=a.iterator(this.ops),o=0;o<e&&n.hasNext();){var r;o<t?r=n.next(t-o):(r=n.next(e-o),i.push(r)),o+=a.length(r)}return new l(i)},l.prototype.compose=function(t){var e=a.iterator(this.ops),i=a.iterator(t.ops),n=[],r=i.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){for(var s=r.retain;"insert"===e.peekType()&&e.peekLength()<=s;)s-=e.peekLength(),n.push(e.next());r.retain-s>0&&i.next(r.retain-s)}for(var d=new l(n);e.hasNext()||i.hasNext();)if("insert"===i.peekType())d.push(i.next());else if("delete"===e.peekType())d.push(e.next());else{var c=Math.min(e.peekLength(),i.peekLength()),u=e.next(c),h=i.next(c);if("number"==typeof h.retain){var p={};"number"==typeof u.retain?p.retain=c:p.insert=u.insert;var f=a.attributes.compose(u.attributes,h.attributes,"number"==typeof u.retain);if(f&&(p.attributes=f),d.push(p),!i.hasNext()&&o(d.ops[d.ops.length-1],p)){var m=new l(e.rest());return d.concat(m).chop()}}else"number"==typeof h.delete&&"number"==typeof u.retain&&d.push(h)}return d.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var i=[this,t].map(function(e){return e.map(function(i){if(null!=i.insert)return"string"==typeof i.insert?i.insert:s;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")}).join("")}),r=new l,d=n(i[0],i[1],e),c=a.iterator(this.ops),u=a.iterator(t.ops);return d.forEach(function(t){for(var e=t[1].length;e>0;){var i=0;switch(t[0]){case n.INSERT:i=Math.min(u.peekLength(),e),r.push(u.next(i));break;case n.DELETE:i=Math.min(e,c.peekLength()),c.next(i),r.delete(i);break;case n.EQUAL:i=Math.min(c.peekLength(),u.peekLength(),e);var s=c.next(i),l=u.next(i);o(s.insert,l.insert)?r.retain(i,a.attributes.diff(s.attributes,l.attributes)):r.push(l).delete(i)}e-=i}}),r.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var i=a.iterator(this.ops),n=new l,o=0;i.hasNext();){if("insert"!==i.peekType())return;var r=i.peek(),s=a.length(r)-i.peekLength(),d="string"==typeof r.insert?r.insert.indexOf(e,s)-s:-1;if(d<0)n.push(i.next());else if(d>0)n.push(i.next(d));else{if(!1===t(n,i.next(1).attributes||{},o))return;o+=1,n=new l}}n.length()>0&&t(n,{},o)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var i=a.iterator(this.ops),n=a.iterator(t.ops),o=new l;i.hasNext()||n.hasNext();)if("insert"!==i.peekType()||!e&&"insert"===n.peekType())if("insert"===n.peekType())o.push(n.next());else{var r=Math.min(i.peekLength(),n.peekLength()),s=i.next(r),d=n.next(r);if(s.delete)continue;d.delete?o.push(d):o.retain(r,a.attributes.transform(s.attributes,d.attributes,e))}else o.retain(a.length(i.next()));return o.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var i=a.iterator(this.ops),n=0;i.hasNext()&&n<=t;){var o=i.peekLength(),r=i.peekType();i.next(),"delete"!==r?("insert"===r&&(n<t||!e)&&(t+=o),n+=o):t-=Math.min(o,t-n)}return t},t.exports=l},function(t,e){"use strict";var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)},s=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var e,o=i.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&i.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!r)return!1;for(e in t);return"undefined"==typeof e||i.call(t,e)},l=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},d=function(t,e){if("__proto__"===e){if(!i.call(t,e))return;if(r)return r(t,e).value}return t[e]};t.exports=function t(){var e,i,n,o,r,c,u=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},h=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});h<p;++h)if(null!=(e=arguments[h]))for(i in e)n=d(u,i),u!==(o=d(e,i))&&(f&&o&&(s(o)||(r=a(o)))?(r?(r=!1,c=n&&a(n)?n:[]):c=n&&s(n)?n:{},l(u,{name:i,newValue:t(f,c,o)})):"undefined"!=typeof o&&l(u,{name:i,newValue:o}));return u}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},r=u(i(3)),a=u(i(2)),s=u(i(0)),l=u(i(16)),d=u(i(6)),c=u(i(7));function u(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=function(t){function e(){return h(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,s.default.Embed),n(e,[{key:"attach",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new s.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.default).insert(this.value(),(0,r.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var i=s.default.query(t,s.default.Scope.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,e)}},{key:"formatAt",value:function(t,e,i,n){this.format(i,n)}},{key:"insertAt",value:function(t,i,n){if("string"==typeof i&&i.endsWith("\n")){var r=s.default.create(g.blotName);this.parent.insertBefore(r,0===t?this:this.next),r.insertAt(0,i.slice(0,-1))}else o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,i,n)}}]),e}();m.scope=s.default.Scope.BLOCK_BLOT;var g=function(t){function e(t){h(this,e);var i=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.cache={},i}return f(e,s.default.Block),n(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(s.default.Leaf).reduce(function(t,e){return 0===e.length()?t:t.insert(e.value(),v(e))},new a.default).insert("\n",v(this))),this.cache.delta}},{key:"deleteAt",value:function(t,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,i),this.cache={}}},{key:"formatAt",value:function(t,i,n,r){i<=0||(s.default.query(n,s.default.Scope.BLOCK)?t+i===this.length()&&this.format(n,r):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(i,this.length()-t-1),n,r),this.cache={})}},{key:"insertAt",value:function(t,i,n){if(null!=n)return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,i,n);if(0!==i.length){var r=i.split("\n"),a=r.shift();a.length>0&&(t<this.length()-1||null==this.children.tail?o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});var s=this;r.reduce(function(t,e){return(s=s.split(t,!0)).insertAt(0,e),e.length},t+a.length)}}},{key:"insertBefore",value:function(t,i){var n=this.children.head;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,i),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,i),this.cache={}}},{key:"optimize",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i&&(0===t||t>=this.length()-1)){var n=this.clone();return 0===t?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var r=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,i);return this.cache={},r}}]),e}();function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,r.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:v(t.parent,e))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[d.default,s.default.Embed,c.default],e.bubbleFormats=v,e.BlockEmbed=m,e.default=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(50);var a=g(i(2)),s=g(i(14)),l=g(i(8)),d=g(i(9)),c=g(i(0)),u=i(15),h=g(u),p=g(i(3)),f=g(i(10)),m=g(i(34));function g(t){return t&&t.__esModule?t:{default:t}}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var y=(0,f.default)("quill"),b=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.options=_(e,n),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=c.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new s.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(t){t===l.default.events.TEXT_CHANGE&&i.root.classList.toggle("ql-blank",i.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(t,e){var n=i.selection.lastRange,o=n&&0===n.length?n.index:void 0;w.call(i,function(){return i.editor.update(null,e,o)},t)});var r=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+o+"<p><br></p></div>");this.setContents(r),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return r(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),f.default.level(t)}},{key:"find",value:function(t){return t.__quill||c.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&y.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var o=t.attrName||t.blotName;"string"==typeof o?this.register("formats/"+o,t,e):Object.keys(t).forEach(function(n){i.register(n,t[n],e)})}else null==this.imports[t]||n||y.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?c.default.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),r(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var i=t;(t=document.createElement("div")).classList.add(i)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,i){var n=this,r=x(t,e,i),a=o(r,4);return w.call(this,function(){return n.editor.deleteText(t,e)},i=a[3],t=a[0],-1*(e=a[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var i=this;return w.call(this,function(){var n=i.getSelection(!0),o=new a.default;if(null==n)return o;if(c.default.query(t,c.default.Scope.BLOCK))o=i.editor.formatLine(n.index,n.length,v({},t,e));else{if(0===n.length)return i.selection.format(t,e),o;o=i.editor.formatText(n.index,n.length,v({},t,e))}return i.setSelection(n,l.default.sources.SILENT),o},arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API)}},{key:"formatLine",value:function(t,e,i,n,r){var a,s=this,l=x(t,e,i,n,r),d=o(l,4);return e=d[1],a=d[2],w.call(this,function(){return s.editor.formatLine(t,e,a)},r=d[3],t=d[0],0)}},{key:"formatText",value:function(t,e,i,n,r){var a,s=this,l=x(t,e,i,n,r),d=o(l,4);return e=d[1],a=d[2],w.call(this,function(){return s.editor.formatText(t,e,a)},r=d[3],t=d[0],0)}},{key:"getBounds",value:function(t){var e;e="number"==typeof t?this.selection.getBounds(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(t.index,t.length);var i=this.container.getBoundingClientRect();return{bottom:e.bottom-i.top,height:e.height,left:e.left-i.left,right:e.right-i.left,top:e.top-i.top,width:e.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=x(t,e),n=o(i,2);return this.editor.getContents(t=n[0],e=n[1])}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof t?this.editor.getFormat(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=x(t,e),n=o(i,2);return this.editor.getText(t=n[0],e=n[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,i,n){var o=this;return w.call(this,function(){return o.editor.insertEmbed(e,i,n)},arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API,e)}},{key:"insertText",value:function(t,e,i,n,r){var a,s=this,l=x(t,0,i,n,r),d=o(l,4);return a=d[2],w.call(this,function(){return s.editor.insertText(t,e,a)},r=d[3],t=d[0],e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,i){this.clipboard.dangerouslyPasteHTML(t,e,i)}},{key:"removeFormat",value:function(t,e,i){var n=this,r=x(t,e,i),a=o(r,4);return e=a[1],w.call(this,function(){return n.editor.removeFormat(t,e)},i=a[3],t=a[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this;return w.call(this,function(){t=new a.default(t);var i=e.getLength(),n=e.editor.deleteText(0,i),o=e.editor.applyDelta(t),r=o.ops[o.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),o.delete(1)),n.compose(o)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API)}},{key:"setSelection",value:function(e,i,n){if(null==e)this.selection.setRange(null,i||t.sources.API);else{var r=x(e,i,n),a=o(r,4);n=a[3],this.selection.setRange(new u.Range(e=a[0],i=a[1]),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,i=(new a.default).insert(t);return this.setContents(i,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,function(){return t=new a.default(t),e.editor.applyDelta(t,i)},i,!0)}}]),t}();function _(t,e){if((e=(0,p.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==b.DEFAULTS.theme){if(e.theme=b.import("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=m.default;var i=(0,p.default)(!0,{},e.theme.DEFAULTS);[i,e].forEach(function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach(function(e){!0===t.modules[e]&&(t.modules[e]={})})});var n=Object.keys(i.modules).concat(Object.keys(e.modules)).reduce(function(t,e){var i=b.import("modules/"+e);return null==i?y.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=i.DEFAULTS||{},t},{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=(0,p.default)(!0,{},b.DEFAULTS,{modules:n},i,e),["bounds","container","scrollingContainer"].forEach(function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),e.modules=Object.keys(e.modules).reduce(function(t,i){return e.modules[i]&&(t[i]=e.modules[i]),t},{}),e}function w(t,e,i,n){if(this.options.strict&&!this.isEnabled()&&e===l.default.sources.USER)return new a.default;var o=null==i?null:this.getSelection(),r=this.editor.delta,s=t();if(null!=o&&(!0===i&&(i=o.index),null==n?o=T(o,s,e):0!==n&&(o=T(o,i,n,e)),this.setSelection(o,l.default.sources.SILENT)),s.length()>0){var d,c,u=[l.default.events.TEXT_CHANGE,s,r,e];(d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(u)),e!==l.default.sources.SILENT&&(c=this.emitter).emit.apply(c,u)}return s}function x(t,e,i,o,r){var a={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=o,o=i,i=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=o,o=i,i=e,e=0),"object"===("undefined"==typeof i?"undefined":n(i))?(a=i,r=o):"string"==typeof i&&(null!=o?a[i]=o:r=i),[t,e,a,r=r||l.default.sources.API]}function T(t,e,i,n){if(null==t)return null;var r=void 0,s=void 0;if(e instanceof a.default){var d=[t.index,t.index+t.length].map(function(t){return e.transformPosition(t,n!==l.default.sources.USER)}),c=o(d,2);r=c[0],s=c[1]}else{var h=[t.index,t.index+t.length].map(function(t){return t<e||t===e&&n===l.default.sources.USER?t:i>=0?t+i:Math.max(e,t+i)}),p=o(h,2);r=p[0],s=p[1]}return new u.Range(r,s-r)}b.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},b.events=l.default.events,b.sources=l.default.sources,b.version="1.3.7",b.imports={delta:a.default,parchment:c.default,"core/module":d.default,"core/theme":m.default},e.expandConfig=_,e.overload=x,e.default=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},r=s(i(7)),a=s(i(0));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Inline),n(e,[{key:"formatAt",value:function(t,i,n,r){if(e.compare(this.statics.blotName,n)<0&&a.default.query(n,a.default.Scope.BLOT)){var s=this.isolate(t,i);r&&s.wrap(n,r)}else o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,i,n,r)}},{key:"optimize",value:function(t){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var i=this.parent.isolate(this.offset(),this.length());this.moveChildren(i),i.wrap(this)}}}],[{key:"compare",value:function(t,i){var n=e.order.indexOf(t),o=e.order.indexOf(i);return n>=0||o>=0?n-o:t===i?0:t<i?-1:1}}]),e}();l.allowedChildren=[l,a.default.Embed,r.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=i(0))&&n.__esModule?n:{default:n},r=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Text),e}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=r(i(54));function r(t){return t&&t.__esModule?t:{default:t}}var a=(0,r(i(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(t){document.addEventListener(t,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(t){var i;t.__quill&&t.__quill.emitter&&(i=t.__quill.emitter).handleDOM.apply(i,e)})})});var s=function(t){function e(){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",a.error),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"emit",value:function(){a.log.apply(a,arguments),function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(this.listeners[t.type]||[]).forEach(function(e){var n=e.node,o=e.handler;(t.target===n||n.contains(t.target))&&o.apply(void 0,[t].concat(i))})}},{key:"listenDOM",value:function(t,e,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:i})}}]),e}();s.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},s.sources={API:"api",SILENT:"silent",USER:"user"},e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.quill=e,this.options=i};n.DEFAULTS={},e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["error","warn","log","info"],o="warn";function r(t){if(n.indexOf(t)<=n.indexOf(o)){for(var e,i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];(e=console)[t].apply(e,r)}}function a(t){return n.reduce(function(e,i){return e[i]=r.bind(console,i,t),e},{})}r.level=a.level=function(t){o=t},e.default=a},function(t,e,i){var n=Array.prototype.slice,o=i(52),r=i(53),a=t.exports=function(t,e,i){return i||(i={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?i.strict?t===e:t==e:function(t,e,i){var d,c;if(s(t)||s(e))return!1;if(t.prototype!==e.prototype)return!1;if(r(t))return!!r(e)&&(t=n.call(t),e=n.call(e),a(t,e,i));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(d=0;d<t.length;d++)if(t[d]!==e[d])return!1;return!0}try{var u=o(t),h=o(e)}catch(t){return!1}if(u.length!=h.length)return!1;for(u.sort(),h.sort(),d=u.length-1;d>=0;d--)if(u[d]!=h[d])return!1;for(d=u.length-1;d>=0;d--)if(!a(t[c=u[d]],e[c],i))return!1;return typeof t==typeof e}(t,e,i))};function s(t){return null===t||void 0===t}function l(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=function(){function t(t,e,i){void 0===i&&(i={}),this.attrName=t,this.keyName=e,this.scope=null!=i.scope?i.scope&n.Scope.LEVEL|n.Scope.TYPE&n.Scope.ATTRIBUTE:n.Scope.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,function(t){return t.name})},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=n.query(t,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=u(i(2)),s=u(i(0)),l=u(i(4)),d=u(i(6)),c=u(i(7));function u(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=function(t){function e(){return h(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,d.default),e}();m.blotName="code",m.tagName="CODE";var g=function(t){function e(){return h(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return f(e,l.default),o(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce(function(e,i){return e.insert(i).insert("\n",t.formats())},new a.default)}},{key:"format",value:function(t,i){if(t!==this.statics.blotName||!i){var o=this.descendant(c.default,this.length()-1),a=n(o,1)[0];null!=a&&a.deleteAt(a.length()-1,1),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i)}}},{key:"formatAt",value:function(t,i,n,o){if(0!==i&&null!=s.default.query(n,s.default.Scope.BLOCK)&&(n!==this.statics.blotName||o!==this.statics.formats(this.domNode))){var r=this.newlineIndex(t);if(!(r<0||r>=t+i)){var a=this.newlineIndex(t,!0)+1,l=r-a+1,d=this.isolate(a,l),c=d.next;d.format(n,o),c instanceof e&&c.formatAt(0,t-a+i-l,n,o)}}}},{key:"insertAt",value:function(t,e,i){if(null==i){var o=this.descendant(c.default,t),r=n(o,2);r[0].insertAt(r[1],e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var e=this.domNode.textContent.slice(t).indexOf("\n");return e>-1?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(s.default.create("text","\n")),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var i=this.next;null!=i&&i.prev===this&&i.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===i.statics.formats(i.domNode)&&(i.optimize(t),i.moveChildren(this),i.remove())}},{key:"replace",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(t){var e=s.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof s.default.Embed?e.remove():e.unwrap()})}}],[{key:"create",value:function(t){var i=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return i.setAttribute("spellcheck",!1),i}},{key:"formats",value:function(){return!0}}]),e}();g.blotName="code-block",g.tagName="PRE",g.TAB="  ",e.Code=m,e.default=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=v(i(2)),s=v(i(20)),l=v(i(0)),d=v(i(13)),c=v(i(24)),u=i(4),h=v(u),p=v(i(16)),f=v(i(21)),m=v(i(11)),g=v(i(3));function v(t){return t&&t.__esModule?t:{default:t}}var y=/^[ -~]*$/,b=function(){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.scroll=e,this.delta=this.getDelta()}return r(t,[{key:"applyDelta",value:function(t){var e=this,i=!1;this.scroll.update();var r=this.scroll.length();return this.scroll.batchStart(),(t=function(t){return t.reduce(function(t,e){if(1===e.insert){var i=(0,f.default)(e.attributes);return delete i.image,t.insert({image:e.attributes.image},i)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,f.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)},new a.default)}(t)).reduce(function(t,a){var d=a.retain||a.delete||a.insert.length||1,c=a.attributes||{};if(null!=a.insert){if("string"==typeof a.insert){var p=a.insert;p.endsWith("\n")&&i&&(i=!1,p=p.slice(0,-1)),t>=r&&!p.endsWith("\n")&&(i=!0),e.scroll.insertAt(t,p);var f=e.scroll.line(t),m=o(f,2),v=m[0],y=m[1],b=(0,g.default)({},(0,u.bubbleFormats)(v));if(v instanceof h.default){var _=v.descendant(l.default.Leaf,y),w=o(_,1);b=(0,g.default)(b,(0,u.bubbleFormats)(w[0]))}c=s.default.attributes.diff(b,c)||{}}else if("object"===n(a.insert)){var x=Object.keys(a.insert)[0];if(null==x)return t;e.scroll.insertAt(t,x,a.insert[x])}r+=d}return Object.keys(c).forEach(function(i){e.scroll.formatAt(t,d,i,c[i])}),t+d},0),t.reduce(function(t,i){return"number"==typeof i.delete?(e.scroll.deleteAt(t,i.delete),t):t+(i.retain||i.insert.length||1)},0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new a.default).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach(function(o){if(null==i.scroll.whitelist||i.scroll.whitelist[o]){var r=i.scroll.lines(t,Math.max(e,1)),a=e;r.forEach(function(e){var r=e.length();if(e instanceof d.default){var s=t-e.offset(i.scroll),l=e.newlineIndex(s+a)-s+1;e.formatAt(s,l,o,n[o])}else e.format(o,n[o]);a-=r})}}),this.scroll.optimize(),this.update((new a.default).retain(t).retain(e,(0,f.default)(n)))}},{key:"formatText",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach(function(o){i.scroll.formatAt(t,e,o,n[o])}),this.update((new a.default).retain(t).retain(e,(0,f.default)(n)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(t,e){return t.concat(e.delta())},new a.default)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],n=[];0===e?this.scroll.path(t).forEach(function(t){var e=o(t,1)[0];e instanceof h.default?i.push(e):e instanceof l.default.Leaf&&n.push(e)}):(i=this.scroll.lines(t,e),n=this.scroll.descendants(l.default.Leaf,t,e));var r=[i,n].map(function(t){if(0===t.length)return{};for(var e=(0,u.bubbleFormats)(t.shift());Object.keys(e).length>0;){var i=t.shift();if(null==i)return e;e=_((0,u.bubbleFormats)(i),e)}return e});return g.default.apply(g.default,r)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter(function(t){return"string"==typeof t.insert}).map(function(t){return t.insert}).join("")}},{key:"insertEmbed",value:function(t,e,i){return this.scroll.insertAt(t,e,i),this.update((new a.default).retain(t).insert(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},e,i)))}},{key:"insertText",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach(function(o){i.scroll.formatAt(t,e.length,o,n[o])}),this.update((new a.default).retain(t).insert(e,(0,f.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===h.default.blotName&&!(t.children.length>1)&&t.children.head instanceof p.default}},{key:"removeFormat",value:function(t,e){var i=this.getText(t,e),n=this.scroll.line(t+e),r=o(n,2),s=r[0],l=r[1],c=0,u=new a.default;null!=s&&(c=s instanceof d.default?s.newlineIndex(l)-l+1:s.length()-l,u=s.delta().slice(l,l+c-1).insert("\n"));var h=this.getContents(t,e+c).diff((new a.default).insert(i).concat(u)),p=(new a.default).retain(t).concat(h);return this.applyDelta(p)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(y)&&l.default.find(e[0].target)){var o=l.default.find(e[0].target),r=(0,u.bubbleFormats)(o),s=o.offset(this.scroll),d=e[0].oldValue.replace(c.default.CONTENTS,""),h=(new a.default).insert(d),p=(new a.default).insert(o.value());t=(new a.default).retain(s).concat(h.diff(p,i)).reduce(function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)},new a.default),this.delta=n.compose(t)}else this.delta=this.getDelta(),t&&(0,m.default)(n.compose(t),this.delta)||(t=n.diff(this.delta,i));return t}}]),t}();function _(t,e){return Object.keys(e).reduce(function(i,n){return null==t[n]?i:(e[n]===t[n]?i[n]=e[n]:Array.isArray(e[n])?e[n].indexOf(t[n])<0&&(i[n]=e[n].concat([t[n]])):i[n]=[e[n],t[n]],i)},{})}e.default=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=d(i(0)),a=d(i(21)),s=d(i(11)),l=d(i(8));function d(t){return t&&t.__esModule?t:{default:t}}function c(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=(0,d(i(10)).default)("quill:selection"),p=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,t),this.index=e,this.length=i},f=function(){function t(e,i){var n=this;u(this,t),this.emitter=i,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=r.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)}),this.emitter.on(l.default.events.EDITOR_CHANGE,function(t,e){t===l.default.events.TEXT_CHANGE&&e.length()>0&&n.update(l.default.sources.SILENT)}),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,function(){if(n.hasFocus()){var t=n.getNativeRange();null!=t&&t.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,function(){try{n.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}})}}),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,function(t,e){if(e.range){var i=e.range;n.setNativeRange(i.startNode,i.startOffset,i.endNode,i.endOffset)}}),this.update(l.default.sources.SILENT)}return o(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",function(){t.composing=!0}),this.root.addEventListener("compositionend",function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout(function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,function(){t.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){t.mouseDown=!1,t.update(l.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!r.default.query(t,r.default.Scope.BLOCK)){if(i.start.node!==this.cursor.textNode){var n=r.default.find(i.start.node,!1);if(null==n)return;if(n instanceof r.default.Leaf){var o=n.split(i.start.offset);n.parent.insertBefore(this.cursor,o)}else n.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.scroll.length();t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;var o=void 0,r=this.scroll.leaf(t),a=n(r,2),s=a[0],l=a[1];if(null==s)return null;var d=s.position(l,!0),c=n(d,2);o=c[0],l=c[1];var u=document.createRange();if(e>0){u.setStart(o,l);var h=this.scroll.leaf(t+e),p=n(h,2);if(l=p[1],null==(s=p[0]))return null;var f=s.position(l,!0),m=n(f,2);return u.setEnd(o=m[0],l=m[1]),u.getBoundingClientRect()}var g="left",v=void 0;return o instanceof Text?(l<o.data.length?(u.setStart(o,l),u.setEnd(o,l+1)):(u.setStart(o,l-1),u.setEnd(o,l),g="right"),v=u.getBoundingClientRect()):(v=s.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:v.top+v.height,height:v.height,left:v[g],right:v[g],top:v.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var i=this.normalizeNative(e);return h.info("getNativeRange",i),i}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,i=[[t.start.node,t.start.offset]];t.native.collapsed||i.push([t.end.node,t.end.offset]);var o=i.map(function(t){var i=n(t,2),o=i[0],a=i[1],s=r.default.find(o,!0),l=s.offset(e.scroll);return 0===a?l:s instanceof r.default.Container?l+s.length():l+s.index(o,a)}),a=Math.min(Math.max.apply(Math,c(o)),this.scroll.length()-1),s=Math.min.apply(Math,[a].concat(c(o)));return new p(s,a-s)}},{key:"normalizeNative",value:function(t){if(!m(this.root,t.startContainer)||!t.collapsed&&!m(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(function(t){for(var e=t.node,i=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>i)e=e.childNodes[i],i=0;else{if(e.childNodes.length!==i)break;i=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=i}),e}},{key:"rangeToNative",value:function(t){var e=this,i=t.collapsed?[t.index]:[t.index,t.index+t.length],o=[],r=this.scroll.length();return i.forEach(function(t,i){t=Math.min(r-1,t);var a=e.scroll.leaf(t),s=n(a,2),l=s[1],d=s[0].position(l,0!==i),c=n(d,2);o.push(c[0],l=c[1])}),o.length<2&&(o=o.concat(o)),o}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var i=this.getBounds(e.index,e.length);if(null!=i){var o=this.scroll.length()-1,r=this.scroll.line(Math.min(e.index,o)),a=n(r,1)[0],s=a;if(e.length>0){var l=this.scroll.line(Math.min(e.index+e.length,o));s=n(l,1)[0]}if(null!=a&&null!=s){var d=t.getBoundingClientRect();i.top<d.top?t.scrollTop-=d.top-i.top:i.bottom>d.bottom&&(t.scrollTop+=i.bottom-d.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(h.info("setNativeRange",t,e,i,n),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=i.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||o||t!==a.startContainer||e!==a.startOffset||i!==a.endContainer||n!==a.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==i.tagName&&(n=[].indexOf.call(i.parentNode.childNodes,i),i=i.parentNode);var s=document.createRange();s.setStart(t,e),s.setEnd(i,n),r.removeAllRanges(),r.addRange(s)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof e&&(i=e,e=!1),h.info("setRange",t),null!=t){var n=this.rangeToNative(t);this.setNativeRange.apply(this,c(n).concat([e]))}else this.setNativeRange(null);this.update(i)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,e=this.lastRange,i=this.getRange(),o=n(i,2),r=o[1];if(this.lastRange=o[0],null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,s.default)(e,this.lastRange)){var d;!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();var c,u=[l.default.events.SELECTION_CHANGE,(0,a.default)(this.lastRange),(0,a.default)(e),t];(d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(u)),t!==l.default.sources.SILENT&&(c=this.emitter).emit.apply(c,u)}}}]),t}();function m(t,e){return e instanceof Text&&(e=e.parentNode),t.contains(e)}e.Range=p,e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(0))&&n.__esModule?n:{default:n},a=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Embed),o(e,[{key:"insertInto",value:function(t,i){0===t.children.length?function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,i):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}();a.blotName="break",a.tagName="BR",e.default=a},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(44),a=i(30),s=i(1),l=function(t){function e(e){var i=t.call(this,e)||this;return i.build(),i}return o(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach(function(t){t.attach()})},e.prototype.build=function(){var t=this;this.children=new r.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(e){try{var i=d(e);t.insertBefore(i,t.children.head||void 0)}catch(t){if(t instanceof s.ParchmentError)return;throw t}})},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,function(t,e,i){t.deleteAt(e,i)})},e.prototype.descendant=function(t,i){var n=this.children.find(i),o=n[0],r=n[1];return null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t?[o,r]:o instanceof e?o.descendant(t,r):[null,-1]},e.prototype.descendants=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=Number.MAX_VALUE);var o=[],r=n;return this.children.forEachAt(i,n,function(i,n,a){(null==t.blotName&&t(i)||null!=t.blotName&&i instanceof t)&&o.push(i),i instanceof e&&(o=o.concat(i.descendants(t,n,r))),r-=a}),o},e.prototype.detach=function(){this.children.forEach(function(t){t.detach()}),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,i,n){this.children.forEachAt(t,e,function(t,e,o){t.formatAt(e,o,i,n)})},e.prototype.insertAt=function(t,e,i){var n=this.children.find(t),o=n[0];if(o)o.insertAt(n[1],e,i);else{var r=null==i?s.create("text",e):s.create(e,i);this.appendChild(r)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(e){return t instanceof e}))throw new s.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce(function(t,e){return t+e.length()},0)},e.prototype.moveChildren=function(t,e){this.children.forEach(function(i){t.insertBefore(i,e)})},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var i=s.create(this.statics.defaultChild);this.appendChild(i),i.optimize(e)}else this.remove()},e.prototype.path=function(t,i){void 0===i&&(i=!1);var n=this.children.find(t,i),o=n[0],r=n[1],a=[[this,t]];return o instanceof e?a.concat(o.path(r,i)):(null!=o&&a.push([o,r]),a)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(i){i instanceof e&&i.moveChildren(this),t.prototype.replace.call(this,i)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var i=this.clone();return this.parent.insertBefore(i,this.next),this.children.forEachAt(t,this.length(),function(t,n,o){t=t.split(n,e),i.appendChild(t)}),i},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var i=this,n=[],o=[];t.forEach(function(t){t.target===i.domNode&&"childList"===t.type&&(n.push.apply(n,t.addedNodes),o.push.apply(o,t.removedNodes))}),o.forEach(function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=s.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==i.domNode||e.detach())}}),n.filter(function(t){return t.parentNode==i.domNode}).sort(function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(t){var e=null;null!=t.nextSibling&&(e=s.find(t.nextSibling));var n=d(t);n.next==e&&null!=n.next||(null!=n.parent&&n.parent.removeChild(i),i.insertBefore(n,e||void 0))})},e}(a.default);function d(t){var e=s.find(t);if(null==e)try{e=s.create(t)}catch(i){e=s.create(s.Scope.INLINE),[].slice.call(t.childNodes).forEach(function(t){e.domNode.appendChild(t)}),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}e.default=l},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(12),a=i(31),s=i(17),l=i(1),d=function(t){function e(e){var i=t.call(this,e)||this;return i.attributes=new a.default(i.domNode),i}return o(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var i=l.query(t);i instanceof r.default?this.attributes.attribute(i,e):e&&(null==i||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,i){var n=t.prototype.replaceWith.call(this,e,i);return this.attributes.copy(n),n},e.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i),e.some(function(t){return t.target===n.domNode&&"attributes"===t.type})&&this.attributes.build()},e.prototype.wrap=function(i,n){var o=t.prototype.wrap.call(this,i,n);return o instanceof e&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},e}(s.default);e.default=d},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),a=i(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var i=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]},e.prototype.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e.scope=a.Scope.INLINE_BLOT,e}(r.default);e.default=s},function(t,e,i){var n=i(11),o=i(3),r={attributes:{compose:function(t,e,i){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=o(!0,{},e);for(var r in i||(n=Object.keys(n).reduce(function(t,e){return null!=n[e]&&(t[e]=n[e]),t},{})),t)void 0!==t[r]&&void 0===e[r]&&(n[r]=t[r]);return Object.keys(n).length>0?n:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=Object.keys(t).concat(Object.keys(e)).reduce(function(i,o){return n(t[o],e[o])||(i[o]=void 0===e[o]?null:e[o]),i},{});return Object.keys(i).length>0?i:void 0},transform:function(t,e,i){if("object"!=typeof t)return e;if("object"==typeof e){if(!i)return e;var n=Object.keys(e).reduce(function(i,n){return void 0===t[n]&&(i[n]=e[n]),i},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(t){return new a(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};function a(t){this.ops=t,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var i=this.offset,n=r.length(e);if(t>=n-i?(t=n-i,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:o.insert="string"==typeof e.insert?e.insert.substr(i,t):e.insert,o}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?r.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,i=this.next(),n=this.ops.slice(this.index);return this.offset=t,this.index=e,[i].concat(n)}return[]},t.exports=r},function(t,e){var i=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var e,i,n;try{e=Map}catch(t){e=function(){}}try{i=Set}catch(t){i=function(){}}try{n=Promise}catch(t){n=function(){}}function o(r,s,l,d,c){"object"==typeof s&&(l=s.depth,d=s.prototype,c=s.includeNonEnumerable,s=s.circular);var u=[],h=[],p="undefined"!=typeof Buffer;return"undefined"==typeof s&&(s=!0),"undefined"==typeof l&&(l=1/0),function r(l,f){if(null===l)return null;if(0===f)return l;var m,g;if("object"!=typeof l)return l;if(t(l,e))m=new e;else if(t(l,i))m=new i;else if(t(l,n))m=new n(function(t,e){l.then(function(e){t(r(e,f-1))},function(t){e(r(t,f-1))})});else if(o.__isArray(l))m=[];else if(o.__isRegExp(l))m=new RegExp(l.source,a(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(o.__isDate(l))m=new Date(l.getTime());else{if(p&&Buffer.isBuffer(l))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(m),m;t(l,Error)?m=Object.create(l):"undefined"==typeof d?(g=Object.getPrototypeOf(l),m=Object.create(g)):(m=Object.create(d),g=d)}if(s){var v=u.indexOf(l);if(-1!=v)return h[v];u.push(l),h.push(m)}for(var y in t(l,e)&&l.forEach(function(t,e){var i=r(e,f-1),n=r(t,f-1);m.set(i,n)}),t(l,i)&&l.forEach(function(t){var e=r(t,f-1);m.add(e)}),l){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(m[y]=r(l[y],f-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(l);for(y=0;y<_.length;y++){var w=_[y];(!(T=Object.getOwnPropertyDescriptor(l,w))||T.enumerable||c)&&(m[w]=r(l[w],f-1),T.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var x=Object.getOwnPropertyNames(l);for(y=0;y<x.length;y++){var T,C=x[y];(T=Object.getOwnPropertyDescriptor(l,C))&&T.enumerable||(m[C]=r(l[C],f-1),Object.defineProperty(m,C,{enumerable:!1}))}}return m}(r,l)}function r(t){return Object.prototype.toString.call(t)}function a(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=r,o.__isDate=function(t){return"object"==typeof t&&"[object Date]"===r(t)},o.__isArray=function(t){return"object"==typeof t&&"[object Array]"===r(t)},o.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===r(t)},o.__getRegExpFlags=a,o}();"object"==typeof t&&t.exports&&(t.exports=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=p(i(0)),s=p(i(8)),l=i(4),d=p(l),c=p(i(16)),u=p(i(13)),h=p(i(25));function p(t){return t&&t.__esModule?t:{default:t}}function f(t){return t instanceof d.default||t instanceof l.BlockEmbed}var m=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.emitter=i.emitter,Array.isArray(i.whitelist)&&(n.whitelist=i.whitelist.reduce(function(t,e){return t[e]=!0,t},{})),n.domNode.addEventListener("DOMNodeInserted",function(){}),n.optimize(),n.enable(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Scroll),o(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,i){var o=this.line(t),a=n(o,2),s=a[0],d=a[1],h=this.line(t+i),p=n(h,1)[0];if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,i),null!=p&&s!==p&&d>0){if(s instanceof l.BlockEmbed||p instanceof l.BlockEmbed)return void this.optimize();if(s instanceof u.default){var f=s.newlineIndex(s.length(),!0);if(f>-1&&(s=s.split(f+1))===p)return void this.optimize()}else if(p instanceof u.default){var m=p.newlineIndex(0);m>-1&&p.split(m+1)}s.moveChildren(p,p.children.head instanceof c.default?null:p.children.head),s.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(t,i,n,o){(null==this.whitelist||this.whitelist[n])&&(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,i,n,o),this.optimize())}},{key:"insertAt",value:function(t,i,n){if(null==n||null==this.whitelist||this.whitelist[i]){if(t>=this.length())if(null==n||null==a.default.query(i,a.default.Scope.BLOCK)){var o=a.default.create(this.statics.defaultChild);this.appendChild(o),null==n&&i.endsWith("\n")&&(i=i.slice(0,-1)),o.insertAt(0,i,n)}else{var s=a.default.create(i,n);this.appendChild(s)}else r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,i,n);this.optimize()}}},{key:"insertBefore",value:function(t,i){if(t.statics.scope===a.default.Scope.INLINE_BLOT){var n=a.default.create(this.statics.defaultChild);n.appendChild(t),t=n}r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,i)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(f,t)}},{key:"lines",value:function(){return function t(e,i,n){var o=[],r=n;return e.children.forEachAt(i,n,function(e,i,n){f(e)?o.push(e):e instanceof a.default.Container&&(o=o.concat(t(e,i,r))),r-=n}),o}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,i),t.length>0&&this.emitter.emit(s.default.events.SCROLL_OPTIMIZE,t,i))}},{key:"path",value:function(t){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var i=s.default.sources.USER;"string"==typeof t&&(i=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(s.default.events.SCROLL_BEFORE_UPDATE,i,t),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(s.default.events.SCROLL_UPDATE,i,t)}}}]),e}();m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[d.default,l.BlockEmbed,h.default],e.default=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=m(i(21)),s=m(i(11)),l=m(i(3)),d=m(i(2)),c=m(i(20)),u=m(i(0)),h=m(i(5)),p=m(i(10)),f=m(i(9));function m(t){return t&&t.__esModule?t:{default:t}}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v=(0,p.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.bindings={},Object.keys(n.options.bindings).forEach(function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&n.options.bindings[e]&&n.addBinding(n.options.bindings[e])}),n.addBinding({key:e.keys.ENTER,shiftKey:null},C),n.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},w),n.addBinding({key:e.keys.DELETE},{collapsed:!0},x)):(n.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),n.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},x)),n.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},T),n.addBinding({key:e.keys.DELETE},{collapsed:!1},T),n.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),n.listen(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,f.default),r(e,null,[{key:"match",value:function(t,e){return e=S(e),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(i){return!!e[i]!==t[i]&&null!==e[i]})&&e.key===(t.which||t.keyCode)}}]),r(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S(t);if(null==n||null==n.key)return v.warn("Attempted to add invalid keyboard binding",n);"function"==typeof e&&(e={handler:e}),"function"==typeof i&&(i={handler:i}),n=(0,l.default)(n,e,i),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",function(i){if(!i.defaultPrevented){var r=(t.bindings[i.which||i.keyCode]||[]).filter(function(t){return e.match(i,t)});if(0!==r.length){var a=t.quill.getSelection();if(null!=a&&t.quill.hasFocus()){var l=t.quill.getLine(a.index),d=o(l,2),c=d[0],h=d[1],p=t.quill.getLeaf(a.index),f=o(p,2),m=f[0],g=f[1],v=0===a.length?[m,g]:t.quill.getLeaf(a.index+a.length),y=o(v,2),b=y[0],_=y[1],w=m instanceof u.default.Text?m.value().slice(0,g):"",x=b instanceof u.default.Text?b.value().slice(_):"",T={collapsed:0===a.length,empty:0===a.length&&c.length()<=1,format:t.quill.getFormat(a),offset:h,prefix:w,suffix:x};r.some(function(e){if(null!=e.collapsed&&e.collapsed!==T.collapsed)return!1;if(null!=e.empty&&e.empty!==T.empty)return!1;if(null!=e.offset&&e.offset!==T.offset)return!1;if(Array.isArray(e.format)){if(e.format.every(function(t){return null==T.format[t]}))return!1}else if("object"===n(e.format)&&!Object.keys(e.format).every(function(t){return!0===e.format[t]?null!=T.format[t]:!1===e.format[t]?null==T.format[t]:(0,s.default)(e.format[t],T.format[t])}))return!1;return!(null!=e.prefix&&!e.prefix.test(T.prefix)||null!=e.suffix&&!e.suffix.test(T.suffix)||!0===e.handler.call(t,a,T))})&&i.preventDefault()}}}})}}]),e}();function _(t,e){var i;return g(i={key:t,shiftKey:e,altKey:null},t===b.keys.LEFT?"prefix":"suffix",/^$/),g(i,"handler",function(i){var n=i.index;t===b.keys.RIGHT&&(n+=i.length+1);var r=this.quill.getLeaf(n);return!(o(r,1)[0]instanceof u.default.Embed&&(t===b.keys.LEFT?e?this.quill.setSelection(i.index-1,i.length+1,h.default.sources.USER):this.quill.setSelection(i.index-1,h.default.sources.USER):e?this.quill.setSelection(i.index,i.length+1,h.default.sources.USER):this.quill.setSelection(i.index+i.length+1,h.default.sources.USER),1))}),i}function w(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var i=this.quill.getLine(t.index),n=o(i,1)[0],r={};if(0===e.offset){var a=this.quill.getLine(t.index-1),s=o(a,1)[0];if(null!=s&&s.length()>1){var l=n.formats(),d=this.quill.getFormat(t.index-1,1);r=c.default.attributes.diff(l,d)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-u,u,h.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(t.index-u,u,r,h.default.sources.USER),this.quill.focus()}}function x(t,e){var i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-i)){var n={},r=0,a=this.quill.getLine(t.index),s=o(a,1)[0];if(e.offset>=s.length()-1){var l=this.quill.getLine(t.index+1),d=o(l,1)[0];if(d){var u=s.formats(),p=this.quill.getFormat(t.index,1);n=c.default.attributes.diff(u,p)||{},r=d.length()}}this.quill.deleteText(t.index,i,h.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index+r-1,i,n,h.default.sources.USER)}}function T(t){var e=this.quill.getLines(t),i={};if(e.length>1){var n=e[0].formats(),o=e[e.length-1].formats();i=c.default.attributes.diff(o,n)||{}}this.quill.deleteText(t,h.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index,1,i,h.default.sources.USER),this.quill.setSelection(t.index,h.default.sources.SILENT),this.quill.focus()}function C(t,e){var i=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var n=Object.keys(e.format).reduce(function(t,i){return u.default.query(i,u.default.Scope.BLOCK)&&!Array.isArray(e.format[i])&&(t[i]=e.format[i]),t},{});this.quill.insertText(t.index,"\n",n,h.default.sources.USER),this.quill.setSelection(t.index+1,h.default.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach(function(t){null==n[t]&&(Array.isArray(e.format[t])||"link"!==t&&i.quill.format(t,e.format[t],h.default.sources.USER))})}function k(t){return{key:b.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var i=u.default.query("code-block"),n=e.index,r=e.length,a=this.quill.scroll.descendant(i,n),s=o(a,2),l=s[0],d=s[1];if(null!=l){var c=this.quill.getIndex(l),p=l.newlineIndex(d,!0)+1,f=l.newlineIndex(c+d+r),m=l.domNode.textContent.slice(p,f).split("\n");d=0,m.forEach(function(e,o){t?(l.insertAt(p+d,i.TAB),d+=i.TAB.length,0===o?n+=i.TAB.length:r+=i.TAB.length):e.startsWith(i.TAB)&&(l.deleteAt(p+d,i.TAB.length),d-=i.TAB.length,0===o?n-=i.TAB.length:r-=i.TAB.length),d+=e.length+1}),this.quill.update(h.default.sources.USER),this.quill.setSelection(n,r,h.default.sources.SILENT)}}}}function E(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,i){this.quill.format(t,!i.format[t],h.default.sources.USER)}}}function S(t){if("string"==typeof t||"number"==typeof t)return S({key:t});if("object"===("undefined"==typeof t?"undefined":n(t))&&(t=(0,a.default)(t,!1)),"string"==typeof t.key)if(null!=b.keys[t.key.toUpperCase()])t.key=b.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[y]=t.shortKey,delete t.shortKey),t}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:E("bold"),italic:E("italic"),underline:E("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",h.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",h.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",h.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,h.default.sources.USER)}},"indent code-block":k(!0),"outdent code-block":k(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,h.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new d.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,h.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,h.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,h.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),i=o(e,2),n=i[0],r=i[1],a=(0,l.default)({},n.formats(),{list:"checked"}),s=(new d.default).retain(t.index).insert("\n",a).retain(n.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,h.default.sources.USER),this.quill.setSelection(t.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var i=this.quill.getLine(t.index),n=o(i,2),r=n[0],a=n[1],s=(new d.default).retain(t.index).insert("\n",e.format).retain(r.length()-a-1).retain(1,{header:null});this.quill.updateContents(s,h.default.sources.USER),this.quill.setSelection(t.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var i=e.prefix.length,n=this.quill.getLine(t.index),r=o(n,2),a=r[0],s=r[1];if(s>i)return!0;var l=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(t.index," ",h.default.sources.USER),this.quill.history.cutoff();var c=(new d.default).retain(t.index-s).delete(i+1).retain(a.length()-2-s).retain(1,{list:l});this.quill.updateContents(c,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-i,h.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),i=o(e,2),n=i[0],r=i[1],a=(new d.default).retain(t.index+n.length()-r-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(a,h.default.sources.USER)}},"embed left":_(b.keys.LEFT,!1),"embed left shift":_(b.keys.LEFT,!0),"embed right":_(b.keys.RIGHT,!1),"embed right shift":_(b.keys.RIGHT,!0)}},e.default=b,e.SHORTKEY=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(0)),a=s(i(7));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.selection=i,n.textNode=document.createTextNode(e.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Embed),o(e,null,[{key:"value",value:function(){}}]),o(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,i){if(0!==this._length)return n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i);for(var o=this,a=0;null!=o&&o.statics.scope!==r.default.Scope.BLOCK_BLOT;)a+=o.offset(o.parent),o=o.parent;null!=o&&(this._length=e.CONTENTS.length,o.optimize(),o.formatAt(a,e.CONTENTS.length,t,i),this._length=0)}},{key:"index",value:function(t,i){return t===this.textNode?0:n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,i)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,i=this.selection.getNativeRange(),n=void 0,o=void 0,s=void 0;if(null!=i&&i.start.node===t&&i.end.node===t){var l=[t,i.start.offset,i.end.offset];n=l[0],o=l[1],s=l[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var d=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof a.default?(n=this.next.domNode,this.next.insertAt(0,d),this.textNode.data=e.CONTENTS):(this.textNode.data=d,this.parent.insertBefore(r.default.create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}([o,s].map(function(t){return Math.max(0,Math.min(n.data.length,t-1))}),2);return{startNode:n,startOffset:o=c[0],endNode:n,endOffset:s=c[1]}}}}},{key:"update",value:function(t,e){var i=this;if(t.some(function(t){return"characterData"===t.type&&t.target===i.textNode})){var n=this.restore();n&&(e.range=n)}}},{key:"value",value:function(){return""}}]),e}();l.blotName="cursor",l.className="ql-cursor",l.tagName="span",l.CONTENTS="\ufeff",e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),o=i(4),r=a(o);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default.Container),e}();s.allowedChildren=[r.default,o.BlockEmbed,s],e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(0))&&n.__esModule?n:{default:n},a=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Attributor.Style),o(e,[{key:"value",value:function(t){var i=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return i.startsWith("rgb(")?"#"+(i=i.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(t){return("00"+parseInt(t).toString(16)).slice(-2)}).join(""):i}}]),e}(),s=new r.default.Attributor.Class("color","ql-color",{scope:r.default.Scope.INLINE}),l=new a("color","color",{scope:r.default.Scope.INLINE});e.ColorAttributor=a,e.ColorClass=s,e.ColorStyle=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=(n=i(6))&&n.__esModule?n:{default:n},s=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"format",value:function(t,i){if(t!==this.statics.blotName||!i)return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i);i=this.constructor.sanitize(i),this.domNode.setAttribute("href",i)}}],[{key:"create",value:function(t){var i=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),i.setAttribute("href",t),i.setAttribute("rel","noopener noreferrer"),i.setAttribute("target","_blank"),i}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return l(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}();function l(t,e){var i=document.createElement("a");i.href=t;var n=i.href.slice(0,i.href.indexOf(":"));return e.indexOf(n)>-1}s.blotName="link",s.tagName="A",s.SANITIZED_URL="about:blank",s.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=s,e.sanitize=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(23)),a=s(i(107));function s(t){return t&&t.__esModule?t:{default:t}}var l=0;function d(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}var c=function(){function t(e){var i=this;!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){i.togglePicker()}),this.label.addEventListener("keydown",function(t){switch(t.keyCode){case r.default.keys.ENTER:i.togglePicker();break;case r.default.keys.ESCAPE:i.escape(),t.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return o(t,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),d(this.label,"aria-expanded"),d(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,i=document.createElement("span");return i.tabIndex="0",i.setAttribute("role","button"),i.classList.add("ql-picker-item"),t.hasAttribute("value")&&i.setAttribute("data-value",t.getAttribute("value")),t.textContent&&i.setAttribute("data-label",t.textContent),i.addEventListener("click",function(){e.selectItem(i,!0)}),i.addEventListener("keydown",function(t){switch(t.keyCode){case r.default.keys.ENTER:e.selectItem(i,!0),t.preventDefault();break;case r.default.keys.ESCAPE:e.escape(),t.preventDefault()}}),i}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=a.default,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,[].slice.call(this.select.options).forEach(function(i){var n=t.buildItem(i);e.appendChild(n),!0===i.selected&&t.selectItem(n)}),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach(function(e){t.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout(function(){return t.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.container.querySelector(".ql-selected");if(t!==i&&(null!=i&&i.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":n(Event))){var o=document.createEvent("Event");o.initEvent("change",!0,!0),this.select.dispatchEvent(o)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var i=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",i)}}]),t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(0)),o=v(i(5)),r=i(4),a=v(r),s=v(i(16)),l=v(i(25)),d=v(i(24)),c=v(i(35)),u=v(i(6)),h=v(i(22)),p=v(i(7)),f=v(i(55)),m=v(i(42)),g=v(i(23));function v(t){return t&&t.__esModule?t:{default:t}}o.default.register({"blots/block":a.default,"blots/block/embed":r.BlockEmbed,"blots/break":s.default,"blots/container":l.default,"blots/cursor":d.default,"blots/embed":c.default,"blots/inline":u.default,"blots/scroll":h.default,"blots/text":p.default,"modules/clipboard":f.default,"modules/history":m.default,"modules/keyboard":g.default}),n.default.register(a.default,s.default,d.default,u.default,h.default,p.default),e.default=o.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=function(){function t(t){this.domNode=t,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return n.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,i,o){var r=this.isolate(t,e);if(null!=n.query(i,n.Scope.BLOT)&&o)r.wrap(i,o);else if(null!=n.query(i,n.Scope.ATTRIBUTE)){var a=n.create(this.statics.scope);r.wrap(a),a.format(i,o)}},t.prototype.insertAt=function(t,e,i){var o=null==i?n.create("text",e):n.create(e,i),r=this.split(t);this.parent.insertBefore(o,r)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var i=null;t.children.insertBefore(this,e),null!=e&&(i=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==i||t.domNode.insertBefore(this.domNode,i),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var i=this.split(t);return i.split(e),i},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var i="string"==typeof t?n.create(t,e):t;return i.replace(this),i},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var i="string"==typeof t?n.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(i,this.next),i.appendChild(this),i},t.blotName="abstract",t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(12),o=i(32),r=i(33),a=i(1),s=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=n.default.keys(this.domNode),i=o.default.keys(this.domNode),s=r.default.keys(this.domNode);e.concat(i).concat(s).forEach(function(e){var i=a.query(e,a.Scope.ATTRIBUTE);i instanceof n.default&&(t.attributes[i.attrName]=i)})},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach(function(i){var n=e.attributes[i].value(e.domNode);t.format(i,n)})},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach(function(t){e.attributes[t].remove(e.domNode)}),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce(function(e,i){return e[i]=t.attributes[i].value(t.domNode),e},{})},t}();e.default=s},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function r(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(function(t){return 0===t.indexOf(e+"-")})}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){r(t,this.keyName).forEach(function(e){t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(r(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(i(12).default);e.default=a},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function r(t){var e=t.split("-"),i=e.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return e[0]+i}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map(function(t){return t.split(":")[0].trim()})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[r(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[r(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[r(this.keyName)];return this.canAdd(t,e)?e:""},e}(i(12).default);e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.quill=e,this.options=i,this.modules={}}return n(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach(function(e){null==t.modules[e]&&t.addModule(e)})}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();o.DEFAULTS={modules:{}},o.themes={default:o},e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=a(i(0)),r=a(i(7));function a(t){return t&&t.__esModule?t:{default:t}}var s="\ufeff",l=function(t){function e(t){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable",!1),[].slice.call(i.domNode.childNodes).forEach(function(t){i.contentNode.appendChild(t)}),i.leftGuard=document.createTextNode(s),i.rightGuard=document.createTextNode(s),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Embed),n(e,[{key:"index",value:function(t,i){return t===this.leftGuard?0:t===this.rightGuard?1:function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,i)}},{key:"restore",value:function(t){var e=void 0,i=void 0,n=t.data.split(s).join("");if(t===this.leftGuard)if(this.prev instanceof r.default){var a=this.prev.length();this.prev.insertAt(a,n),e={startNode:this.prev.domNode,startOffset:a+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(o.default.create(i),this),e={startNode:i,startOffset:n.length};else t===this.rightGuard&&(this.next instanceof r.default?(this.next.insertAt(0,n),e={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(o.default.create(i),this.next),e={startNode:i,startOffset:n.length}));return t.data=s,e}},{key:"update",value:function(t,e){var i=this;t.forEach(function(t){if("characterData"===t.type&&(t.target===i.leftGuard||t.target===i.rightGuard)){var n=i.restore(t.target);n&&(e.range=n)}})}}]),e}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var n,o=(n=i(0))&&n.__esModule?n:{default:n},r={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new o.default.Attributor.Attribute("align","align",r),s=new o.default.Attributor.Class("align","ql-align",r),l=new o.default.Attributor.Style("align","text-align",r);e.AlignAttribute=a,e.AlignClass=s,e.AlignStyle=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var n,o=(n=i(0))&&n.__esModule?n:{default:n},r=i(26),a=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),s=new r.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});e.BackgroundClass=a,e.BackgroundStyle=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var n,o=(n=i(0))&&n.__esModule?n:{default:n},r={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},a=new o.default.Attributor.Attribute("direction","dir",r),s=new o.default.Attributor.Class("direction","ql-direction",r),l=new o.default.Attributor.Style("direction","direction",r);e.DirectionAttribute=a,e.DirectionClass=s,e.DirectionStyle=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(0))&&n.__esModule?n:{default:n},a={scope:r.default.Scope.INLINE,whitelist:["serif","monospace"]},s=new r.default.Attributor.Class("font","ql-font",a),l=new(function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Attributor.Style),o(e,[{key:"value",value:function(t){return function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}())("font","font-family",a);e.FontStyle=l,e.FontClass=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var n,o=(n=i(0))&&n.__esModule?n:{default:n},r=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=r,e.SizeStyle=a},function(t,e,i){"use strict";t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=s(i(0)),r=s(i(5)),a=s(i(9));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(r.default.events.EDITOR_CHANGE,function(t,e,i,o){t!==r.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&o!==r.default.sources.USER?n.transform(e):n.record(e,i))}),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),n(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var i=this.stack[t].pop();this.stack[e].push(i),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i[t],r.default.sources.USER),this.ignoreChange=!1;var n=d(i[t]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var i=this.quill.getContents().diff(e),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var o=this.stack.undo.pop();i=i.compose(o.undo),t=o.redo.compose(t)}else this.lastRecorded=n;this.stack.undo.push({redo:t,undo:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}),this.stack.redo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}();function d(t){var e=t.reduce(function(t,e){return t+(e.delete||0)},0),i=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some(function(t){return null!=o.default.query(t,o.default.Scope.BLOCK)}))}(t)&&(i-=1),i}l.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=l,e.getLastChangeIndex=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=p(i(3)),r=p(i(2)),a=p(i(8)),s=p(i(23)),l=p(i(34)),d=p(i(59)),c=p(i(60)),u=p(i(28)),h=p(i(61));function p(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var v=[!1,"center","right","justify"],y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],b=[!1,"serif","monospace"],_=["1","2","3",!1],w=["small",!1,"large","huge"],x=function(t){function e(t,i){f(this,e);var n=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return t.emitter.listenDOM("click",document.body,function e(i){if(!document.body.contains(t.root))return document.body.removeEventListener("click",e);null==n.tooltip||n.tooltip.root.contains(i.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(t){t.container.contains(i.target)||t.close()})}),n}return g(e,l.default),n(e,[{key:"addModule",value:function(t){var i=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(i),i}},{key:"buildButtons",value:function(t,e){t.forEach(function(t){(t.getAttribute("class")||"").split(/\s+/).forEach(function(i){if(i.startsWith("ql-")&&(i=i.slice("ql-".length),null!=e[i]))if("direction"===i)t.innerHTML=e[i][""]+e[i].rtl;else if("string"==typeof e[i])t.innerHTML=e[i];else{var n=t.value||"";null!=n&&e[i][n]&&(t.innerHTML=e[i][n])}})})}},{key:"buildPickers",value:function(t,e){var i=this;this.pickers=t.map(function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&C(t,v),new c.default(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var i=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&C(t,y,"background"===i?"#ffffff":"#000000"),new d.default(t,e[i])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?C(t,b):t.classList.contains("ql-header")?C(t,_):t.classList.contains("ql-size")&&C(t,w)),new u.default(t)}),this.quill.on(a.default.events.EDITOR_CHANGE,function(){i.pickers.forEach(function(t){t.update()})})}}]),e}();x.DEFAULTS=(0,o.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",function(){if(null!=e.files&&null!=e.files[0]){var i=new FileReader;i.onload=function(i){var n=t.quill.getSelection(!0);t.quill.updateContents((new r.default).retain(n.index).delete(n.length).insert({image:i.target.result}),a.default.sources.USER),t.quill.setSelection(n.index+1,a.default.sources.SILENT),e.value=""},i.readAsDataURL(e.files[0])}}),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var T=function(t){function e(t,i){f(this,e);var n=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return g(e,h.default),n(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",function(e){s.default.match(e,"enter")?(t.save(),e.preventDefault()):s.default.match(e,"escape")&&(t.cancel(),e.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t,e,i=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var n=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",i,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",i,a.default.sources.USER)),this.quill.root.scrollTop=n;break;case"video":i=(e=(t=i).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t;case"formula":if(!i)break;var o=this.quill.getSelection(!0);if(null!=o){var r=o.index+o.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),i,a.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",a.default.sources.USER),this.quill.setSelection(r+2,a.default.sources.USER)}}this.textbox.value="",this.hide()}}]),e}();function C(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach(function(e){var n=document.createElement("option");e===i?n.setAttribute("selected","selected"):n.setAttribute("value",e),t.appendChild(n)})}e.BaseTooltip=T,e.default=x},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,i=this.iterator();e=i();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,i=this.head;null!=i;){if(i===t)return e;e+=i.length(),i=i.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var i,n=this.iterator();i=n();){var o=i.length();if(t<o||e&&t===o&&(null==i.next||0!==i.next.length()))return[i,t];t-=o}return[null,0]},t.prototype.forEach=function(t){for(var e,i=this.iterator();e=i();)t(e)},t.prototype.forEachAt=function(t,e,i){if(!(e<=0))for(var n,o=this.find(t),r=t-o[1],a=this.iterator(o[0]);(n=a())&&r<t+e;){var s=n.length();t>r?i(n,t-r,Math.min(e,r+s-t)):i(n,0,Math.min(s,t+e-r)),r+=s}},t.prototype.map=function(t){return this.reduce(function(e,i){return e.push(t(i)),e},[])},t.prototype.reduce=function(t,e){for(var i,n=this.iterator();i=n();)e=t(e,i);return e},t}();e.default=n},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(17),a=i(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(t){function e(e){var i=t.call(this,e)||this;return i.scroll=i,i.observer=new MutationObserver(function(t){i.update(t)}),i.observer.observe(i.domNode,s),i.attach(),i}return o(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,i){this.update(),0===e&&i===this.length()?this.children.forEach(function(t){t.remove()}):t.prototype.deleteAt.call(this,e,i)},e.prototype.formatAt=function(e,i,n,o){this.update(),t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.insertAt=function(e,i,n){this.update(),t.prototype.insertAt.call(this,e,i,n)},e.prototype.optimize=function(e,i){var n=this;void 0===e&&(e=[]),void 0===i&&(i={}),t.prototype.optimize.call(this,i);for(var o=[].slice.call(this.observer.takeRecords());o.length>0;)e.push(o.pop());for(var s=function(t,e){void 0===e&&(e=!0),null!=t&&t!==n&&null!=t.domNode.parentNode&&(null==t.domNode[a.DATA_KEY].mutations&&(t.domNode[a.DATA_KEY].mutations=[]),e&&s(t.parent))},l=function(t){null!=t.domNode[a.DATA_KEY]&&null!=t.domNode[a.DATA_KEY].mutations&&(t instanceof r.default&&t.children.forEach(l),t.optimize(i))},d=e,c=0;d.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach(function(t){var e=a.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(s(a.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,function(t){var e=a.find(t,!1);s(e,!1),e instanceof r.default&&e.children.forEach(function(t){s(t,!1)})})):"attributes"===t.type&&s(e.prev)),s(e))}),this.children.forEach(l),o=(d=[].slice.call(this.observer.takeRecords())).slice();o.length>0;)e.push(o.pop())}},e.prototype.update=function(e,i){var n=this;void 0===i&&(i={}),(e=e||this.observer.takeRecords()).map(function(t){var e=a.find(t.target,!0);return null==e?null:null==e.domNode[a.DATA_KEY].mutations?(e.domNode[a.DATA_KEY].mutations=[t],e):(e.domNode[a.DATA_KEY].mutations.push(t),null)}).forEach(function(t){null!=t&&t!==n&&null!=t.domNode[a.DATA_KEY]&&t.update(t.domNode[a.DATA_KEY].mutations||[],i)}),null!=this.domNode[a.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,i),this.optimize(e,i)},e.blotName="scroll",e.defaultChild="block",e.scope=a.Scope.BLOCK_BLOT,e.tagName="DIV",e}(r.default);e.default=l},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(18),a=i(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.formats=function(i){if(i.tagName!==e.tagName)return t.formats.call(this,i)},e.prototype.format=function(i,n){var o=this;i!==this.statics.blotName||n?t.prototype.format.call(this,i,n):(this.children.forEach(function(t){t instanceof r.default||(t=t.wrap(e.blotName,!0)),o.attributes.copy(t)}),this.unwrap())},e.prototype.formatAt=function(e,i,n,o){null!=this.formats()[n]||a.query(n,a.Scope.ATTRIBUTE)?this.isolate(e,i).format(n,o):t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.optimize=function(i){t.prototype.optimize.call(this,i);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var o=this.next;o instanceof e&&o.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(t[i]!==e[i])return!1;return!0}(n,o.formats())&&(o.moveChildren(this),o.remove())},e.blotName="inline",e.scope=a.Scope.INLINE_BLOT,e.tagName="SPAN",e}(r.default);e.default=s},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(18),a=i(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.formats=function(i){var n=a.query(e.blotName).tagName;if(i.tagName!==n)return t.formats.call(this,i)},e.prototype.format=function(i,n){null!=a.query(i,a.Scope.BLOCK)&&(i!==this.statics.blotName||n?t.prototype.format.call(this,i,n):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,i,n,o){null!=a.query(n,a.Scope.BLOCK)?this.format(n,o):t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.insertAt=function(e,i,n){if(null==n||null!=a.query(i,a.Scope.INLINE))t.prototype.insertAt.call(this,e,i,n);else{var o=this.split(e),r=a.create(i,n);o.parent.insertBefore(r,o)}},e.prototype.update=function(e,i){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,i)},e.blotName="block",e.scope=a.Scope.BLOCK_BLOT,e.tagName="P",e}(r.default);e.default=s},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.formats=function(t){},e.prototype.format=function(e,i){t.prototype.formatAt.call(this,0,this.length(),e,i)},e.prototype.formatAt=function(e,i,n,o){0===e&&i===this.length()?this.format(n,o):t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(i(19).default);e.default=r},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(19),a=i(1),s=function(t){function e(e){var i=t.call(this,e)||this;return i.text=i.statics.value(i.domNode),i}return o(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,i,n){null==n?(this.text=this.text.slice(0,e)+i+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,i,n)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(i){t.prototype.optimize.call(this,i),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var i=a.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next),this.text=this.statics.value(this.domNode),i},e.prototype.update=function(t,e){var i=this;t.some(function(t){return"characterData"===t.type&&t.target===i.domNode})&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=a.Scope.INLINE_BLOT,e}(r.default);e.default=s},function(t,e,i){"use strict";var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:o.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e=e||0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var i=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>i.length)&&(e=i.length);var n=i.indexOf(t,e-=t.length);return-1!==n&&n===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(t.call(o,e=i[r],r,i))return e}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,e){var i=-1,n=1,o=0;function r(t,e,d){if(t==e)return t?[[o,t]]:[];(d<0||t.length<d)&&(d=null);var u=s(t,e),h=t.substring(0,u);u=l(t=t.substring(u),e=e.substring(u));var p=t.substring(t.length-u),f=function(t,e){var d;if(!t)return[[n,e]];if(!e)return[[i,t]];var c=t.length>e.length?t:e,u=t.length>e.length?e:t,h=c.indexOf(u);if(-1!=h)return d=[[n,c.substring(0,h)],[o,u],[n,c.substring(h+u.length)]],t.length>e.length&&(d[0][0]=d[2][0]=i),d;if(1==u.length)return[[i,t],[n,e]];var p=function(t,e){var i=t.length>e.length?t:e,n=t.length>e.length?e:t;if(i.length<4||2*n.length<i.length)return null;function o(t,e,i){for(var n,o,r,a,d=t.substring(i,i+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(d,c+1));){var h=s(t.substring(i),e.substring(c)),p=l(t.substring(0,i),e.substring(0,c));u.length<p+h&&(u=e.substring(c-p,c)+e.substring(c,c+h),n=t.substring(0,i-p),o=t.substring(i+h),r=e.substring(0,c-p),a=e.substring(c+h))}return 2*u.length>=t.length?[n,o,r,a,u]:null}var r,a,d,c,u,h=o(i,n,Math.ceil(i.length/4)),p=o(i,n,Math.ceil(i.length/2));return h||p?(r=p?h&&h[4].length>p[4].length?h:p:h,t.length>e.length?(a=r[0],d=r[1],c=r[2],u=r[3]):(c=r[0],u=r[1],a=r[2],d=r[3]),[a,d,c,u,r[4]]):null}(t,e);if(p){var f=p[1],m=p[3],g=p[4],v=r(p[0],p[2]),y=r(f,m);return v.concat([[o,g]],y)}return function(t,e){for(var o=t.length,r=e.length,s=Math.ceil((o+r)/2),l=s,d=2*s,c=new Array(d),u=new Array(d),h=0;h<d;h++)c[h]=-1,u[h]=-1;c[l+1]=0,u[l+1]=0;for(var p=o-r,f=p%2!=0,m=0,g=0,v=0,y=0,b=0;b<s;b++){for(var _=-b+m;_<=b-g;_+=2){for(var w=l+_,x=(S=_==-b||_!=b&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1)-_;S<o&&x<r&&t.charAt(S)==e.charAt(x);)S++,x++;if(c[w]=S,S>o)g+=2;else if(x>r)m+=2;else if(f&&(k=l+p-_)>=0&&k<d&&-1!=u[k]){var T=o-u[k];if(S>=T)return a(t,e,S,x)}}for(var C=-b+v;C<=b-y;C+=2){for(var k=l+C,E=(T=C==-b||C!=b&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1)-C;T<o&&E<r&&t.charAt(o-T-1)==e.charAt(r-E-1);)T++,E++;if(u[k]=T,T>o)y+=2;else if(E>r)v+=2;else if(!f&&(w=l+p-C)>=0&&w<d&&-1!=c[w]){var S=c[w];if(x=l+S-w,S>=(T=o-T))return a(t,e,S,x)}}}return[[i,t],[n,e]]}(t,e)}(t=t.substring(0,t.length-u),e=e.substring(0,e.length-u));return h&&f.unshift([o,h]),p&&f.push([o,p]),function t(e){e.push([o,""]);for(var r,a=0,d=0,c=0,u="",h="";a<e.length;)switch(e[a][0]){case n:c++,h+=e[a][1],a++;break;case i:d++,u+=e[a][1],a++;break;case o:d+c>1?(0!==d&&0!==c&&(0!==(r=s(h,u))&&(a-d-c>0&&e[a-d-c-1][0]==o?e[a-d-c-1][1]+=h.substring(0,r):(e.splice(0,0,[o,h.substring(0,r)]),a++),h=h.substring(r),u=u.substring(r)),0!==(r=l(h,u))&&(e[a][1]=h.substring(h.length-r)+e[a][1],h=h.substring(0,h.length-r),u=u.substring(0,u.length-r))),0===d?e.splice(a-c,d+c,[n,h]):0===c?e.splice(a-d,d+c,[i,u]):e.splice(a-d-c,d+c,[i,u],[n,h]),a=a-d-c+(d?1:0)+(c?1:0)+1):0!==a&&e[a-1][0]==o?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,c=0,d=0,u="",h=""}""===e[e.length-1][1]&&e.pop();var p=!1;for(a=1;a<e.length-1;)e[a-1][0]==o&&e[a+1][0]==o&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),p=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),p=!0)),a++;p&&t(e)}(f),null!=d&&(f=function(t,e){var n=function(t,e){if(0===e)return[o,t];for(var n=0,r=0;r<t.length;r++){var a=t[r];if(a[0]===i||a[0]===o){var s=n+a[1].length;if(e===s)return[r+1,t];if(e<s){t=t.slice();var l=e-n,d=[a[0],a[1].slice(0,l)],c=[a[0],a[1].slice(l)];return t.splice(r,1,d,c),[r+1,t]}n=s}}throw new Error("cursor_pos is out of bounds!")}(t,e),r=n[1],a=n[0],s=r[a],l=r[a+1];if(null==s)return t;if(s[0]!==o)return t;if(null!=l&&s[1]+l[1]===l[1]+s[1])return r.splice(a,2,l,s),c(r,a,2);if(null!=l&&0===l[1].indexOf(s[1])){r.splice(a,2,[l[0],s[1]],[0,s[1]]);var d=l[1].slice(s[1].length);return d.length>0&&r.splice(a+2,0,[l[0],d]),c(r,a,3)}return t}(f,d)),function(t){for(var e=!1,r=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},a=2;a<t.length;a+=1)t[a-2][0]===o&&(s=t[a-2][1]).charCodeAt(s.length-1)>=55296&&s.charCodeAt(s.length-1)<=56319&&t[a-1][0]===i&&r(t[a-1][1])&&t[a][0]===n&&r(t[a][1])&&(e=!0,t[a-1][1]=t[a-2][1].slice(-1)+t[a-1][1],t[a][1]=t[a-2][1].slice(-1)+t[a][1],t[a-2][1]=t[a-2][1].slice(0,-1));var s;if(!e)return t;var l=[];for(a=0;a<t.length;a+=1)t[a][1].length>0&&l.push(t[a]);return l}(f)}function a(t,e,i,n){var o=t.substring(0,i),a=e.substring(0,n),s=t.substring(i),l=e.substring(n),d=r(o,a),c=r(s,l);return d.concat(c)}function s(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(r,o)==e.substring(r,o)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return o}function l(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return o}var d=r;function c(t,e,i){for(var n=e+i-1;n>=0&&n>=e-1;n--)if(n+1<t.length){var o=t[n],r=t[n+1];o[0]===r[1]&&t.splice(n,2,[o[0],o[1]+r[1]])}return t}d.INSERT=n,d.DELETE=i,d.EQUAL=o,t.exports=d},function(t,e){function i(t){var e=[];for(var i in t)e.push(i);return e}(t.exports="function"==typeof Object.keys?Object.keys:i).shim=i},function(t,e){var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function o(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=i?n:o).supported=n,e.unsupported=o},function(t,e){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function o(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,e,o=[];if(0===this._eventsCount)return o;for(e in t=this._events)i.call(t,e)&&o.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t,e){var i=this._events[n?n+t:t];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,a=new Array(r);o<r;o++)a[o]=i[o].fn;return a},a.prototype.emit=function(t,e,i,o,r,a){var s=n?n+t:t;if(!this._events[s])return!1;var l,d,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,o),!0;case 5:return c.fn.call(c.context,e,i,o,r),!0;case 6:return c.fn.call(c.context,e,i,o,r,a),!0}for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var h,p=c.length;for(d=0;d<p;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,e);break;case 3:c[d].fn.call(c[d].context,e,i);break;case 4:c[d].fn.call(c[d].context,e,i,o);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c[d].fn.apply(c[d].context,l)}}return!0},a.prototype.on=function(t,e,i){var o=new r(e,i||this),a=n?n+t:t;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},a.prototype.once=function(t,e,i){var o=new r(e,i||this,!0),a=n?n+t:t;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},a.prototype.removeListener=function(t,e,i,r){var a=n?n+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||(0==--this._eventsCount?this._events=new o:delete this._events[a]);else{for(var l=0,d=[],c=s.length;l<c;l++)(s[l].fn!==e||r&&!s[l].once||i&&s[l].context!==i)&&d.push(s[l]);d.length?this._events[a]=1===d.length?d[0]:d:0==--this._eventsCount?this._events=new o:delete this._events[a]}return this},a.prototype.removeAllListeners=function(t){var e;return t?this._events[e=n?n+t:t]&&(0==--this._eventsCount?this._events=new o:delete this._events[e]):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=n,a.EventEmitter=a,"undefined"!=typeof t&&(t.exports=a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=b(i(3)),s=b(i(2)),l=b(i(0)),d=b(i(5)),c=b(i(10)),u=b(i(9)),h=i(36),p=i(37),f=b(i(13)),m=i(26),g=i(38),v=i(39),y=i(40);function b(t){return t&&t.__esModule?t:{default:t}}function _(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var w=(0,c.default)("quill:clipboard"),x="__ql-matcher",T=[[Node.TEXT_NODE,N],[Node.TEXT_NODE,R],["br",function(t,e){return O(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,B],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,function(t,e){var i={},n=t.style||{};return n.fontStyle&&"italic"===A(t).fontStyle&&(i.italic=!0),n.fontWeight&&(A(t).fontWeight.startsWith("bold")||parseInt(A(t).fontWeight)>=700)&&(i.bold=!0),Object.keys(i).length>0&&(e=S(e,i)),parseFloat(n.textIndent||0)>0&&(e=(new s.default).insert("\t").concat(e)),e}],["li",function(t,e){var i=l.default.query(t);if(null==i||"list-item"!==i.blotName||!O(e,"\n"))return e;for(var n=-1,o=t.parentNode;!o.classList.contains("ql-clipboard");)"list"===(l.default.query(o)||{}).blotName&&(n+=1),o=o.parentNode;return n<=0?e:e.compose((new s.default).retain(e.length()-1).retain(1,{indent:n}))}],["b",D.bind(D,"bold")],["i",D.bind(D,"italic")],["style",function(){return new s.default}]],C=[h.AlignAttribute,g.DirectionAttribute].reduce(function(t,e){return t[e.keyName]=e,t},{}),k=[h.AlignStyle,p.BackgroundStyle,m.ColorStyle,g.DirectionStyle,v.FontStyle,y.SizeStyle].reduce(function(t,e){return t[e.keyName]=e,t},{}),E=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],T.concat(n.options.matchers).forEach(function(t){var e=o(t,2),r=e[1];(i.matchVisual||r!==B)&&n.addMatcher(e[0],r)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[f.default.blotName]){var i=this.container.innerText;return this.container.innerHTML="",(new s.default).insert(i,_({},f.default.blotName,e[f.default.blotName]))}var n=this.prepareMatching(),r=o(n,2),a=function t(e,i,n){return e.nodeType===e.TEXT_NODE?n.reduce(function(t,i){return i(e,t)},new s.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(o,r){var a=t(r,i,n);return r.nodeType===e.ELEMENT_NODE&&(a=i.reduce(function(t,e){return e(r,t)},a),a=(r[x]||[]).reduce(function(t,e){return e(r,t)},a)),o.concat(a)},new s.default):new s.default}(this.container,r[0],r[1]);return O(a,"\n")&&null==a.ops[a.ops.length-1].attributes&&(a=a.compose((new s.default).retain(a.length()-1).delete(1))),w.log("convert",this.container.innerHTML,a),this.container.innerHTML="",a}},{key:"dangerouslyPasteHTML",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.default.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,d.default.sources.SILENT);else{var n=this.convert(e);this.quill.updateContents((new s.default).retain(t).concat(n),i),this.quill.setSelection(t+n.length(),d.default.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var i=this.quill.getSelection(),n=(new s.default).retain(i.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(d.default.sources.SILENT),setTimeout(function(){n=n.concat(e.convert()).delete(i.length),e.quill.updateContents(n,d.default.sources.USER),e.quill.setSelection(n.length()-i.length,d.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=o,e.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],i=[];return this.matchers.forEach(function(n){var r=o(n,2),a=r[0],s=r[1];switch(a){case Node.TEXT_NODE:i.push(s);break;case Node.ELEMENT_NODE:e.push(s);break;default:[].forEach.call(t.container.querySelectorAll(a),function(t){t[x]=t[x]||[],t[x].push(s)})}}),[e,i]}}]),e}();function S(t,e,i){return"object"===("undefined"==typeof e?"undefined":n(e))?Object.keys(e).reduce(function(t,i){return S(t,i,e[i])},t):t.reduce(function(t,n){return n.attributes&&n.attributes[e]?t.push(n):t.insert(n.insert,(0,a.default)({},_({},e,i),n.attributes))},new s.default)}function A(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function O(t,e){for(var i="",n=t.ops.length-1;n>=0&&i.length<e.length;--n){var o=t.ops[n];if("string"!=typeof o.insert)break;i=o.insert+i}return i.slice(-1*e.length)===e}function I(t){if(0===t.childNodes.length)return!1;var e=A(t);return["block","list-item"].indexOf(e.display)>-1}function D(t,e,i){return S(i,t,!0)}function P(t,e){var i=l.default.Attributor.Attribute.keys(t),n=l.default.Attributor.Class.keys(t),o=l.default.Attributor.Style.keys(t),r={};return i.concat(n).concat(o).forEach(function(e){var i=l.default.query(e,l.default.Scope.ATTRIBUTE);null!=i&&(r[i.attrName]=i.value(t),r[i.attrName])||(null==(i=C[e])||i.attrName!==e&&i.keyName!==e||(r[i.attrName]=i.value(t)||void 0),null==(i=k[e])||i.attrName!==e&&i.keyName!==e||(r[(i=k[e]).attrName]=i.value(t)||void 0))}),Object.keys(r).length>0&&(e=S(e,r)),e}function L(t,e){var i=l.default.query(t);if(null==i)return e;if(i.prototype instanceof l.default.Embed){var n={},o=i.value(t);null!=o&&(n[i.blotName]=o,e=(new s.default).insert(n,i.formats(t)))}else"function"==typeof i.formats&&(e=S(e,i.blotName,i.formats(t)));return e}function R(t,e){return O(e,"\n")||(I(t)||e.length()>0&&t.nextSibling&&I(t.nextSibling))&&e.insert("\n"),e}function B(t,e){if(I(t)&&null!=t.nextElementSibling&&!O(e,"\n\n")){var i=t.offsetHeight+parseFloat(A(t).marginTop)+parseFloat(A(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*i&&e.insert("\n")}return e}function N(t,e){var i=t.data;if("O:P"===t.parentNode.tagName)return e.insert(i.trim());if(0===i.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!A(t.parentNode).whiteSpace.startsWith("pre")){var n=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};i=(i=i.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==t.previousSibling&&I(t.parentNode)||null!=t.previousSibling&&I(t.previousSibling))&&(i=i.replace(/^\s+/,n.bind(n,!1))),(null==t.nextSibling&&I(t.parentNode)||null!=t.nextSibling&&I(t.nextSibling))&&(i=i.replace(/\s+$/,n.bind(n,!1)))}return e.insert(i)}E.DEFAULTS={matchers:[],matchVisual:!0},e.default=E,e.matchAttributor=P,e.matchBlot=L,e.matchNewline=R,e.matchSpacing=B,e.matchText=N},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=(n=i(6))&&n.__esModule?n:{default:n},s=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"optimize",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}();s.blotName="bold",s.tagName=["STRONG","B"],e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=c(i(2)),a=c(i(0)),s=c(i(5)),l=c(i(10)),d=c(i(9));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=(0,l.default)("quill:toolbar"),p=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var o,r=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));if(Array.isArray(r.options.container)){var a=document.createElement("div");m(a,r.options.container),t.container.parentNode.insertBefore(a,t.container),r.container=a}else r.container="string"==typeof r.options.container?document.querySelector(r.options.container):r.options.container;return r.container instanceof HTMLElement?(r.container.classList.add("ql-toolbar"),r.controls=[],r.handlers={},Object.keys(r.options.handlers).forEach(function(t){r.addHandler(t,r.options.handlers[t])}),[].forEach.call(r.container.querySelectorAll("button, select"),function(t){r.attach(t)}),r.quill.on(s.default.events.EDITOR_CHANGE,function(t,e){t===s.default.events.SELECTION_CHANGE&&r.update(e)}),r.quill.on(s.default.events.SCROLL_OPTIMIZE,function(){var t=r.quill.selection.getRange(),e=n(t,1);r.update(e[0])}),r):(o=h.error("Container required for toolbar",r.options),u(r,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,d.default),o(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,i=[].find.call(t.classList,function(t){return 0===t.indexOf("ql-")});if(i){if(i=i.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[i]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[i])return void h.warn("ignoring attaching to disabled format",i,t);if(null==a.default.query(i))return void h.warn("ignoring attaching to nonexistent format",i,t)}t.addEventListener("SELECT"===t.tagName?"change":"click",function(o){var l=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var d=t.options[t.selectedIndex];l=!d.hasAttribute("selected")&&(d.value||!1)}else l=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),o.preventDefault();e.quill.focus();var c=e.quill.selection.getRange(),u=n(c,1)[0];if(null!=e.handlers[i])e.handlers[i].call(e,l);else if(a.default.query(i).prototype instanceof a.default.Embed){if(!(l=prompt("Enter "+i)))return;e.quill.updateContents((new r.default).retain(u.index).delete(u.length).insert(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},i,l)),s.default.sources.USER)}else e.quill.format(i,l,s.default.sources.USER);e.update(u)}),this.controls.push([i,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach(function(i){var o=n(i,2),r=o[0],a=o[1];if("SELECT"===a.tagName){var s=void 0;if(null==t)s=null;else if(null==e[r])s=a.querySelector("option[selected]");else if(!Array.isArray(e[r])){var l=e[r];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),s=a.querySelector('option[value="'+l+'"]')}null==s?(a.value="",a.selectedIndex=-1):s.selected=!0}else if(null==t)a.classList.remove("ql-active");else if(a.hasAttribute("value")){var d=e[r]===a.getAttribute("value")||null!=e[r]&&e[r].toString()===a.getAttribute("value")||null==e[r]&&!a.getAttribute("value");a.classList.toggle("ql-active",d)}else a.classList.toggle("ql-active",null!=e[r])})}}]),e}();function f(t,e,i){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+e),null!=i&&(n.value=i),t.appendChild(n)}function m(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(function(e){var i=document.createElement("span");i.classList.add("ql-formats"),e.forEach(function(t){if("string"==typeof t)f(i,t);else{var e=Object.keys(t)[0],n=t[e];Array.isArray(n)?function(t,e,i){var n=document.createElement("select");n.classList.add("ql-"+e),i.forEach(function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),n.appendChild(e)}),t.appendChild(n)}(i,e,n):f(i,e,n)}}),t.appendChild(i)})}p.DEFAULTS={},p.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var i=this.quill.getFormat();Object.keys(i).forEach(function(e){null!=a.default.query(e,a.default.Scope.INLINE)&&t.quill.format(e,!1)})}else this.quill.removeFormat(e,s.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",s.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,s.default.sources.USER),this.quill.format("direction",t,s.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),i=this.quill.getFormat(e),n=parseInt(i.indent||0);if("+1"===t||"-1"===t){var o="+1"===t?1:-1;"rtl"===i.direction&&(o*=-1),this.quill.format("indent",n+o,s.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,s.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),i=this.quill.getFormat(e);this.quill.format("list","check"===t?"checked"!==i.list&&"unchecked"!==i.list&&"unchecked":t,s.default.sources.USER)}}},e.default=p,e.addControls=m},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=(n=i(28))&&n.__esModule?n:{default:n},s=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.label.innerHTML=i,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(t){t.classList.add("ql-primary")}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"buildItem",value:function(t){var i=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return i.style.backgroundColor=t.getAttribute("value")||"",i}},{key:"selectItem",value:function(t,i){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,i);var n=this.label.querySelector(".ql-color-label"),o=t&&t.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=o:n.style.fill=o)}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(28))&&n.__esModule?n:{default:n},a=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),function(t){t.innerHTML=i[t.getAttribute("data-value")||""]}),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),o(e,[{key:"selectItem",value:function(t,i){(function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,i),this.label.innerHTML=(t=t||this.defaultItem).innerHTML}}]),e}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i){var n=this;!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.quill=e,this.boundsContainer=i||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"}),this.hide()}return n(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=i+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),r=0;return o.right>n.right&&(this.root.style.left=e+(r=n.right-o.right)+"px"),o.left<n.left&&(this.root.style.left=e+(r=n.left-o.left)+"px"),o.bottom>n.bottom&&(this.root.style.top=i-(t.bottom-t.top+(o.bottom-o.top))+"px",this.root.classList.add("ql-flip")),r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=h(i(3)),a=h(i(8)),s=i(43),l=h(s),d=h(i(27)),c=i(15),u=h(i(41));function h(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],v=function(t){function e(t,i){p(this,e),null!=i.modules.toolbar&&null==i.modules.toolbar.container&&(i.modules.toolbar.container=g);var n=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.container.classList.add("ql-snow"),n}return m(e,l.default),o(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),u.default),this.tooltip=new y(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(e,i){t.handlers.link.call(t,!i.format.link)})}}]),e}();v.DEFAULTS=(0,r.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var i=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(i)&&0!==i.indexOf("mailto:")&&(i="mailto:"+i),this.quill.theme.tooltip.edit("link",i)}else this.quill.format("link",!1)}}}}});var y=function(t){function e(t,i){p(this,e);var n=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.preview=n.root.querySelector("a.ql-preview"),n}return m(e,s.BaseTooltip),o(e,[{key:"listen",value:function(){var t=this;n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(e){if(null!=t.linkRange){var i=t.linkRange;t.restoreFocus(),t.quill.formatText(i,"link",!1,a.default.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()}),this.quill.on(a.default.events.SELECTION_CHANGE,function(e,i,n){if(null!=e){if(0===e.length&&n===a.default.sources.USER){var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t.quill.scroll.descendant(d.default,e.index),2),r=o[0];if(null!=r){t.linkRange=new c.Range(e.index-o[1],r.length());var s=d.default.formats(r.domNode);return t.preview.textContent=s,t.preview.setAttribute("href",s),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}})}},{key:"show",value:function(){n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}();y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=B(i(29)),o=i(36),r=i(38),a=i(64),s=B(i(65)),l=B(i(66)),d=i(67),c=B(d),u=i(37),h=i(26),p=i(39),f=i(40),m=B(i(56)),g=B(i(68)),v=B(i(27)),y=B(i(69)),b=B(i(70)),_=B(i(71)),w=B(i(72)),x=B(i(73)),T=i(13),C=B(T),k=B(i(74)),E=B(i(75)),S=B(i(57)),A=B(i(41)),O=B(i(28)),I=B(i(59)),D=B(i(60)),P=B(i(61)),L=B(i(108)),R=B(i(62));function B(t){return t&&t.__esModule?t:{default:t}}n.default.register({"attributors/attribute/direction":r.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":r.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":r.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":f.SizeStyle},!0),n.default.register({"formats/align":o.AlignClass,"formats/direction":r.DirectionClass,"formats/indent":a.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":p.FontClass,"formats/size":f.SizeClass,"formats/blockquote":s.default,"formats/code-block":C.default,"formats/header":l.default,"formats/list":c.default,"formats/bold":m.default,"formats/code":T.Code,"formats/italic":g.default,"formats/link":v.default,"formats/script":y.default,"formats/strike":b.default,"formats/underline":_.default,"formats/image":w.default,"formats/video":x.default,"formats/list/item":d.ListItem,"modules/formula":k.default,"modules/syntax":E.default,"modules/toolbar":S.default,"themes/bubble":L.default,"themes/snow":R.default,"ui/icons":A.default,"ui/picker":O.default,"ui/icon-picker":D.default,"ui/color-picker":I.default,"ui/tooltip":P.default},!0),e.default=n.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=(n=i(0))&&n.__esModule?n:{default:n},s=new(function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Attributor.Class),o(e,[{key:"add",value:function(t,i){if("+1"===i||"-1"===i){var n=this.value(t)||0;i="+1"===i?n+1:n-1}return 0===i?(this.remove(t),!0):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,i)}},{key:"canAdd",value:function(t,i){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,i)||r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(i))}},{key:"value",value:function(t){return parseInt(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}())("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=i(4))&&n.__esModule?n:{default:n},r=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();r.blotName="blockquote",r.tagName="blockquote",e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(4))&&n.__esModule?n:{default:n},a=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),o(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}();a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},r=l(i(0)),a=l(i(4)),s=l(i(25));function l(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(){return d(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,a.default),n(e,[{key:"format",value:function(t,i){t!==p.blotName||i?o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i):this.replaceWith(r.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,i){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,i),this):(this.parent.unwrap(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,i))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:o(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}();h.blotName="list-item",h.tagName="LI";var p=function(t){function e(t){d(this,e);var i=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(e){if(e.target.parentNode===t){var n=i.statics.formats(t),o=r.default.find(e.target);"checked"===n?o.format("list","unchecked"):"unchecked"===n&&o.format("list","checked")}};return t.addEventListener("touchstart",n),t.addEventListener("mousedown",n),i}return u(e,s.default),n(e,null,[{key:"create",value:function(t){var i="ordered"===t?"OL":"UL",n=o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,i);return"checked"!==t&&"unchecked"!==t||n.setAttribute("data-checked","checked"===t),n}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return t={},e=this.statics.blotName,i=this.statics.formats(this.domNode),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t;var t,e,i}},{key:"insertBefore",value:function(t,i){if(t instanceof h)o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,i);else{var n=null==i?this.length():i.offset(this),r=this.split(n);r.parent.insertBefore(t,r)}}},{key:"optimize",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var i=this.next;null!=i&&i.prev===this&&i.statics.blotName===this.statics.blotName&&i.domNode.tagName===this.domNode.tagName&&i.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(i.moveChildren(this),i.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var i=r.default.create(this.statics.defaultChild);t.moveChildren(i),this.appendChild(i)}o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}();p.blotName="list",p.scope=r.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[h],e.ListItem=h,e.default=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=i(56))&&n.__esModule?n:{default:n},r=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();r.blotName="italic",r.tagName=["EM","I"],e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(6))&&n.__esModule?n:{default:n},a=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),o(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}();a.blotName="script",a.tagName=["SUB","SUP"],e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=i(6))&&n.__esModule?n:{default:n},r=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();r.blotName="strike",r.tagName="S",e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=i(6))&&n.__esModule?n:{default:n},r=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();r.blotName="underline",r.tagName="U",e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=(n=i(0))&&n.__esModule?n:{default:n},s=i(27),l=["alt","height","width"],d=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Embed),o(e,[{key:"format",value:function(t,i){l.indexOf(t)>-1?i?this.domNode.setAttribute(t,i):this.domNode.removeAttribute(t):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i)}}],[{key:"create",value:function(t){var i=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&i.setAttribute("src",this.sanitize(t)),i}},{key:"formats",value:function(t){return l.reduce(function(e,i){return t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e},{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,s.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}();d.blotName="image",d.tagName="IMG",e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=i(4),s=(n=i(27))&&n.__esModule?n:{default:n},l=["height","width"],d=function(t){function e(){return function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.BlockEmbed),o(e,[{key:"format",value:function(t,i){l.indexOf(t)>-1?i?this.domNode.setAttribute(t,i):this.domNode.removeAttribute(t):r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i)}}],[{key:"create",value:function(t){var i=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(t)),i}},{key:"formats",value:function(t){return l.reduce(function(e,i){return t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e},{})}},{key:"sanitize",value:function(t){return s.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}();d.blotName="video",d.className="ql-video",d.tagName="IFRAME",e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=s(i(35)),r=s(i(5)),a=s(i(9));function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(t){function e(){return l(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,o.default),n(e,null,[{key:"create",value:function(t){var i=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",t)),i}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}();u.blotName="formula",u.className="ql-formula",u.tagName="SPAN";var h=function(t){function e(){l(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return c(e,a.default),n(e,null,[{key:"register",value:function(){r.default.register(u,!0)}}]),e}();e.FormulaBlot=u,e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=l(i(0)),r=l(i(5)),a=l(i(9)),s=l(i(13));function l(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){function e(){return d(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,s.default),n(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}();h.className="ql-syntax";var p=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),f=function(t){function e(t,i){d(this,e);var n=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var o=null;return n.quill.on(r.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(o),o=setTimeout(function(){n.highlight(),o=null},n.options.interval)}),n.highlight(),n}return u(e,a.default),n(e,null,[{key:"register",value:function(){r.default.register(p,!0),r.default.register(h,!0)}}]),n(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(r.default.sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(e){e.highlight(t.options.highlight)}),this.quill.update(r.default.sources.SILENT),null!=e&&this.quill.setSelection(e,r.default.sources.SILENT)}}}]),e}();f.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=h,e.CodeToken=p,e.default=f},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var n=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=u(i(3)),a=u(i(8)),s=i(43),l=u(s),d=i(15),c=u(i(41));function u(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(t){function e(t,i){h(this,e),null!=i.modules.toolbar&&null==i.modules.toolbar.container&&(i.modules.toolbar.container=m);var n=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.container.classList.add("ql-bubble"),n}return f(e,l.default),o(e,[{key:"extendToolbar",value:function(t){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),c.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),c.default)}}]),e}();g.DEFAULTS=(0,r.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=function(t){function e(t,i){h(this,e);var n=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.on(a.default.events.EDITOR_CHANGE,function(t,e,i,o){if(t===a.default.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&o===a.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var r=n.quill.getLines(e.index,e.length);if(1===r.length)n.position(n.quill.getBounds(e));else{var s=r[r.length-1],l=n.quill.getIndex(s),c=Math.min(s.length()-1,e.index+e.length-l),u=n.quill.getBounds(new d.Range(l,c));n.position(u)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()}),n}return f(e,s.BaseTooltip),o(e,[{key:"listen",value:function(){var t=this;n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){t.root.classList.remove("ql-editing")}),this.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var i=n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),o=this.root.querySelector(".ql-tooltip-arrow");if(o.style.marginLeft="",0===i)return i;o.style.marginLeft=-1*i-o.offsetWidth/2+"px"}}]),e}();v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=v,e.default=g},function(t,e,i){t.exports=i(63)}]).default}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e((t=t||self).jQuery)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(){function e(t,e,i,n){this.markup=t,this.children=e,this.options=i,this.callback=n}return e.prototype.render=function(e){var i=t(this.markup);if(this.options&&this.options.contents&&i.html(this.options.contents),this.options&&this.options.className&&i.addClass(this.options.className),this.options&&this.options.data&&t.each(this.options.data,function(t,e){i.attr("data-"+t,e)}),this.options&&this.options.click&&i.on("click",this.options.click),this.children){var n=i.find(".note-children-container");this.children.forEach(function(t){t.render(n.length?n:i)})}return this.callback&&this.callback(i,this.options),this.options&&this.options.callback&&this.options.callback(i),e&&e.append(i),i},e}(),i=function(t,i){return function(){var n="object"==typeof arguments[1]?arguments[1]:arguments[0],o=Array.isArray(arguments[0])?arguments[0]:[];return n&&n.children&&(o=n.children),new e(t,o,n,i)}},n=function(){function t(t,e){if(this.$node=t,this.options=$.extend({},{title:"",target:e.container,trigger:"hover focus",placement:"bottom"},e),this.$tooltip=$(['<div class="note-tooltip in">','  <div class="note-tooltip-arrow"/>','  <div class="note-tooltip-content"/>',"</div>"].join("")),"manual"!==this.options.trigger){var i=this.show.bind(this),n=this.hide.bind(this),o=this.toggle.bind(this);this.options.trigger.split(" ").forEach(function(e){"hover"===e?(t.off("mouseenter mouseleave"),t.on("mouseenter",i).on("mouseleave",n)):"click"===e?t.on("click",o):"focus"===e&&t.on("focus",i).on("blur",n)})}}return t.prototype.show=function(){var t=this.$node,e=t.offset(),i=this.$tooltip,n=this.options.title||t.attr("title")||t.data("title"),o=this.options.placement||t.data("placement");i.addClass(o),i.addClass("in"),i.find(".note-tooltip-content").text(n),i.appendTo(this.options.target);var r=t.outerWidth(),a=t.outerHeight(),s=i.outerWidth(),l=i.outerHeight();"bottom"===o?i.css({top:e.top+a,left:e.left+(r/2-s/2)}):"top"===o?i.css({top:e.top-l,left:e.left+(r/2-s/2)}):"left"===o?i.css({top:e.top+(a/2-l/2),left:e.left-s}):"right"===o&&i.css({top:e.top+(a/2-l/2),left:e.left+r})},t.prototype.hide=function(){this.$tooltip.removeClass("in"),this.$tooltip.remove()},t.prototype.toggle=function(){this.$tooltip.hasClass("in")?this.hide():this.show()},t}(),o=function(){function t(t,e){this.$button=t,this.options=$.extend({},{target:e.container},e),this.setEvent()}return t.prototype.setEvent=function(){var t=this;this.$button.on("click",function(e){t.toggle(),e.stopImmediatePropagation()})},t.prototype.clear=function(){var t=$(".note-btn-group.open");t.find(".note-btn.active").removeClass("active"),t.removeClass("open")},t.prototype.show=function(){this.$button.addClass("active"),this.$button.parent().addClass("open");var t=this.$button.next(),e=t.offset(),i=t.outerWidth(),n=$(window).width(),o=parseFloat($(this.options.target).css("margin-right"));t.css("margin-left",e.left+i>n-o?n-o-(e.left+i):"")},t.prototype.hide=function(){this.$button.removeClass("active"),this.$button.parent().removeClass("open")},t.prototype.toggle=function(){var t=this.$button.parent().hasClass("open");this.clear(),t?this.hide():this.show()},t}();$(document).on("click",function(t){$(t.target).closest(".note-btn-group").length||$(".note-btn-group.open").removeClass("open")}),$(document).on("click.note-dropdown-menu",function(t){$(t.target).closest(".note-dropdown-menu").parent().removeClass("open")});var r=function(){function t(t,e){this.options=$.extend({},{target:e.container||"body"},e),this.$modal=t,this.$backdrop=$('<div class="note-modal-backdrop" />')}return t.prototype.show=function(){"body"===this.options.target?(this.$backdrop.css("position","fixed"),this.$modal.css("position","fixed")):(this.$backdrop.css("position","absolute"),this.$modal.css("position","absolute")),this.$backdrop.appendTo(this.options.target).show(),this.$modal.appendTo(this.options.target).addClass("open").show(),this.$modal.trigger("note.modal.show"),this.$modal.off("click",".close").on("click",".close",this.hide.bind(this))},t.prototype.hide=function(){this.$modal.removeClass("open").hide(),this.$backdrop.hide(),this.$modal.trigger("note.modal.hide")},t}(),a=i('<div class="note-editor note-frame"/>'),s=i('<div class="note-toolbar" role="toolbar"/>'),l=i('<div class="note-editing-area"/>'),d=i('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),c=i('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),u=i(['<output class="note-status-output" role="status" aria-live="polite"/>','<div class="note-statusbar" role="resize">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),h=i('<div class="note-editor"/>'),p=i(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>','<output class="note-status-output" role="status" aria-live="polite"/>'].join("")),f=i('<div class="note-btn-group">'),m=i('<button type="button" class="note-btn" role="button" tabindex="-1">',function(t,e){e&&e.tooltip&&(t.attr({"aria-label":e.tooltip}),t.data("_lite_tooltip",new n(t,{title:e.tooltip,container:e.container})).on("click",function(t){$(t.currentTarget).data("_lite_tooltip").hide()})),e.contents&&t.html(e.contents),e&&e.data&&"dropdown"===e.data.toggle&&t.data("_lite_dropdown",new o(t,{container:e.container}))}),g=i('<div class="note-dropdown-menu" role="list">',function(t,e){var i=Array.isArray(e.items)?e.items.map(function(t){var i="string"==typeof t?t:t.value||"",n=e.template?e.template(t):t,o=$('<a class="note-dropdown-item" href="#" data-value="'+i+'" role="listitem" aria-label="'+i+'"></a>');return o.html(n).data("item",t),o}):e.items;t.html(i).attr({"aria-label":e.title}),t.on("click","> .note-dropdown-item",function(t){var i=$(this),n=i.data("item"),o=i.data("value");n.click?n.click(i):e.itemClick&&e.itemClick(t,n,o)})}),v=i('<div class="note-dropdown-menu note-check" role="list">',function(t,e){var i=Array.isArray(e.items)?e.items.map(function(t){var i="string"==typeof t?t:t.value||"",n=e.template?e.template(t):t,o=$('<a class="note-dropdown-item" href="#" data-value="'+i+'" role="listitem" aria-label="'+t+'"></a>');return o.html([x(e.checkClassName)," ",n]).data("item",t),o}):e.items;t.html(i).attr({"aria-label":e.title}),t.on("click","> .note-dropdown-item",function(t){var i=$(this),n=i.data("item"),o=i.data("value");n.click?n.click(i):e.itemClick&&e.itemClick(t,n,o)})}),y=i('<div class="note-color-palette"/>',function(t,e){for(var i=[],o=0,r=e.colors.length;o<r;o++){for(var a=e.eventName,s=e.colors[o],l=e.colorsName[o],d=[],c=0,u=s.length;c<u;c++){var h=s[c],p=l[c];d.push(['<button type="button" class="note-btn note-color-btn"','style="background-color:',h,'" ','data-event="',a,'" ','data-value="',h,'" ','title="',p,'" ','aria-label="',p,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+d.join("")+"</div>")}t.html(i.join("")),t.find(".note-color-btn").each(function(){$(this).data("_lite_tooltip",new n($(this),{container:e.container}))})}),b=i('<div class="note-modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(t,e){e.fade&&t.addClass("fade"),t.attr({"aria-label":e.title}),t.html(['  <div class="note-modal-content">',e.title?'    <div class="note-modal-header">      <button type="button" class="close" aria-label="Close" aria-hidden="true"><i class="note-icon-close"></i></button>      <h4 class="note-modal-title">'+e.title+"</h4>    </div>":"",'    <div class="note-modal-body">'+e.body+"</div>",e.footer?'    <div class="note-modal-footer">'+e.footer+"</div>":"","  </div>"].join("")),t.data("modal",new r(t,e))}),_=i(['<div class="note-popover bottom">','  <div class="note-popover-arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){t.addClass("undefined"!=typeof e.direction?e.direction:"bottom").hide(),e.hideArrow&&t.find(".note-popover-arrow").hide()}),w=i('<div class="checkbox"></div>',function(t,e){t.html(["<label"+(e.id?' for="'+e.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(e.id?' id="'+e.id+'"':""),e.checked?" checked":"",' aria-checked="'+(e.checked?"true":"false")+'"/>',e.text?e.text:"","</label>"].join(""))}),x=function(t,e){return"<"+(e=e||"i")+' class="'+t+'"/>'},T={editor:a,toolbar:s,editingArea:l,codable:d,editable:c,statusbar:u,airEditor:h,airEditable:p,buttonGroup:f,button:m,dropdown:g,dropdownCheck:v,dropdownButton:function(t,e){return f([m({className:"dropdown-toggle",contents:t.title+" "+x("note-icon-caret"),tooltip:t.tooltip,data:{toggle:"dropdown"}}),g({className:t.className,items:t.items,template:t.template,itemClick:t.itemClick})],{callback:e}).render()},dropdownButtonContents:function(t,e){return t+" "+x(e.icons.caret,"span")},dropdownCheckButton:function(t,e){return f([m({className:"dropdown-toggle",contents:t.title+" "+x("note-icon-caret"),tooltip:t.tooltip,data:{toggle:"dropdown"}}),v({className:t.className,checkClassName:t.checkClassName,items:t.items,template:t.template,itemClick:t.itemClick})],{callback:e}).render()},paragraphDropdownButton:function(t){return f([m({className:"dropdown-toggle",contents:t.title+" "+x("note-icon-caret"),tooltip:t.tooltip,data:{toggle:"dropdown"}}),g([f({className:"note-align",children:t.items[0]}),f({className:"note-list",children:t.items[1]})])]).render()},tableDropdownButton:function(t){return f([m({className:"dropdown-toggle",contents:t.title+" "+x("note-icon-caret"),tooltip:t.tooltip,data:{toggle:"dropdown"}}),g({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(e){e.find(".note-dimension-picker-mousecatcher").css({width:t.col+"em",height:t.row+"em"}).mousedown(t.itemClick).mousemove(function(e){!function(t,e,i){var n,o=$(t.target.parentNode),r=o.next(),a=o.find(".note-dimension-picker-mousecatcher"),s=o.find(".note-dimension-picker-highlighted"),l=o.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var d=$(t.target).offset();n={x:t.pageX-d.left,y:t.pageY-d.top}}else n={x:t.offsetX,y:t.offsetY};var c=Math.ceil(n.x/18)||1,u=Math.ceil(n.y/18)||1;s.css({width:c+"em",height:u+"em"}),a.data("value",c+"x"+u),c>3&&c<e&&l.css({width:c+1+"em"}),u>3&&u<i&&l.css({height:u+1+"em"}),r.html(c+" x "+u)}(e,t.col,t.row)})}}).render()},colorDropdownButton:function(t,e){return f({className:"note-color",children:[m({className:"note-current-color-button",contents:t.title,tooltip:t.lang.color.recent,click:t.currentClick,callback:function(t){var i=t.find(".note-recent-color");"foreColor"!==e&&(i.css("background-color","#FFFF00"),t.attr("data-backColor","#FFFF00"))}}),m({className:"dropdown-toggle",contents:x("note-icon-caret"),tooltip:t.lang.color.more,data:{toggle:"dropdown"}}),g({items:["<div>",'<div class="note-btn-group btn-background-color">','  <div class="note-palette-title">'+t.lang.color.background+"</div>","  <div>",'<button type="button" class="note-color-reset note-btn note-btn-block"  data-event="backColor" data-value="inherit">',t.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>','  <div class="btn-sm">','    <input type="color" id="html5bcp" class="note-btn btn-default" value="#21104A" style="width:100%;" data-value="cp">','    <button type="button" class="note-color-reset btn" data-event="backColor" data-value="cpbackColor">',t.lang.color.cpSelect,"    </button>","  </div>","</div>",'<div class="note-btn-group btn-foreground-color">','  <div class="note-palette-title">'+t.lang.color.foreground+"</div>","  <div>",'<button type="button" class="note-color-reset note-btn note-btn-block"  data-event="removeFormat" data-value="foreColor">',t.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>','  <div class="btn-sm">','    <input type="color" id="html5fcp" class="note-btn btn-default" value="#21104A" style="width:100%;" data-value="cp">','    <button type="button" class="note-color-reset btn" data-event="foreColor" data-value="cpforeColor">',t.lang.color.cpSelect,"    </button>","  </div>","</div>","</div>"].join(""),callback:function(i){i.find(".note-holder").each(function(){var e=$(this);e.append(y({colors:t.colors,eventName:e.data("event")}).render())}),"fore"===e?(i.find(".btn-background-color").hide(),i.css({"min-width":"210px"})):"back"===e&&(i.find(".btn-foreground-color").hide(),i.css({"min-width":"210px"}))},click:function(i){var n=$(i.target),o=n.data("event"),r=n.data("value"),a=document.getElementById("html5fcp").value,s=document.getElementById("html5bcp").value;if("cp"===r?i.stopPropagation():"cpbackColor"===r?r=s:"cpforeColor"===r&&(r=a),o&&r){var l="backColor"===o?"background-color":"color",d=n.closest(".note-color").find(".note-recent-color"),c=n.closest(".note-color").find(".note-current-color-button");d.css(l,r),c.attr("data-"+o,r),t.itemClick("fore"===e?"foreColor":"back"===e?"backColor":o,r)}}})]}).render()},palette:y,dialog:b,videoDialog:function(t){var e='<div class="note-form-group"><label class="note-form-label">'+t.lang.video.url+' <small class="text-muted">'+t.lang.video.providers+'</small></label><input class="note-video-url note-input" type="text" /></div>',i=['<button type="button" href="#" class="note-btn note-btn-primary note-video-btn disabled" disabled>',t.lang.video.insert,"</button>"].join("");return b({title:t.lang.video.insert,fade:t.fade,body:e,footer:i}).render()},imageDialog:function(t){var e='<div class="note-form-group note-group-select-from-files"><label class="note-form-label">'+t.lang.image.selectFromFiles+'</label><input class="note-note-image-input note-input" type="file" name="files" accept="image/*" multiple="multiple" />'+t.imageLimitation+'</div><div class="note-form-group" style="overflow:auto;"><label class="note-form-label">'+t.lang.image.url+'</label><input class="note-image-url note-input" type="text" /></div>',i=['<button href="#" type="button" class="note-btn note-btn-primary note-btn-large note-image-btn disabled" disabled>',t.lang.image.insert,"</button>"].join("");return b({title:t.lang.image.insert,fade:t.fade,body:e,footer:i}).render()},linkDialog:function(t){var e='<div class="note-form-group"><label class="note-form-label">'+t.lang.link.textToDisplay+'</label><input class="note-link-text note-input" type="text" /></div><div class="note-form-group"><label class="note-form-label">'+t.lang.link.url+'</label><input class="note-link-url note-input" type="text" value="http://" /></div>'+(t.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+t.lang.link.openInNewWindow+"</label></div>"),i=['<button href="#" type="button" class="note-btn note-btn-primary note-link-btn disabled" disabled>',t.lang.link.insert,"</button>"].join("");return b({className:"link-dialog",title:t.lang.link.insert,fade:t.fade,body:e,footer:i}).render()},popover:_,checkbox:w,icon:x,toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},check:function(t,e){t.find(".checked").removeClass("checked"),t.find('[data-value="'+e+'"]').addClass("checked")},onDialogShown:function(t,e){t.one("note.modal.show",e)},onDialogHidden:function(t,e){t.one("note.modal.hide",e)},showDialog:function(t){t.data("modal").show()},hideDialog:function(t){t.data("modal").hide()},getPopoverContent:function(t){return t.find(".note-popover-content")},getDialogBody:function(t){return t.find(".note-modal-body")},createLayout:function(t,e){var i=(e.airMode?T.airEditor([T.editingArea([T.airEditable()])]):T.editor([T.toolbar(),T.editingArea([T.codable(),T.editable()]),T.statusbar()])).render();return i.insertAfter(t),{note:t,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.off("summernote"),t.show()}};t.summernote=t.summernote||{lang:{}},t.extend(t.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var C,k="function"==typeof define&&define.amd,E=navigator.userAgent,S=/MSIE|Trident/i.test(E);if(S){var A=/MSIE (\d+[.]\d+)/.exec(E);A&&(C=parseFloat(A[1])),(A=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(E))&&(C=parseFloat(A[1]))}var O=/Edge\/\d+/.test(E),I=!!window.CodeMirror,D="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,P=S||O?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",L={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:S,isEdge:O,isFF:!O&&/firefox/i.test(E),isPhantom:/PhantomJS/i.test(E),isWebkit:!O&&/webkit/i.test(E),isChrome:!O&&/chrome/i.test(E),isSafari:!O&&/safari/i.test(E),browserVersion:C,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:k,isSupportTouch:D,hasCodeMirror:I,isFontInstalled:function(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",i=document.createElement("canvas").getContext("2d");i.font="200px '"+e+"'";var n=i.measureText("mmmmmmmmmmwwwww").width;return i.font="200px '"+t+"', '"+e+"'",n!==i.measureText("mmmmmmmmmmwwwww").width},isW3CRangeSupport:!!document.createRange,inputEventName:P},R=0,B={eq:function(t){return function(e){return t===e}},eq2:function(t,e){return t===e},peq2:function(t){return function(e,i){return e[t]===i[t]}},ok:function(){return!0},fail:function(){return!1},self:function(t){return t},not:function(t){return function(){return!t.apply(t,arguments)}},and:function(t,e){return function(i){return t(i)&&e(i)}},invoke:function(t,e){return function(){return t[e].apply(t,arguments)}},uniqueId:function(t){var e=++R+"";return t?t+e:e},rect2bnd:function(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},invertObject:function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e},namespaceToCamel:function(t,e){return(e=e||"")+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")},debounce:function(t,e,i){var n;return function(){var o=this,r=arguments,a=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||t.apply(o,r)},e),a&&t.apply(o,r)}},isValidUrl:function(t){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi.test(t)}};function N(t){return t[0]}function M(t){return t[t.length-1]}function F(t){return t.slice(1)}function j(t,e){return!!(t&&t.length&&e)&&-1!==t.indexOf(e)}var W={head:N,last:M,initial:function(t){return t.slice(0,t.length-1)},tail:F,prev:function(t,e){if(t&&t.length&&e){var i=t.indexOf(e);return-1===i?null:t[i-1]}return null},next:function(t,e){if(t&&t.length&&e){var i=t.indexOf(e);return-1===i?null:t[i+1]}return null},find:function(t,e){for(var i=0,n=t.length;i<n;i++){var o=t[i];if(e(o))return o}},contains:j,all:function(t,e){for(var i=0,n=t.length;i<n;i++)if(!e(t[i]))return!1;return!0},sum:function(t,e){return e=e||B.self,t.reduce(function(t,i){return t+e(i)},0)},from:function(t){for(var e=[],i=t.length,n=-1;++n<i;)e[n]=t[n];return e},isEmpty:function(t){return!t||!t.length},clusterBy:function(t,e){return t.length?F(t).reduce(function(t,i){var n=M(t);return e(M(n),i)?n[n.length]=i:t[t.length]=[i],t},[[N(t)]]):[]},compact:function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&e.push(t[i]);return e},unique:function(t){for(var e=[],i=0,n=t.length;i<n;i++)j(e,t[i])||e.push(t[i]);return e}},z=String.fromCharCode(160);function H(e){return e&&t(e).hasClass("note-editable")}function q(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}}function V(t){return t&&3===t.nodeType}function U(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(t.nodeName.toUpperCase())}function G(t){return!H(t)&&t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())}var K=q("PRE"),Y=q("LI"),X=q("TABLE"),Q=q("DATA");function Z(t){return!(nt(t)||J(t)||tt(t)||G(t)||X(t)||it(t)||Q(t))}function J(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())}var tt=q("HR");function et(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())}var it=q("BLOCKQUOTE");function nt(t){return et(t)||it(t)||H(t)}var ot=q("A"),rt=q("BODY"),at=L.isMSIE&&L.browserVersion<11?"&nbsp;":"<br>";function st(t){return V(t)?t.nodeValue.length:t?t.childNodes.length:0}function lt(t){var e=st(t);return 0===e||!V(t)&&1===e&&t.innerHTML===at||!(!W.all(t.childNodes,V)||""!==t.innerHTML)}function dt(t){U(t)||st(t)||(t.innerHTML=at)}function ct(t,e){for(;t;){if(e(t))return t;if(H(t))break;t=t.parentNode}return null}function ut(t,e){e=e||B.fail;var i=[];return ct(t,function(t){return H(t)||i.push(t),e(t)}),i}function ht(t,e){e=e||B.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i}function pt(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t}function ft(e,i){return t.each(i,function(t,i){e.appendChild(i)}),e}function mt(t){return 0===t.offset}function gt(t){return t.offset===st(t.node)}function vt(t){return mt(t)||gt(t)}function yt(t,e){for(;t&&t!==e;){if(0!==_t(t))return!1;t=t.parentNode}return!0}function bt(t,e){if(!e)return!1;for(;t&&t!==e;){if(_t(t)!==st(t.parentNode)-1)return!1;t=t.parentNode}return!0}function _t(t){for(var e=0;t=t.previousSibling;)e+=1;return e}function wt(t){return!!(t&&t.childNodes&&t.childNodes.length)}function xt(t,e){var i,n;if(0===t.offset){if(H(t.node))return null;i=t.node.parentNode,n=_t(t.node)}else wt(t.node)?n=st(i=t.node.childNodes[t.offset-1]):(i=t.node,n=e?0:t.offset-1);return{node:i,offset:n}}function Tt(t,e){var i,n;if(st(t.node)===t.offset){if(H(t.node))return null;i=t.node.parentNode,n=_t(t.node)+1}else wt(t.node)?(i=t.node.childNodes[t.offset],n=0):(i=t.node,n=e?st(t.node):t.offset+1);return{node:i,offset:n}}function Ct(t,e){return t.node===e.node&&t.offset===e.offset}function kt(t,e){var i=e&&e.isSkipPaddingBlankHTML,n=e&&e.isNotSplitEdgePoint,o=e&&e.isDiscardEmptySplits;if(o&&(i=!0),vt(t)&&(V(t.node)||n)){if(mt(t))return t.node;if(gt(t))return t.node.nextSibling}if(V(t.node))return t.node.splitText(t.offset);var r=t.node.childNodes[t.offset],a=pt(t.node.cloneNode(!1),t.node);return ft(a,ht(r)),i||(dt(t.node),dt(a)),o&&(lt(t.node)&&At(t.node),lt(a))?(At(a),t.node.nextSibling):a}function Et(t,e,i){var n=ut(e.node,B.eq(t));return n.length?1===n.length?kt(e,i):n.reduce(function(t,n){return t===e.node&&(t=kt(e,i)),kt({node:n,offset:t?_t(t):st(n)},i)}):null}function St(t){return document.createElement(t)}function At(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var i=t.parentNode;if(!e){for(var n=[],o=0,r=t.childNodes.length;o<r;o++)n.push(t.childNodes[o]);for(o=0,r=n.length;o<r;o++)i.insertBefore(n[o],t)}i.removeChild(t)}}var Ot=q("TEXTAREA");function It(t,e){var i=Ot(t[0])?t.val():t.html();return e?i.replace(/[\n\r]/g,""):i}var Dt={NBSP_CHAR:z,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:at,emptyPara:"<p>"+at+"</p>",makePredByNodeName:q,isEditable:H,isControlSizing:function(e){return e&&t(e).hasClass("note-control-sizing")},isText:V,isElement:function(t){return t&&1===t.nodeType},isVoid:U,isPara:G,isPurePara:function(t){return G(t)&&!Y(t)},isHeading:function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},isInline:Z,isBlock:B.not(Z),isBodyInline:function(t){return Z(t)&&!ct(t,G)},isBody:rt,isParaInline:function(t){return Z(t)&&!!ct(t,G)},isPre:K,isList:J,isTable:X,isData:Q,isCell:et,isBlockquote:it,isBodyContainer:nt,isAnchor:ot,isDiv:q("DIV"),isLi:Y,isBR:q("BR"),isSpan:q("SPAN"),isB:q("B"),isU:q("U"),isS:q("S"),isI:q("I"),isImg:q("IMG"),isTextarea:Ot,isEmpty:lt,isEmptyAnchor:B.and(ot,lt),isClosestSibling:function(t,e){return t.nextSibling===e||t.previousSibling===e},withClosestSiblings:function(t,e){e=e||B.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},nodeLength:st,isLeftEdgePoint:mt,isRightEdgePoint:gt,isEdgePoint:vt,isLeftEdgeOf:yt,isRightEdgeOf:bt,isLeftEdgePointOf:function(t,e){return mt(t)&&yt(t.node,e)},isRightEdgePointOf:function(t,e){return gt(t)&&bt(t.node,e)},prevPoint:xt,nextPoint:Tt,isSamePoint:Ct,isVisiblePoint:function(t){if(V(t.node)||!wt(t.node)||lt(t.node))return!0;var e=t.node.childNodes[t.offset-1],i=t.node.childNodes[t.offset];return!(e&&!U(e)||i&&!U(i))},prevPointUntil:function(t,e){for(;t;){if(e(t))return t;t=xt(t)}return null},nextPointUntil:function(t,e){for(;t;){if(e(t))return t;t=Tt(t)}return null},isCharPoint:function(t){if(!V(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==z},walkPoint:function(t,e,i,n){for(var o=t;o&&(i(o),!Ct(o,e));)o=Tt(o,n&&t.node!==o.node&&e.node!==o.node)},ancestor:ct,singleChildAncestor:function(t,e){for(t=t.parentNode;t&&1===st(t);){if(e(t))return t;if(H(t))break;t=t.parentNode}return null},listAncestor:ut,lastAncestor:function(t,e){var i=ut(t);return W.last(i.filter(e))},listNext:ht,listPrev:function(t,e){e=e||B.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},listDescendant:function(t,e){var i=[];return e=e||B.ok,function n(o){t!==o&&e(o)&&i.push(o);for(var r=0,a=o.childNodes.length;r<a;r++)n(o.childNodes[r])}(t),i},commonAncestor:function(t,e){for(var i=ut(t),n=e;n;n=n.parentNode)if(i.indexOf(n)>-1)return n;return null},wrap:function(e,i){var n=e.parentNode,o=t("<"+i+">")[0];return n.insertBefore(o,e),o.appendChild(e),o},insertAfter:pt,appendChildNodes:ft,position:_t,hasChildren:wt,makeOffsetPath:function(t,e){return ut(e,B.eq(t)).map(_t).reverse()},fromOffsetPath:function(t,e){for(var i=t,n=0,o=e.length;n<o;n++)i=i.childNodes.length<=e[n]?i.childNodes[i.childNodes.length-1]:i.childNodes[e[n]];return i},splitTree:Et,splitPoint:function(t,e){var i,n,o=e?G:nt,r=ut(t.node,o),a=W.last(r)||t.node;o(a)?(i=r[r.length-2],n=a):n=(i=a).parentNode;var s=i&&Et(i,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return s||n!==t.node||(s=t.node.childNodes[t.offset]),{rightNode:s,container:n}},create:St,createText:function(t){return document.createTextNode(t)},remove:At,removeWhile:function(t,e){for(;t&&!H(t)&&e(t);){var i=t.parentNode;At(t),t=i}},replace:function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var i=St(e);return t.style.cssText&&(i.style.cssText=t.style.cssText),ft(i,W.from(t.childNodes)),pt(i,t),At(t),i},html:function(t,e){var i=It(t);return e&&(i=(i=i.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(t,e,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!e,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return t+(n||o?"\n":"")})).trim()),i},value:It,posFromPlaceholder:function(e){var i=t(e),n=i.offset(),o=i.outerHeight(!0);return{left:n.left,top:n.top+o}},attachEvents:function(t,e){Object.keys(e).forEach(function(i){t.on(i,e[i])})},detachEvents:function(t,e){Object.keys(e).forEach(function(i){t.off(i,e[i])})},isCustomStyleTag:function(t){return t&&!V(t)&&W.contains(t.classList,"note-styletag")}},Pt=function(){function e(e,i){this.ui=t.summernote.ui,this.$note=e,this.memos={},this.modules={},this.layoutInfo={},this.options=i,this.initialize()}return e.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},e.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},e.prototype.reset=function(){var t=this.isDisabled();this.code(Dt.emptyPara),this._destroy(),this._initialize(),t&&this.disable()},e.prototype._initialize=function(){var e=this,i=t.extend({},this.options.buttons);Object.keys(i).forEach(function(t){e.memo("button."+t,i[t])});var n=t.extend({},this.options.modules,t.summernote.plugins||{});Object.keys(n).forEach(function(t){e.module(t,n[t],!0)}),Object.keys(this.modules).forEach(function(t){e.initializeModule(t)})},e.prototype._destroy=function(){var t=this;Object.keys(this.modules).reverse().forEach(function(e){t.removeModule(e)}),Object.keys(this.memos).forEach(function(e){t.removeMemo(e)}),this.triggerEvent("destroy",this)},e.prototype.code=function(t){var e=this.invoke("codeview.isActivated");if(void 0===t)return this.invoke("codeview.sync"),e?this.layoutInfo.codable.val():this.layoutInfo.editable.html();e?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t),this.$note.val(t),this.triggerEvent("change",t,this.layoutInfo.editable)},e.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},e.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},e.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},e.prototype.triggerEvent=function(){var t=W.head(arguments),e=W.tail(W.from(arguments)),i=this.options.callbacks[B.namespaceToCamel(t,"on")];i&&i.apply(this.$note[0],e),this.$note.trigger("summernote."+t,e)},e.prototype.initializeModule=function(t){var e=this.modules[t];e.shouldInitialize=e.shouldInitialize||B.ok,e.shouldInitialize()&&(e.initialize&&e.initialize(),e.events&&Dt.attachEvents(this.$note,e.events))},e.prototype.module=function(t,e,i){if(1===arguments.length)return this.modules[t];this.modules[t]=new e(this),i||this.initializeModule(t)},e.prototype.removeModule=function(t){var e=this.modules[t];e.shouldInitialize()&&(e.events&&Dt.detachEvents(this.$note,e.events),e.destroy&&e.destroy()),delete this.modules[t]},e.prototype.memo=function(t,e){if(1===arguments.length)return this.memos[t];this.memos[t]=e},e.prototype.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},e.prototype.createInvokeHandlerAndUpdateState=function(t,e){var i=this;return function(n){i.createInvokeHandler(t,e)(n),i.invoke("buttons.updateCurrentStyle")}},e.prototype.createInvokeHandler=function(e,i){var n=this;return function(o){o.preventDefault();var r=t(o.target);n.invoke(e,i||r.closest("[data-value]").data("value"),r)}},e.prototype.invoke=function(){var t=W.head(arguments),e=W.tail(W.from(arguments)),i=t.split("."),n=i.length>1,o=n&&W.head(i),r=n?W.last(i):W.head(i),a=this.modules[o||"editor"];return!o&&this[r]?this[r].apply(this,e):a&&a[r]&&a.shouldInitialize()?a[r].apply(a,e):void 0},e}();function Lt(t,e){var i,n,o=t.parentElement(),r=document.body.createTextRange(),a=W.from(o.childNodes);for(i=0;i<a.length;i++)if(!Dt.isText(a[i])){if(r.moveToElementText(a[i]),r.compareEndPoints("StartToStart",t)>=0)break;n=a[i]}if(0!==i&&Dt.isText(a[i-1])){var s=document.body.createTextRange(),l=null;s.moveToElementText(n||o),s.collapse(!n),l=n?n.nextSibling:o.firstChild;var d=t.duplicate();d.setEndPoint("StartToStart",s);for(var c=d.text.replace(/[\r\n]/g,"").length;c>l.nodeValue.length&&l.nextSibling;)c-=l.nodeValue.length,l=l.nextSibling;e&&l.nextSibling&&Dt.isText(l.nextSibling)&&c===l.nodeValue.length&&(c-=l.nodeValue.length,l=l.nextSibling),o=l,i=c}return{cont:o,offset:i}}function Rt(t){var e=function(t,i){var n,o;if(Dt.isText(t)){var r=Dt.listPrev(t,B.not(Dt.isText)),a=W.last(r).previousSibling;n=a||t.parentNode,i+=W.sum(W.tail(r),Dt.nodeLength),o=!a}else{if(Dt.isText(n=t.childNodes[i]||t))return e(n,0);i=0,o=!1}return{node:n,collapseToStart:o,offset:i}},i=document.body.createTextRange(),n=e(t.node,t.offset);return i.moveToElementText(n.node),i.collapse(n.collapseToStart),i.moveStart("character",n.offset),i}t.fn.extend({summernote:function(){var e=t.type(W.head(arguments)),i="string"===e,n=t.extend({},t.summernote.options,"object"===e?W.head(arguments):{});n.langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[n.lang]),n.icons=t.extend(!0,{},t.summernote.options.icons,n.icons),n.tooltip="auto"===n.tooltip?!L.isSupportTouch:n.tooltip,this.each(function(e,i){var o=t(i);if(!o.data("summernote")){var r=new Pt(o,n);o.data("summernote",r),o.data("summernote").triggerEvent("init",r.layoutInfo)}});var o=this.first();if(o.length){var r=o.data("summernote");if(i)return r.invoke.apply(r,W.from(arguments));n.focus&&r.invoke("editor.focus")}return this}});var Bt=function(){function e(t,e,i,n){this.sc=t,this.so=e,this.ec=i,this.eo=n,this.isOnEditable=this.makeIsOn(Dt.isEditable),this.isOnList=this.makeIsOn(Dt.isList),this.isOnAnchor=this.makeIsOn(Dt.isAnchor),this.isOnCell=this.makeIsOn(Dt.isCell),this.isOnData=this.makeIsOn(Dt.isData)}return e.prototype.nativeRange=function(){if(L.isW3CRangeSupport){var t=document.createRange();return t.setStart(this.sc,this.sc.data&&this.so>this.sc.data.length?0:this.so),t.setEnd(this.ec,this.sc.data?Math.min(this.eo,this.sc.data.length):this.eo),t}var e=Rt({node:this.sc,offset:this.so});return e.setEndPoint("EndToEnd",Rt({node:this.ec,offset:this.eo})),e},e.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},e.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},e.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},e.prototype.select=function(){var t=this.nativeRange();if(L.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},e.prototype.scrollIntoView=function(e){var i=t(e).height();return e.scrollTop+i<this.sc.offsetTop&&(e.scrollTop+=Math.abs(e.scrollTop+i-this.sc.offsetTop)),this},e.prototype.normalize=function(){var t=function(t,e){if(Dt.isVisiblePoint(t)&&(!Dt.isEdgePoint(t)||Dt.isRightEdgePoint(t)&&!e||Dt.isLeftEdgePoint(t)&&e||Dt.isRightEdgePoint(t)&&e&&Dt.isVoid(t.node.nextSibling)||Dt.isLeftEdgePoint(t)&&!e&&Dt.isVoid(t.node.previousSibling)||Dt.isBlock(t.node)&&Dt.isEmpty(t.node)))return t;var i=Dt.ancestor(t.node,Dt.isBlock);if((Dt.isLeftEdgePointOf(t,i)||Dt.isVoid(Dt.prevPoint(t).node))&&!e||(Dt.isRightEdgePointOf(t,i)||Dt.isVoid(Dt.nextPoint(t).node))&&e){if(Dt.isVisiblePoint(t))return t;e=!e}return(e?Dt.nextPointUntil(Dt.nextPoint(t),Dt.isVisiblePoint):Dt.prevPointUntil(Dt.prevPoint(t),Dt.isVisiblePoint))||t},i=t(this.getEndPoint(),!1),n=this.isCollapsed()?i:t(this.getStartPoint(),!0);return new e(n.node,n.offset,i.node,i.offset)},e.prototype.nodes=function(t,e){t=t||B.ok;var i=e&&e.includeAncestor,n=e&&e.fullyContains,o=this.getStartPoint(),r=this.getEndPoint(),a=[],s=[];return Dt.walkPoint(o,r,function(e){var o;Dt.isEditable(e.node)||(n?(Dt.isLeftEdgePoint(e)&&s.push(e.node),Dt.isRightEdgePoint(e)&&W.contains(s,e.node)&&(o=e.node)):o=i?Dt.ancestor(e.node,t):e.node,o&&t(o)&&a.push(o))},!0),W.unique(a)},e.prototype.commonAncestor=function(){return Dt.commonAncestor(this.sc,this.ec)},e.prototype.expand=function(t){var i=Dt.ancestor(this.sc,t),n=Dt.ancestor(this.ec,t);if(!i&&!n)return new e(this.sc,this.so,this.ec,this.eo);var o=this.getPoints();return i&&(o.sc=i,o.so=0),n&&(o.ec=n,o.eo=Dt.nodeLength(n)),new e(o.sc,o.so,o.ec,o.eo)},e.prototype.collapse=function(t){return t?new e(this.sc,this.so,this.sc,this.so):new e(this.ec,this.eo,this.ec,this.eo)},e.prototype.splitText=function(){var t=this.sc===this.ec,i=this.getPoints();return Dt.isText(this.ec)&&!Dt.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),Dt.isText(this.sc)&&!Dt.isEdgePoint(this.getStartPoint())&&(i.sc=this.sc.splitText(this.so),i.so=0,t&&(i.ec=i.sc,i.eo=this.eo-this.so)),new e(i.sc,i.so,i.ec,i.eo)},e.prototype.deleteContents=function(){if(this.isCollapsed())return this;var i=this.splitText(),n=i.nodes(null,{fullyContains:!0}),o=Dt.prevPointUntil(i.getStartPoint(),function(t){return!W.contains(n,t.node)}),r=[];return t.each(n,function(t,e){var i=e.parentNode;o.node!==i&&1===Dt.nodeLength(i)&&r.push(i),Dt.remove(e,!1)}),t.each(r,function(t,e){Dt.remove(e,!1)}),new e(o.node,o.offset,o.node,o.offset).normalize()},e.prototype.makeIsOn=function(t){return function(){var e=Dt.ancestor(this.sc,t);return!!e&&e===Dt.ancestor(this.ec,t)}},e.prototype.isLeftEdgeOf=function(t){if(!Dt.isLeftEdgePoint(this.getStartPoint()))return!1;var e=Dt.ancestor(this.sc,t);return e&&Dt.isLeftEdgeOf(this.sc,e)},e.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},e.prototype.wrapBodyInlineWithPara=function(){if(Dt.isBodyContainer(this.sc)&&Dt.isEmpty(this.sc))return this.sc.innerHTML=Dt.emptyPara,new e(this.sc.firstChild,0,this.sc.firstChild,0);var t,i=this.normalize();if(Dt.isParaInline(this.sc)||Dt.isPara(this.sc))return i;if(Dt.isInline(i.sc)){var n=Dt.listAncestor(i.sc,B.not(Dt.isInline));t=W.last(n),Dt.isInline(t)||(t=n[n.length-2]||i.sc.childNodes[i.so])}else t=i.sc.childNodes[i.so>0?i.so-1:0];var o=Dt.listPrev(t,Dt.isParaInline).reverse();if((o=o.concat(Dt.listNext(t.nextSibling,Dt.isParaInline))).length){var r=Dt.wrap(W.head(o),"p");Dt.appendChildNodes(r,W.tail(o))}return this.normalize()},e.prototype.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),i=Dt.splitPoint(e.getStartPoint(),Dt.isInline(t));return i.rightNode?i.rightNode.parentNode.insertBefore(t,i.rightNode):i.container.appendChild(t),t},e.prototype.pasteHTML=function(e){var i=t("<div></div>").html(e)[0],n=W.from(i.childNodes),o=this.wrapBodyInlineWithPara().deleteContents();return o.so>0&&(n=n.reverse()),n=n.map(function(t){return o.insertNode(t)}),o.so>0&&(n=n.reverse()),n},e.prototype.toString=function(){var t=this.nativeRange();return L.isW3CRangeSupport?t.toString():t.text},e.prototype.getWordRange=function(t){var i=this.getEndPoint();if(!Dt.isCharPoint(i))return this;var n=Dt.prevPointUntil(i,function(t){return!Dt.isCharPoint(t)});return t&&(i=Dt.nextPointUntil(i,function(t){return!Dt.isCharPoint(t)})),new e(n.node,n.offset,i.node,i.offset)},e.prototype.bookmark=function(t){return{s:{path:Dt.makeOffsetPath(t,this.sc),offset:this.so},e:{path:Dt.makeOffsetPath(t,this.ec),offset:this.eo}}},e.prototype.paraBookmark=function(t){return{s:{path:W.tail(Dt.makeOffsetPath(W.head(t),this.sc)),offset:this.so},e:{path:W.tail(Dt.makeOffsetPath(W.last(t),this.ec)),offset:this.eo}}},e.prototype.getClientRects=function(){return this.nativeRange().getClientRects()},e}(),Nt={create:function(t,e,i,n){if(4===arguments.length)return new Bt(t,e,i,n);if(2===arguments.length)return new Bt(t,e,i=t,n=e);var o=this.createFromSelection();return o||1!==arguments.length?o:(o=this.createFromNode(arguments[0])).collapse(Dt.emptyPara===arguments[0].innerHTML)},createFromSelection:function(){var t,e,i,n;if(L.isW3CRangeSupport){var o=document.getSelection();if(!o||0===o.rangeCount)return null;if(Dt.isBody(o.anchorNode))return null;var r=o.getRangeAt(0);t=r.startContainer,e=r.startOffset,i=r.endContainer,n=r.endOffset}else{var a=document.selection.createRange(),s=a.duplicate();s.collapse(!1);var l=a;l.collapse(!0);var d=Lt(l,!0),c=Lt(s,!1);Dt.isText(d.node)&&Dt.isLeftEdgePoint(d)&&Dt.isTextNode(c.node)&&Dt.isRightEdgePoint(c)&&c.node.nextSibling===d.node&&(d=c),t=d.cont,e=d.offset,i=c.cont,n=c.offset}return new Bt(t,e,i,n)},createFromNode:function(t){var e=t,i=0,n=t,o=Dt.nodeLength(n);return Dt.isVoid(e)&&(i=Dt.listPrev(e).length-1,e=e.parentNode),Dt.isBR(n)?(o=Dt.listPrev(n).length-1,n=n.parentNode):Dt.isVoid(n)&&(o=Dt.listPrev(n).length,n=n.parentNode),this.create(e,i,n,o)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var i=Dt.fromOffsetPath(t,e.s.path),n=e.s.offset,o=Dt.fromOffsetPath(t,e.e.path);return new Bt(i,n,o,e.e.offset)},createFromParaBookmark:function(t,e){var i=t.s.offset,n=t.e.offset,o=Dt.fromOffsetPath(W.head(e),t.s.path),r=Dt.fromOffsetPath(W.last(e),t.e.path);return new Bt(o,i,r,n)}},Mt={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},Ft={isEdit:function(t){return W.contains([Mt.BACKSPACE,Mt.TAB,Mt.ENTER,Mt.SPACE,Mt.DELETE],t)},isMove:function(t){return W.contains([Mt.LEFT,Mt.UP,Mt.RIGHT,Mt.DOWN],t)},nameFromCode:B.invertObject(Mt),code:Mt},jt=function(){function t(t){this.stack=[],this.stackOffset=-1,this.$editable=t,this.editable=t[0]}return t.prototype.makeSnapshot=function(){var t=Nt.create(this.editable);return{contents:this.$editable.html(),bookmark:t&&t.isOnEditable()?t.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}},t.prototype.applySnapshot=function(t){null!==t.contents&&this.$editable.html(t.contents),null!==t.bookmark&&Nt.createFromBookmark(this.editable,t.bookmark).select()},t.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},t.prototype.commit=function(){this.stack=[],this.stackOffset=-1,this.recordUndo()},t.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},t.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},t}(),Wt=function(){function e(){}return e.prototype.jQueryCSS=function(e,i){if(L.jqueryVersion<1.9){var n={};return t.each(i,function(t,i){n[i]=e.css(i)}),n}return e.css(i)},e.prototype.fromNode=function(t){var e=this.jQueryCSS(t,["font-family","font-size","text-align","list-style-type","line-height"])||{};return e["font-size"]=parseInt(e["font-size"],10),e},e.prototype.stylePara=function(e,i){t.each(e.nodes(Dt.isPara,{includeAncestor:!0}),function(e,n){t(n).css(i)})},e.prototype.styleNodes=function(e,i){e=e.splitText();var n=i&&i.nodeName||"SPAN",o=!(!i||!i.expandClosestSibling),r=!(!i||!i.onlyPartialContains);if(e.isCollapsed())return[e.insertNode(Dt.create(n))];var a=Dt.makePredByNodeName(n),s=e.nodes(Dt.isText,{fullyContains:!0}).map(function(t){return Dt.singleChildAncestor(t,a)||Dt.wrap(t,n)});if(o){if(r){var l=e.nodes();a=B.and(a,function(t){return W.contains(l,t)})}return s.map(function(e){var i=Dt.withClosestSiblings(e,a),n=W.head(i),o=W.tail(i);return t.each(o,function(t,e){Dt.appendChildNodes(n,e.childNodes),Dt.remove(e)}),W.head(i)})}return s},e.prototype.current=function(e){var i=t(Dt.isElement(e.sc)?e.sc:e.sc.parentNode),n=this.fromNode(i);try{n=t.extend(n,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||n["font-family"]})}catch(t){}if(e.isOnList()){var o=["circle","disc","disc-leading-zero","square"].indexOf(n["list-style-type"])>-1;n["list-style"]=o?"unordered":"ordered"}else n["list-style"]="none";var r=Dt.ancestor(e.sc,Dt.isPara);if(r&&r.style["line-height"])n["line-height"]=r.style.lineHeight;else{var a=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=a.toFixed(1)}return n.anchor=e.isOnAnchor()&&Dt.ancestor(e.sc,Dt.isAnchor),n.ancestors=Dt.listAncestor(e.sc,Dt.isEditable),n.range=e,n},e}(),zt=function(){function e(){}return e.prototype.insertOrderedList=function(t){this.toggleList("OL",t)},e.prototype.insertUnorderedList=function(t){this.toggleList("UL",t)},e.prototype.indent=function(e){var i=this,n=Nt.create(e).wrapBodyInlineWithPara(),o=n.nodes(Dt.isPara,{includeAncestor:!0}),r=W.clusterBy(o,B.peq2("parentNode"));t.each(r,function(e,n){var o=W.head(n);if(Dt.isLi(o)){var r=i.findList(o.previousSibling);r?n.map(function(t){return r.appendChild(t)}):(i.wrapList(n,o.parentNode.nodeName),n.map(function(t){return t.parentNode}).map(function(t){return i.appendToPrevious(t)}))}else t.each(n,function(e,i){t(i).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),n.select()},e.prototype.outdent=function(e){var i=this,n=Nt.create(e).wrapBodyInlineWithPara(),o=n.nodes(Dt.isPara,{includeAncestor:!0}),r=W.clusterBy(o,B.peq2("parentNode"));t.each(r,function(e,n){var o=W.head(n);Dt.isLi(o)?i.releaseList([n]):t.each(n,function(e,i){t(i).css("marginLeft",function(t,e){return(e=parseInt(e,10)||0)>25?e-25:""})})}),n.select()},e.prototype.toggleList=function(e,i){var n=this,o=Nt.create(i).wrapBodyInlineWithPara(),r=o.nodes(Dt.isPara,{includeAncestor:!0}),a=o.paraBookmark(r),s=W.clusterBy(r,B.peq2("parentNode"));if(W.find(r,Dt.isPurePara)){var l=[];t.each(s,function(t,i){l=l.concat(n.wrapList(i,e))}),r=l}else{var d=o.nodes(Dt.isList,{includeAncestor:!0}).filter(function(i){return!t.nodeName(i,e)});d.length?t.each(d,function(t,i){Dt.replace(i,e)}):r=this.releaseList(s,!0)}Nt.createFromParaBookmark(a,r).select()},e.prototype.wrapList=function(t,e){var i=W.head(t),n=W.last(t),o=Dt.isList(i.previousSibling)&&i.previousSibling,r=Dt.isList(n.nextSibling)&&n.nextSibling,a=o||Dt.insertAfter(Dt.create(e||"UL"),n);return t=t.map(function(t){return Dt.isPurePara(t)?Dt.replace(t,"LI"):t}),Dt.appendChildNodes(a,t),r&&(Dt.appendChildNodes(a,W.from(r.childNodes)),Dt.remove(r)),t},e.prototype.releaseList=function(e,i){var n=this,o=[];return t.each(e,function(e,r){var a=W.head(r),s=W.last(r),l=i?Dt.lastAncestor(a,Dt.isList):a.parentNode,d=l.parentNode;if("LI"===l.parentNode.nodeName)r.map(function(t){var e=n.findNextSiblings(t);d.nextSibling?d.parentNode.insertBefore(t,d.nextSibling):d.parentNode.appendChild(t),e.length&&(n.wrapList(e,l.nodeName),t.appendChild(e[0].parentNode))}),0===l.children.length&&d.removeChild(l),0===d.childNodes.length&&d.parentNode.removeChild(d);else{var c=l.childNodes.length>1?Dt.splitTree(l,{node:s.parentNode,offset:Dt.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,u=Dt.splitTree(l,{node:a.parentNode,offset:Dt.position(a)},{isSkipPaddingBlankHTML:!0});r=i?Dt.listDescendant(u,Dt.isLi):W.from(u.childNodes).filter(Dt.isLi),!i&&Dt.isList(l.parentNode)||(r=r.map(function(t){return Dt.replace(t,"P")})),t.each(W.from(r).reverse(),function(t,e){Dt.insertAfter(e,l)});var h=W.compact([l,u,c]);t.each(h,function(e,i){var n=[i].concat(Dt.listDescendant(i,Dt.isList));t.each(n.reverse(),function(t,e){Dt.nodeLength(e)||Dt.remove(e,!0)})})}o=o.concat(r)}),o},e.prototype.appendToPrevious=function(t){return t.previousSibling?Dt.appendChildNodes(t.previousSibling,[t]):this.wrapList([t],"LI")},e.prototype.findList=function(t){return t?W.find(t.children,function(t){return["OL","UL"].indexOf(t.nodeName)>-1}):null},e.prototype.findNextSiblings=function(t){for(var e=[];t.nextSibling;)e.push(t.nextSibling),t=t.nextSibling;return e},e}(),Ht=function(){function e(t){this.bullet=new zt,this.options=t.options}return e.prototype.insertTab=function(t,e){var i=Dt.createText(new Array(e+1).join(Dt.NBSP_CHAR));(t=t.deleteContents()).insertNode(i,!0),(t=Nt.create(i,e)).select()},e.prototype.insertParagraph=function(e,i){i=(i=(i=i||Nt.create(e)).deleteContents()).wrapBodyInlineWithPara();var n,o=Dt.ancestor(i.sc,Dt.isPara);if(o){if(Dt.isEmpty(o)&&Dt.isLi(o))return void this.bullet.toggleList(o.parentNode.nodeName);var r=null;if(1===this.options.blockquoteBreakingLevel?r=Dt.ancestor(o,Dt.isBlockquote):2===this.options.blockquoteBreakingLevel&&(r=Dt.lastAncestor(o,Dt.isBlockquote)),r){n=t(Dt.emptyPara)[0],Dt.isRightEdgePoint(i.getStartPoint())&&Dt.isBR(i.sc.nextSibling)&&t(i.sc.nextSibling).remove();var a=Dt.splitTree(r,i.getStartPoint(),{isDiscardEmptySplits:!0});a?a.parentNode.insertBefore(n,a):Dt.insertAfter(n,r)}else{n=Dt.splitTree(o,i.getStartPoint());var s=Dt.listDescendant(o,Dt.isEmptyAnchor);s=s.concat(Dt.listDescendant(n,Dt.isEmptyAnchor)),t.each(s,function(t,e){Dt.remove(e)}),(Dt.isHeading(n)||Dt.isPre(n)||Dt.isCustomStyleTag(n))&&Dt.isEmpty(n)&&(n=Dt.replace(n,"p"))}}else{var l=i.sc.childNodes[i.so];n=t(Dt.emptyPara)[0],l?i.sc.insertBefore(n,l):i.sc.appendChild(n)}Nt.create(n,0).normalize().select().scrollIntoView(e)},e}(),qt=function(t,e,i,n){var o={colPos:0,rowPos:0},r=[],a=[];function s(t,e,i,n,o,a,s){var l={baseRow:i,baseCell:n,isRowSpan:o,isColSpan:a,isVirtual:s};r[t]||(r[t]=[]),r[t][e]=l}function l(t,e,i,n){return{baseCell:t.baseCell,action:e,virtualTable:{rowIndex:i,cellIndex:n}}}function d(t,e){if(!r[t])return e;if(!r[t][e])return e;for(var i=e;r[t][i];)if(!r[t][++i])return i}function c(t,e){var i=d(t.rowIndex,e.cellIndex),n=e.colSpan>1,r=e.rowSpan>1,a=t.rowIndex===o.rowPos&&e.cellIndex===o.colPos;s(t.rowIndex,i,t,e,r,n,!1);var l=e.attributes.rowSpan?parseInt(e.attributes.rowSpan.value,10):0;if(l>1)for(var c=1;c<l;c++){var h=t.rowIndex+c;u(h,i,e,a),s(h,i,t,e,!0,n,!0)}var p=e.attributes.colSpan?parseInt(e.attributes.colSpan.value,10):0;if(p>1)for(var f=1;f<p;f++){var m=d(t.rowIndex,i+f);u(t.rowIndex,m,e,a),s(t.rowIndex,m,t,e,r,!0,!0)}}function u(t,e,i,n){t===o.rowPos&&o.colPos>=i.cellIndex&&i.cellIndex<=e&&!n&&o.colPos++}function h(t){switch(e){case qt.where.Column:if(t.isColSpan)return qt.resultAction.SubtractSpanCount;break;case qt.where.Row:if(!t.isVirtual&&t.isRowSpan)return qt.resultAction.AddCell;if(t.isRowSpan)return qt.resultAction.SubtractSpanCount}return qt.resultAction.RemoveCell}function p(t){switch(e){case qt.where.Column:if(t.isColSpan)return qt.resultAction.SumSpanCount;if(t.isRowSpan&&t.isVirtual)return qt.resultAction.Ignore;break;case qt.where.Row:if(t.isRowSpan)return qt.resultAction.SumSpanCount;if(t.isColSpan&&t.isVirtual)return qt.resultAction.Ignore}return qt.resultAction.AddCell}this.getActionList=function(){for(var t=e===qt.where.Row?o.rowPos:-1,n=e===qt.where.Column?o.colPos:-1,s=0,d=!0;d;){var c=t>=0?t:s,u=n>=0?n:s,f=r[c];if(!f)return d=!1,a;var m=f[u];if(!m)return d=!1,a;var g=qt.resultAction.Ignore;switch(i){case qt.requestAction.Add:g=p(m);break;case qt.requestAction.Delete:g=h(m)}a.push(l(m,g,c,u)),s++}return a},t&&t.tagName&&("td"===t.tagName.toLowerCase()||"th"===t.tagName.toLowerCase())?(o.colPos=t.cellIndex,t.parentElement&&t.parentElement.tagName&&"tr"===t.parentElement.tagName.toLowerCase()?o.rowPos=t.parentElement.rowIndex:console.error("Impossible to identify start Row point.",t)):console.error("Impossible to identify start Cell point.",t),function(){for(var t=n.rows,e=0;e<t.length;e++)for(var i=t[e].cells,o=0;o<i.length;o++)c(t[e],i[o])}()};qt.where={Row:0,Column:1},qt.requestAction={Add:0,Delete:1},qt.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Vt,Ut=function(){function e(){}return e.prototype.tab=function(t,e){var i=Dt.ancestor(t.commonAncestor(),Dt.isCell),n=Dt.ancestor(i,Dt.isTable),o=Dt.listDescendant(n,Dt.isCell),r=W[e?"prev":"next"](o,i);r&&Nt.create(r,0).select()},e.prototype.addRow=function(e,i){for(var n=Dt.ancestor(e.commonAncestor(),Dt.isCell),o=t(n).closest("tr"),r=this.recoverAttributes(o),a=t("<tr"+r+"></tr>"),s=new qt(n,qt.where.Row,qt.requestAction.Add,t(o).closest("table")[0]).getActionList(),l=0;l<s.length;l++){var d=s[l],c=this.recoverAttributes(d.baseCell);switch(d.action){case qt.resultAction.AddCell:a.append("<td"+c+">"+Dt.blank+"</td>");break;case qt.resultAction.SumSpanCount:if("top"===i&&(d.baseCell.parent?d.baseCell.closest("tr").rowIndex:0)<=o[0].rowIndex){var u=t("<div></div>").append(t("<td"+c+">"+Dt.blank+"</td>").removeAttr("rowspan")).html();a.append(u);break}var h=parseInt(d.baseCell.rowSpan,10);d.baseCell.setAttribute("rowSpan",++h)}}if("top"===i)o.before(a);else{if(n.rowSpan>1){var p=o[0].rowIndex+(n.rowSpan-2);return void t(t(o).parent().find("tr")[p]).after(t(a))}o.after(a)}},e.prototype.addCol=function(e,i){var n=Dt.ancestor(e.commonAncestor(),Dt.isCell),o=t(n).closest("tr");t(o).siblings().push(o);for(var r=new qt(n,qt.where.Column,qt.requestAction.Add,t(o).closest("table")[0]).getActionList(),a=0;a<r.length;a++){var s=r[a],l=this.recoverAttributes(s.baseCell);switch(s.action){case qt.resultAction.AddCell:"right"===i?t(s.baseCell).after("<td"+l+">"+Dt.blank+"</td>"):t(s.baseCell).before("<td"+l+">"+Dt.blank+"</td>");break;case qt.resultAction.SumSpanCount:if("right"===i){var d=parseInt(s.baseCell.colSpan,10);s.baseCell.setAttribute("colSpan",++d)}else t(s.baseCell).before("<td"+l+">"+Dt.blank+"</td>")}}},e.prototype.recoverAttributes=function(t){var e="";if(!t)return e;for(var i=t.attributes||[],n=0;n<i.length;n++)"id"!==i[n].name.toLowerCase()&&i[n].specified&&(e+=" "+i[n].name+"='"+i[n].value+"'");return e},e.prototype.deleteRow=function(e){for(var i=Dt.ancestor(e.commonAncestor(),Dt.isCell),n=t(i).closest("tr"),o=n.children("td, th").index(t(i)),r=n[0].rowIndex,a=new qt(i,qt.where.Row,qt.requestAction.Delete,t(n).closest("table")[0]).getActionList(),s=0;s<a.length;s++)if(a[s]){var l=a[s].baseCell,d=a[s].virtualTable,c=l.rowSpan&&l.rowSpan>1,u=c?parseInt(l.rowSpan,10):0;switch(a[s].action){case qt.resultAction.Ignore:continue;case qt.resultAction.AddCell:var h=n.next("tr")[0];if(!h)continue;var p=n[0].cells[o];c&&(u>2?(u--,h.insertBefore(p,h.cells[o]),h.cells[o].setAttribute("rowSpan",u),h.cells[o].innerHTML=""):2===u&&(h.insertBefore(p,h.cells[o]),h.cells[o].removeAttribute("rowSpan"),h.cells[o].innerHTML=""));continue;case qt.resultAction.SubtractSpanCount:c&&(u>2?(l.setAttribute("rowSpan",--u),d.rowIndex!==r&&l.cellIndex===o&&(l.innerHTML="")):2===u&&(l.removeAttribute("rowSpan"),d.rowIndex!==r&&l.cellIndex===o&&(l.innerHTML="")));continue;case qt.resultAction.RemoveCell:continue}}n.remove()},e.prototype.deleteCol=function(e){for(var i=Dt.ancestor(e.commonAncestor(),Dt.isCell),n=t(i).closest("tr"),o=n.children("td, th").index(t(i)),r=new qt(i,qt.where.Column,qt.requestAction.Delete,t(n).closest("table")[0]).getActionList(),a=0;a<r.length;a++)if(r[a])switch(r[a].action){case qt.resultAction.Ignore:continue;case qt.resultAction.SubtractSpanCount:var s=r[a].baseCell;if(s.colSpan&&s.colSpan>1){var l=s.colSpan?parseInt(s.colSpan,10):0;l>2?(s.setAttribute("colSpan",--l),s.cellIndex===o&&(s.innerHTML="")):2===l&&(s.removeAttribute("colSpan"),s.cellIndex===o&&(s.innerHTML=""))}continue;case qt.resultAction.RemoveCell:Dt.remove(r[a].baseCell,!0);continue}},e.prototype.createTable=function(e,i,n){for(var o,r=[],a=0;a<e;a++)r.push("<td>"+Dt.blank+"</td>");o=r.join("");for(var s,l=[],d=0;d<i;d++)l.push("<tr>"+o+"</tr>");s=l.join("");var c=t("<table>"+s+"</table>");return n&&n.tableClassName&&c.addClass(n.tableClassName),c[0]},e.prototype.deleteTable=function(e){var i=Dt.ancestor(e.commonAncestor(),Dt.isCell);t(i).closest("table").remove()},e}(),Gt=function(){function e(e){var i=this;this.context=e,this.$note=e.layoutInfo.note,this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.options=e.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new Wt,this.table=new Ut,this.typing=new Ht(e),this.bullet=new zt,this.history=new jt(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var n=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],o=0,r=n.length;o<r;o++)this[n[o]]=function(t){return function(e){i.beforeCommand(),document.execCommand(t,!1,e),i.afterCommand(!0)}}(n[o]),this.context.memo("help."+n[o],this.lang.help[n[o]]);for(this.fontName=this.wrapCommand(function(t){return i.fontStyling("font-family","'"+t+"'")}),this.fontSize=this.wrapCommand(function(t){return i.fontStyling("font-size",t+"px")}),o=1;o<=6;o++)this["formatH"+o]=function(t){return function(){i.formatBlock("H"+t)}}(o),this.context.memo("help.formatH"+o,this.lang.help["formatH"+o]);this.insertParagraph=this.wrapCommand(function(){i.typing.insertParagraph(i.editable)}),this.insertOrderedList=this.wrapCommand(function(){i.bullet.insertOrderedList(i.editable)}),this.insertUnorderedList=this.wrapCommand(function(){i.bullet.insertUnorderedList(i.editable)}),this.indent=this.wrapCommand(function(){i.bullet.indent(i.editable)}),this.outdent=this.wrapCommand(function(){i.bullet.outdent(i.editable)}),this.insertNode=this.wrapCommand(function(e){i.isLimited(t(e).text().length)||(i.getLastRange().insertNode(e),Nt.createFromNodeAfter(e).select(),i.setLastRange())}),this.insertText=this.wrapCommand(function(t){if(!i.isLimited(t.length)){var e=i.getLastRange().insertNode(Dt.createText(t));Nt.create(e,Dt.nodeLength(e)).select(),i.setLastRange()}}),this.pasteHTML=this.wrapCommand(function(t){if(!i.isLimited(t.length)){t=i.context.invoke("codeview.purify",t);var e=i.getLastRange().pasteHTML(t);Nt.createFromNodeAfter(W.last(e)).select(),i.setLastRange()}}),this.formatBlock=this.wrapCommand(function(t,e){var n=i.options.callbacks.onApplyCustomStyle;n?n.call(i,e,i.context,i.onFormatBlock):i.onFormatBlock(t,e)}),this.insertHorizontalRule=this.wrapCommand(function(){var t=i.getLastRange().insertNode(Dt.create("HR"));t.nextSibling&&(Nt.create(t.nextSibling,0).normalize().select(),i.setLastRange())}),this.lineHeight=this.wrapCommand(function(t){i.style.stylePara(i.getLastRange(),{lineHeight:t})}),this.createLink=this.wrapCommand(function(e){var n=e.url,o=e.text,r=e.isNewWindow,a=e.range||i.getLastRange(),s=o.length-a.toString().length;if(!(s>0&&i.isLimited(s))){var l=a.toString()!==o;"string"==typeof n&&(n=n.trim()),n=i.options.onCreateLink?i.options.onCreateLink(n):/^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(n)?n:"http://"+n;var d=[];if(l){var c=(a=a.deleteContents()).insertNode(t("<A>"+o+"</A>")[0]);d.push(c)}else d=i.style.styleNodes(a,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(d,function(e,i){t(i).attr("href",n),r?t(i).attr("target","_blank"):t(i).removeAttr("target")});var u=Nt.createFromNodeBefore(W.head(d)).getStartPoint(),h=Nt.createFromNodeAfter(W.last(d)).getEndPoint();Nt.create(u.node,u.offset,h.node,h.offset).select(),i.setLastRange()}}),this.color=this.wrapCommand(function(t){var e=t.foreColor,i=t.backColor;e&&document.execCommand("foreColor",!1,e),i&&document.execCommand("backColor",!1,i)}),this.foreColor=this.wrapCommand(function(t){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,t)}),this.insertTable=this.wrapCommand(function(t){var e=t.split("x");i.getLastRange().deleteContents().insertNode(i.table.createTable(e[0],e[1],i.options))}),this.removeMedia=this.wrapCommand(function(){var e=t(i.restoreTarget()).parent();e.parent("figure").length?e.parent("figure").remove():e=t(i.restoreTarget()).detach(),i.context.triggerEvent("media.delete",e,i.$editable)}),this.floatMe=this.wrapCommand(function(e){var n=t(i.restoreTarget());n.toggleClass("note-float-left","left"===e),n.toggleClass("note-float-right","right"===e),n.css("float","none"===e?"":e)}),this.resize=this.wrapCommand(function(e){var n=t(i.restoreTarget());0===(e=parseFloat(e))?n.css("width",""):n.css({width:100*e+"%",height:""})})}return e.prototype.initialize=function(){var t=this;this.$editable.on("keydown",function(e){if(e.keyCode===Ft.code.ENTER&&t.context.triggerEvent("enter",e),t.context.triggerEvent("keydown",e),e.isDefaultPrevented()||(t.options.shortcuts?t.handleKeyMap(e):t.preventDefaultEditableShortCuts(e)),t.isLimited(1,e))return!1}).on("keyup",function(e){t.setLastRange(),t.context.triggerEvent("keyup",e)}).on("focus",function(e){t.setLastRange(),t.context.triggerEvent("focus",e)}).on("blur",function(e){t.context.triggerEvent("blur",e)}).on("mousedown",function(e){t.context.triggerEvent("mousedown",e)}).on("mouseup",function(e){t.setLastRange(),t.context.triggerEvent("mouseup",e)}).on("scroll",function(e){t.context.triggerEvent("scroll",e)}).on("paste",function(e){t.setLastRange(),t.context.triggerEvent("paste",e)}),this.$editable.attr("spellcheck",this.options.spellCheck),this.$editable.html(Dt.html(this.$note)||Dt.emptyPara),this.$editable.on(L.inputEventName,B.debounce(function(){t.context.triggerEvent("change",t.$editable.html(),t.$editable)},10)),this.$editor.on("focusin",function(e){t.context.triggerEvent("focusin",e)}).on("focusout",function(e){t.context.triggerEvent("focusout",e)}),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo(),this.setLastRange()},e.prototype.destroy=function(){this.$editable.off()},e.prototype.handleKeyMap=function(t){var e=this.options.keyMap[L.isMac?"mac":"pc"],i=[];t.metaKey&&i.push("CMD"),t.ctrlKey&&!t.altKey&&i.push("CTRL"),t.shiftKey&&i.push("SHIFT");var n=Ft.nameFromCode[t.keyCode];n&&i.push(n);var o=e[i.join("+")];o?!1!==this.context.invoke(o)&&t.preventDefault():Ft.isEdit(t.keyCode)&&this.afterCommand()},e.prototype.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&W.contains([66,73,85],t.keyCode)&&t.preventDefault()},e.prototype.isLimited=function(t,e){return t=t||0,("undefined"==typeof e||!(Ft.isMove(e.keyCode)||e.ctrlKey||e.metaKey||W.contains([Ft.code.BACKSPACE,Ft.code.DELETE],e.keyCode)))&&this.options.maxTextLength>0&&this.$editable.text().length+t>=this.options.maxTextLength},e.prototype.createRange=function(){return this.focus(),this.setLastRange(),this.getLastRange()},e.prototype.setLastRange=function(){this.lastRange=Nt.create(this.editable)},e.prototype.getLastRange=function(){return this.lastRange||this.setLastRange(),this.lastRange},e.prototype.saveRange=function(t){t&&this.getLastRange().collapse().select()},e.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},e.prototype.saveTarget=function(t){this.$editable.data("target",t)},e.prototype.clearTarget=function(){this.$editable.removeData("target")},e.prototype.restoreTarget=function(){return this.$editable.data("target")},e.prototype.currentStyle=function(){var t=Nt.create();return t&&(t=t.normalize()),t?this.style.current(t):this.style.fromNode(this.$editable)},e.prototype.styleFromNode=function(t){return this.style.fromNode(t)},e.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},e.prototype.afterCommand=function(t){this.normalizeContent(),this.history.recordUndo(),t||this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.tab=function(){var t=this.getLastRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(t,this.options.tabSize),this.afterCommand())}},e.prototype.untab=function(){var t=this.getLastRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t,!0);else if(0===this.options.tabSize)return!1},e.prototype.wrapCommand=function(t){return function(){this.beforeCommand(),t.apply(this,arguments),this.afterCommand()}},e.prototype.insertImage=function(e,i){var n,o=this;return(n=e,t.Deferred(function(e){var i=t("<img>");i.one("load",function(){i.off("error abort"),e.resolve(i)}).one("error abort",function(){i.off("load").detach(),e.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",n)}).promise()).then(function(t){o.beforeCommand(),"function"==typeof i?i(t):("string"==typeof i&&t.attr("data-filename",i),t.css("width",Math.min(o.$editable.width(),t.width()))),t.show(),Nt.create(o.editable).insertNode(t[0]),Nt.createFromNodeAfter(t[0]).select(),o.setLastRange(),o.afterCommand()}).fail(function(t){o.context.triggerEvent("image.upload.error",t)})},e.prototype.insertImagesAsDataURL=function(e){var i=this;t.each(e,function(e,n){var o=n.name;i.options.maximumImageFileSize&&i.options.maximumImageFileSize<n.size?i.context.triggerEvent("image.upload.error",i.lang.image.maximumFileSizeError):function(e){return t.Deferred(function(i){t.extend(new FileReader,{onload:function(t){i.resolve(t.target.result)},onerror:function(t){i.reject(t)}}).readAsDataURL(e)}).promise()}(n).then(function(t){return i.insertImage(t,o)}).fail(function(){i.context.triggerEvent("image.upload.error")})})},e.prototype.insertImagesOrCallback=function(t){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",t):this.insertImagesAsDataURL(t)},e.prototype.getSelectedText=function(){var t=this.getLastRange();return t.isOnAnchor()&&(t=Nt.createFromNode(Dt.ancestor(t.sc,Dt.isAnchor))),t.toString()},e.prototype.onFormatBlock=function(e,i){if(document.execCommand("FormatBlock",!1,L.isMSIE?"<"+e+">":e),i&&i.length&&(i[0].tagName.toUpperCase()!==e.toUpperCase()&&(i=i.find(e)),i&&i.length)){var n=i[0].className||"";if(n){var o=this.createRange();t([o.sc,o.ec]).closest(e).addClass(n)}}},e.prototype.formatPara=function(){this.formatBlock("P")},e.prototype.fontStyling=function(e,i){var n=this.getLastRange();if(n){var o=this.style.styleNodes(n);if(t(o).css(e,i),n.isCollapsed()){var r=W.head(o);r&&!Dt.nodeLength(r)&&(r.innerHTML=Dt.ZERO_WIDTH_NBSP_CHAR,Nt.createFromNodeAfter(r.firstChild).select(),this.setLastRange(),this.$editable.data("bogus",r))}}},e.prototype.unlink=function(){var t=this.getLastRange();if(t.isOnAnchor()){var e=Dt.ancestor(t.sc,Dt.isAnchor);(t=Nt.createFromNode(e)).select(),this.setLastRange(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},e.prototype.getLinkInfo=function(){var e=this.getLastRange().expand(Dt.isAnchor),i=t(W.head(e.nodes(Dt.isAnchor))),n={range:e,text:e.toString(),url:i.length?i.attr("href"):""};return i.length&&(n.isNewWindow="_blank"===i.attr("target")),n},e.prototype.addRow=function(t){var e=this.getLastRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addRow(e,t),this.afterCommand())},e.prototype.addCol=function(t){var e=this.getLastRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addCol(e,t),this.afterCommand())},e.prototype.deleteRow=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(t),this.afterCommand())},e.prototype.deleteCol=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(t),this.afterCommand())},e.prototype.deleteTable=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(t),this.afterCommand())},e.prototype.resizeTo=function(t,e,i){var n;if(i){var o=t.y/t.x,r=e.data("ratio");n={width:r>o?t.x:t.y/r,height:r>o?t.x*r:t.y}}else n={width:t.x,height:t.y};e.css(n)},e.prototype.hasFocus=function(){return this.$editable.is(":focus")},e.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},e.prototype.isEmpty=function(){return Dt.isEmpty(this.$editable[0])||Dt.emptyPara===this.$editable.html()},e.prototype.empty=function(){this.context.invoke("code",Dt.emptyPara)},e.prototype.normalizeContent=function(){this.$editable[0].normalize()},e}(),$t=function(){function t(t){this.context=t,this.$editable=t.layoutInfo.editable}return t.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},t.prototype.pasteByEvent=function(t){var e=t.originalEvent.clipboardData;if(e&&e.items&&e.items.length){var i=e.items.length>1?e.items[1]:W.head(e.items);"file"===i.kind&&-1!==i.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[i.getAsFile()]),this.context.invoke("editor.afterCommand")}},t}(),Kt=function(){function e(e){this.context=e,this.$eventListener=t(document),this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.options=e.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=t(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return e.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(t){t.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},e.prototype.attachDragAndDropEvent=function(){var e=this,i=t(),n=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(t){var o=e.context.invoke("codeview.isActivated"),r=e.$editor.width()>0&&e.$editor.height()>0;o||i.length||!r||(e.$editor.addClass("dragover"),e.$dropzone.width(e.$editor.width()),e.$dropzone.height(e.$editor.height()),n.text(e.lang.image.dragImageHere)),i=i.add(t.target)},this.documentEventHandlers.onDragleave=function(t){(i=i.not(t.target)).length||e.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){i=t(),e.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){e.$dropzone.addClass("hover"),n.text(e.lang.image.dropImage)}).on("dragleave",function(){e.$dropzone.removeClass("hover"),n.text(e.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(i){var n=i.originalEvent.dataTransfer;i.preventDefault(),n&&n.files&&n.files.length?(e.$editable.focus(),e.context.invoke("editor.insertImagesOrCallback",n.files)):t.each(n.types,function(i,o){var r=n.getData(o);o.toLowerCase().indexOf("text")>-1?e.context.invoke("editor.pasteHTML",r):t(r).each(function(t,i){e.context.invoke("editor.insertNode",i)})})}).on("dragover",!1)},e.prototype.destroy=function(){var t=this;Object.keys(this.documentEventHandlers).forEach(function(e){t.$eventListener.off(e.substr(2).toLowerCase(),t.documentEventHandlers[e])}),this.documentEventHandlers={}},e}();L.hasCodeMirror&&(Vt=window.CodeMirror);var Yt=function(){function t(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options}return t.prototype.sync=function(){this.isActivated()&&L.hasCodeMirror&&this.$codable.data("cmEditor").save()},t.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},t.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},t.prototype.purify=function(t){if(this.options.codeviewFilter&&(t=t.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){var e=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);t=t.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(t){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(t))return"";for(var i=0,n=e;i<n.length;i++)if(new RegExp('src="(https?:)?//'+n[i].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"').test(t))return t;return""})}return t},t.prototype.activate=function(){var t=this;if(this.$codable.val(Dt.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),L.hasCodeMirror){var e=Vt.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var i=new Vt.TernServer(this.options.codemirror.tern);e.ternServer=i,e.on("cursorActivity",function(t){i.updateArgHints(t)})}e.on("blur",function(i){t.context.triggerEvent("blur.codeview",e.getValue(),i)}),e.on("change",function(i){t.context.triggerEvent("change.codeview",e.getValue(),e)}),e.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",e)}else this.$codable.on("blur",function(e){t.context.triggerEvent("blur.codeview",t.$codable.val(),e)}),this.$codable.on("input",function(e){t.context.triggerEvent("change.codeview",t.$codable.val(),t.$codable)})},t.prototype.deactivate=function(){if(L.hasCodeMirror){var t=this.$codable.data("cmEditor");this.$codable.val(t.getValue()),t.toTextArea()}var e=this.purify(Dt.value(this.$codable,this.options.prettifyHtml)||Dt.emptyPara),i=this.$editable.html()!==e;this.$editable.html(e),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),i&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},t.prototype.destroy=function(){this.isActivated()&&this.deactivate()},t}(),Xt=function(){function e(e){this.$document=t(document),this.$statusbar=e.layoutInfo.statusbar,this.$editable=e.layoutInfo.editable,this.options=e.options}return e.prototype.initialize=function(){var t=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",function(e){e.preventDefault(),e.stopPropagation();var i=t.$editable.offset().top-t.$document.scrollTop(),n=function(e){var n=e.clientY-(i+24);n=t.options.minheight>0?Math.max(n,t.options.minheight):n,n=t.options.maxHeight>0?Math.min(n,t.options.maxHeight):n,t.$editable.height(n)};t.$document.on("mousemove",n).one("mouseup",function(){t.$document.off("mousemove",n)})})},e.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},e}(),Qt=function(){function e(e){var i=this;this.context=e,this.$editor=e.layoutInfo.editor,this.$toolbar=e.layoutInfo.toolbar,this.$editable=e.layoutInfo.editable,this.$codable=e.layoutInfo.codable,this.$window=t(window),this.$scrollbar=t("html, body"),this.onResize=function(){i.resizeTo({h:i.$window.height()-i.$toolbar.outerHeight()})}}return e.prototype.resizeTo=function(t){this.$editable.css("height",t.h),this.$codable.css("height",t.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,t.h)},e.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},e.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},e}(),Zt=function(){function e(e){var i=this;this.context=e,this.$document=t(document),this.$editingArea=e.layoutInfo.editingArea,this.options=e.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(t,e){i.update(e.target,e)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){i.update()},"summernote.disable":function(){i.hide()},"summernote.codeview.toggled":function(){i.update()}}}return e.prototype.initialize=function(){var e=this;this.$handle=t(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(t){if(Dt.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();var i=e.$handle.find(".note-control-selection").data("target"),n=i.offset(),o=e.$document.scrollTop(),r=function(t){e.context.invoke("editor.resizeTo",{x:t.clientX-n.left,y:t.clientY-(n.top-o)},i,!t.shiftKey),e.update(i[0])};e.$document.on("mousemove",r).one("mouseup",function(t){t.preventDefault(),e.$document.off("mousemove",r),e.context.invoke("editor.afterCommand")}),i.data("ratio")||i.data("ratio",i.height()/i.width())}}),this.$handle.on("wheel",function(t){t.preventDefault(),e.update()})},e.prototype.destroy=function(){this.$handle.remove()},e.prototype.update=function(e,i){if(this.context.isDisabled())return!1;var n=Dt.isImg(e),o=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",e,i),n){var r=t(e),a=r.position(),s={left:a.left+parseInt(r.css("marginLeft"),10),top:a.top+parseInt(r.css("marginTop"),10)},l={w:r.outerWidth(!1),h:r.outerHeight(!1)};o.css({display:"block",left:s.left,top:s.top,width:l.w,height:l.h}).data("target",r);var d=new Image;d.src=r.attr("src");var c=l.w+"x"+l.h+" ("+this.lang.image.original+": "+d.width+"x"+d.height+")";o.find(".note-control-selection-info").text(c),this.context.invoke("editor.saveTarget",e)}else this.hide();return n},e.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},e}(),Jt=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,te=function(){function e(t){var e=this;this.context=t,this.events={"summernote.keyup":function(t,i){i.isDefaultPrevented()||e.handleKeyup(i)},"summernote.keydown":function(t,i){e.handleKeydown(i)}}}return e.prototype.initialize=function(){this.lastWordRange=null},e.prototype.destroy=function(){this.lastWordRange=null},e.prototype.replace=function(){if(this.lastWordRange){var e=this.lastWordRange.toString(),i=e.match(Jt);if(i&&(i[1]||i[2])){var n=i[1]?e:"http://"+e,o=t("<a />").html(e).attr("href",n)[0];this.context.options.linkTargetBlank&&t(o).attr("target","_blank"),this.lastWordRange.insertNode(o),this.lastWordRange=null,this.context.invoke("editor.focus")}}},e.prototype.handleKeydown=function(t){if(W.contains([Ft.code.ENTER,Ft.code.SPACE],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=e}},e.prototype.handleKeyup=function(t){W.contains([Ft.code.ENTER,Ft.code.SPACE],t.keyCode)&&this.replace()},e}(),ee=function(){function t(t){var e=this;this.$note=t.layoutInfo.note,this.events={"summernote.change":function(){e.$note.val(t.invoke("code"))}}}return t.prototype.shouldInitialize=function(){return Dt.isTextarea(this.$note[0])},t}(),ie=function(){function t(t){var e=this;this.context=t,this.options=t.options.replace||{},this.keys=[Ft.code.ENTER,Ft.code.SPACE,Ft.code.PERIOD,Ft.code.COMMA,Ft.code.SEMICOLON,Ft.code.SLASH],this.previousKeydownCode=null,this.events={"summernote.keyup":function(t,i){i.isDefaultPrevented()||e.handleKeyup(i)},"summernote.keydown":function(t,i){e.handleKeydown(i)}}}return t.prototype.shouldInitialize=function(){return!!this.options.match},t.prototype.initialize=function(){this.lastWord=null},t.prototype.destroy=function(){this.lastWord=null},t.prototype.replace=function(){if(this.lastWord){var t=this,e=this.lastWord.toString();this.options.match(e,function(e){if(e){var i="";if("string"==typeof e?i=Dt.createText(e):e instanceof jQuery?i=e[0]:e instanceof Node&&(i=e),!i)return;t.lastWord.insertNode(i),t.lastWord=null,t.context.invoke("editor.focus")}})}},t.prototype.handleKeydown=function(t){if(this.previousKeydownCode&&W.contains(this.keys,this.previousKeydownCode))this.previousKeydownCode=t.keyCode;else{if(W.contains(this.keys,t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWord=e}this.previousKeydownCode=t.keyCode}},t.prototype.handleKeyup=function(t){W.contains(this.keys,t.keyCode)&&this.replace()},t}(),ne=function(){function e(t){var e=this;this.context=t,this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.events={"summernote.init summernote.change":function(){e.update()},"summernote.codeview.toggled":function(){e.update()}}}return e.prototype.shouldInitialize=function(){return!!this.options.placeholder},e.prototype.initialize=function(){var e=this;this.$placeholder=t('<div class="note-placeholder">'),this.$placeholder.on("click",function(){e.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()},e.prototype.destroy=function(){this.$placeholder.remove()},e.prototype.update=function(){var t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)},e}(),oe=function(){function e(e){this.ui=t.summernote.ui,this.context=e,this.$toolbar=e.layoutInfo.toolbar,this.options=e.options,this.lang=this.options.langInfo,this.invertedKeyMap=B.invertObject(this.options.keyMap[L.isMac?"mac":"pc"])}return e.prototype.representShortcut=function(t){var e=this.invertedKeyMap[t];return this.options.shortcuts&&e?(L.isMac&&(e=e.replace("CMD","\u2318").replace("SHIFT","\u21e7"))," ("+(e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""},e.prototype.button=function(t){return!this.options.tooltip&&t.tooltip&&delete t.tooltip,t.container=this.options.container,this.ui.button(t)},e.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},e.prototype.destroy=function(){delete this.fontInstalledMap},e.prototype.isFontInstalled=function(t){return this.fontInstalledMap.hasOwnProperty(t)||(this.fontInstalledMap[t]=L.isFontInstalled(t)||W.contains(this.options.fontNamesIgnoreCheck,t)),this.fontInstalledMap[t]},e.prototype.isFontDeservedToAdd=function(t){return""!==(t=t.toLowerCase())&&this.isFontInstalled(t)&&-1===["sans-serif","serif","monospace","cursive","fantasy"].indexOf(t)},e.prototype.colorPalette=function(e,i,n,o){var r=this;return this.ui.buttonGroup({className:"note-color "+e,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:i,click:function(e){var i=t(e.currentTarget);n&&o?r.context.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")}):n?r.context.invoke("editor.color",{backColor:i.attr("data-backColor")}):o&&r.context.invoke("editor.color",{foreColor:i.attr("data-foreColor")})},callback:function(t){var e=t.find(".note-recent-color");n&&(e.css("background-color",r.options.colorButton.backColor),t.attr("data-backColor",r.options.colorButton.backColor)),o?(e.css("color",r.options.colorButton.foreColor),t.attr("data-foreColor",r.options.colorButton.foreColor)):e.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(n?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="backColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette">',"  </div>",'  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/>',"</div>"].join(""):"")+(o?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/>',"</div>"].join(""):""),callback:function(e){e.find(".note-holder").each(function(e,i){var n=t(i);n.append(r.ui.palette({colors:r.options.colors,colorsName:r.options.colorsName,eventName:n.data("event"),container:r.options.container,tooltip:r.options.tooltip}).render())});var i=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];e.find(".note-holder-custom").each(function(e,n){var o=t(n);o.append(r.ui.palette({colors:i,colorsName:i,eventName:o.data("event"),container:r.options.container,tooltip:r.options.tooltip}).render())}),e.find("input[type=color]").each(function(i,n){t(n).change(function(){var i=e.find("#"+t(this).data("event")).find(".note-color-btn").first(),n=this.value.toUpperCase();i.css("background-color",n).attr("aria-label",n).attr("data-value",n).attr("data-original-title",n),i.click()})})},click:function(i){i.stopPropagation();var n=t("."+e),o=t(i.target),a=o.data("event"),s=o.attr("data-value");if("openPalette"===a){var l=n.find("#"+s),d=t(n.find("#"+l.data("event")).find(".note-color-row")[0]),c=d.find(".note-color-btn").last().detach(),u=l.val();c.css("background-color",u).attr("aria-label",u).attr("data-value",u).attr("data-original-title",u),d.prepend(c),l.click()}else if(W.contains(["backColor","foreColor"],a)){var h="backColor"===a?"background-color":"color",p=o.closest(".note-color").find(".note-recent-color"),f=o.closest(".note-color").find(".note-current-color-button");p.css(h,s),f.attr("data-"+a,s),r.context.invoke("editor."+a,s)}}})]}).render()},e.prototype.addToolbarButtons=function(){var e=this;this.context.memo("button.style",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.magic),e.options),tooltip:e.lang.style.style,data:{toggle:"dropdown"}}),e.ui.dropdown({className:"dropdown-style",items:e.options.styleTags,title:e.lang.style.style,template:function(t){"string"==typeof t&&(t={tag:t,title:e.lang.style.hasOwnProperty(t)?e.lang.style[t]:t});var i=t.tag;return"<"+i+(t.style?' style="'+t.style+'" ':"")+(t.className?' class="'+t.className+'"':"")+">"+t.title+"</"+i+">"},click:e.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var i=function(t,i){var o=n.options.styleTags[t];n.context.memo("button.style."+o,function(){return e.button({className:"note-btn-style-"+o,contents:'<div data-value="'+o+'">'+o.toUpperCase()+"</div>",tooltip:e.lang.style[o],click:e.context.createInvokeHandler("editor.formatBlock")}).render()})},n=this,o=0,r=this.options.styleTags.length;o<r;o++)i(o);this.context.memo("button.bold",function(){return e.button({className:"note-btn-bold",contents:e.ui.icon(e.options.icons.bold),tooltip:e.lang.font.bold+e.representShortcut("bold"),click:e.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return e.button({className:"note-btn-italic",contents:e.ui.icon(e.options.icons.italic),tooltip:e.lang.font.italic+e.representShortcut("italic"),click:e.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return e.button({className:"note-btn-underline",contents:e.ui.icon(e.options.icons.underline),tooltip:e.lang.font.underline+e.representShortcut("underline"),click:e.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return e.button({contents:e.ui.icon(e.options.icons.eraser),tooltip:e.lang.font.clear+e.representShortcut("removeFormat"),click:e.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return e.button({className:"note-btn-strikethrough",contents:e.ui.icon(e.options.icons.strikethrough),tooltip:e.lang.font.strikethrough+e.representShortcut("strikethrough"),click:e.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return e.button({className:"note-btn-superscript",contents:e.ui.icon(e.options.icons.superscript),tooltip:e.lang.font.superscript,click:e.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return e.button({className:"note-btn-subscript",contents:e.ui.icon(e.options.icons.subscript),tooltip:e.lang.font.subscript,click:e.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var i=e.context.invoke("editor.currentStyle");return t.each(i["font-family"].split(","),function(t,i){i=i.trim().replace(/['"]+/g,""),e.isFontDeservedToAdd(i)&&-1===e.options.fontNames.indexOf(i)&&e.options.fontNames.push(i)}),e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents('<span class="note-current-fontname"/>',e.options),tooltip:e.lang.font.name,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:e.options.icons.menuCheck,items:e.options.fontNames.filter(e.isFontInstalled.bind(e)),title:e.lang.font.name,template:function(t){return"<span style=\"font-family: '"+t+"'\">"+t+"</span>"},click:e.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',e.options),tooltip:e.lang.font.size,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:e.options.icons.menuCheck,items:e.options.fontSizes,title:e.lang.font.size,click:e.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.color",function(){return e.colorPalette("note-color-all",e.lang.color.recent,!0,!0)}),this.context.memo("button.forecolor",function(){return e.colorPalette("note-color-fore",e.lang.color.foreground,!1,!0)}),this.context.memo("button.backcolor",function(){return e.colorPalette("note-color-back",e.lang.color.background,!0,!1)}),this.context.memo("button.ul",function(){return e.button({contents:e.ui.icon(e.options.icons.unorderedlist),tooltip:e.lang.lists.unordered+e.representShortcut("insertUnorderedList"),click:e.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return e.button({contents:e.ui.icon(e.options.icons.orderedlist),tooltip:e.lang.lists.ordered+e.representShortcut("insertOrderedList"),click:e.context.createInvokeHandler("editor.insertOrderedList")}).render()});var a=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),s=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),l=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),d=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),c=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),u=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",B.invoke(a,"render")),this.context.memo("button.justifyCenter",B.invoke(s,"render")),this.context.memo("button.justifyRight",B.invoke(l,"render")),this.context.memo("button.justifyFull",B.invoke(d,"render")),this.context.memo("button.outdent",B.invoke(c,"render")),this.context.memo("button.indent",B.invoke(u,"render")),this.context.memo("button.paragraph",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.alignLeft),e.options),tooltip:e.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),e.ui.dropdown([e.ui.buttonGroup({className:"note-align",children:[a,s,l,d]}),e.ui.buttonGroup({className:"note-list",children:[c,u]})])]).render()}),this.context.memo("button.height",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.textHeight),e.options),tooltip:e.lang.font.height,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({items:e.options.lineHeights,checkClassName:e.options.icons.menuCheck,className:"dropdown-line-height",title:e.lang.font.height,click:e.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.table),e.options),tooltip:e.lang.table.table,data:{toggle:"dropdown"}}),e.ui.dropdown({title:e.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){t.find(".note-dimension-picker-mousecatcher").css({width:e.options.insertTableMaxSize.col+"em",height:e.options.insertTableMaxSize.row+"em"}).mousedown(e.context.createInvokeHandler("editor.insertTable")).on("mousemove",e.tableMoveHandler.bind(e))}}).render()}),this.context.memo("button.link",function(){return e.button({contents:e.ui.icon(e.options.icons.link),tooltip:e.lang.link.link+e.representShortcut("linkDialog.show"),click:e.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return e.button({contents:e.ui.icon(e.options.icons.picture),tooltip:e.lang.image.image,click:e.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return e.button({contents:e.ui.icon(e.options.icons.video),tooltip:e.lang.video.video,click:e.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return e.button({contents:e.ui.icon(e.options.icons.minus),tooltip:e.lang.hr.insert+e.representShortcut("insertHorizontalRule"),click:e.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return e.button({className:"btn-fullscreen",contents:e.ui.icon(e.options.icons.arrowsAlt),tooltip:e.lang.options.fullscreen,click:e.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return e.button({className:"btn-codeview",contents:e.ui.icon(e.options.icons.code),tooltip:e.lang.options.codeview,click:e.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return e.button({contents:e.ui.icon(e.options.icons.redo),tooltip:e.lang.history.redo+e.representShortcut("redo"),click:e.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return e.button({contents:e.ui.icon(e.options.icons.undo),tooltip:e.lang.history.undo+e.representShortcut("undo"),click:e.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return e.button({contents:e.ui.icon(e.options.icons.question),tooltip:e.lang.options.help,click:e.context.createInvokeHandler("helpDialog.show")}).render()})},e.prototype.addImagePopoverButtons=function(){var t=this;this.context.memo("button.resizeFull",function(){return t.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:t.lang.image.resizeFull,click:t.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.resizeHalf",function(){return t.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:t.lang.image.resizeHalf,click:t.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.resizeQuarter",function(){return t.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:t.lang.image.resizeQuarter,click:t.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.resizeNone",function(){return t.button({contents:t.ui.icon(t.options.icons.rollback),tooltip:t.lang.image.resizeNone,click:t.context.createInvokeHandler("editor.resize","0")}).render()}),this.context.memo("button.floatLeft",function(){return t.button({contents:t.ui.icon(t.options.icons.floatLeft),tooltip:t.lang.image.floatLeft,click:t.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return t.button({contents:t.ui.icon(t.options.icons.floatRight),tooltip:t.lang.image.floatRight,click:t.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return t.button({contents:t.ui.icon(t.options.icons.rollback),tooltip:t.lang.image.floatNone,click:t.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return t.button({contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.image.remove,click:t.context.createInvokeHandler("editor.removeMedia")}).render()})},e.prototype.addLinkPopoverButtons=function(){var t=this;this.context.memo("button.linkDialogShow",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.edit,click:t.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return t.button({contents:t.ui.icon(t.options.icons.unlink),tooltip:t.lang.link.unlink,click:t.context.createInvokeHandler("editor.unlink")}).render()})},e.prototype.addTablePopoverButtons=function(){var t=this;this.context.memo("button.addRowUp",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowAbove),tooltip:t.lang.table.addRowAbove,click:t.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowBelow),tooltip:t.lang.table.addRowBelow,click:t.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colBefore),tooltip:t.lang.table.addColLeft,click:t.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colAfter),tooltip:t.lang.table.addColRight,click:t.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowRemove),tooltip:t.lang.table.delRow,click:t.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colRemove),tooltip:t.lang.table.delCol,click:t.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.table.delTable,click:t.context.createInvokeHandler("editor.deleteTable")}).render()})},e.prototype.build=function(t,e){for(var i=0,n=e.length;i<n;i++){for(var o=e[i],r=Array.isArray(o)?o[0]:o,a=Array.isArray(o)?1===o.length?[o[0]]:o[1]:[o],s=this.ui.buttonGroup({className:"note-"+r}).render(),l=0,d=a.length;l<d;l++){var c=this.context.memo("button."+a[l]);c&&s.append("function"==typeof c?c():c)}s.appendTo(t)}},e.prototype.updateCurrentStyle=function(e){var i=this,n=e||this.$toolbar,o=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(n,{".note-btn-bold":function(){return"bold"===o["font-bold"]},".note-btn-italic":function(){return"italic"===o["font-italic"]},".note-btn-underline":function(){return"underline"===o["font-underline"]},".note-btn-subscript":function(){return"subscript"===o["font-subscript"]},".note-btn-superscript":function(){return"superscript"===o["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===o["font-strikethrough"]}}),o["font-family"]){var r=o["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),a=W.find(r,this.isFontInstalled.bind(this));n.find(".dropdown-fontname a").each(function(e,i){var n=t(i),o=n.data("value")+""==a+"";n.toggleClass("checked",o)}),n.find(".note-current-fontname").text(a).css("font-family",a)}if(o["font-size"]){var s=o["font-size"];n.find(".dropdown-fontsize a").each(function(e,i){var n=t(i),o=n.data("value")+""==s+"";n.toggleClass("checked",o)}),n.find(".note-current-fontsize").text(s)}if(o["line-height"]){var l=o["line-height"];n.find(".dropdown-line-height li a").each(function(e,n){var o=t(n).data("value")+""==l+"";i.className=o?"checked":""})}},e.prototype.updateBtnStates=function(e,i){var n=this;t.each(i,function(t,i){n.ui.toggleBtnActive(e.find(t),i())})},e.prototype.tableMoveHandler=function(e){var i,n=t(e.target.parentNode),o=n.next(),r=n.find(".note-dimension-picker-mousecatcher"),a=n.find(".note-dimension-picker-highlighted"),s=n.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var l=t(e.target).offset();i={x:e.pageX-l.left,y:e.pageY-l.top}}else i={x:e.offsetX,y:e.offsetY};var d=Math.ceil(i.x/18)||1,c=Math.ceil(i.y/18)||1;a.css({width:d+"em",height:c+"em"}),r.data("value",d+"x"+c),d>3&&d<this.options.insertTableMaxSize.col&&s.css({width:d+1+"em"}),c>3&&c<this.options.insertTableMaxSize.row&&s.css({height:c+1+"em"}),o.html(d+" x "+c)},e}(),re=function(){function e(e){this.context=e,this.$window=t(window),this.$document=t(document),this.ui=t.summernote.ui,this.$note=e.layoutInfo.note,this.$editor=e.layoutInfo.editor,this.$toolbar=e.layoutInfo.toolbar,this.$editable=e.layoutInfo.editable,this.$statusbar=e.layoutInfo.statusbar,this.options=e.options,this.isFollowing=!1,this.followScroll=this.followScroll.bind(this)}return e.prototype.shouldInitialize=function(){return!this.options.airMode},e.prototype.initialize=function(){var t=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){t.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},e.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},e.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var e=this.$editor.outerHeight(),i=this.$editor.width(),n=this.$toolbar.height(),o=this.$statusbar.height(),r=0;this.options.otherStaticBar&&(r=t(this.options.otherStaticBar).outerHeight());var a=this.$document.scrollTop(),s=this.$editor.offset().top,l=s-r,d=s+e-r-n-o;!this.isFollowing&&a>l&&a<d-n?(this.isFollowing=!0,this.$toolbar.css({position:"fixed",top:r,width:i}),this.$editable.css({marginTop:this.$toolbar.height()+5})):this.isFollowing&&(a<l||a>d)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",top:0,width:"100%"}),this.$editable.css({marginTop:""}))},e.prototype.changeContainer=function(t){t?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.followScroll()},e.prototype.updateFullscreen=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t),this.changeContainer(t)},e.prototype.updateCodeview=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t),t?this.deactivate():this.activate()},e.prototype.activate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!0)},e.prototype.deactivate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!1)},e}(),ae=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo,e.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return e.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,i=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":t("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join("");this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:i,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" value="'+this.lang.link.insert+'" disabled>'}).render().appendTo(e)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Ft.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},e.prototype.toggleLinkBtn=function(t,e,i){this.ui.toggleBtn(t,e.val()&&i.val())},e.prototype.showLinkDialog=function(e){var i=this;return t.Deferred(function(t){var n=i.$dialog.find(".note-link-text"),o=i.$dialog.find(".note-link-url"),r=i.$dialog.find(".note-link-btn"),a=i.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown"),!e.url&&B.isValidUrl(e.text)&&(e.url=e.text),n.on("input paste propertychange",function(){e.text=n.val(),i.toggleLinkBtn(r,n,o)}).val(e.text),o.on("input paste propertychange",function(){e.text||n.val(o.val()),i.toggleLinkBtn(r,n,o)}).val(e.url),L.isSupportTouch||o.trigger("focus"),i.toggleLinkBtn(r,n,o),i.bindEnterKey(o,r),i.bindEnterKey(n,r),a.prop("checked",void 0!==e.isNewWindow?e.isNewWindow:i.context.options.linkTargetBlank),r.one("click",function(r){r.preventDefault(),t.resolve({range:e.range,url:o.val(),text:n.val(),isNewWindow:a.is(":checked")}),i.ui.hideDialog(i.$dialog)})}),i.ui.onDialogHidden(i.$dialog,function(){n.off(),o.off(),r.off(),"pending"===t.state()&&t.reject()}),i.ui.showDialog(i.$dialog)}).promise()},e.prototype.show=function(){var t=this,e=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(e).then(function(e){t.context.invoke("editor.restoreRange"),t.context.invoke("editor.createLink",e)}).fail(function(){t.context.invoke("editor.restoreRange")})},e}(),se=function(){function e(e){var i=this;this.context=e,this.ui=t.summernote.ui,this.options=e.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){i.update()},"summernote.disable summernote.dialog.shown":function(){i.hide()}}}return e.prototype.shouldInitialize=function(){return!W.isEmpty(this.options.popover.link)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(t){t.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var e=this.context.invoke("editor.getLastRange");if(e.isCollapsed()&&e.isOnAnchor()){var i=Dt.ancestor(e.sc,Dt.isAnchor),n=t(i).attr("href");this.$popover.find("a").attr("href",n).html(n);var o=Dt.posFromPlaceholder(i);this.$popover.css({display:"block",left:o.left,top:o.top})}else this.hide()}else this.hide()},e.prototype.hide=function(){this.$popover.hide()},e}(),le=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo}return e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e="";if(this.options.maximumImageFileSize){var i=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),n=1*(this.options.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+" "+" KMGTP"[i]+"B";e="<small>"+this.lang.image.maximumFileSize+" : "+n+"</small>"}var o=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input form-control-file note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',e,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join("");this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:o,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" value="'+this.lang.image.insert+'" disabled>'}).render().appendTo(t)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Ft.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},e.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(e){t.ui.hideDialog(t.$dialog),t.context.invoke("editor.restoreRange"),"string"==typeof e?t.options.callbacks.onImageLinkInsert?t.context.triggerEvent("image.link.insert",e):t.context.invoke("editor.insertImage",e):t.context.invoke("editor.insertImagesOrCallback",e)}).fail(function(){t.context.invoke("editor.restoreRange")})},e.prototype.showImageDialog=function(){var e=this;return t.Deferred(function(t){var i=e.$dialog.find(".note-image-input"),n=e.$dialog.find(".note-image-url"),o=e.$dialog.find(".note-image-btn");e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown"),i.replaceWith(i.clone().on("change",function(e){t.resolve(e.target.files||e.target.value)}).val("")),n.on("input paste propertychange",function(){e.ui.toggleBtn(o,n.val())}).val(""),L.isSupportTouch||n.trigger("focus"),o.click(function(e){e.preventDefault(),t.resolve(n.val())}),e.bindEnterKey(n,o)}),e.ui.onDialogHidden(e.$dialog,function(){i.off(),n.off(),o.off(),"pending"===t.state()&&t.reject()}),e.ui.showDialog(e.$dialog)})},e}(),de=function(){function e(e){var i=this;this.context=e,this.ui=t.summernote.ui,this.editable=e.layoutInfo.editable[0],this.options=e.options,this.events={"summernote.disable":function(){i.hide()}}}return e.prototype.shouldInitialize=function(){return!W.isEmpty(this.options.popover.image)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(t,e){if(Dt.isImg(t)){var i=Dt.posFromPlaceholder(t),n=Dt.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?e.pageX-20:i.left,top:this.options.popatmouse?e.pageY:Math.min(i.top,n.top)})}else this.hide()},e.prototype.hide=function(){this.$popover.hide()},e}(),ce=function(){function e(e){var i=this;this.context=e,this.ui=t.summernote.ui,this.options=e.options,this.events={"summernote.mousedown":function(t,e){i.update(e.target)},"summernote.keyup summernote.scroll summernote.change":function(){i.update()},"summernote.disable":function(){i.hide()}}}return e.prototype.shouldInitialize=function(){return!W.isEmpty(this.options.popover.table)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table),L.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(t){if(this.context.isDisabled())return!1;var e=Dt.isCell(t);if(e){var i=Dt.posFromPlaceholder(t);this.$popover.css({display:"block",left:i.left,top:i.top})}else this.hide();return e},e.prototype.hide=function(){this.$popover.hide()},e}(),ue=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo}return e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join("");this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:e,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="'+this.lang.video.insert+'" disabled>'}).render().appendTo(t)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Ft.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},e.prototype.createVideoNode=function(e){var i,n=e.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),o=e.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),r=e.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),a=e.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),s=e.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),l=e.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),d=e.match(/\/\/v\.qq\.com.*?vid=(.+)/),c=e.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),u=e.match(/^.+.(mp4|m4v)$/),h=e.match(/^.+.(ogg|ogv)$/),p=e.match(/^.+.(webm)$/),f=e.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/);if(n&&11===n[1].length){var m=n[1],g=0;if("undefined"!=typeof n[2]){var v=n[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(v)for(var y=[3600,60,1],b=0,_=y.length;b<_;b++)g+="undefined"!=typeof v[b+1]?y[b]*parseInt(v[b+1],10):0}i=t("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+m+(g>0?"?start="+g:"")).attr("width","640").attr("height","360")}else if(o&&o[0].length)i=t("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+o[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(r&&r[0].length)i=t("<iframe>").attr("frameborder",0).attr("src",r[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(a&&a[3].length)i=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+a[3]).attr("width","640").attr("height","360");else if(s&&s[2].length)i=t("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+s[2]).attr("width","640").attr("height","360");else if(l&&l[1].length)i=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+l[1]);else if(d&&d[1].length||c&&c[2].length){var w=d&&d[1].length?d[1]:c[2];i=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+w+"&amp;auto=0")}else if(u||h||p)i=t("<video controls>").attr("src",e).attr("width","640").attr("height","360");else{if(!f||!f[0].length)return!1;i=t("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(f[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true")}return i.addClass("note-video-clip"),i[0]},e.prototype.show=function(){var t=this,e=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(e).then(function(e){t.ui.hideDialog(t.$dialog),t.context.invoke("editor.restoreRange");var i=t.createVideoNode(e);i&&t.context.invoke("editor.insertNode",i)}).fail(function(){t.context.invoke("editor.restoreRange")})},e.prototype.showVideoDialog=function(e){var i=this;return t.Deferred(function(t){var e=i.$dialog.find(".note-video-url"),n=i.$dialog.find(".note-video-btn");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown"),e.on("input paste propertychange",function(){i.ui.toggleBtn(n,e.val())}),L.isSupportTouch||e.trigger("focus"),n.click(function(i){i.preventDefault(),t.resolve(e.val())}),i.bindEnterKey(e,n)}),i.ui.onDialogHidden(i.$dialog,function(){e.off(),n.off(),"pending"===t.state()&&t.reject()}),i.ui.showDialog(i.$dialog)})},e}(),he=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo}return e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.12</a> \xb7 ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> \xb7 ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:function(t){t.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.createShortcutList=function(){var e=this,i=this.options.keyMap[L.isMac?"mac":"pc"];return Object.keys(i).map(function(n){var o=i[n],r=t('<div><div class="help-list-item"/></div>');return r.append(t("<label><kbd>"+n+"</kdb></label>").css({width:180,"margin-right":10})).append(t("<span/>").html(e.context.memo("help."+o)||o)),r.html()}).join("")},e.prototype.showHelpDialog=function(){var e=this;return t.Deferred(function(t){e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown"),t.resolve()}),e.ui.showDialog(e.$dialog)}).promise()},e.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){t.context.invoke("editor.restoreRange")})},e}(),pe=function(){function e(e){var i=this;this.context=e,this.ui=t.summernote.ui,this.options=e.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){i.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){i.hide()},"summernote.focusout":function(t,e){L.isFF||e.relatedTarget&&Dt.ancestor(e.relatedTarget,B.eq(i.$popover[0]))||i.hide()}}}return e.prototype.shouldInitialize=function(){return this.options.airMode&&!W.isEmpty(this.options.popover.air)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content");this.context.invoke("buttons.build",t,this.options.popover.air)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(){var t=this.context.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var e=W.last(t.range.getClientRects());if(e){var i=B.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(i.left+i.width/2,0)-20,top:i.top+i.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},e.prototype.hide=function(){this.$popover.hide()},e}(),fe=function(){function e(e){var i=this;this.context=e,this.ui=t.summernote.ui,this.$editable=e.layoutInfo.editable,this.options=e.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=Array.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||i.handleKeyup(e)},"summernote.keydown":function(t,e){i.handleKeydown(e)},"summernote.disable summernote.dialog.shown":function(){i.hide()}}}return e.prototype.shouldInitialize=function(){return this.hints.length>0},e.prototype.initialize=function(){var e=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(i){e.$content.find(".active").removeClass("active"),t(i.currentTarget).addClass("active"),e.replace()})},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},e.prototype.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var i=t.parent().next();i.length||(i=this.$content.find(".note-hint-group").first()),this.selectItem(i.find(".note-hint-item").first())}},e.prototype.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var i=t.parent().prev();i.length||(i=this.$content.find(".note-hint-group").last()),this.selectItem(i.find(".note-hint-item").last())}},e.prototype.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);this.lastWordRange.insertNode(e),Nt.createFromNode(e).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},e.prototype.nodeFromItem=function(t){var e=this.hints[t.data("index")],i=t.data("item"),n=e.content?e.content(i):i;return"string"==typeof n&&(n=Dt.createText(n)),n},e.prototype.createItemTemplates=function(e,i){var n=this.hints[e];return i.map(function(i,o){var r=t('<div class="note-hint-item"/>');return r.append(n.template?n.template(i):i+""),r.data({index:e,item:i}),r})},e.prototype.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===Ft.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===Ft.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===Ft.code.DOWN&&(t.preventDefault(),this.moveDown()))},e.prototype.searchKeyword=function(t,e,i){var n=this.hints[t];if(n&&n.match.test(e)&&n.search){var o=n.match.exec(e);n.search(o[1],i)}else i()},e.prototype.createGroup=function(e,i){var n=this,o=t('<div class="note-hint-group note-hint-group-'+e+'"/>');return this.searchKeyword(e,i,function(t){(t=t||[]).length&&(o.html(n.createItemTemplates(e,t)),n.show())}),o},e.prototype.handleKeyup=function(t){var e=this;if(!W.contains([Ft.code.ENTER,Ft.code.UP,Ft.code.DOWN],t.keyCode)){var i=this.context.invoke("editor.getLastRange").getWordRange(),n=i.toString();if(this.hints.length&&n){this.$content.empty();var o=B.rect2bnd(W.last(i.getClientRects()));o&&(this.$popover.hide(),this.lastWordRange=i,this.hints.forEach(function(t,i){t.match.test(n)&&e.createGroup(i,n).appendTo(e.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),this.$popover.css("top"===this.direction?{left:o.left,top:o.top-this.$popover.outerHeight()-5}:{left:o.left,top:o.top+o.height+5}))}else this.hide()}},e.prototype.show=function(){this.$popover.show()},e.prototype.hide=function(){this.$popover.hide()},e}();t.summernote=t.extend(t.summernote,{version:"0.8.12",plugins:{},dom:Dt,range:Nt,options:{langInfo:t.summernote.lang["en-US"],modules:{editor:Gt,clipboard:$t,dropzone:Kt,codeview:Yt,statusbar:Xt,fullscreen:Qt,handle:Zt,hintPopover:fe,autoLink:te,autoSync:ee,autoReplace:ie,placeholder:ne,buttons:oe,toolbar:re,linkDialog:ae,linkPopover:se,imageDialog:le,imagePopover:de,tablePopover:ce,videoDialog:ue,helpDialog:he,airPopover:pe},buttons:{},lang:"en-US",followingToolbar:!1,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!1,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:["www.youtube.com","www.youtube-nocookie.com","www.facebook.com","vine.co","instagram.com","player.vimeo.com","www.dailymotion.com","player.youku.com","v.qq.com"],keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",floatLeft:"note-icon-float-left",floatRight:"note-icon-float-right",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",rollback:"note-icon-rollback",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}}),t.summernote=t.extend(t.summernote,{ui:T})}),function(t,e,i){!function(e){var n="function"==typeof define&&define.amd,o="https:"==i.location.protocol?"https:":"http:";n||t.event.special.mousewheel||t("head").append(decodeURI("%3Cscript src="+o+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.11/jquery.mousewheel.min.js%3E%3C/script%3E")),e()}(function(){var n="mCustomScrollbar",o="mCS",r=".mCustomScrollbar",a={setWidth:!1,setHeight:!1,setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,autoHideScrollbar:!1,autoExpandScrollbar:!1,alwaysShowScrollbar:0,snapAmount:null,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1,disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{enable:!1,scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoExpandHorizontalScroll:!1,autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0,updateOnSelectorChange:!1,releaseDraggableSelectors:!1},theme:"light",callbacks:{onInit:!1,onScrollStart:!1,onScroll:!1,onTotalScroll:!1,onTotalScrollBack:!1,whileScrolling:!1,onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0,onOverflowY:!1,onOverflowX:!1,onOverflowYNone:!1,onOverflowXNone:!1},live:!1,liveSelector:null},s=0,l={},d=function(t){l[t]&&(clearTimeout(l[t]),p._delete.call(null,l[t]))},c=e.attachEvent&&!e.addEventListener?1:0,u=!1,h={init:function(e){e=t.extend(!0,{},a,e);var i=p._selector.call(this);if(e.live){var n=e.liveSelector||this.selector||r,c=t(n);if("off"===e.live)return void d(n);l[n]=setTimeout(function(){c.mCustomScrollbar(e),"once"===e.live&&c.length&&d(n)},500)}else d(n);return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":p._findAxis.call(null,e.axis),e.scrollInertia=e.scrollInertia>0&&e.scrollInertia<17?17:e.scrollInertia,"object"!=typeof e.mouseWheel&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType=p._findScrollButtonsType.call(null,e.scrollButtons.scrollType),p._theme.call(null,e),t(i).each(function(){var i=t(this);if(!i.data(o)){i.data(o,{idx:++s,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:i.css("direction"),cbOffsets:null,trigger:null});var n=i.data(o).opt,r=i.data("mcs-axis"),a=i.data("mcs-scrollbar-position"),l=i.data("mcs-theme");r&&(n.axis=r),a&&(n.scrollbarPosition=a),l&&(n.theme=l,p._theme.call(null,n)),p._pluginMarkup.call(this),h.update.call(null,i)}})},update:function(e){var i=e||p._selector.call(this);return t(i).each(function(){var e=t(this);if(e.data(o)){var i=e.data(o),n=i.opt,r=t("#mCSB_"+i.idx+"_container"),a=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];if(!r.length)return;i.tweenRunning&&p._stop.call(null,e),e.hasClass("mCS_disabled")&&e.removeClass("mCS_disabled"),e.hasClass("mCS_destroyed")&&e.removeClass("mCS_destroyed"),p._maxHeight.call(this),p._expandContentHorizontally.call(this),"y"===n.axis||n.advanced.autoExpandHorizontalScroll||r.css("width",p._contentWidth(r.children())),i.overflowed=p._overflowed.call(this),p._scrollbarVisibility.call(this),n.autoDraggerLength&&p._setDraggerLength.call(this),p._scrollRatio.call(this),p._bindEvents.call(this);var s=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];"x"!==n.axis&&(i.overflowed[0]?a[0].height()>a[0].parent().height()?p._resetContentPosition.call(this):(p._scrollTo.call(this,e,s[0].toString(),{dir:"y",dur:0,overwrite:"none"}),i.contentReset.y=null):(p._resetContentPosition.call(this),"y"===n.axis?p._unbindEvents.call(this):"yx"===n.axis&&i.overflowed[1]&&p._scrollTo.call(this,e,s[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==n.axis&&(i.overflowed[1]?a[1].width()>a[1].parent().width()?p._resetContentPosition.call(this):(p._scrollTo.call(this,e,s[1].toString(),{dir:"x",dur:0,overwrite:"none"}),i.contentReset.x=null):(p._resetContentPosition.call(this),"x"===n.axis?p._unbindEvents.call(this):"yx"===n.axis&&i.overflowed[0]&&p._scrollTo.call(this,e,s[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),p._autoUpdate.call(this)}})},scrollTo:function(e,i){if("undefined"!=typeof e&&null!=e){var n=p._selector.call(this);return t(n).each(function(){var n=t(this);if(n.data(o)){var r=n.data(o),a=r.opt,s=t.extend(!0,{},{trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i),l=p._arr.call(this,e),d=s.scrollInertia>0&&s.scrollInertia<17?17:s.scrollInertia;l[0]=p._to.call(this,l[0],"y"),l[1]=p._to.call(this,l[1],"x"),s.moveDragger&&(l[0]*=r.scrollRatio.y,l[1]*=r.scrollRatio.x),s.dur=d,setTimeout(function(){null!==l[0]&&"undefined"!=typeof l[0]&&"x"!==a.axis&&r.overflowed[0]&&(s.dir="y",s.overwrite="all",p._scrollTo.call(this,n,l[0].toString(),s)),null!==l[1]&&"undefined"!=typeof l[1]&&"y"!==a.axis&&r.overflowed[1]&&(s.dir="x",s.overwrite="none",p._scrollTo.call(this,n,l[1].toString(),s))},s.timeout)}})}},stop:function(){var e=p._selector.call(this);return t(e).each(function(){var e=t(this);e.data(o)&&p._stop.call(null,e)})},disable:function(e){var i=p._selector.call(this);return t(i).each(function(){var i=t(this);i.data(o)&&(i.data(o),p._autoUpdate.call(this,"remove"),p._unbindEvents.call(this),e&&p._resetContentPosition.call(this),p._scrollbarVisibility.call(this,!0),i.addClass("mCS_disabled"))})},destroy:function(){var e=p._selector.call(this);return t(e).each(function(){var i=t(this);if(i.data(o)){var r=i.data(o),a=r.opt,s=t("#mCSB_"+r.idx),l=t("#mCSB_"+r.idx+"_container"),c=t(".mCSB_"+r.idx+"_scrollbar");a.live&&d(e),p._autoUpdate.call(this,"remove"),p._unbindEvents.call(this),p._resetContentPosition.call(this),i.removeData(o),p._delete.call(null,this.mcs),c.remove(),s.replaceWith(l.contents()),i.removeClass(n+" _"+o+"_"+r.idx+" mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")}})}},p={_selector:function(){return"object"!=typeof t(this)||t(this).length<1?r:this},_theme:function(e){e.autoDraggerLength=!(t.inArray(e.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])>-1)&&e.autoDraggerLength,e.autoExpandScrollbar=!(t.inArray(e.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"])>-1)&&e.autoExpandScrollbar,e.scrollButtons.enable=!(t.inArray(e.theme,["minimal","minimal-dark"])>-1)&&e.scrollButtons.enable,e.autoHideScrollbar=t.inArray(e.theme,["minimal","minimal-dark"])>-1||e.autoHideScrollbar,e.scrollbarPosition=t.inArray(e.theme,["minimal","minimal-dark"])>-1?"outside":e.scrollbarPosition},_findAxis:function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},_findScrollButtonsType:function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},_pluginMarkup:function(){var e=t(this),i=e.data(o),r=i.opt,a=r.autoExpandScrollbar?" mCSB_scrollTools_onDrag_expand":"",s=["<div id='mCSB_"+i.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_vertical"+a+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+i.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+i.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+i.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===r.axis?"mCSB_vertical_horizontal":"x"===r.axis?"mCSB_horizontal":"mCSB_vertical",d="yx"===r.axis?s[0]+s[1]:"x"===r.axis?s[1]:s[0],c="yx"===r.axis?"<div id='mCSB_"+i.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",u=r.autoHideScrollbar?" mCS-autoHide":"",h="x"!==r.axis&&"rtl"===i.langDir?" mCS-dir-rtl":"";r.setWidth&&e.css("width",r.setWidth),r.setHeight&&e.css("height",r.setHeight),r.setLeft="y"!==r.axis&&"rtl"===i.langDir?"989999px":r.setLeft,e.addClass(n+" _"+o+"_"+i.idx+u+h).wrapInner("<div id='mCSB_"+i.idx+"' class='mCustomScrollBox mCS-"+r.theme+" "+l+"'><div id='mCSB_"+i.idx+"_container' class='mCSB_container' style='position:relative; top:"+r.setTop+"; left:"+r.setLeft+";' dir="+i.langDir+" /></div>");var f=t("#mCSB_"+i.idx),m=t("#mCSB_"+i.idx+"_container");"y"===r.axis||r.advanced.autoExpandHorizontalScroll||m.css("width",p._contentWidth(m.children())),"outside"===r.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),f.addClass("mCSB_outside").after(d)):(f.addClass("mCSB_inside").append(d),m.wrap(c)),p._scrollButtons.call(this);var g=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},_contentWidth:function(e){return Math.max.apply(Math,e.map(function(){return t(this).outerWidth(!0)}).get())},_expandContentHorizontally:function(){var e=t(this).data(o),i=e.opt,n=t("#mCSB_"+e.idx+"_container");i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis&&n.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+.4)-Math.floor(n[0].getBoundingClientRect().left),position:"relative"}).unwrap()},_scrollButtons:function(){var e=t(this).data(o),i=e.opt,n=t(".mCSB_"+e.idx+"_scrollbar:first"),r=["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"],a=["x"===i.axis?r[2]:r[0],"x"===i.axis?r[3]:r[1],r[2],r[3]];i.scrollButtons.enable&&n.prepend(a[0]).append(a[1]).next(".mCSB_scrollTools").prepend(a[2]).append(a[3])},_maxHeight:function(){var e=t(this),i=e.data(o),n=t("#mCSB_"+i.idx),r=e.css("max-height"),a=-1!==r.indexOf("%"),s=e.css("box-sizing");if("none"!==r){var l=a?e.parent().height()*parseInt(r)/100:parseInt(r);"border-box"===s&&(l-=e.innerHeight()-e.height()+(e.outerHeight()-e.innerHeight())),n.css("max-height",Math.round(l))}},_setDraggerLength:function(){var e=t(this).data(o),i=t("#mCSB_"+e.idx),n=t("#mCSB_"+e.idx+"_container"),r=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],a=[i.height()/n.outerHeight(!1),i.width()/n.outerWidth(!1)],s=[parseInt(r[0].css("min-height")),Math.round(a[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(a[1]*r[1].parent().width())],l=c&&s[3]<s[2]?s[2]:s[3];r[0].css({height:c&&s[1]<s[0]?s[0]:s[1],"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":s[0]+"px"}),r[1].css({width:l,"max-width":r[1].parent().width()-10})},_scrollRatio:function(){var e=t(this).data(o),i=t("#mCSB_"+e.idx),n=t("#mCSB_"+e.idx+"_container"),r=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],a=[n.outerHeight(!1)-i.height(),n.outerWidth(!1)-i.width()],s=[a[0]/(r[0].parent().height()-r[0].height()),a[1]/(r[1].parent().width()-r[1].width())];e.scrollRatio={y:s[0],x:s[1]}},_onDragClasses:function(t,e,i){var n=i?"mCSB_dragger_onDrag_expanded":"",o=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag"],r=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(o[0]+" "+n),r.toggleClass(o[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(o[0]),r.removeClass(o[1])):(t.addClass(o[0]),r.addClass(o[1])))},_overflowed:function(){var e=t(this).data(o),i=t("#mCSB_"+e.idx),n=t("#mCSB_"+e.idx+"_container"),r=null==e.overflowed?n.height():n.outerHeight(!1),a=null==e.overflowed?n.width():n.outerWidth(!1);return[r>i.height(),a>i.width()]},_resetContentPosition:function(){var e=t(this),i=e.data(o),n=i.opt,r=t("#mCSB_"+i.idx),a=t("#mCSB_"+i.idx+"_container"),s=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];if(p._stop(e),("x"!==n.axis&&!i.overflowed[0]||"y"===n.axis&&i.overflowed[0])&&(s[0].add(a).css("top",0),p._scrollTo(e,"_resetY")),"y"!==n.axis&&!i.overflowed[1]||"x"===n.axis&&i.overflowed[1]){var l=dx=0;"rtl"===i.langDir&&(l=r.width()-a.outerWidth(!1),dx=Math.abs(l/i.scrollRatio.x)),a.css("left",l),s[1].css("left",dx),p._scrollTo(e,"_resetX")}},_bindEvents:function(){var e,i=t(this),n=i.data(o),r=n.opt;n.bindEvents||(p._draggable.call(this),r.contentTouchScroll&&p._contentDraggable.call(this),r.mouseWheel.enable&&function n(){e=setTimeout(function(){t.event.special.mousewheel?(clearTimeout(e),p._mousewheel.call(i[0])):n()},1e3)}(),p._draggerRail.call(this),p._wrapperScroll.call(this),r.advanced.autoScrollOnFocus&&p._focus.call(this),r.scrollButtons.enable&&p._buttons.call(this),r.keyboard.enable&&p._keyboard.call(this),n.bindEvents=!0)},_unbindEvents:function(){var e=t(this),n=e.data(o),r=n.opt,a=o+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=t("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+s+" .mCSB_draggerContainer,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+s+">a"),d=t("#mCSB_"+n.idx+"_container");r.advanced.releaseDraggableSelectors&&l.add(t(r.advanced.releaseDraggableSelectors)),n.bindEvents&&(t(i).unbind("."+a),l.each(function(){t(this).unbind("."+a)}),clearTimeout(e[0]._focusTimeout),p._delete.call(null,e[0]._focusTimeout),clearTimeout(n.sequential.step),p._delete.call(null,n.sequential.step),clearTimeout(d[0].onCompleteTimeout),p._delete.call(null,d[0].onCompleteTimeout),n.bindEvents=!1)},_scrollbarVisibility:function(e){var i=t(this),n=i.data(o),r=n.opt,a=t("#mCSB_"+n.idx+"_container_wrapper"),s=a.length?a:t("#mCSB_"+n.idx+"_container"),l=[t("#mCSB_"+n.idx+"_scrollbar_vertical"),t("#mCSB_"+n.idx+"_scrollbar_horizontal")],d=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==r.axis&&(n.overflowed[0]&&!e?(l[0].add(d[0]).add(l[0].children("a")).css("display","block"),s.removeClass("mCS_no_scrollbar_y mCS_y_hidden")):(r.alwaysShowScrollbar?(2!==r.alwaysShowScrollbar&&d[0].add(l[0].children("a")).css("display","none"),s.removeClass("mCS_y_hidden")):(l[0].css("display","none"),s.addClass("mCS_y_hidden")),s.addClass("mCS_no_scrollbar_y"))),"y"!==r.axis&&(n.overflowed[1]&&!e?(l[1].add(d[1]).add(l[1].children("a")).css("display","block"),s.removeClass("mCS_no_scrollbar_x mCS_x_hidden")):(r.alwaysShowScrollbar?(2!==r.alwaysShowScrollbar&&d[1].add(l[1].children("a")).css("display","none"),s.removeClass("mCS_x_hidden")):(l[1].css("display","none"),s.addClass("mCS_x_hidden")),s.addClass("mCS_no_scrollbar_x"))),n.overflowed[0]||n.overflowed[1]?i.removeClass("mCS_no_scrollbar"):i.addClass("mCS_no_scrollbar")},_coordinates:function(t){switch(t.type){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];return[e.pageY,e.pageX,(t.originalEvent.touches.length||t.originalEvent.changedTouches.length)>1];default:return[t.pageY,t.pageX,!1]}},_draggable:function(){function e(t){var e=g.find("iframe");e.length&&e.css("pointer-events",t?"auto":"none")}function n(t,e,i,n){if(g[0].idleTimer=h.scrollInertia<233?250:0,r.attr("id")===m[1])var o="x",a=(r[0].offsetLeft-e+n)*d.scrollRatio.x;else o="y",a=(r[0].offsetTop-t+i)*d.scrollRatio.y;p._scrollTo(l,a.toString(),{dir:o,drag:!0})}var r,a,s,l=t(this),d=l.data(o),h=d.opt,f=o+"_"+d.idx,m=["mCSB_"+d.idx+"_dragger_vertical","mCSB_"+d.idx+"_dragger_horizontal"],g=t("#mCSB_"+d.idx+"_container"),v=t("#"+m[0]+",#"+m[1]),y=h.advanced.releaseDraggableSelectors?v.add(t(h.advanced.releaseDraggableSelectors)):v;v.bind("mousedown."+f+" touchstart."+f+" pointerdown."+f+" MSPointerDown."+f,function(o){if(o.stopImmediatePropagation(),o.preventDefault(),p._mouseBtnLeft(o)){u=!0,c&&(i.onselectstart=function(){return!1}),e(!1),p._stop(l);var d=(r=t(this)).offset(),m=p._coordinates(o)[0]-d.top,g=p._coordinates(o)[1]-d.left,v=r.height()+d.top,b=r.width()+d.left;v>m&&m>0&&b>g&&g>0&&(a=m,s=g),p._onDragClasses(r,"active",h.autoExpandScrollbar),t(i).bind("mousemove."+f+" pointermove."+f+" MSPointerMove."+f,function(t){if(r){var e=r.offset(),i=p._coordinates(t)[0]-e.top,o=p._coordinates(t)[1]-e.left;if(a===i)return;n(a,s,i,o)}}).add(y).bind("mouseup."+f+" touchend."+f+" pointerup."+f+" MSPointerUp."+f,function(){r&&(p._onDragClasses(r,"active",h.autoExpandScrollbar),r=null),u=!1,c&&(i.onselectstart=null),e(!0)})}}).bind("touchmove."+f,function(t){t.stopImmediatePropagation(),t.preventDefault();var e=r.offset(),i=p._coordinates(t)[0]-e.top,o=p._coordinates(t)[1]-e.left;n(a,s,i,o)}).bind("mousemove."+f,function(t){if(r){var e=r.offset(),i=p._coordinates(t)[0]-e.top,o=p._coordinates(t)[1]-e.left;if(a===i)return;n(a,s,i,o)}}),t(i).bind("mousemove."+f+" pointermove."+f+" MSPointerMove."+f,function(t){if(r){var e=r.offset(),i=p._coordinates(t)[0]-e.top,o=p._coordinates(t)[1]-e.left;if(a===i)return;n(a,s,i,o)}}).add(y).bind("mouseup."+f+" touchend."+f+" pointerup."+f+" MSPointerUp."+f,function(){r&&(p._onDragClasses(r,"active",h.autoExpandScrollbar),r=null),u=!1,c&&(i.onselectstart=null),e(!0)})},_contentDraggable:function(){function e(t,e){var i=[1.5*e,2*e,e/1.5,e/2];return t>90?e>4?i[0]:i[3]:t>60?e>3?i[3]:i[2]:t>30?e>8?i[1]:e>6?i[0]:e>4?e:i[2]:e>8?e:i[3]}function i(t,e,i,n,o,r){t&&p._scrollTo(v,t.toString(),{dur:e,scrollEasing:i,dir:n,overwrite:o,drag:r})}var n,r,a,s,l,d,c,h,f,m,g,v=t(this),y=v.data(o),b=y.opt,_=o+"_"+y.idx,w=t("#mCSB_"+y.idx),x=t("#mCSB_"+y.idx+"_container"),T=[t("#mCSB_"+y.idx+"_dragger_vertical"),t("#mCSB_"+y.idx+"_dragger_horizontal")],C=[],k=[],E="yx"===b.axis?"none":"all",S=[];x.bind("touchstart."+_+" pointerdown."+_+" MSPointerDown."+_,function(t){if(p._pointerTouch(t)&&!u&&!p._coordinates(t)[2]){var e=x.offset();n=p._coordinates(t)[0]-e.top,r=p._coordinates(t)[1]-e.left,S=[p._coordinates(t)[0],p._coordinates(t)[1]]}}).bind("touchmove."+_+" pointermove."+_+" MSPointerMove."+_,function(t){if(p._pointerTouch(t)&&!u&&!p._coordinates(t)[2]){t.stopImmediatePropagation(),d=p._getTime();var e=w.offset(),o=p._coordinates(t)[0]-e.top,a=p._coordinates(t)[1]-e.left,s="mcsLinearOut";if(C.push(o),k.push(a),S[2]=Math.abs(p._coordinates(t)[0]-S[0]),S[3]=Math.abs(p._coordinates(t)[1]-S[1]),y.overflowed[0])var l=T[0].parent().height()-T[0].height(),c=n-o>0&&o-n>-l*y.scrollRatio.y&&(2*S[3]<S[2]||"yx"===b.axis);if(y.overflowed[1])var h=T[1].parent().width()-T[1].width(),f=r-a>0&&a-r>-h*y.scrollRatio.x&&(2*S[2]<S[3]||"yx"===b.axis);(c||f)&&t.preventDefault(),m="yx"===b.axis?[n-o,r-a]:"x"===b.axis?[null,r-a]:[n-o,null],x[0].idleTimer=250,y.overflowed[0]&&i(m[0],0,s,"y","all",!0),y.overflowed[1]&&i(m[1],0,s,"x",E,!0)}}),w.bind("touchstart."+_+" pointerdown."+_+" MSPointerDown."+_,function(t){if(p._pointerTouch(t)&&!u&&!p._coordinates(t)[2]){t.stopImmediatePropagation(),p._stop(v),l=p._getTime();var e=w.offset();a=p._coordinates(t)[0]-e.top,s=p._coordinates(t)[1]-e.left,C=[],k=[]}}).bind("touchend."+_+" pointerup."+_+" MSPointerUp."+_,function(t){if(p._pointerTouch(t)&&!u&&!p._coordinates(t)[2]){t.stopImmediatePropagation(),c=p._getTime();var n=w.offset(),o=p._coordinates(t)[0]-n.top,r=p._coordinates(t)[1]-n.left;if(!(c-d>30)){var v="mcsEaseOut",_=2.5>(f=1e3/(c-l)),T=_?[C[C.length-2],k[k.length-2]]:[0,0];h=_?[o-T[0],r-T[1]]:[o-a,r-s];var S=[Math.abs(h[0]),Math.abs(h[1])];f=_?[Math.abs(h[0]/4),Math.abs(h[1]/4)]:[f,f];var A=[Math.abs(x[0].offsetTop)-h[0]*e(S[0]/f[0],f[0]),Math.abs(x[0].offsetLeft)-h[1]*e(S[1]/f[1],f[1])];m="yx"===b.axis?[A[0],A[1]]:"x"===b.axis?[null,A[1]]:[A[0],null],g=[4*S[0]+b.scrollInertia,4*S[1]+b.scrollInertia];var O=parseInt(b.contentTouchScroll)||0;m[0]=S[0]>O?m[0]:0,m[1]=S[1]>O?m[1]:0,y.overflowed[0]&&i(m[0],g[0],v,"y",E,!1),y.overflowed[1]&&i(m[1],g[1],v,"x",E,!1)}}})},_mousewheel:function(){var e=t(this),i=e.data(o);if(i){var n=i.opt,r=o+"_"+i.idx,a=t("#mCSB_"+i.idx),s=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")],l=t("#mCSB_"+i.idx+"_container").find("iframe"),d=a;l.length&&l.each(function(){(function(t){var e=null;try{e=(t.contentDocument||t.contentWindow.document).body.innerHTML}catch(t){}return null!==e})(this)&&(d=d.add(t(this).contents().find("body")))}),d.bind("mousewheel."+r,function(o,r){if(p._stop(e),!p._disableMousewheel(e,o.target)){var l="auto"!==n.mouseWheel.deltaFactor?parseInt(n.mouseWheel.deltaFactor):c&&o.deltaFactor<100?100:o.deltaFactor||100;if("x"===n.axis||"x"===n.mouseWheel.axis)var d="x",u=[Math.round(l*i.scrollRatio.x),parseInt(n.mouseWheel.scrollAmount)],h="auto"!==n.mouseWheel.scrollAmount?u[1]:u[0]>=a.width()?.9*a.width():u[0],f=Math.abs(t("#mCSB_"+i.idx+"_container")[0].offsetLeft),m=s[1][0].offsetLeft,g=s[1].parent().width()-s[1].width(),v=o.deltaX||o.deltaY||r;else d="y",u=[Math.round(l*i.scrollRatio.y),parseInt(n.mouseWheel.scrollAmount)],h="auto"!==n.mouseWheel.scrollAmount?u[1]:u[0]>=a.height()?.9*a.height():u[0],f=Math.abs(t("#mCSB_"+i.idx+"_container")[0].offsetTop),m=s[0][0].offsetTop,g=s[0].parent().height()-s[0].height(),v=o.deltaY||r;"y"===d&&!i.overflowed[0]||"x"===d&&!i.overflowed[1]||(n.mouseWheel.invert&&(v=-v),n.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==m||0>v&&m!==g||n.mouseWheel.preventDefault)&&(o.stopImmediatePropagation(),o.preventDefault()),p._scrollTo(e,(f-v*h).toString(),{dir:d}))}})}},_disableMousewheel:function(e,i){var n=i.nodeName.toLowerCase(),r=e.data(o).opt.mouseWheel.disableOver;return t.inArray(n,r)>-1&&!(t.inArray(n,["select","textarea"])>-1&&!t(i).is(":focus"))},_draggerRail:function(){var e=t(this),i=e.data(o),n=o+"_"+i.idx,r=t("#mCSB_"+i.idx+"_container"),a=r.parent();t(".mCSB_"+i.idx+"_scrollbar .mCSB_draggerContainer").bind("touchstart."+n+" pointerdown."+n+" MSPointerDown."+n,function(){u=!0}).bind("touchend."+n+" pointerup."+n+" MSPointerUp."+n,function(){u=!1}).bind("click."+n,function(n){if(t(n.target).hasClass("mCSB_draggerContainer")||t(n.target).hasClass("mCSB_draggerRail")){p._stop(e);var o=t(this),s=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!i.overflowed[1])return;var l="x",d=n.pageX>s.offset().left?-1:1,c=Math.abs(r[0].offsetLeft)-d*(.9*a.width())}else{if(!i.overflowed[0])return;l="y",d=n.pageY>s.offset().top?-1:1,c=Math.abs(r[0].offsetTop)-d*(.9*a.height())}p._scrollTo(e,c.toString(),{dir:l,scrollEasing:"mcsEaseInOut"})}})},_focus:function(){var e=t(this),n=e.data(o),r=n.opt,a=o+"_"+n.idx,s=t("#mCSB_"+n.idx+"_container"),l=s.parent();s.bind("focusin."+a,function(){var n=t(i.activeElement),o=s.find(".mCustomScrollBox").length;n.is(r.advanced.autoScrollOnFocus)&&(p._stop(e),clearTimeout(e[0]._focusTimeout),e[0]._focusTimer=o?17*o:0,e[0]._focusTimeout=setTimeout(function(){var t=[n.offset().top-s.offset().top,n.offset().left-s.offset().left],i=[s[0].offsetTop,s[0].offsetLeft],o=[i[0]+t[0]>=0&&i[0]+t[0]<l.height()-n.outerHeight(!1),i[1]+t[1]>=0&&i[0]+t[1]<l.width()-n.outerWidth(!1)],a="yx"!==r.axis||o[0]||o[1]?"all":"none";"x"===r.axis||o[0]||p._scrollTo(e,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:a,dur:0}),"y"===r.axis||o[1]||p._scrollTo(e,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:a,dur:0})},e[0]._focusTimer))})},_wrapperScroll:function(){var e=t(this).data(o),i=o+"_"+e.idx,n=t("#mCSB_"+e.idx+"_container").parent();n.bind("scroll."+i,function(){0===n.scrollTop()&&0===n.scrollLeft()||t(".mCSB_"+e.idx+"_scrollbar").css("visibility","hidden")})},_buttons:function(){var e=t(this),i=e.data(o),n=i.opt,r=i.sequential,a=o+"_"+i.idx,s=(t("#mCSB_"+i.idx+"_container"),".mCSB_"+i.idx+"_scrollbar");t(s+">a").bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(o){function a(t,i){r.scrollAmount=n.snapAmount||n.scrollButtons.scrollAmount,p._sequentialScroll.call(this,e,t,i)}if(o.preventDefault(),p._mouseBtnLeft(o)){var s=t(this).attr("class");switch(r.type=n.scrollButtons.scrollType,o.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===r.type)return;u=!0,i.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===r.type)return;u=!1,r.dir&&a("off",s);break;case"click":if("stepped"!==r.type||i.tweenRunning)return;a("on",s)}}})},_keyboard:function(){var e=t(this),n=e.data(o),r=n.opt,a=n.sequential,s=o+"_"+n.idx,l=t("#mCSB_"+n.idx),d=t("#mCSB_"+n.idx+"_container"),c=d.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']";l.attr("tabindex","0").bind("blur."+s+" keydown."+s+" keyup."+s,function(o){function s(t,i){a.type=r.keyboard.scrollType,a.scrollAmount=r.snapAmount||r.keyboard.scrollAmount,"stepped"===a.type&&n.tweenRunning||p._sequentialScroll.call(this,e,t,i)}switch(o.type){case"blur":n.tweenRunning&&a.dir&&s("off",null);break;case"keydown":case"keyup":var l=o.keyCode?o.keyCode:o.which,h="on";if("x"!==r.axis&&(38===l||40===l)||"y"!==r.axis&&(37===l||39===l)){if((38===l||40===l)&&!n.overflowed[0]||(37===l||39===l)&&!n.overflowed[1])return;"keyup"===o.type&&(h="off"),t(i.activeElement).is(u)||(o.preventDefault(),o.stopImmediatePropagation(),s(h,l))}else if(33===l||34===l){if((n.overflowed[0]||n.overflowed[1])&&(o.preventDefault(),o.stopImmediatePropagation()),"keyup"===o.type){p._stop(e);var f=34===l?-1:1;if("x"===r.axis||"yx"===r.axis&&n.overflowed[1]&&!n.overflowed[0])var m="x",g=Math.abs(d[0].offsetLeft)-f*(.9*c.width());else m="y",g=Math.abs(d[0].offsetTop)-f*(.9*c.height());p._scrollTo(e,g.toString(),{dir:m,scrollEasing:"mcsEaseInOut"})}}else 35!==l&&36!==l||t(i.activeElement).is(u)||((n.overflowed[0]||n.overflowed[1])&&(o.preventDefault(),o.stopImmediatePropagation()),"keyup"!==o.type)||("x"===r.axis||"yx"===r.axis&&n.overflowed[1]&&!n.overflowed[0]?(m="x",g=35===l?Math.abs(c.width()-d.outerWidth(!1)):0):(m="y",g=35===l?Math.abs(c.height()-d.outerHeight(!1)):0),p._scrollTo(e,g.toString(),{dir:m,scrollEasing:"mcsEaseInOut"}))}})},_sequentialScroll:function(e,i,n){function r(t){var i="stepped"!==l.type,n=t?i?s.scrollInertia/1.5:s.scrollInertia:1e3/60,o=t?i?7.5:40:2.5,c=[Math.abs(d[0].offsetTop),Math.abs(d[0].offsetLeft)],u=[a.scrollRatio.y>10?10:a.scrollRatio.y,a.scrollRatio.x>10?10:a.scrollRatio.x],h="x"===l.dir[0]?c[1]+l.dir[1]*(u[1]*o):c[0]+l.dir[1]*(u[0]*o),f="x"===l.dir[0]?c[1]+l.dir[1]*parseInt(l.scrollAmount):c[0]+l.dir[1]*parseInt(l.scrollAmount),m="auto"!==l.scrollAmount?f:h,g=t?i?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",v=!!t;return t&&17>n&&(m="x"===l.dir[0]?c[1]:c[0]),p._scrollTo(e,m.toString(),{dir:l.dir[0],scrollEasing:g,dur:n,onComplete:v}),t?void(l.dir=!1):(clearTimeout(l.step),void(l.step=setTimeout(function(){r()},n)))}var a=e.data(o),s=a.opt,l=a.sequential,d=t("#mCSB_"+a.idx+"_container"),c="stepped"===l.type;switch(i){case"on":if(l.dir=["mCSB_buttonRight"===n||"mCSB_buttonLeft"===n||39===n||37===n?"x":"y","mCSB_buttonUp"===n||"mCSB_buttonLeft"===n||38===n||37===n?-1:1],p._stop(e),p._isNumeric(n)&&"stepped"===l.type)return;r(c);break;case"off":clearTimeout(l.step),p._stop(e),(c||a.tweenRunning&&l.dir)&&r(!0)}},_arr:function(e){var i=t(this).data(o).opt,n=[];return"function"==typeof e&&(e=e()),e instanceof Array?n=e.length>1?[e[0],e[1]]:"x"===i.axis?[null,e[0]]:[e[0],null]:(n[0]=e.y?e.y:e.x||"x"===i.axis?null:e,n[1]=e.x?e.x:e.y||"y"===i.axis?null:e),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},_to:function(e,i){if(null!=e&&"undefined"!=typeof e){var n=t(this),r=n.data(o),a=r.opt,s=t("#mCSB_"+r.idx+"_container"),l=s.parent(),d=typeof e;i||(i="x"===a.axis?"x":"y");var c="x"===i?s.outerWidth(!1):s.outerHeight(!1),u="x"===i?s.offset().left:s.offset().top,f="x"===i?s[0].offsetLeft:s[0].offsetTop,m="x"===i?"left":"top";switch(d){case"function":return e();case"object":if(e.nodeType)var g="x"===i?t(e).offset().left:t(e).offset().top;else if(e.jquery){if(!e.length)return;g="x"===i?e.offset().left:e.offset().top}return g-u;case"string":case"number":if(p._isNumeric.call(null,e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(c*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(f-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var v=f+parseInt(e.split("+=")[1]);return v>=0?0:Math.abs(v)}if(-1!==e.indexOf("px")&&p._isNumeric.call(null,e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(l.height()-s.outerHeight(!1));if("right"===e)return Math.abs(l.width()-s.outerWidth(!1));if("first"===e||"last"===e){var y=s.find(":"+e);return(g="x"===i?t(y).offset().left:t(y).offset().top)-u}return t(e).length?(g="x"===i?t(e).offset().left:t(e).offset().top)-u:(s.css(m,e),void h.update.call(null,n[0]))}}},_autoUpdate:function(e){function i(){var t=0;return l.advanced.updateOnImageLoad&&(t=d.find("img").length),t}function n(){!0===l.advanced.updateOnSelectorChange&&(l.advanced.updateOnSelectorChange="*");var e=0,i=d.find(l.advanced.updateOnSelectorChange);return l.advanced.updateOnSelectorChange&&i.length>0&&i.each(function(){e+=t(this).height()+t(this).width()}),e}function r(){clearTimeout(d[0].autoUpdate),h.update.call(null,a[0])}var a=t(this),s=a.data(o),l=s.opt,d=t("#mCSB_"+s.idx+"_container");if(e)return clearTimeout(d[0].autoUpdate),void p._delete.call(null,d[0].autoUpdate);var c,u,f,m=d.parent(),g=[t("#mCSB_"+s.idx+"_scrollbar_vertical"),t("#mCSB_"+s.idx+"_scrollbar_horizontal")],v=function(){return[g[0].is(":visible")?g[0].outerHeight(!0):0,g[1].is(":visible")?g[1].outerWidth(!0):0]},y=n(),b=[d.outerHeight(!1),d.outerWidth(!1),m.height(),m.width(),v()[0],v()[1]],_=i();!function t(){clearTimeout(d[0].autoUpdate),d[0].autoUpdate=setTimeout(function(){return l.advanced.updateOnSelectorChange&&(c=n())!==y?(r(),void(y=c)):(l.advanced.updateOnContentResize&&((u=[d.outerHeight(!1),d.outerWidth(!1),m.height(),m.width(),v()[0],v()[1]])[0]===b[0]&&u[1]===b[1]&&u[2]===b[2]&&u[3]===b[3]&&u[4]===b[4]&&u[5]===b[5]||(r(),b=u)),l.advanced.updateOnImageLoad&&(f=i())!==_&&(d.find("img").each(function(){var t,e;t=this.src,(e=new Image).onload=function(t,e){return function(){return(function(){this.onload=null,r()}).apply(t,arguments)}}(e),e.src=t}),_=f),void((l.advanced.updateOnSelectorChange||l.advanced.updateOnContentResize||l.advanced.updateOnImageLoad)&&t()))},60)}()},_snapAmount:function(t,e,i){return Math.round(t/e)*e-i},_stop:function(e){var i=e.data(o);t("#mCSB_"+i.idx+"_container,#mCSB_"+i.idx+"_container_wrapper,#mCSB_"+i.idx+"_dragger_vertical,#mCSB_"+i.idx+"_dragger_horizontal").each(function(){p._stopTween.call(this)})},_scrollTo:function(e,i,n){function r(t){return s&&l.callbacks[t]&&"function"==typeof l.callbacks[t]}function a(){var t=[u[0].offsetTop,u[0].offsetLeft],i=[g[0].offsetTop,g[0].offsetLeft],o=[u.outerHeight(!1),u.outerWidth(!1)],r=[c.height(),c.width()];e[0].mcs={content:u,top:t[0],left:t[1],draggerTop:i[0],draggerLeft:i[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(o[0])-r[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(o[1])-r[1])),direction:n.dir}}var s=e.data(o),l=s.opt,d=[(n=t.extend({trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:l.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n)).dur,n.drag?0:n.dur],c=t("#mCSB_"+s.idx),u=t("#mCSB_"+s.idx+"_container"),h=u.parent(),f=l.callbacks.onTotalScrollOffset?p._arr.call(e,l.callbacks.onTotalScrollOffset):[0,0],m=l.callbacks.onTotalScrollBackOffset?p._arr.call(e,l.callbacks.onTotalScrollBackOffset):[0,0];if(s.trigger=n.trigger,0===h.scrollTop()&&0===h.scrollLeft()||(t(".mCSB_"+s.idx+"_scrollbar").css("visibility","visible"),h.scrollTop(0).scrollLeft(0)),"_resetY"!==i||s.contentReset.y||(r("onOverflowYNone")&&l.callbacks.onOverflowYNone.call(e[0]),s.contentReset.y=1),"_resetX"!==i||s.contentReset.x||(r("onOverflowXNone")&&l.callbacks.onOverflowXNone.call(e[0]),s.contentReset.x=1),"_resetY"!==i&&"_resetX"!==i){switch(!s.contentReset.y&&e[0].mcs||!s.overflowed[0]||(r("onOverflowY")&&l.callbacks.onOverflowY.call(e[0]),s.contentReset.x=null),!s.contentReset.x&&e[0].mcs||!s.overflowed[1]||(r("onOverflowX")&&l.callbacks.onOverflowX.call(e[0]),s.contentReset.x=null),l.snapAmount&&(i=p._snapAmount(i,l.snapAmount,l.snapOffset)),n.dir){case"x":var g=t("#mCSB_"+s.idx+"_dragger_horizontal"),v="left",y=u[0].offsetLeft,b=[c.width()-u.outerWidth(!1),g.parent().width()-g.width()],_=[i,0===i?0:i/s.scrollRatio.x],w=m[1],x=(C=f[1])>0?C/s.scrollRatio.x:0,T=w>0?w/s.scrollRatio.x:0;break;case"y":var C;g=t("#mCSB_"+s.idx+"_dragger_vertical"),v="top",y=u[0].offsetTop,b=[c.height()-u.outerHeight(!1),g.parent().height()-g.height()],_=[i,0===i?0:i/s.scrollRatio.y],w=m[0],x=(C=f[0])>0?C/s.scrollRatio.y:0,T=w>0?w/s.scrollRatio.y:0}_[1]<0||0===_[0]&&0===_[1]?_=[0,0]:_[1]>=b[1]?_=[b[0],b[1]]:_[0]=-_[0],e[0].mcs||(a(),r("onInit")&&l.callbacks.onInit.call(e[0])),clearTimeout(u[0].onCompleteTimeout),!s.tweenRunning&&(0===y&&_[0]>=0||y===b[0]&&_[0]<=b[0])||(p._tweenTo.call(null,g[0],v,Math.round(_[1]),d[1],n.scrollEasing),p._tweenTo.call(null,u[0],v,Math.round(_[0]),d[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!s.tweenRunning&&(r("onScrollStart")&&(a(),l.callbacks.onScrollStart.call(e[0])),s.tweenRunning=!0,p._onDragClasses(g),s.cbOffsets=[l.callbacks.alwaysTriggerOffsets||y>=b[0]+C,l.callbacks.alwaysTriggerOffsets||-w>=y])},onUpdate:function(){n.callbacks&&n.onUpdate&&r("whileScrolling")&&(a(),l.callbacks.whileScrolling.call(e[0]))},onComplete:function(){n.callbacks&&n.onComplete&&("yx"===l.axis&&clearTimeout(u[0].onCompleteTimeout),u[0].onCompleteTimeout=setTimeout(function(){r("onScroll")&&(a(),l.callbacks.onScroll.call(e[0])),r("onTotalScroll")&&_[1]>=b[1]-x&&s.cbOffsets[0]&&(a(),l.callbacks.onTotalScroll.call(e[0])),r("onTotalScrollBack")&&_[1]<=T&&s.cbOffsets[1]&&(a(),l.callbacks.onTotalScrollBack.call(e[0])),s.tweenRunning=!1,u[0].idleTimer=0,p._onDragClasses(g,"hide")},u[0].idleTimer||0))}}))}},_tweenTo:function(t,i,n,o,r,a,s){function l(){o>0?(b.currVal=function(t,e,i,n,o){switch(o){case"linear":case"mcsLinear":return i*t/n+e;case"mcsLinearOut":return t/=n,t--,i*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return 1>(t/=n/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e;case"easeInOutStrong":return 1>(t/=n/2)?i/2*Math.pow(2,10*(t-1))+e:(t--,i/2*(2-Math.pow(2,-10*t))+e);case"easeInOut":case"mcsEaseInOut":return 1>(t/=n/2)?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e;case"easeOutSmooth":return t/=n,-i*(--t*t*t*t-1)+e;case"easeOutStrong":return i*(1-Math.pow(2,-10*t/n))+e;case"easeOut":case"mcsEaseOut":default:var r=(t/=n)*t,a=r*t;return e+i*(.499999999999997*a*r+-2.5*r*r+5.5*a+-6.5*r+4*t)}}(b.time,v,_,o,r),y[i]=Math.round(b.currVal)+"px"):y[i]=n+"px",h.call()}t._malihuTween||(t._malihuTween={top:{},left:{}});var d,c,u=(s=s||{}).onStart||function(){},h=s.onUpdate||function(){},f=s.onComplete||function(){},m=p._getTime(),g=0,v=t.offsetTop,y=t.style,b=t._malihuTween[i];"left"===i&&(v=t.offsetLeft);var _=n-v;b.stop=0,"none"!==a&&null!=b.id&&(e.requestAnimationFrame?e.cancelAnimationFrame(b.id):clearTimeout(b.id),b.id=null),b.time=g+(d=1e3/60),b.id=(c=e.requestAnimationFrame?e.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)})(function t(){b.stop||(g||u.call(),g=p._getTime()-m,l(),g>=b.time&&(b.time=g>b.time?g+d-(g-b.time):g+d-1,b.time<g+1&&(b.time=g+1)),b.time<o?b.id=c(t):f.call())})},_getTime:function(){return e.performance&&e.performance.now?e.performance.now():e.performance&&e.performance.webkitNow?e.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},_stopTween:function(){var t=this;t._malihuTween||(t._malihuTween={top:{},left:{}}),t._malihuTween.top.id&&(e.requestAnimationFrame?e.cancelAnimationFrame(t._malihuTween.top.id):clearTimeout(t._malihuTween.top.id),t._malihuTween.top.id=null,t._malihuTween.top.stop=1),t._malihuTween.left.id&&(e.requestAnimationFrame?e.cancelAnimationFrame(t._malihuTween.left.id):clearTimeout(t._malihuTween.left.id),t._malihuTween.left.id=null,t._malihuTween.left.stop=1)},_delete:function(t){},_mouseBtnLeft:function(t){return!(t.which&&1!==t.which)},_pointerTouch:function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},_isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}};t.fn[n]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[n]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[n].defaults=a,e[n]=!0,t(e).on("load",function(){t(r)[n]()})})}(jQuery,window,document),function(t){t.fn.Video=function(t,e){return new c(this,t)};var e={instanceName:"player1",instanceTheme:"dark",autohideControls:5,hideControlsOnMouseOut:!1,playerLayout:"fixedSize",playerOrientation:"LTR",videoPlayerWidth:768,videoPlayerHeight:432,videoRatio:16/9,autoplay:!1,colorAccent:"#00adef",videoAnimationTime:350,playSpecificVideo:0,progressBarThickness:3,progressBarThicknessOnMouseover:6,tooltipFontSize:12,videoPlayerShadow:"effect1",loadRandomVideoOnStart:!1,shuffle:!1,posterImg:"",posterImgOnVideoFinish:"assets/images/images/poster2.jpg",onFinish:"Play next video",nowPlayingText:!0,showAllControls:!0,allowSkipAd:!0,infoShow:!0,nextShow:!0,rewindShow:!0,qualityShow:!0,lightBox:!1,lightBoxAutoplay:!1,lightBoxThumbnail:"assets/images/images/poster.jpg",lightBoxThumbnailWidth:400,lightBoxThumbnailHeight:220,lightBoxCloseOnOutsideClick:!0,playlist:"Right playlist",playlistScrollType:"inset-2",playlistBehaviourOnPageload:"opened (default)",youtubeControls:"custom controls",youtubeSkin:"dark",youtubeColor:"red",youtubeQuality:"default",youtubeShowRelatedVideos:!0,HTML5VideoQuality:"SD",preloadSelfHosted:"none",rightClickMenu:!0,hideVideoSource:!1,shareShow:!0,facebookShow:!0,twitterShow:!0,googlePlusShow:!0,facebookShareName:"Stellar video player",facebookShareLink:"#",facebookShareDescription:"",facebookSharePicture:"#",twitterText:"Stellar video player",twitterLink:"#",twitterHashtags:"wordpressvideoplayer",twitterVia:"Creative media",googlePlus:"#",logoShow:!0,logoClickable:!0,logoPath:"assets/images/images/logo.png",logoGoToLink:"#",logoPosition:"bottom-left",embedShow:!0,embedCodeSrc:"www.yourwebsite.com/videoplayer/index.html",embedShareLink:"www.yourwebsite.com/videoplayer/index.html",showGlobalPrerollAds:!1,globalPrerollAds:"url1;url2;url3;url4;url5",globalPrerollAdsSkipTimer:5,globalPrerollAdsGotoLink:"#",advertisementTitle:"Advertisement",skipAdvertisementText:"Skip advertisement",skipAdText:"You can skip this ad in",playBtnTooltipTxt:"Play",pauseBtnTooltipTxt:"Pause",rewindBtnTooltipTxt:"Rewind",downloadVideoBtnTooltipTxt:"Download video",qualityBtnOpenedTooltipTxt:"Close quality",qualityBtnClosedTooltipTxt:"Select quality",muteBtnTooltipTxt:"Mute",unmuteBtnTooltipTxt:"Unmute",fullscreenBtnTooltipTxt:"Fullscreen",exitFullscreenBtnTooltipTxt:"Exit fullscreen",infoBtnTooltipTxt:"Show info",embedBtnTooltipTxt:"Embed",shareBtnTooltipTxt:"Share",volumeTooltipTxt:"Volume",playlistBtnClosedTooltipTxt:"Show playlist",playlistBtnOpenedTooltipTxt:"Hide playlist",facebookBtnTooltipTxt:"Share on Facebook",twitterBtnTooltipTxt:"Share on Twitter",googlePlusBtnTooltipTxt:"Share on Google+",lastBtnTooltipTxt:"Go to last",firstBtnTooltipTxt:"Go to first",nextBtnTooltipTxt:"Next",previousBtnTooltipTxt:"Previous",playlistSearchText:"Search for media...",nextVideoInPlaylistText:"UP NEXT",autoplayNextVideoInPlaylistOn:"Autoplay next on",autoplayNextVideoInPlaylistOff:"Autoplay next off",countVideos:"of",shuffleBtnOnTooltipTxt:"Random on",shuffleBtnOffTooltipTxt:"Random off",embedWindowTitle2:"EMBED PLAYER IN YOUR SITE:",embedWindowTitle3:"SHARE CURRENT MEDIA:",copyTxt:"Copy",copiedTxt:"Copied!",youtubePlaylistID:"",youtubeChannelID:"",videos:[]},i={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return i.Android()||i.BlackBerry()||i.Opera()||i.Windows()}},n=i.any()?"touchend":"click",o=i.any()?"touchstart":"mousedown",a=i.any()?"touchmove":"mousemove",s=i.any()?"touchend":"mouseup",l="onorientationchange"in window?"orientationchange":"resize",d={id:null},c=function(r,d){var u=this;switch(this._class=c,this.parent=r,this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height(),this.windowWidth=t(window).width(),this.windowHeight=t(window).height(),this.options=t.extend({},e,d),this.sources=this.options.srcs||this.options.sources,this.state=null,this._inFullscreen=!1,this.stretching=!1,this.infoOn=!1,this.lightBoxOn=!1,this.adOn=!1,this.skipCountOn=!1,this.skipBoxOn=!1,this.nextVideoBoxOn=!1,this.shareOn=!1,this.videoPlayingAD=!1,this.embedOn=!1,pw=!1,this.loaded=!1,this.readyList=[],this.videoAdStarted=!1,this.youtubeReady=!1,this.ADTriggered=!1,this.volPerc=1,this.html5STARTED=!1,this.YTAPIReady=!1,this.isYoutubeAPICreated=!1,this.ytSkin=this.options.youtubeSkin,this.ytColor=this.options.youtubeColor,this.ytSkin.toString(),this.ytColor.toString(),this.youtubeControls=this.options.youtubeControls,this.midrollPlayed=!1,this.postrollPlayed=!1,this.prerollActive=!0,this.midrollActive=!1,this.postrollActive=!1,this.qualityBtnEnabled=!1,this.lightBoxInitiated=!1,this.globalPrerollAds_arr=u.options.globalPrerollAds,this.poster2Showing=!1,this.shareBtnEnabled=!1,this.embedBtnEnabled=!1,this.videoAnimationTime=u.options.videoAnimationTime,this._isAnimation=!1,this.options.youtubeShowRelatedVideos){case!0:u.ytShowRelatedVideos=1;break;case!1:u.ytShowRelatedVideos=0}if(this.isMobile=i,this.RESIZE_EV=l,this.CLICK_EV=n,this.START_EV=o,this.MOVE_EV=a,this.END_EV=s,this.canPlay=!1,this.myVideo=document.createElement("video"),u.deviceAgent=navigator.userAgent.toLowerCase(),u.agentID=u.deviceAgent.match(/(iphone|ipod)/),"fitToBrowser"==this.options.playerLayout||"fitToBrowser"==d.playerLayout){var h=t("#Stellar_video_player");t.each(h,function(){var e=t("<div />").addClass("fixedCont").css({position:"fixed",width:"100%",height:"100%",top:0,left:0,background:"#000000",zIndex:2147483647});h.parent().append(e),h.appendTo(e)})}if(this.setupElement(),this.setupElementAD(),this.options.rightClickMenu||(t("#Stellar_video_player").bind("contextmenu",function(){return!1}),t(".Stellar_video_player").bind("contextmenu",function(){return!1}),this.options.lightBox&&t(".stellar_vp_mainContainer").bind("contextmenu",function(){return!1})),t(d.videos).each(function(){"youtube"==this.videoType&&(u.includeYoutubeAPI=!0)}),this.includeYoutubeAPI){var p=document.createElement("script");p.src="https://www.youtube.com/iframe_api";var f=document.getElementsByTagName("script")[0];if(f.parentNode.insertBefore(p,f),"default controls"==this.youtubeControls&&this.element.css("visibility","hidden"),"YouTube playlist"!=this.options.videoType&&void 0!=this.options.videoType&&(this.options.youtubePlaylistID=""),"YouTube channel"!=this.options.videoType&&void 0!=this.options.videoType&&(this.options.youtubeChannelID=""),""!=this.options.youtubePlaylistID||""!=this.options.youtubeChannelID){var m=this.options.youtubePlaylistID,g=this.options.youtubeChannelID,v="https://www.googleapis.com/youtube/v3/search?order=date&maxResults=50&part=snippet&channelId="+g+"&key=AIzaSyClbVoeyPLBHb9n6Abm0z-AlrzNKeWLKTc";""!=m?this.url="https://www.googleapis.com/youtube/v3/playlistItems?&maxResults=50&part=snippet&playlistId="+m+"&key=AIzaSyClbVoeyPLBHb9n6Abm0z-AlrzNKeWLKTc":""!=g&&(this.url=v),this.id=-1,this.youtube_array=new Array,this.ads_array=new Array,t(this.options.videos).each(function(){u.ads_array.push({prerollAD:this.prerollAD,prerollGotoLink:this.prerollGotoLink,preroll_mp4:this.preroll_mp4,prerollSkipTimer:this.prerollSkipTimer,midrollAD:this.midrollAD,midrollAD_displayTime:this.midrollAD_displayTime,midrollGotoLink:this.midrollGotoLink,midroll_mp4:this.midroll_mp4,midrollSkipTimer:this.midrollSkipTimer,postrollAD:this.postrollAD,postrollGotoLink:this.postrollGotoLink,postroll_mp4:this.postroll_mp4,postrollSkipTimer:this.postrollSkipTimer,popupAdShow:this.popupAdShow,popupImg:this.popupImg,popupAdStartTime:this.popupAdStartTime,popupAdEndTime:this.popupAdEndTime,popupAdGoToLink:this.popupAdGoToLink})}),this.requestYTList()}else this.init(),this.waitAPIReady()}else this.init()};c.fn=c.prototype,c.fn.waitAPIReady=function(){var t=this,e=!1;if(!this.YTAPIReady)if("undefined"!=typeof YT&&"undefined"!=typeof YT.Player)this.YTAPIReady=!0,this.isYoutubeAPICreated?this.createYoutubeInstance():this.setupYoutubeAPI();else var i=setInterval(function(){"function"!=typeof YT.Player||e||(e=!0,clearInterval(i),t.waitAPIReady())},400)},c.fn.setupYoutubeAPI=function(){var t=this;this.isYoutubeAPICreated||(this.isYoutubeAPICreated=!0,this.YTAPIReady?this.createYoutubeInstance():window.onYouTubeIframeAPIReady||(window.onYouTubePlayerAPIReady=function(){t.YTAPIReady=!0,t.createYoutubeInstance()}))},c.fn.createYoutubeInstance=function(){"custom controls"==this.options.youtubeControls?this.youtubePlayer=new YT.Player(this.options.instanceName+"youtube",{height:"100%",width:"100%",events:{onReady:this._playlist.onPlayerReady,onStateChange:this._playlist.onPlayerStateChange,onPlaybackQualityChange:this.onPlayerPlaybackQualityChange},playerVars:{rel:this.ytShowRelatedVideos,wmode:"transparent",controls:0,enablejsapi:1,iv_load_policy:3,showinfo:0}}):"default controls"==this.options.youtubeControls&&(this.youtubePlayer=new YT.Player(this.options.instanceName+"youtube",{height:"100%",width:"100%",events:{onReady:this._playlist.onPlayerReady,onStateChange:this._playlist.onPlayerStateChange,onPlaybackQualityChange:this.onPlayerPlaybackQualityChange},playerVars:{theme:this.ytSkin,color:this.ytColor,rel:this.ytShowRelatedVideos,wmode:"transparent",controls:1,enablejsapi:1,iv_load_policy:3,modestbranding:0,showinfo:1,autohide:1}}))},c.fn.requestYTList=function(){var e=this;url=void 0!=e.nextPageToken?this.url+"&pageToken="+e.nextPageToken:this.url,t.ajax({url:url,success:function(i){e.data=i,e.nextPageToken=i.nextPageToken,t.each(i.items,function(t,i){e.id=e.id+1;var n,o=i.snippet.title,r=i.snippet.description,a=i.snippet.channelTitle;if(""!=e.options.youtubePlaylistID)var s=i.snippet.resourceId.videoId;""!=e.options.youtubeChannelID&&(s=i.id),n=void 0!=i.snippet.thumbnails?i.snippet.thumbnails.default.url:"",e.ads_array.push({prerollAD:!1,prerollGotoLink:"prerollGotoLink",preroll_mp4:"preroll_mp4",prerollSkipTimer:"prerollSkipTimer",midrollAD:!1,midrollAD_displayTime:"midrollAD_displayTime",midrollGotoLink:"midrollGotoLink",midroll_mp4:"midroll_mp4",midrollSkipTimer:"midrollSkipTimer",postrollAD:!1,postrollGotoLink:"postrollGotoLink",postroll_mp4:"postroll_mp4",postrollSkipTimer:"postrollSkipTimer",popupAdShow:!1,popupImg:"popupImg",popupAdStartTime:"popupAdStartTime",popupAdEndTime:"popupAdEndTime",popupAdGoToLink:"popupAdGoToLink"}),e.youtube_array.push({id:e.id,title:o,videoType:"youtube",youtubeID:s,youtubeIDStartSeconds:"youtubeIDStartSeconds",youtubeIDEndSeconds:"youtubeIDEndSeconds",video_path_mp4HD:this.mp4HD,enable_mp4_download:this.enable_mp4_download,prerollAD:e.ads_array[e.id].prerollAD,prerollGotoLink:e.ads_array[e.id].prerollGotoLink,preroll_mp4:e.ads_array[e.id].preroll_mp4,prerollSkipTimer:e.ads_array[e.id].prerollSkipTimer,midrollAD:e.ads_array[e.id].midrollAD,midrollAD_displayTime:e.ads_array[e.id].midrollAD_displayTime,midrollGotoLink:e.ads_array[e.id].midrollGotoLink,midroll_mp4:e.ads_array[e.id].midroll_mp4,midrollSkipTimer:e.ads_array[e.id].midrollSkipTimer,postrollAD:e.ads_array[e.id].postrollAD,postrollGotoLink:e.ads_array[e.id].postrollGotoLink,postroll_mp4:e.ads_array[e.id].postroll_mp4,postrollSkipTimer:e.ads_array[e.id].postrollSkipTimer,popupAdShow:e.ads_array[e.id].popupAdShow,popupImg:e.ads_array[e.id].popupImg,popupAdStartTime:e.ads_array[e.id].popupAdStartTime,popupAdEndTime:e.ads_array[e.id].popupAdEndTime,popupAdGoToLink:e.ads_array[e.id].popupAdGoToLink,description:a,thumbImg:n,info:r})}),void 0!=i.nextPageToken?e.requestYTList():(e.init(),e.waitAPIReady())}})},c.fn.init=function(){var e=this;e.preloader=t("<div />"),e.preloader.addClass("stellar_vp_preloader"),e.element.append(e.preloader),e.preloaderAD=t("<div />"),e.preloaderAD.addClass("stellar_vp_preloader"),e.elementAD.append(e.preloaderAD),this.videoElement=t("<video />"),this.videoElement.addClass("stellar_vp_videoPlayer"),this.videoElement.attr({width:this.options.width,height:this.options.height,preload:this.options.preloadSelfHosted,controls:this.options.controls}),this.videoElementAD=t("<video />"),this.videoElementAD.addClass("stellar_vp_videoPlayerAD"),this.videoElementAD.attr({width:this.options.width,height:this.options.height,preload:this.options.preloadSelfHosted,controls:this.options.controls}),i.iOS()&&(this.videoElement.attr("playsinline","").attr("webkit-playsinline",""),this.videoElementAD.attr("playsinline","").attr("webkit-playsinline",""),this.options.autoplay&&(this.videoElement.attr("muted",""),this.videoElement.muted=!0,this.videoElement.attr("autoplay","autoplay"))),this.controls=t("<div />"),this.controls.addClass("stellar_vp_controls"),this.controls.addClass("stellar_vp_disabled"),this.element&&this.element.append(this.controls),this.options.showAllControls||this.controls.hide(),this.nowPlayingTitle=t("<div />").addClass("stellar_vp_nowPlayingTitle").bind(e.CLICK_EV,function(){e.togglePlay()}),this.nowPlayingTitleControlBar=t("<div />").addClass("stellar_vp_nowPlayingTitleControlBar"),this.controls.addClass("stellar_vp_bg "+this.options.instanceTheme),this.options.showAllControls||this.nowPlayingTitle.hide(),this.element&&this.element.append(this.nowPlayingTitle),e._playlist=new PLAYER.Playlist(t,e,e.options,e.mainContainer,e.element,e.preloader,e.preloaderAD,e.myVideo,this.canPlay,e.CLICK_EV,d,pw,e.deviceAgent,e.agentID,e.youtube_array,e.isMobile),"Right playlist"==e.options.playlist?(e.playerWidth=e.options.videoPlayerWidth-e._playlist.playlistW,e.playerHeight=e.options.videoPlayerHeight):"Bottom playlist"==e.options.playlist?(e.playerWidth=e.options.videoPlayerWidth,e.playerHeight=e.options.videoPlayerHeight-e._playlist.playlistH):"Off"==e.options.playlist&&(e.playerWidth=e.options.videoPlayerWidth,e.playerHeight=e.options.videoPlayerHeight),e.playlistWidth=e._playlist.playlistW,e.initPlayer(),e.resize(),e.resizeAll(),e.autohideControls()},c.fn.initPlayer=function(){this.setupHTML5Video(),this.setupHTML5VideoAD(),this.setupEvents(),this.change("initial"),this.setupControls(),this.load(),this.setupAutoplay(),this.setupLightBox(),this.setupElements(),this.element.bind("idle",t.proxy(this.idle,this)),this.element.bind("state.videoPlayer",t.proxy(function(){this.element.trigger("reset.idle")},this)),this.secondsFormat=function(t){isNaN(t)&&(t=0);var e=[],i=Math.floor(t/60);i>60&&(i%=60);var n=Math.floor(t/3600),o=0==t?0:t%60;o=Math.round(o);var r=function(t){return t<10?"0"+t:t};return n>0&&e.push(r(n)),e.push(r(i)),e.push(r(o)),e.join(":")};var e=this;t(window).resize(function(){e._inFullscreen||e.resizeAll()}),t(window).bind(this.RESIZE_EV,function(t){e.resizeAll()}),t(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(t){e.resize(t)}),this.resize=function(i){document.webkitIsFullScreen||document.fullscreenElement||document.mozFullScreen||document.msieFullScreen||document.msFullscreenElement?(e._playlist.hidePlaylist(),e.element.addClass("stellar_vp_fullScreen"),e.elementAD.addClass("stellar_vp_fullScreen"),t(e.mainContainer).find(".fa-stellar-desktop-expand").removeClass("fa-stellar-desktop-expand").addClass("fa-stellar-desktop-compress"),t(e.mainContainer).find(".fa-stellar-desktop-expand-zoom").removeClass("fa-stellar-desktop-expand-zoom").addClass("fa-stellar-desktop-compress"),t(e.fsEnterADBox).find(".fa-stellar-expandAD").removeClass("fa-stellar-expandAD").addClass("fa-stellar-compressAD"),e.element.width("100%"),e.element.height("100%"),e.elementAD.width("100%"),e.elementAD.height("100%"),e.mainContainer.width("100%"),e.mainContainer.height("100%"),e.mainContainer.css("position","fixed"),e.mainContainer.css("left",0),e.mainContainer.css("top",0),e.rewindBtnWrapper.show(),e.resizeVideoTrack(),e.mainContainer.parent().css("position",""),e._inFullscreen=!0):(e._playlist.showPlaylist(),e.element.removeClass("stellar_vp_fullScreen"),e.elementAD.removeClass("stellar_vp_fullScreen"),t(e.mainContainer).find(".fa-stellar-desktop-compress").removeClass("fa-stellar-desktop-compress").addClass("fa-stellar-desktop-expand"),t(e.mainContainer).find(".fa-stellar-desktop-compress-zoom").removeClass("fa-stellar-desktop-compress-zoom").addClass("fa-stellar-desktop-expand"),t(e.fsEnterADBox).find(".fa-stellar-compressAD").removeClass("fa-stellar-compressAD").addClass("fa-stellar-expandAD"),e.mainContainer.css("left",""),e.mainContainer.css("top",""),"fitToContainer"==e.options.playerLayout||"fitToBrowser"==e.options.playerLayout?(e.mainContainer.width("100%"),e.mainContainer.height("100%")):"fixedSize"==e.options.playerLayout&&(e.mainContainer.width(e.options.videoPlayerWidth),e.mainContainer.height(e.options.videoPlayerHeight)),e.mainContainer.css("position","absolute"),e.element.css({zIndex:455558}),(1==e._playlist.videos_array[e._playlist.videoid].prerollAD||"yes"==e._playlist.videos_array[e._playlist.videoid].prerollAD||e.options.showGlobalPrerollAds)&&e.elementAD.css(!e._playlist.videoAdPlayed&&e.videoAdStarted?{zIndex:455559}:{zIndex:455557}),e.mainContainer.parent().css("zIndex",1),e.mainContainer.css("zIndex",999999),"fitToContainer"!=this.options.playerLayout&&"fixedSize"!=this.options.playerLayout||e.mainContainer.parent().css("position","relative"),e._inFullscreen=!1,e.resizeAll(),e.setInitialSize()),e.resizeVideoTrack(),e.positionOverScreenButtons(),e.positionLogo(),e.positionPopup(),e.positionQualityWindow(),e.positionShareMask(),e.resizeBars(),e.options.hideControlsOnMouseOut&&e.hideControls()}},c.fn.setInitialSize=function(){if(!this._isAnimation)if("fitToContainer"==this.options.playerLayout||"fitToBrowser"==this.options.playerLayout){var e=this.parent.width()/this.options.videoRatio;this.parent.height(e),this.stretching?"Right playlist"==this.options.playlist?(this.element.width(this.parent.parent().width()),this.element.height(this._playlist.playlist.height())):"Bottom playlist"==this.options.playlist?(this.element.width(this.parent.parent().width()),this.element.height(this.mainContainer.height())):"Off"==this.options.playlist&&(this.element.width(this.parent.parent().width()),this.element.height(this.parent.parent().height())):"Right playlist"==this.options.playlist?(this.element.width(this.parent.parent().width()-this._playlist.playlist.width()),this.element.height(this._playlist.playlist.height())):"Bottom playlist"==this.options.playlist?(this.element.width(this.parent.parent().width()),this.element.height(this.mainContainer.height()-this._playlist.playlist.height())):"Off"==this.options.playlist&&(this.element.width(this.parent.parent().width()),this.element.height(this.parent.height())),this.elementAD.width(this.element.width()),this.elementAD.height(this.element.height())}else"fixedSize"==this.options.playerLayout&&("Right playlist"==this.options.playlist?(this.mainContainer.css({width:this.newPlayerWidth,height:this.newPlayerHeight}),this.element.css({width:this.newPlayerWidth,height:this.newPlayerHeight})):"Bottom playlist"==this.options.playlist?(this.element.width(this.newPlayerWidth),this.mainContainer.css({width:this.newPlayerWidth,height:this.newPlayerHeight})):"Off"==this.options.playlist&&(this.element.css({width:this.newPlayerWidth,height:this.newPlayerHeight}),this.mainContainer.css({width:this.newPlayerWidth,height:this.newPlayerHeight})),this.stretching?"Right playlist"==this.options.playlist?this.element.width(t(this.mainContainer).width()):"Bottom playlist"==this.options.playlist?this.element.height(this.newPlayerHeight):"Off"==this.options.playlist&&this.element.width(t(this.mainContainer).width()):"Right playlist"==this.options.playlist?(this.element.width(t(this.mainContainer).width()-this._playlist.playlist.width()),this._playlist.resizePlaylist(this.newPlayerWidth,this.newPlayerHeight)):"Bottom playlist"==this.options.playlist?(this.element.height(this.newPlayerHeight-this._playlist.playlistH),this._playlist.resizePlaylist(this.newPlayerWidth,this.newPlayerHeight)):"Off"==this.options.playlist&&this.element.width(t(this.mainContainer).width()))},c.fn.setupLightBox=function(){var e=this;if(this.options.lightBox){this.options.playerLayout="fixedSize";var i=this.mainContainer.parent();t.each(i,function(){e.lightBoxOverlay=t("<div />").addClass("stellar_vp_lightBoxOverlay").hide().css({opacity:0}),e.lightBoxCloseBtnWrapper=t("<div />").addClass("stellar_vp_lightBoxCloseBtnWrapper").addClass("stellar_vp_bg "+e.options.instanceTheme).addClass("stellar_vp_playerElement").bind(e.CLICK_EV,function(){e.toggleLightBox()}),e.mainContainer.append(e.lightBoxCloseBtnWrapper),e.lightBoxCloseBtn=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_lightBoxCloseBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+e.options.instanceTheme).addClass("fa-stellar-times"),e.lightBoxCloseBtnWrapper.append(e.lightBoxCloseBtn),e.lightBoxOverlayTransparent=t("<div />").addClass("stellar_vp_lightBoxOverlayTransparent").bind(e.CLICK_EV,function(){e.options.lightBoxCloseOnOutsideClick&&e.toggleLightBox()}).appendTo(e.lightBoxOverlay),e.mainContainer.addClass("stellar_vp_lightBoxBorder"),i.parent().append(e.lightBoxOverlay),e.mainContainer.appendTo(e.lightBoxOverlay),e.lightBoxThumbnailWrap=t("<div />").addClass("stellar_vp_lightBoxThumbnailWrap").bind(e.CLICK_EV,function(){e.toggleLightBox()}).css({cursor:"pointer",width:e.options.lightBoxThumbnailWidth,height:e.options.lightBoxThumbnailHeight}).appendTo(i),e.lightBoxThumbnail=t('<img class="stellar_vp_lightBoxThumbnail">').attr("src",e.options.lightBoxThumbnail).appendTo(e.lightBoxThumbnailWrap),e.lightBoxPlayButton=t("<div />"),e.lightBoxPlayButton.addClass("stellar_vp_playButtonScreen").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-playScreen "+e.options.instanceTheme).appendTo(e.lightBoxThumbnailWrap)})}},c.fn.setColorAccent=function(e,i){t(".fa-stellar-playScreen").css({color:e}),t(i).hasClass("fa-stellar-random")&&t(".fa-stellar-random").css({color:e}),t(i).hasClass("fa-stellar-random-zoom")&&t(".fa-stellar-random-zoom").css({color:e}),t(i).hasClass("fa-stellar-toggle-off")&&t(".fa-stellar-toggle-off").css({color:e}),t(i).hasClass("fa-stellar-toggle-on")&&t(".fa-stellar-toggle-on").css({color:e}),t(i).hasClass("fa-stellar-toggle-off-zoom")&&t(".fa-stellar-toggle-off-zoom").css({color:e}),t(i).hasClass("fa-stellar-toggle-on-zoom")&&t(".fa-stellar-toggle-on-zoom").css({color:e}),t(i).hasClass("fa-stellar-cog")&&t(".fa-stellar-cog").css({color:e}),t(i).hasClass("fa-stellar-cog-zoom")&&t(".fa-stellar-cog-zoom").css({color:e}),t(i).hasClass("fa-stellar-external-link")&&t(".fa-stellar-external-link").css({color:e}),t(i).hasClass("fa-stellar-external-link-zoom")&&t(".fa-stellar-external-link-zoom").css({color:e}),t(i).hasClass("fa-stellar-code")&&t(".fa-stellar-code").css({color:e}),t(i).hasClass("fa-stellar-code-zoom")&&t(".fa-stellar-code-zoom").css({color:e})},c.fn.removeColorAccent=function(e){t(e).hasClass("fa-stellar-random")&&t(".fa-stellar-random").css("color",""),t(e).hasClass("fa-stellar-random-zoom")&&t(".fa-stellar-random-zoom").css("color",""),t(e).hasClass("fa-stellar-toggle-off")&&t(".fa-stellar-toggle-off").css("color",""),t(e).hasClass("fa-stellar-toggle-off-zoom")&&t(".fa-stellar-toggle-off-zoom").css("color",""),t(e).hasClass("fa-stellar-toggle-on")&&t(".fa-stellar-toggle-on").css("color",""),t(e).hasClass("fa-stellar-toggle-on-zoom")&&t(".fa-stellar-toggle-on-zoom").css("color",""),t(e).hasClass("fa-stellar-cog")&&t(".fa-stellar-cog").css("color",""),t(e).hasClass("fa-stellar-cog-zoom")&&t(".fa-stellar-cog-zoom").css("color",""),t(e).hasClass("fa-stellar-chevron-right")&&t(".fa-stellar-chevron-right").css("color",""),t(e).hasClass("fa-stellar-chevron-right-zoom")&&t(".fa-stellar-chevron-right-zoom").css("color",""),t(e).hasClass("fa-stellar-chevron-left")&&t(".fa-stellar-chevron-left").css("color",""),t(e).hasClass("fa-stellar-chevron-left-zoom")&&t(".fa-stellar-chevron-left-zoom").css("color",""),t(e).hasClass("fa-stellar-external-link")&&t(".fa-stellar-external-link").css("color",""),t(e).hasClass("fa-stellar-external-link-zoom")&&t(".fa-stellar-external-link-zoom").css("color",""),t(e).hasClass("fa-stellar-code")&&t(".fa-stellar-code").css("color",""),t(e).hasClass("fa-stellar-code-zoom")&&t(".fa-stellar-code-zoom").css("color",""),t(e).hasClass("fa-stellar-download")&&t(".fa-stellar-download").css("color",""),t(e).hasClass("fa-stellar-download-zoom")&&t(".fa-stellar-download-zoom").css("color","")},c.fn.resizeAll=function(){if("fitToContainer"==this.options.playerLayout||"fitToBrowser"==this.options.playerLayout){var e=this.parent.width()/this.options.videoRatio;switch(this.parent.height(e),this.options.playlist){case"Right playlist":this.stretching?((this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.parent.width()<362?this.downloadBtnLink.hide():this.downloadBtnLink.show()),this.qualityBtnWrapper.show(),this.parent.width()<327?this.shareBtnWrapper.hide():this.shareBtnWrapper.show(),this.embedBtnWrapper.show(),this.rewindBtnWrapper.show(),this.parent.width()<300?this.volumeTrackWrapper.css("width",48):this.volumeTrackWrapper.css("width",62)):((this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.parent.width()<665?this.downloadBtnLink.hide():this.downloadBtnLink.show()),this.options.shareShow&&(this.parent.width()<626?this.shareBtnWrapper.hide():this.shareBtnWrapper.show()),this.options.embedShow&&(this.parent.width()<598?this.embedBtnWrapper.hide():this.embedBtnWrapper.show()),this.parent.width()<565?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.parent.width()<522?(this.mainContainer.find(".stellar_vp_nextTxtWrapper").hide(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperRight").hide(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperLeft").css({left:0}),this._playlist.playlist.css({width:130}),this.mainContainer.find(".stellar_vp_itemRight").hide(),this.mainContainer.find("#stellar_vp_input").css({width:90}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:90}),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperSearch").css({left:"50%",marginLeft:-45}),(this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.parent.width()<492?this.downloadBtnLink.hide():this.downloadBtnLink.show()),this.options.shareShow&&(this.parent.width()<460?this.shareBtnWrapper.hide():this.shareBtnWrapper.show()),this.options.embedShow&&(this.parent.width()<426?this.embedBtnWrapper.hide():this.embedBtnWrapper.show()),this.rewindBtnWrapper.show(),this.parent.width()<394?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.parent.width()<360?this.qualityBtnWrapper.hide():this.qualityBtnWrapper.show(),this.parent.width()<332?this.volumeTrackWrapper.css("width",48):this.volumeTrackWrapper.css("width",62),this.parent.width()<330?this._playlist.nextBtn.hide():this._playlist.nextBtn.show()):(this._playlist.playlist.css({width:300}),this.mainContainer.find(".stellar_vp_nextTxtWrapper").show(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperRight").show(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperLeft").css({left:73}),this.mainContainer.find(".stellar_vp_itemRight").show(),this.mainContainer.find("#stellar_vp_input").css({width:200}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:200}),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperSearch").css({left:"50px",marginLeft:""}))),this.parent.width()<522?this._playlist.playlist.css({width:130}):this._playlist.playlist.css({width:300}),this.mainContainer.height()<220?(this.transformElement(this.playButtonScreen,.8,"center center"),this.transformElement(this.toggleAdPlayBox,.8,"center center"),this.transformElement(this.skipAdCount,.8,"bottom right"),this.transformElement(this.skipAdBox,.8,"bottom right"),this.transformElement(this.nextVideoBox_mask,.8,"bottom left"),this.transformElement(this.qualityWindow_mask,.8,"bottom center"),this.transformElement(this.logoImg,.6,"bottom left"),this.transformElement(this.adImg,.6,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),.6,"top left"),t(this.nowPlayingTitle).css({height:30}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize-2+"px","important")):(this.transformElement(this.playButtonScreen,1,"center center"),this.transformElement(this.toggleAdPlayBox,1,"center center"),this.transformElement(this.skipAdCount,1,"bottom right"),this.transformElement(this.skipAdBox,1,"bottom right"),this.transformElement(this.nextVideoBox_mask,1,"bottom left"),this.transformElement(this.qualityWindow_mask,1,"bottom center"),this.transformElement(this.logoImg,1,"bottom left"),this.transformElement(this.adImg,1,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),1,"top left"),t(this.nowPlayingTitle).css({height:70}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize+"px","important"));break;case"Bottom playlist":this.parent.width()<580?(this.transformElement(this.playButtonScreen,.8,"center center"),this.transformElement(this.toggleAdPlayBox,.8,"center center"),this.transformElement(this.skipAdCount,.8,"bottom right"),this.transformElement(this.skipAdBox,.8,"bottom right"),this.transformElement(this.nextVideoBox_mask,.8,"bottom left"),this.transformElement(this.qualityWindow_mask,.8,"bottom center"),this.transformElement(this.logoImg,.6,"bottom left"),this.transformElement(this.adImg,.6,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),.6,"top left"),t(this.nowPlayingTitle).css({height:30}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize-2+"px","important"),t(this._playlist.playlist).css({height:127}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.parent.width()<448?(this.mainContainer.find("#stellar_vp_input").css({width:90}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:90}),t(this._playlist.playlist).css({height:92}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.mainContainer.find(".stellar_vp_itemLeft").css({width:44,height:44}),this.mainContainer.find(".stellar_vp_itemSelected").css({width:74,height:44}),this.mainContainer.find(".stellar_vp_itemUnselected").css({width:74,height:44}),this.mainContainer.find(".stellar_vp_itemRight_bottom").hide(),this.mainContainer.find(".stellar_vp_thumbnail_image").css("height","100%"),this.mainContainer.find(".stellar_vp_thumbnail_imageSelected").css("height","100%"),this.mainContainer.find(".stellar_vp_itemHoverBox").css("height","100%"),this.mainContainer.find(".stellar_vp_itemHoverBox").css("width","100%"),this.options.shareShow&&(this.parent.width()<330?this.shareBtnWrapper.hide():this.shareBtnWrapper.show()),this.options.embedShow&&(this.parent.width()<294?this.embedBtnWrapper.hide():this.embedBtnWrapper.show()),this.parent.width()<264?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.parent.width()<230?this.qualityBtnWrapper.hide():this.qualityBtnWrapper.show(),(this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.parent.width()<362?this.downloadBtnLink.hide():this.downloadBtnLink.show())):(this.mainContainer.find("#stellar_vp_input").css({width:200}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:200}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.mainContainer.find(".stellar_vp_itemLeft").css({width:80,height:80}),this.mainContainer.find(".stellar_vp_itemSelected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemUnselected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemRight_bottom").show(),this.mainContainer.find(".stellar_vp_thumbnail_image").css("height",""),this.mainContainer.find(".stellar_vp_thumbnail_imageSelected").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("width",""))):(this.transformElement(this.playButtonScreen,1,"center center"),this.transformElement(this.toggleAdPlayBox,1,"center center"),this.transformElement(this.skipAdCount,1,"bottom right"),this.transformElement(this.skipAdBox,1,"bottom right"),this.transformElement(this.nextVideoBox_mask,1,"bottom left"),this.transformElement(this.qualityWindow_mask,1,"bottom center"),this.transformElement(this.logoImg,1,"bottom left"),this.transformElement(this.adImg,1,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),1,"top left"),t(this.nowPlayingTitle).css({height:70}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize+"px","important"),this.mainContainer.find("#stellar_vp_input").css({width:200}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:200}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.mainContainer.find(".stellar_vp_itemLeft").css({width:80,height:80}),this.mainContainer.find(".stellar_vp_itemSelected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemUnselected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemRight_bottom").show(),this.mainContainer.find(".stellar_vp_thumbnail_image").css("height",""),this.mainContainer.find(".stellar_vp_thumbnail_imageSelected").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("width",""),t(this._playlist.playlist).css({height:146}));case"Off":this.parent.width()<289?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show()}this._playlist.resizePlaylist(),this.setInitialSize(),this.resizeVideoTrack(),this.positionOverScreenButtons(),this.resizeBars(),this.positionLogo(),this.positionPopup(),this.positionQualityWindow(),this.positionShareMask(),this.positionElementsDuringAnimation()}else if("fixedSize"==this.options.playerLayout){if(this.newPlayerWidth=t(window).width()-this.mainContainer.position().left-48,this.newPlayerHeight=this.newPlayerWidth/(this.options.videoPlayerWidth/this.options.videoPlayerHeight),this.newPlayerWidth<this.options.videoPlayerWidth)switch(this.options.lightBox&&t(this.mainContainer).css({position:"absolute",left:24,top:window.innerHeight/2-this.newPlayerHeight/2-10}),this.options.playlist){case"Right playlist":this.stretching?((this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.newPlayerWidth<362?this.downloadBtnLink.hide():this.downloadBtnLink.show()),this.options.shareShow&&(this.newPlayerWidth<328?this.shareBtnWrapper.hide():this.shareBtnWrapper.show()),this.options.embedShow&&(this.newPlayerWidth<297?this.embedBtnWrapper.hide():this.embedBtnWrapper.show()),this.newPlayerWidth<260?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.newPlayerWidth<231?this.qualityBtnWrapper.hide():this.qualityBtnWrapper.show(),this.fsBtnWrapper.show()):((this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.newPlayerWidth<665?this.downloadBtnLink.hide():this.downloadBtnLink.show()),this.options.shareShow&&(this.newPlayerWidth<626?this.shareBtnWrapper.hide():this.shareBtnWrapper.show()),this.options.embedShow&&(this.newPlayerWidth<598?this.embedBtnWrapper.hide():this.embedBtnWrapper.show()),this.newPlayerWidth<565?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.newPlayerWidth<522?(this.mainContainer.find(".stellar_vp_nextTxtWrapper").hide(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperRight").hide(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperLeft").css({left:0}),this._playlist.playlist.css({width:130}),this.mainContainer.find(".stellar_vp_itemRight").hide(),this.mainContainer.find("#stellar_vp_input").css({width:90}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:90}),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperSearch").css({left:"50%",marginLeft:-45}),(this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.newPlayerWidth<492?this.downloadBtnLink.hide():this.downloadBtnLink.show()),this.options.shareShow&&(this.newPlayerWidth<460?this.shareBtnWrapper.hide():this.shareBtnWrapper.show()),this.options.embedShow&&(this.newPlayerWidth<426?this.embedBtnWrapper.hide():this.embedBtnWrapper.show()),this.newPlayerWidth<394?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.newPlayerWidth<363?this.qualityBtnWrapper.hide():this.qualityBtnWrapper.show(),this.newPlayerWidth<330?this.fsBtnWrapper.hide():this.fsBtnWrapper.show()):(this._playlist.playlist.css({width:300}),this.mainContainer.find(".stellar_vp_nextTxtWrapper").show(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperRight").show(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperLeft").css({left:73}),this.mainContainer.find(".stellar_vp_itemRight").show(),this.mainContainer.find("#stellar_vp_input").css({width:200}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:200}),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperSearch").css({left:"50px",marginLeft:""}))),this._playlist.playlist.css(this.newPlayerWidth<522?{width:130}:{width:300}),this.newPlayerHeight<220?(this.transformElement(this.playButtonScreen,.8,"center center"),this.transformElement(this.toggleAdPlayBox,.8,"center center"),this.transformElement(this.skipAdCount,.8,"bottom right"),this.transformElement(this.skipAdBox,.8,"bottom right"),this.transformElement(this.nextVideoBox_mask,.8,"bottom left"),this.transformElement(this.qualityWindow_mask,.8,"bottom center"),this.transformElement(this.logoImg,.6,"bottom left"),this.transformElement(this.adImg,.6,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),.6,"top left"),t(this.nowPlayingTitle).css({height:30}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize-2+"px","important")):(this.transformElement(this.playButtonScreen,1,"center center"),this.transformElement(this.toggleAdPlayBox,1,"center center"),this.transformElement(this.skipAdCount,1,"bottom right"),this.transformElement(this.skipAdBox,1,"bottom right"),this.transformElement(this.nextVideoBox_mask,1,"bottom left"),this.transformElement(this.qualityWindow_mask,1,"bottom center"),this.transformElement(this.logoImg,1,"bottom left"),this.transformElement(this.adImg,1,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),1,"top left"),t(this.nowPlayingTitle).css({height:70}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize+"px","important"));break;case"Bottom playlist":this.newPlayerWidth<580?(this.transformElement(this.playButtonScreen,.8,"center center"),this.transformElement(this.toggleAdPlayBox,.8,"center center"),this.transformElement(this.skipAdCount,.8,"bottom right"),this.transformElement(this.skipAdBox,.8,"bottom right"),this.transformElement(this.nextVideoBox_mask,.8,"bottom left"),this.transformElement(this.qualityWindow_mask,.8,"bottom center"),this.transformElement(this.logoImg,.6,"bottom left"),this.transformElement(this.adImg,.6,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),.6,"top left"),t(this.nowPlayingTitle).css({height:30}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize-2+"px","important"),t(this._playlist.playlist).css({height:127}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.newPlayerWidth<448?(this.mainContainer.find("#stellar_vp_input").css({width:90}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:90}),t(this._playlist.playlist).css({height:92}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.mainContainer.find(".stellar_vp_itemLeft").css({width:44,height:44}),this.mainContainer.find(".stellar_vp_itemSelected").css({width:74,height:44}),this.mainContainer.find(".stellar_vp_itemUnselected").css({width:74,height:44}),this.mainContainer.find(".stellar_vp_itemRight_bottom").hide(),this.mainContainer.find(".stellar_vp_thumbnail_image").css("height","100%"),this.mainContainer.find(".stellar_vp_thumbnail_imageSelected").css("height","100%"),this.mainContainer.find(".stellar_vp_itemHoverBox").css("height","100%"),this.mainContainer.find(".stellar_vp_itemHoverBox").css("width","100%"),this.options.shareShow&&(this.newPlayerWidth<330?this.shareBtnWrapper.hide():this.shareBtnWrapper.show()),this.options.embedShow&&(this.newPlayerWidth<294?this.embedBtnWrapper.hide():this.embedBtnWrapper.show()),this.newPlayerWidth<264?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.newPlayerWidth<230?this.qualityBtnWrapper.hide():this.qualityBtnWrapper.show(),(this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.newPlayerWidth<362?this.downloadBtnLink.hide():this.downloadBtnLink.show())):(this.mainContainer.find("#stellar_vp_input").css({width:200}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:200}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.mainContainer.find(".stellar_vp_itemLeft").css({width:80,height:80}),this.mainContainer.find(".stellar_vp_itemSelected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemUnselected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemRight_bottom").show(),this.mainContainer.find(".stellar_vp_thumbnail_image").css("height",""),this.mainContainer.find(".stellar_vp_thumbnail_imageSelected").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("width",""))):(this.transformElement(this.playButtonScreen,1,"center center"),this.transformElement(this.toggleAdPlayBox,1,"center center"),this.transformElement(this.skipAdCount,1,"bottom right"),this.transformElement(this.skipAdBox,1,"bottom right"),this.transformElement(this.nextVideoBox_mask,1,"bottom left"),this.transformElement(this.qualityWindow_mask,1,"bottom center"),this.transformElement(this.logoImg,1,"bottom left"),this.transformElement(this.adImg,1,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),1,"top left"),t(this.nowPlayingTitle).css({height:70}),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize+"px","important"));break;case"Off":(this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&(this.newPlayerWidth<320?this.downloadBtnLink.hide():this.downloadBtnLink.show()),this.newPlayerWidth<290?this.rewindBtnWrapper.hide():this.rewindBtnWrapper.show(),this.options.embedShow&&(this.newPlayerWidth<560?this.embedBtn.hide():this.embedBtn.show()),this.newPlayerHeight<190?(t(this.playButtonScreen).css({"-webkit-transform":"scale(0.8)","-moz-transform":"scale(0.8)","-ms-transform":"scale(0.8)","-o-transform":"scale(0.8)",transform:"scale(0.8)"}),t(this.toggleAdPlayBox).css({"-webkit-transform":"scale(0.8)","-moz-transform":"scale(0.8)","-ms-transform":"scale(0.8)","-o-transform":"scale(0.8)",transform:"scale(0.8)"}),t(this.skipAdCount).css({"-webkit-transform":"scale(0.6)","-moz-transform":"scale(0.6)","-ms-transform":"scale(0.6)","-o-transform":"scale(0.6)",transform:"scale(0.6)","transform-origin":"bottom right"}),t(this.skipAdBox).css({"-webkit-transform":"scale(0.6)","-moz-transform":"scale(0.6)","-ms-transform":"scale(0.6)","-o-transform":"scale(0.6)",transform:"scale(0.6)","transform-origin":"bottom right"})):(t(this.playButtonScreen).css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)"}),t(this.toggleAdPlayBox).css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)"}),t(this.skipAdCount).css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)","transform-origin":"bottom right"}),t(this.skipAdBox).css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)","transform-origin":"bottom right"})),this.options.embedShow&&(this.newPlayerHeight<159?this.embedBtn.hide():this.embedBtn.show()),this.options.shareShow&&(this.newPlayerHeight<123?this.shareBtn.hide():this.shareBtn.show())}else this.options.lightBox&&t(this.mainContainer).css({position:"absolute",left:window.innerWidth/2-this.options.videoPlayerWidth/2,top:window.innerHeight/2-this.options.videoPlayerHeight/2-10}),this.newPlayerWidth=this.options.videoPlayerWidth,this.newPlayerHeight=this.options.videoPlayerHeight,this.showAllInitButtons();this._playlist.resizePlaylist(),this.setInitialSize(),void 0!=this.youtubePlayer&&(this._inFullscreen&&(this.element.width(t(document).width()),this.element.height(t(document).height())),this.youtubePlayer.setSize("100%","100%")),this.options.lightBox&&t(this.mainContainerBG).css({width:t(this.mainContainer).width()+20,height:t(this.mainContainer).height()+20}),this.options.infoShow&&t(this.infoWindow).find(".stellar_vp_infoText").css({"max-height":t(this.mainContainer).height()-94-this.controls.height()}),this.positionElementsDuringAnimation()}},c.fn.positionElementsDuringAnimation=function(){this.positionShareMask(),this.resizeVideoTrack(),this.positionOverScreenButtons(),this.resizeBars(),this.positionLogo(),this.positionPopup(),this.positionQualityWindow(),this.positionVolumeTrackWrapper(),this.elementAD.width(this.element.width()),this.elementAD.height(this.element.height())},c.fn.transformElement=function(e,i,n){t(e).css({"-webkit-transform":"scale("+i+")","-moz-transform":"scale("+i+")","-ms-transform":"scale("+i+")","-o-transform":"scale("+i+")",transform:"scale("+i+")","transform-origin":n})},c.fn.showAllInitButtons=function(){this.rewindBtnWrapper.show(),this.qualityBtnWrapper.show(),this.options.shareShow?this.shareBtnWrapper.show():this.shareBtnWrapper.hide(),this.options.embedShow?this.embedBtnWrapper.show():this.embedBtnWrapper.hide(),(this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download)&&this.downloadBtnLink.show(),this.mainContainer.find(".stellar_vp_nextTxtWrapper").show(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperRight").show(),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperLeft").css({left:73}),this.transformElement(this.playButtonScreen,1,"center center"),this.transformElement(this.toggleAdPlayBox,1,"center center"),this.transformElement(this.skipAdCount,1,"bottom right"),this.transformElement(this.skipAdBox,1,"bottom right"),this.transformElement(this.nextVideoBox_mask,1,"bottom left"),this.transformElement(this.qualityWindow_mask,1,"bottom center"),this.transformElement(this.logoImg,1,"bottom left"),this.transformElement(this.adImg,1,"center bottom"),this.transformElement(this.nowPlayingTitle.find(".stellar_vp_nowPlayingText"),1,"top left"),t(this.nowPlayingTitle).css({height:70}),"Right playlist"==this.options.playlist&&(this._playlist.playlist.css(this.newPlayerWidth<522?{width:130}:{width:300}),this.mainContainer.find("#stellar_vp_input").css({width:200}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:200}),this.mainContainer.find(".stellar_vp_playlistControlsBtnsWrapperSearch").css({left:"50px",marginLeft:""})),"Bottom playlist"==this.options.playlist&&t(this._playlist.playlist).css({height:146}),this._playlist.playlistH=t(this._playlist.playlist).height(),this.mainContainer.find("#stellar_vp_input").css({width:200}),this.mainContainer.find(".stellar_vp_playlistBarSearch_bottom").css({width:200}),this.mainContainer.find(".stellar_vp_itemLeft").css({width:80,height:80}),this.mainContainer.find(".stellar_vp_itemSelected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemUnselected").css({width:300,height:86}),this.mainContainer.find(".stellar_vp_itemRight_bottom").show(),this.mainContainer.find(".stellar_vp_thumbnail_image").css("height",""),this.mainContainer.find(".stellar_vp_thumbnail_imageSelected").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("height",""),this.mainContainer.find(".stellar_vp_itemHoverBox").css("width",""),this.mainContainer.find(".stellar_vp_itemRight").show(),this.toolTip[0].style.setProperty("font-size",this.options.tooltipFontSize+"px","important")},c.fn.autohideControls=function(){var t=this.element,e=!1,i=1e3*this.options.autohideControls,n=0,o=function(){e&&t.trigger("idle",!1),e=!1,n=0};t.bind("mousemove keydown DOMMouseScroll mousewheel mousedown reset.idle",o);var r=setInterval(function(){n>=i?(o(),e=!0,t.trigger("idle",!0)):n+=1e3},1e3);t.on("unload",function(){clearInterval(r)})},c.fn.resizeBars=function(){"youtube"==this._playlist.videos_array[this._playlist.videoid].videoType||"YouTube"==this.options.videoType?void 0!=this.youtubePlayer&&this._playlist.youtubeSTARTED&&(this.progressWidth=this.youtubePlayer.getCurrentTime()/this.youtubePlayer.getDuration()*this.videoTrack.width(),this.videoTrackProgress.css("width",this.progressWidth),this.progressIdleWidth=this.youtubePlayer.getCurrentTime()/this.youtubePlayer.getDuration()*this.progressIdleTrack.width(),this.progressIdle.css("width",this.progressIdleWidth),this.buffered=this.youtubePlayer.getVideoLoadedFraction(),this.downloadWidth=this.buffered*this.videoTrack.width(),this.videoTrackDownload.css("width",this.downloadWidth),this.progressIdleDownloadWidth=this.buffered*this.progressIdleTrack.width(),this.progressIdleDownload.css("width",this.progressIdleDownloadWidth)):"HTML5"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=this.options.videoType||(this.downloadWidth=this.buffered/this.video.duration*this.videoTrack.width(),this.videoTrackDownload.css("width",this.downloadWidth),this.progressWidth=this.video.currentTime/this.video.duration*this.videoTrack.width(),this.videoTrackProgress.css("width",this.progressWidth),this.progressIdleDownloadWidth=this.buffered/this.video.duration*this.progressIdleTrack.width(),this.progressIdleDownload.css("width",this.progressIdleDownloadWidth),this.progressIdleWidth=this.video.currentTime/this.video.duration*this.progressIdleTrack.width(),this.progressIdle.css("width",this.progressIdleWidth),this.progressWidthAD=this.videoAD.currentTime/this.videoAD.duration*this.elementAD.width(),this.progressAD.css("width",this.progressWidthAD))},c.fn.createPopup=function(){var e=this;this.adImg=t("<div/>"),this.adImg.addClass("stellar_vp_popup"),this.image=new Image,this.image.src=this._playlist.videos_array[this._playlist.videoid].popupImg,t(this.image).on("load",function(){e.adImg.append(e.image),e.positionPopup(),e.adImg.append(e.adClose)}),this.element.append(this.adImg),this.adImg.hide(),this.adImg.css({opacity:0}),this.popupBtnClose=t("<div />"),this.popupBtnClose.addClass("stellar_vp_btnClose stellar_vp_themeColorText"),this.infoWindow.append(this.popupBtnClose),this.popupBtnClose.css({bottom:0}),this.adImg.append(this.popupBtnClose),this.popupBtnCloseIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-times-circle").addClass("stellar_vp_themeColor"),this.popupBtnClose.append(this.popupBtnCloseIcon),this.popupBtnClose.bind(this.CLICK_EV,t.proxy(function(){e.adOn=!0,e.togglePopup()},this)),this.popupBtnClose.mouseover(function(){t(this).stop().animate({opacity:.7},200)}),this.popupBtnClose.mouseout(function(){t(this).stop().animate({opacity:1},200)})},c.fn.positionPopup=function(){this.adImg.css({bottom:this.controls.height()+20,left:this.element.width()/2-this.adImg.width()/2})},c.fn.newAd=function(){var e=this;this.adImg.hide(),this.image.src="",this.image.src=this._playlist.videos_array[this._playlist.videoid].popupImg,this.adOn||t(this.image).bind(this.START_EV,function(){window.open(e._playlist.videos_array[e._playlist.videoid].popupAdGoToLink),"youtube"!=e._playlist.videos_array[e._playlist.videoid].videoType&&"YouTube"!=e.options.videoType||e.youtubePlayer.pauseVideo(),"HTML5"!=e._playlist.videos_array[e._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=e.options.videoType||e.pause()})},c.fn.createLogo=function(){var e=this;this.logoImg=t("<div/>"),this.logoImg.addClass("stellar_vp_logo"),this.img=new Image,this.img.src=e.options.logoPath,t(this.img).on("load",function(){e.logoImg.append(e.img),e.positionLogo()}),e.options.logoShow&&this.element.append(this.logoImg),e.options.logoClickable&&(this.logoImg.bind(this.CLICK_EV,t.proxy(function(){window.open(e.options.logoGoToLink)},this)),this.logoImg.mouseover(function(){t(this).stop().animate({opacity:.8},200)}),this.logoImg.mouseout(function(){t(this).stop().animate({opacity:1},200)}),t(".stellar_vp_logo").css("cursor","pointer"))},c.fn.positionVolumeTrackWrapper=function(){this.volumeTrackWrapper.css({left:this.unmuteBtnWrapper.position().left+this.unmuteBtnWrapper.width()})},c.fn.positionLogo=function(){var t;"youtube"==this._playlist.videos_array[this._playlist.videoid].videoType||"YouTube"==this.options.videoType?t=70:"HTML5"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=this.options.videoType||(t=70),"bottom-right"==this.options.logoPosition?this.logoImg.css({bottom:t,right:buttonsMargin}):"bottom-left"==this.options.logoPosition&&this.logoImg.css({bottom:t,left:buttonsMargin})},c.fn.positionQualityWindow=function(){this.qualityWindow_mask.css({left:this.controlsBtnsWrapperRight.position().left+this.qualityBtnWrapper.position().left-50+16-4,bottom:this.controls.height()+6+20})},c.fn.positionShareMask=function(){this.shareWindow_mask.css({left:this.controlsBtnsWrapperRight.position().left+this.shareBtn.position().left-55.5+16-2.5,bottom:this.controls.height()+6+20})},c.fn.showVideoElements=function(){this.videoElement.show(),this.videoElementAD.show()},c.fn.hideVideoElements=function(){this.videoElement.hide(),this.videoElementAD.hide()},c.fn.createAds=function(){var e=this;adsImg=t("<div/>"),adsImg.addClass("ads"),image=new Image,image.src=e._playlist.videos_array[0].adsPath,t(image).on("load",function(){adsImg.append(image),e.positionAds()}),this.element.append(adsImg),adsImg.hide()},c.fn.positionAds=function(){adsImg.css({bottom:this.controls.height()+5,left:this.element.width()/2-adsImg.width()/2})},c.fn.setupAutoplay=function(){this.options.lightBox||(this.options.autoplay?this.isMobile.any()?this.playButtonScreen.show():this.play():this.options.autoplay||(this.pause(),this.preloader.hide()))},c.fn.createNowPlayingText=function(){this.options.loadRandomVideoOnStart?(this.nowPlayingTitle.append('<p class="screen stellar_vp_nowPlayingText '+this.options.instanceTheme+'">'+this._playlist.videos_array[this._playlist.rand].title+"</p>"),this.nowPlayingTitleControlBar.append('<p class="controls stellar_vp_nowPlayingText '+this.options.instanceTheme+'">'+this._playlist.videos_array[this._playlist.rand].title+"</p>")):(this.nowPlayingTitle.append('<p class="screen stellar_vp_nowPlayingText '+this.options.instanceTheme+'">'+this._playlist.videos_array[0].title+"</p>"),this.nowPlayingTitleControlBar.append('<p class="controls stellar_vp_nowPlayingText '+this.options.instanceTheme+'">'+this._playlist.videos_array[0].title+"</p>")),this.nowPlayingTitleW=this.nowPlayingTitle.width(),this.options.nowPlayingText||this.nowPlayingTitle.hide()},c.fn.createInfoWindowContent=function(){this.options.loadRandomVideoOnStart?(this.infoWindow.append('<p class="stellar_vp_infoTitle stellar_vp_themeColorText stellar_vp_titles">'+this._playlist.videos_array[this._playlist.rand].title+"</p>"),this.infoWindow.append('<p class="stellar_vp_infoText stellar_vp_infoText '+this.options.instanceTheme+'">'+this._playlist.videos_array[this._playlist.rand].info_text+"</p>")):(this.infoWindow.append('<p class="stellar_vp_infoTitle stellar_vp_themeColorText stellar_vp_titles">'+this._playlist.videos_array[0].title+"</p>"),this.infoWindow.append('<p class="stellar_vp_infoText stellar_vp_infoText '+this.options.instanceTheme+'">'+this._playlist.videos_array[0].info_text+"</p>")),this.infoWindow.css({top:this.screenBtnsWindow.position().top+this.infoBtn.height()+10,right:-20,opecity:0}).hide()},c.fn.createNextVideoBox=function(){var e=this;this.nextVideoBox_mask=t("<div />"),this.nextVideoBox_mask.addClass("stellar_vp_nextVideoBoxMask").hide(),this.element&&this.element.append(this.nextVideoBox_mask),this.nextVideoBox=t("<div />").addClass("stellar_vp_nextVideoBox").addClass("stellar_vp_bg "+this.options.instanceTheme),this.nextVideoBox_mask.append(this.nextVideoBox),this.i=document.createElement("img"),this.i.src=e._playlist.videos_array[e._playlist.videoid+1].thumbnail_image,this.nextVideoBox.append(this.i),t(".stellar_vp_nextVideoBox img").addClass("stellar_vp_nextVideoBoxImage stellar_vp_themeColorThumbBorder"),this.nextVideoBoxTitle=t("<div />").addClass("stellar_vp_nextVideoBoxContentLeft"),this.nextVideoBox.append(this.nextVideoBoxTitle),this.nextVideoBoxTitle.append('<p class="stellar_vp_nextVideoBoxTitle">'+e._playlist.videos_array[e._playlist.videoid+1].title+"</p>"),t(this.nextVideoBoxTitle).find(".stellar_vp_nextVideoBoxTitle").addClass("stellar_vp_controlsColor "+this.options.instanceTheme),this.nextVideoBox_mask.css({left:e.timeElapsed.position().left+e.timeElapsed.width()+10,bottom:e.controls.height()+6}),this.nextVideoBox.css({top:e.nextVideoBox.height(),opacity:0}),this._playlist.nextBtn.mouseover(function(){e.nextVideoBoxOn=!1,e.toggleNextVideoBox()}),this._playlist.nextBtn.mouseout(function(){e.nextVideoBoxOn=!0,e.toggleNextVideoBox()})},c.fn.createSkipAd=function(){var e=this;this.skipAdBox=t("<div />").addClass("stellar_vp_skipAdBox").bind(e.CLICK_EV,function(){e.closeAD()}).hide(),this.elementAD.append(this.skipAdBox),this.skipAdBoxContentLeft=t("<div />").addClass("stellar_vp_skipAdBoxContentLeft"),this.skipAdBox.append(this.skipAdBoxContentLeft),this.skipAdBoxContentLeft.append('<p class="stellar_vp_skipAdTitle">'+this.options.skipAdvertisementText+"</p>"),this.skipAdBoxIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-step-forward-ad"),this.skipAdBox.append(this.skipAdBoxIcon)},c.fn.createSkipAdCount=function(){this.skipAdCount=t("<div />").addClass("stellar_vp_skipAdCount").hide(),this.elementAD.append(this.skipAdCount),this.i=document.createElement("img"),this.i.src=this._playlist.videos_array[this._playlist.videoid].thumbnail_image,this.skipAdCount.append(this.i),t(".stellar_vp_skipAdCount img").addClass("stellar_vp_skipAdCountImage stellar_vp_themeColorThumbBorder"),this.skipAdCountContentLeft=t("<div />").addClass("stellar_vp_skipAdCountContentLeft"),this.skipAdCount.append(this.skipAdCountContentLeft),this.skipAdCountContentLeft.append('<p class="stellar_vp_skipAdCountTitle"></p>'),this.skipAdCount.css({right:-this.skipAdCount.width(),bottom:28}).hide()},c.fn.createAdTogglePlay=function(){var e=this;this.toggleAdPlayBox=t("<div />").addClass("stellar_vp_toggleAdPlayBox").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-playScreen "+this.options.instanceTheme).bind(e.CLICK_EV,function(){e.togglePlayAD(),e.ADTriggered=!0}).hide(),this.elementAD.append(this.toggleAdPlayBox)},c.fn.createVideoAdTitleInsideAD=function(){this.videoAdBoxInside=t("<div />"),this.videoAdBoxInside.addClass("stellar_vp_videoAdBoxInside"),this.elementAD.append(this.videoAdBoxInside),this.videoAdBoxInside.append('<div class="stellar_vp_adsTitleInside">'+this.options.advertisementTitle+" </div>"),this.videoAdBoxInside.append(this.timeLeftInside),this.videoAdBoxInside.hide()},c.fn.createEmbedWindowContent=function(){var e=this;t(this.embedWindow).append('<p class="stellar_vp_embedTitle2 stellar_vp_themeColorText stellar_vp_titles">'+e.options.embedWindowTitle2+"</p>"),this.embedTxt=t("<p />").addClass("stellar_vp_embedText").addClass("stellar_vp_embedText "+this.options.instanceTheme),this.embedWindow.append(this.embedTxt),this.copy=t("<div />").attr("title","Copy to clipboard").attr("id","stellar_vp_copy").addClass("copyBtn").addClass(this.options.instanceTheme),this.embedWindow.append(this.copy),t(this.embedWindow).find("#stellar_vp_copy").append('<p id="stellar_vp_copyInside" class="stellar_vp_copyInside '+this.options.instanceTheme+'">'+e.options.copyTxt+"</p>"),t(this.embedWindow).append('<p class="stellar_vp_embedTitle3 stellar_vp_themeColorText stellar_vp_titles">'+e.options.embedWindowTitle3+"</p>"),this.embedTxt2=t("<p />").addClass("stellar_vp_embedText2").addClass("stellar_vp_embedText "+this.options.instanceTheme),this.embedWindow.append(this.embedTxt2),this.copy2=t("<div />").attr("title","Copy to clipboard").attr("id","stellar_vp_copy2").addClass("copyBtn").addClass(this.options.instanceTheme),this.embedWindow.append(this.copy2),t(this.embedWindow).find("#stellar_vp_copy2").append('<p id="stellar_vp_copyInside" class="stellar_vp_copyInside '+this.options.instanceTheme+'">'+e.options.copyTxt+"</p>");var i=this.options.embedCodeSrc,n=this.options.videoPlayerWidth,o=this.options.videoPlayerHeight;t(this.embedWindow).find(".stellar_vp_embedText").text("<iframe src='"+i+"' width='"+n+"' height='"+o+"' frameborder=0 webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>"),this.updateEmbedText2(),this.copy.bind(this.CLICK_EV,function(){var i=t("<input>");t("body").append(i),i.val(e.embedTxt.text()).select(),document.execCommand("copy"),i.remove(),t(e.copy2).find(".stellar_vp_copyInside").text(e.options.copyTxt),t(this).find(".stellar_vp_copyInside").text(e.options.copiedTxt),t(e.embedTxt).addClass("stellar_vp_highlightText"),t(e.embedTxt2).removeClass("stellar_vp_highlightText")}),this.copy2.bind(this.CLICK_EV,function(){var i=t("<input>");t("body").append(i),i.val(e.embedTxt2.text()).select(),document.execCommand("copy"),i.remove(),t(e.copy).find(".stellar_vp_copyInside").text(e.options.copyTxt),t(this).find(".stellar_vp_copyInside").text(e.options.copiedTxt),t(e.embedTxt2).addClass("stellar_vp_highlightText"),t(e.embedTxt).removeClass("stellar_vp_highlightText")})},c.fn.updateEmbedText2=function(){var e=window.location.href;e.indexOf("?id=")>=0?(e=e.split("?")[0],t(this.embedWindow).find(".stellar_vp_embedText2").text(e+"?id="+this._playlist.videoid)):t(this.embedWindow).find(".stellar_vp_embedText2").text(e+"?id="+this._playlist.videoid),t(this.copy).find(".stellar_vp_copyInside").text(this.options.copyTxt),t(this.copy2).find(".stellar_vp_copyInside").text(this.options.copyTxt),t(this.embedTxt).removeClass("stellar_vp_highlightText"),t(this.embedTxt2).removeClass("stellar_vp_highlightText")},c.fn.updateNextBtnImg=function(){this.i.src=this._playlist.videos_array[this._playlist.videoid].thumbnail_image},c.fn.ready=function(t){this.readyList.push(t),this.loaded&&t.call(this)},c.fn.load=function(e){var i=this;e&&(this.sources=e),"string"==typeof this.sources&&(this.sources={src:this.sources}),t.isArray(this.sources)||(this.sources=[this.sources]),this.ready(function(){this.change("loading"),"HTML5"!=i._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=i.options.videoType||this.video.loadSources(this.sources,i._playlist.videos_array[this._playlist.videoid].currentTime)})},c.fn.closeAD=function(){this.options.allowSkipAd&&(this.skipAdBox.hide(),this.skipAdCount.hide());var e=!0;t.isArray(this.sourcesAD)&&(this.sourcesAD.splice(0,1),this.sourcesAD.length>0&&!this.midrollActive&&(e=!1,this.loadAD(this.sourcesAD),this.openAD())),e&&(clearInterval(this.myInterval),this.videoPlayingAD=!0,this.togglePlayAD(),this.resetPlayerAD(),this.elementAD.css({zIndex:1}),this.videoElementAD.empty(),this.videoAdBoxInside.hide(),this.removeListenerProgressAD(),this.fsEnterADBox.hide(),this.toggleAdPlayBox.hide(),this.progressADBg.hide(),this._playlist.videoAdPlayed=!0,"youtube"==this._playlist.videos_array[this._playlist.videoid].videoType||"YouTube"==this.options.videoType?(this.ytWrapper.css({visibility:"visible"}),this.hideVideoElements(),void 0!=this.youtubePlayer&&this.youtubePlayer.playVideo()):"HTML5"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=this.options.videoType||(this.showVideoElements(),this.togglePlay(),this.video.play()))},c.fn.openAD=function(){this.showVideoElements(),this.progressADBg.show(),this.elementAD.css({zIndex:555559}),this.ytWrapper.css({visibility:"hidden"}),this.videoAdBoxInside.show(),this.options.allowSkipAd&&(this.skipBoxOn=!0,this.toggleSkipAdBox(),this.skipCountOn=!1,this.toggleSkipAdCount()),this.fsEnterADBox.show(),this._inFullscreen||this.resizeAll(),this.isMobile.any()?this.ADTriggered||(this.toggleAdPlayBox.show(),this.videoPlayingAD=!0,this.togglePlayAD()):this.toggleAdPlayBox.hide(),this.options.allowSkipAd&&(this.setSkipTimer(),t(".stellar_vp_skipAdCountTitle").text(this.options.skipAdText+" "+this.counter+" s"),this.i.src=this._playlist.videos_array[this._playlist.videoid].thumbnail_image)},c.fn.loadAD=function(e,i){switch(this.preloaderAD.stop().animate({opacity:1},0,function(){t(this).show()}),e&&(this.sourcesAD=e),"string"==typeof this.sourcesAD&&(this.sourcesAD={src:this.sourcesAD}),t.isArray(this.sourcesAD)||(this.sourcesAD=[this.sourcesAD]),this.ready(function(){this.change("loading"),this.videoAD.loadSources(this.sourcesAD)}),i){case"prerollActive":this.prerollActive=!0,this.midrollActive=!1,this.postrollActive=!1;break;case"midrollActive":this.prerollActive=!1,this.midrollActive=!0,this.postrollActive=!1;break;case"postrollActive":this.prerollActive=!1,this.midrollActive=!1,this.postrollActive=!0}},c.fn.play=function(){this.playButtonScreen.hide(),this.playBtn.removeClass("fa-stellar-play").addClass("fa-stellar-pause"),this.mouseOverPlayBtn&&this.playBtn.removeClass("fa-stellar-play-zoom").addClass("fa-stellar-pause-zoom"),"HTML5"==this._playlist.videos_array[this._playlist.videoid].videoType||"HTML5 (self-hosted)"==this.options.videoType?this.video.play():"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||this.video.pause(),1!=this._playlist.videos_array[this._playlist.videoid].prerollAD&&"yes"!=this._playlist.videos_array[this._playlist.videoid].prerollAD||0!=this.videoAdStarted||this.options.showGlobalPrerollAds||(this.video.pause(),this.videoAdStarted||1!=this._playlist.videos_array[this._playlist.videoid].prerollAD&&"yes"!=this._playlist.videos_array[this._playlist.videoid].prerollAD||(this.myVideo.canPlayType&&this.myVideo.canPlayType("video/mp4").replace(/no/,"")&&(this.canPlay=!0,this.video_pathAD=this._playlist.videos_array[this._playlist.videoid].preroll_mp4),this.loadAD(this.video_pathAD,"prerollActive"),this.openAD()),this.videoAdStarted=!0)},c.fn.pause=function(){"HTML5"==this._playlist.videos_array[this._playlist.videoid].videoType||"HTML5 (self-hosted)"==this.options.videoType?(this.html5STARTED||""==this.options.posterImg)&&(this.is_iOSVolumeButtonScreen?this.playButtonScreen.hide():this.playButtonScreen.show()):"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||(this._playlist.youtubeSTARTED||""==this.options.posterImg?this.playButtonScreen.show():this.playButtonScreen.hide()),this.playBtn.removeClass("fa-stellar-pause").addClass("fa-stellar-play"),this.mouseOverPlayBtn&&this.playBtn.removeClass("fa-stellar-pause-zoom").addClass("fa-stellar-play-zoom"),this.video.pause()},c.fn.stop=function(){this.seek(0),this.pause()},c.fn.hideOverlay=function(){void 0!=this.overlay&&(this.overlay.hide(),this.poster2Showing=!1,this.playButtonPoster.hide(),"youtube"==this._playlist.videos_array[this._playlist.videoid].videoType||"YouTube"==this.options.videoType?(this.youtubePlayer.playVideo(),"default controls"==this.options.youtubeControls&&this.element.css("visibility","hidden")):"HTML5"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=this.options.videoType||this.togglePlay())},c.fn.togglePlay=function(){"stellar_vp_playing"==this.state?(this.pause(),"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||this.youtubePlayer.pauseVideo()):(this.play(),"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||this.youtubePlayer.playVideo())},c.fn.toggleNextVideoBox=function(){var e=this;this.nextVideoBoxOn?(this.nextVideoBox.stop().animate({top:e.nextVideoBox.height(),opacity:0},200,function(){t(e.nextVideoBox_mask).hide()}),this.nextVideoBoxOn=!1):(this.nextVideoBox_mask.show(),this.nextVideoBox.stop().animate({top:0,opacity:1},500),this.nextVideoBoxOn=!0)},c.fn.toggleSkipAdBox=function(){this.skipBoxOn?(this.skipAdBox.stop().animate({right:-(this.skipAdBox.width()-2),bottom:28},200,function(){t(this).hide()}),this.skipBoxOn=!1):(this.skipAdBox.show(),this.addListenerProgressAD(),this.skipAdBox.stop().animate({right:10,bottom:28},500),this.skipBoxOn=!0)},c.fn.toggleSkipAdCount=function(){this.skipCountOn?(this.skipAdCount.stop().animate({right:-(this.skipAdCount.width()-2),bottom:28},200,function(){t(this).hide()}),this.skipCountOn=!1):(this.skipAdCount.show(),this.skipAdCount.stop().animate({right:10,bottom:28},500),this.skipCountOn=!0)},c.fn.toggleInfoWindow=function(){this.infoOn?(this.infoWindow.stop().animate({right:-20,opacity:0},200,function(){t(this).hide()}),this.infoOn=!1):(this.infoWindow.show(),this.infoWindow.stop().animate({right:0,opacity:1},200),this.infoOn=!0)},c.fn.toggleLightBox=function(){this.lightBoxOn?(this.lightBoxOverlay.stop().animate({opacity:0},300,function(){t(this).hide()}),this.lightBoxOn=!1,this.pause(),this.YTAPIReady&&this.youtubePlayer.pauseVideo(),this.videoPlayingAD=!0,this.togglePlayAD(),t(".stellar_vp_lightBoxThumbnailWrap").each(function(e,i){t(this).find(".stellar_vp_playButtonScreen").css({zIndex:2147483647})})):(this.lightBoxOverlay.show(),this.lightBoxOverlay.stop().animate({opacity:1},300),this.lightBoxOn=!0,this.options.lightBoxAutoplay&&(this.lightBoxInitiated?1==this._playlist.videos_array[this._playlist.videoid].prerollAD||"yes"==this._playlist.videos_array[this._playlist.videoid].prerollAD||this.options.showGlobalPrerollAds?this._playlist.videoAdPlayed?(this.play(),this.YTAPIReady&&this.youtubePlayer.playVideo()):(this.videoPlayingAD=!1,this.togglePlayAD()):(this.play(),this.YTAPIReady&&this.youtubePlayer.playVideo()):(this.playVideoById(this._playlist.videoid),this.lightBoxInitiated=!0)),t(".stellar_vp_lightBoxThumbnailWrap").each(function(e,i){t(this).find(".stellar_vp_playButtonScreen").css({zIndex:2147483646})})),this.resizeAll()},c.fn.toggleQualityWindow=function(e){var i,n=this;i=e||0,this.qualityOn?(this.qualityWindow.stop().delay(i).animate({top:200,opacity:0},200,function(){t(n.qualityWindow_mask).hide()}),this.qualityOn=!1):(this.qualityWindow_mask.show(),this.qualityWindow.stop().delay(i).animate({top:0,opacity:1},500),this.qualityOn=!0)},c.fn.togglePopup=function(){this.adOn?(this.adImg.animate({opacity:0},0,function(){t(this).hide()}),this.adOn=!1):this.adOn||(this.adImg.show(),this.adImg.animate({opacity:1},500),this.adOn=!0)},c.fn.toggleShuffleBtn=function(){this.shuffleBtnEnabled?(this.removeColorAccent(t("#stellar_vp_shuffleBtn")),t(this._playlist.shuffleBtnIcon).removeClass("stellar_vp_enabled_shuffle"),this.shuffleBtnEnabled=!1):(t(this.mainContainer).find(".fa-stellar-random").addClass("stellar_vp_themeColorButton"),t(this.mainContainer).find(".fa-stellar-random-zoom").addClass("stellar_vp_themeColorButton"),t(this._playlist.shuffleBtnIcon).addClass("stellar_vp_enabled_shuffle"),this.shuffleBtnEnabled=!0,this.setColorAccent(t(".stellar_vp_Progress").css("backgroundColor"),t("#stellar_vp_shuffleBtn")))},c.fn.toggleAutoplayBtn=function(){this.toggleAutoplayBtnEnabled?(this.removeColorAccent(t("#stellar_vp_toggleAutoplayBtn")),t(this.mainContainer).find(".fa-stellar-toggle-on").removeClass("fa-stellar-toggle-on").addClass("fa-stellar-toggle-off"),t(this.mainContainer).find(".fa-stellar-toggle-on-zoom").removeClass("fa-stellar-toggle-on-zoom").addClass("fa-stellar-toggle-off-zoom"),t(this._playlist.toggleAutoplayBtnIcon).removeClass("stellar_vp_enabled_autoplay"),this.toggleAutoplayBtnEnabled=!1):(t(this.mainContainer).find(".fa-stellar-toggle-off").removeClass("fa-stellar-toggle-off").addClass("fa-stellar-toggle-on"),t(this.mainContainer).find(".fa-stellar-toggle-off-zoom").removeClass("fa-stellar-toggle-off-zoom").addClass("fa-stellar-toggle-on-zoom"),t(this.mainContainer).find(".fa-stellar-toggle-on").addClass("stellar_vp_themeColorButton"),t(this._playlist.toggleAutoplayBtnIcon).addClass("stellar_vp_enabled_autoplay"),this.toggleAutoplayBtnEnabled=!0,this.setColorAccent(t(".stellar_vp_Progress").css("backgroundColor"),t("#stellar_vp_toggleAutoplayBtn")))},c.fn.toggleQualityBtn=function(){this.qualityBtnEnabled?(this.removeColorAccent(t("#stellar_vp_qualityBtn")),this.qualityBtn.removeClass("stellar_vp_enabled_quality"),this.qualityBtnEnabled=!1):(t(this.mainContainer).find(".fa-stellar-cog").addClass("stellar_vp_themeColorButton"),t(this.mainContainer).find(".fa-stellar-cog-zoom").addClass("stellar_vp_themeColorButton"),this.qualityBtn.addClass("stellar_vp_enabled_quality"),this.qualityBtnEnabled=!0,this.setColorAccent(t(".stellar_vp_Progress").css("backgroundColor"),t("#stellar_vp_qualityBtn")))},c.fn.toggleShareBtn=function(){this.shareBtnEnabled?(this.removeColorAccent(t("#stellar_vp_shareBtn")),this.shareBtn.removeClass("stellar_vp_enabled_share"),this.shareBtnEnabled=!1):(t(this.mainContainer).find(".fa-stellar-external").addClass("stellar_vp_themeColorButton"),t(this.mainContainer).find(".fa-stellar-external-zoom").addClass("stellar_vp_themeColorButton"),this.shareBtn.addClass("stellar_vp_enabled_share"),this.shareBtnEnabled=!0,this.setColorAccent(t(".stellar_vp_Progress").css("backgroundColor"),t("#stellar_vp_shareBtn")))},c.fn.toggleEmbedBtn=function(){this.embedBtnEnabled?(this.removeColorAccent(t("#stellar_vp_embedBtn")),this.embedBtn.removeClass("stellar_vp_enabled_embed"),this.embedBtnEnabled=!1):(t(this.mainContainer).find(".fa-stellar-code").addClass("stellar_vp_themeColorButton"),t(this.mainContainer).find(".fa-stellar-code-zoom").addClass("stellar_vp_themeColorButton"),this.embedBtn.addClass("stellar_vp_enabled_embed"),this.embedBtnEnabled=!0,this.setColorAccent(t(".stellar_vp_Progress").css("backgroundColor"),t("#stellar_vp_embedBtn")))},c.fn.toggleShareWindow=function(){var e=this;this.shareOn?(this.shareWindow.stop().delay(0).animate({top:32,opacity:0},200,function(){t(e.shareWindow_mask).hide()}),this.shareOn=!1):(this.shareWindow_mask.show(),this.shareWindow.stop().delay(0).animate({top:0,opacity:1},200),this.shareOn=!0)},c.fn.togglePlayAD=function(){this.videoPlayingAD?(this.videoAD.pause(),this.videoPlayingAD=!1,this.toggleAdPlayBox.show()):(this.videoAD.play(),this.videoPlayingAD=!0,this.toggleAdPlayBox.hide())},c.fn.toggleEmbedWindow=function(){this.embedOn?(t(this.embedWindow).stop().animate({top:-this.embedWindow.height()},200,function(){t(this).hide()}),this.embedOn=!1):(t(this.embedWindow).show(),t(this.embedWindow).stop().animate({top:0},500),this.embedOn=!0),this.adjustSidebarBtnVisibility()},c.fn.adjustSidebarBtnVisibility=function(){this.embedOn?("Right playlist"==this.options.playlist&&!this._inFullscreen&&this.stretching&&this.sidebarBtn.hide(),"Bottom playlist"==this.options.playlist&&this.sidebarBtn.hide()):("Right playlist"==this.options.playlist&&!this._inFullscreen&&this.stretching&&this.sidebarBtn.show(),"Bottom playlist"==this.options.playlist&&this.sidebarBtn.show())},c.fn.toggleFullScreen=function(t){t=document.body,this._inFullscreen?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),"fitToContainer"!=this.options.playerLayout&&"fixedSize"!=this.options.playerLayout||this.mainContainer.parent().css("position","relative"),this._inFullscreen=!1):(t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.mainContainer.parent().css("position",""),this._inFullscreen=!0),this.resize()},c.fn.seek=function(t){this.video.setCurrentTime(t)},c.fn.setVolume=function(t){this.video.setVolume(t)},c.fn.getVolume=function(){return this.video.getVolume()},c.fn.mute=function(t){"undefined"==typeof t&&(t=!0),this.setVolume(t?1:0)},c.fn.remove=function(){this.element.remove()},c.fn.bind=function(){this.videoElement.bind.apply(this.videoElement,arguments)},c.fn.one=function(){this.videoElement.one.apply(this.videoElement,arguments)},c.fn.trigger=function(){this.videoElement.trigger.apply(this.videoElement,arguments)};for(var u=["click","dblclick","onerror","onloadeddata","oncanplay","ondurationchange","ontimeupdate","onprogress","onpause","onplay","onended","onvolumechange"],h=0;h<u.length;h++)!function(){var e=u[h],i=e.replace(/^(on)/,"");c.fn[e]=function(){var e=t.makeArray(arguments);e.unshift(i),this.bind.apply(this,e)}}();c.fn.triggerReady=function(){this.loaded=!0,t("video").each(function(){enableInlineVideo(this)})},c.fn.setupElement=function(){switch(this.mainContainer=t("<div />"),this.mainContainer.addClass("stellar_vp_mainContainer"),"fitToContainer"==this.options.playerLayout||"fitToBrowser"==this.options.playerLayout?this.mainContainer.css({width:"100%",height:"100%",position:"absolute",background:"#000000",zIndex:999999}):"fixedSize"==this.options.playerLayout&&this.mainContainer.css({width:this.options.videoPlayerWidth,height:this.options.videoPlayerHeight,position:"absolute",background:"#000000",zIndex:999999}),this.options.videoPlayerShadow){case"effect1":this.mainContainer.addClass("stellar_vp_effect1");break;case"effect2":this.mainContainer.addClass("stellar_vp_effect2");break;case"effect3":this.mainContainer.addClass("stellar_vp_effect3");break;case"effect4":this.mainContainer.addClass("stellar_vp_effect4");break;case"effect5":this.mainContainer.addClass("stellar_vp_effect5");break;case"effect6":this.mainContainer.addClass("stellar_vp_effect6")}this.parent.append(this.mainContainer),this.options.lightBox&&(this.mainContainerBG=t("<div />"),this.mainContainerBG.addClass("stellar_vp_mainContainerBG"),this.mainContainer.append(this.mainContainerBG)),this.element=t("<div />"),this.element.addClass("stellar_vp_videoPlayer"),this.mainContainer.append(this.element),this.ytWrapper=t("<div></div>"),this.ytWrapper.addClass("stellar_vp_ytWrapper"),this.element.append(this.ytWrapper),this.ytPlayer=t("<div></div>"),this.ytPlayer.attr("id",this.options.instanceName+"youtube"),this.ytWrapper.append(this.ytPlayer),this.imageWrapper=t("<div></div>"),this.imageWrapper.addClass("stellar_vp_imageWrapper"),this.element.append(this.imageWrapper),this.imageDisplayed=document.createElement("img"),this.imageWrapper.append(this.imageDisplayed),t(".stellar_vp_imageWrapper img").attr("id","stellar_vp_imageDisplayed")},c.fn.setupElementAD=function(){this.elementAD=t("<div />"),this.elementAD.addClass("stellar_vp_videoPlayerAD"),this.mainContainer.append(this.elementAD)},c.fn.idle=function(e,i){var n=this;i?"stellar_vp_playing"==this.state&&(this.options.showAllControls||n.controls.hide(),n.controls.stop().animate({bottom:-44},300,function(){n.videoTrackWrapper.hide()}),n.progressIdleTrack.stop().delay(800).animate({bottom:0},300),n.screenBtnsWindow.stop().animate({top:-n.screenBtnsWindow.height()},300),n.nowPlayingTitle.stop().animate({top:-n.nowPlayingTitle.height()},300),n.logoImg.stop().animate({opacity:0},300),n.timeTotal.stop().animate({opacity:0},300),n.timeElapsed.stop().animate({opacity:0},300),this.qualityOn=!0,this.toggleQualityWindow(),this.qualityBtnEnabled=!0,this.toggleQualityBtn(),this.shareOn=!0,this.toggleShareWindow(),this.shareBtnEnabled=!0,this.toggleShareBtn(),this.embedOn=!0,this.toggleEmbedWindow(),this.embedBtnEnabled=!0,this.toggleEmbedBtn(),this.infoOn=!0,this.toggleInfoWindow(),t(this.toolTip).stop().animate({opacity:0},50,function(){n.toolTip.hide()}),n.invisibleWrapper.show()):(n.options.showAllControls||n.controls.hide(),n.videoTrackWrapper.show(),n.controls.stop().animate({bottom:0},300),n.progressIdleTrack.stop().animate({bottom:-n.options.progressBarThicknessOnMouseover},100),n.screenBtnsWindow.stop().animate({top:0},300),n.nowPlayingTitle.stop().animate({top:0},300),n.logoImg.stop().animate({opacity:1},300),n.timeTotal.stop().animate({opacity:1},300),n.timeElapsed.stop().animate({opacity:1},300),this.invisibleWrapper.hide())},c.fn.hideControls=function(){var e=this;t(this.element).hover(function(){e.options.showAllControls||e.controls.hide(),e.videoTrackWrapper.show(),e.controls.stop().animate({bottom:0},300),e.progressIdleTrack.stop().animate({bottom:-e.options.progressBarThicknessOnMouseover},100),e.screenBtnsWindow.stop().animate({top:0},300),e.nowPlayingTitle.stop().animate({top:0},300),e.logoImg.stop().animate({opacity:1},300),e.timeTotal.stop().animate({opacity:1},300),e.timeElapsed.stop().animate({opacity:1},300)},function(){e.options.showAllControls||e.controls.hide(),e.controls.stop().animate({bottom:-44},300,function(){e.videoTrackWrapper.hide()}),e.progressIdleTrack.stop().delay(800).animate({bottom:0},300),e.screenBtnsWindow.stop().animate({top:-e.screenBtnsWindow.height()},300),e.nowPlayingTitle.stop().animate({top:-e.nowPlayingTitle.height()},300),e.logoImg.stop().animate({opacity:0},300),e.timeTotal.stop().animate({opacity:0},300),e.timeElapsed.stop().animate({opacity:0},300)})},c.fn.change=function(t){this.state=t,this.element&&(this.element.attr("data-state",this.state),this.element.trigger("state.videoPlayer",this.state))},c.fn.setupHTML5Video=function(){this.element&&this.element.append(this.videoElement),this.video=this.videoElement[0],this.element&&(this.element.width(this.playerWidth),this.element.height(this.playerHeight));var e=this;this.video.loadSources=function(t,i){for(var n in e.video.setCurrentTime(i||0),e.videoElement.empty(),t)if(-1!=t[n].src.indexOf("m3u8")){if(Hls.isSupported()){var o=new Hls;o.loadSource(t[n].src),o.attachMedia(e.video),o.on(Hls.Events.MANIFEST_PARSED,function(){})}}else e.videoElement.attr("src",t[n].src);e.video.load()},this.video.getStartTime=function(){return this.startTime||0},this.video.getEndTime=function(){return this.duration==1/0&&this.buffered?this.buffered.end(this.buffered.length-1):(this.startTime||0)+this.duration},this.video.getCurrentTime=function(){try{return this.currentTime}catch(t){return 0}},e=this,this.video.setCurrentTime=function(t){this.currentTime=t},this.video.getVolume=function(){return this.volume},this.video.setVolume=function(t){t>1&&(t=1),this.volume=e.options.showAllControls?t:1},this.videoElement.dblclick(t.proxy(function(){this.toggleFullScreen()},this)),this.videoElement.bind(this.CLICK_EV,t.proxy(function(){this.togglePlay()},this)),this.triggerReady()},c.fn.setupHTML5VideoAD=function(){this.elementAD&&this.elementAD.append(this.videoElementAD),this.videoAD=this.videoElementAD[0],this.elementAD&&(this.elementAD.width(0),this.elementAD.height(0));var e=this;this.videoAD.loadSources=function(t){for(var i in e.videoElementAD.empty(),t){if(-1!=t[i].src.indexOf("m3u8")){if(Hls.isSupported()){var n=new Hls;n.loadSource(t[i].src),n.attachMedia(e.videoAD),n.on(Hls.Events.MANIFEST_PARSED,function(){})}}else e.videoElementAD.attr("src",t[i].src);break}e.videoAD.load(),e.videoPlayingAD=!!e.isMobile.any(),e.togglePlayAD()},this.videoAD.getStartTime=function(){return this.startTime||0},this.videoAD.getEndTime=function(){if(!isNaN(this.duration))return this.duration==1/0&&this.buffered?this.buffered.end(this.buffered.length-1):(this.startTime||0)+this.duration},this.videoAD.getCurrentTime=function(){try{return this.currentTime}catch(t){return 0}},this.videoAD.setCurrentTime=function(t){this.currentTime=t},this.videoAD.getVolume=function(){return this.volume},this.videoAD.setVolume=function(t){this.volume=t},this.videoElementAD.dblclick(t.proxy(function(){this.toggleFullScreen()},this)),this.triggerReady(),this.videoElementAD.bind(this.CLICK_EV,t.proxy(function(){this.options.showGlobalPrerollAds?""!=this.options.globalPrerollAdsGotoLink&&"globalPrerollAdsGotoLink"!=this.options.globalPrerollAdsGotoLink&&(window.open(this.options.globalPrerollAdsGotoLink),this.videoPlayingAD=!0,this.togglePlayAD()):(""==this._playlist.videos_array[this._playlist.videoid].prerollGotoLink||"prerollGotoLink"==this._playlist.videos_array[this._playlist.videoid].prerollGotoLink||1!=this._playlist.videos_array[this._playlist.videoid].prerollAD&&"yes"!=this._playlist.videos_array[this._playlist.videoid].prerollAD||(this.prerollActive&&window.open(this._playlist.videos_array[this._playlist.videoid].prerollGotoLink),this.videoPlayingAD=!0,this.togglePlayAD()),""==this._playlist.videos_array[this._playlist.videoid].midrollGotoLink||"midrollGotoLink"==this._playlist.videos_array[this._playlist.videoid].midrollGotoLink||1!=this._playlist.videos_array[this._playlist.videoid].midrollAD&&"yes"!=this._playlist.videos_array[this._playlist.videoid].midrollAD||(this.midrollActive&&window.open(this._playlist.videos_array[this._playlist.videoid].midrollGotoLink),this.videoPlayingAD=!0,this.togglePlayAD()),""==this._playlist.videos_array[this._playlist.videoid].postrollGotoLink||"postrollGotoLink"==this._playlist.videos_array[this._playlist.videoid].postrollGotoLink||1!=this._playlist.videos_array[this._playlist.videoid].postrollAD&&"yes"!=this._playlist.videos_array[this._playlist.videoid].postrollAD||(this.postrollActive&&window.open(this._playlist.videos_array[this._playlist.videoid].postrollGotoLink),this.videoPlayingAD=!0,this.togglePlayAD()))},this))},c.fn.setupButtonsOnScreen=function(){var e=this;this.screenBtnsWindow=t("<div></div>"),this.screenBtnsWindow.addClass("stellar_vp_screenBtnsWindow"),this.element&&this.element.append(this.screenBtnsWindow),this.options.showAllControls||this.screenBtnsWindow.hide(),this.infoBtn=t("<div />").addClass("stellar_vp_infoBtn").addClass("stellar_vp_playerElement").addClass("stellar_vp_btnOverScreen").addClass("stellar_vp_bg "+this.options.instanceTheme),this.element&&this.screenBtnsWindow.append(this.infoBtn),this.infoBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-overScreen").addClass("stellar-icon-overScreen "+this.options.instanceTheme).addClass("fa-stellar-info-circle"),this.infoBtn.append(this.infoBtnIcon),this.sidebarBtn=t("<div />").addClass("stellar_vp_sidebarBtn").addClass("stellar_vp_playerElement").addClass("stellar_vp_btnOverScreen").addClass("stellar_vp_bg "+this.options.instanceTheme),this.mainContainer.append(this.sidebarBtn),this.sidebarBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-overScreen").addClass("stellar-icon-overScreen "+this.options.instanceTheme).addClass("fa-stellar-chevron-circle-right"),this.sidebarBtn.append(this.sidebarBtnIcon),this.sidebarBtn.bind(this.CLICK_EV,function(){e.toggleStretch(),e.resizeAll()}),this.shareWindow=t("<div></div>"),this.shareWindow.addClass("stellar_vp_shareWindow"),this.shareWindow_mask=t("<div />"),this.shareWindow_mask.addClass("stellar_vp_shareWindowMask").hide(),this.element&&this.element.append(this.shareWindow_mask),this.shareWindow_mask.append(this.shareWindow),this.positionShareMask(),this.shareWindow.css({top:32,opacity:0}),this.facebookBtn=t("<div />").addClass("stellar_vp_facebookBtn").addClass("stellar_vp_playerElement").addClass("stellar_vp_socialBtn").addClass("stellar_vp_bg"),this.element&&this.shareWindow.append(this.facebookBtn),this.facebookBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-overScreen").addClass("fa-stellar-facebook"),this.facebookBtn.append(this.facebookBtnIcon),this.twitterBtn=t("<div />").addClass("stellar_vp_twitterBtn").addClass("stellar_vp_playerElement").addClass("stellar_vp_socialBtn").addClass("stellar_vp_bg"),this.element&&this.shareWindow.append(this.twitterBtn),this.twitterBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-overScreen").addClass("fa-stellar-twitter"),this.twitterBtn.append(this.twitterBtnIcon),this.mailBtn=t("<div />").addClass("stellar_vp_mailBtn").addClass("stellar_vp_playerElement").addClass("stellar_vp_socialBtn").addClass("stellar_vp_bg"),this.element&&this.shareWindow.append(this.mailBtn),this.mailBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-overScreen").addClass("fa-stellar-google-plus"),this.mailBtn.append(this.mailBtnIcon),this.facebookBtn.bind(this.CLICK_EV,t.proxy(function(){e.pause(),e.YTAPIReady&&e.youtubePlayer.pauseVideo();var i=t(window).width()/2-300,n=t(window).height()/2-200,o=window.open("https://www.facebook.com/dialog/feed?app_id=787376644686729&display=popup&name="+e.options.facebookShareName+"&link="+e.options.facebookShareLink+"&redirect_uri=https://facebook.com&description="+e.options.facebookShareDescription+"&picture="+e.options.facebookSharePicture,"popup","width=600, height=400, top="+n+", left="+i);window.focus&&o.focus()},this)),this.twitterBtn.bind(this.CLICK_EV,t.proxy(function(){e.pause(),e.YTAPIReady&&e.youtubePlayer.pauseVideo();var i=t(window).width()/2-300,n=t(window).height()/2-200,o=window.open("https://twitter.com/intent/tweet?text="+e.options.twitterText+"&url="+e.options.twitterLink+"&hashtags="+e.options.twitterHashtags+"&via="+e.options.twitterVia,"popup","width=600, height=400, top="+n+", left="+i);window.focus&&o.focus()},this)),this.mailBtn.bind(this.CLICK_EV,t.proxy(function(){e.pause(),e.YTAPIReady&&e.youtubePlayer.pauseVideo();var i=t(window).width()/2-300,n=t(window).height()/2-200,o=window.open("https://plus.google.com/share?url="+e.options.googlePlus,"popup","width=600, height=400, top="+n+", left="+i);window.focus&&o.focus()},this)),t(".stellar_vp_infoBtn, .stellar_vp_sidebarBtn, .stellar_vp_facebookBtn, .stellar_vp_twitterBtn, .stellar_vp_mailBtn").mouseover(function(){t(this).find(".stellar-icon-overScreen").removeClass("stellar-icon-overScreen").addClass("stellar-icon-overScreen-hover")}),t(".stellar_vp_infoBtn, .stellar_vp_sidebarBtn, .stellar_vp_facebookBtn, .stellar_vp_twitterBtn, .stellar_vp_mailBtn").mouseout(function(){t(this).find(".stellar-icon-overScreen-hover").removeClass("stellar-icon-overScreen-hover").addClass("stellar-icon-overScreen")}),t(".stellar_vp_btnOverScreen").mouseover(function(){}),t(".stellar_vp_btnOverScreen").mouseout(function(){}),e.options.shareShow||this.shareBtn.hide(),e.options.embedShow||this.embedBtn.hide(),e.options.infoShow||this.infoBtn.hide(),e.options.facebookShow||this.facebookBtn.hide(),e.options.twitterShow||this.twitterBtn.hide(),e.options.googlePlusShow||this.mailBtn.hide(),buttonsMargin=5,this.positionOverScreenButtons()},c.fn.convertHex=function(t,e){return t=t.replace("#",""),r=parseInt(t.substring(0,2),16),g=parseInt(t.substring(2,4),16),b=parseInt(t.substring(4,6),16),result="rgba("+r+","+g+","+b+","+e+")",result},c.fn.toggleStretch=function(){this.stretching?(this.shrinkPlayer(),this.stretching=!1,t(this.sidebarBtn).find(".fa-stellar-chevron-circle-left").removeClass("fa-stellar-chevron-circle-left").addClass("fa-stellar-chevron-circle-right"),t(this.sidebarBtn).find(".fa-stellar-chevron-circle-left-zoom").removeClass("fa-stellar-chevron-circle-left-zoom").addClass("fa-stellar-chevron-circle-right-zoom"),"Right playlist"==this.options.playlist&&this.screenBtnsWindow.css({right:0}),"Bottom playlist"==this.options.playlist&&this.screenBtnsWindow.css({right:this.sidebarBtn.width()+5})):(this.stretchPlayer(),this.stretching=!0,t(this.sidebarBtn).find(".fa-stellar-chevron-circle-right").removeClass("fa-stellar-chevron-circle-right").addClass("fa-stellar-chevron-circle-left"),t(this.sidebarBtn).find(".fa-stellar-chevron-circle-right-zoom").removeClass("fa-stellar-chevron-circle-right-zoom").addClass("fa-stellar-chevron-circle-left-zoom"),"Right playlist"==this.options.playlist&&this.screenBtnsWindow.css({right:this.sidebarBtn.width()+5}),"Bottom playlist"==this.options.playlist&&this.screenBtnsWindow.css({right:0})),this.resizeVideoTrack(),this.positionOverScreenButtons(),this.positionLogo(),this.positionPopup(),this.positionQualityWindow(),this.positionShareMask(),this.resizeBars(),this.resizeAll()},c.fn.stretchPlayer=function(){var e=this;"Right playlist"==this.options.playlist?t(e.element).stop().animate({width:e.mainContainer.width()},{duration:e.options.videoAnimationTime,step:function(t,i){e.positionElementsDuringAnimation(),e._isAnimation=!0},complete:function(){e._isAnimation=!1}}):"Bottom playlist"==this.options.playlist&&t(e.element).stop().animate({height:e.mainContainer.height()},{duration:e.options.videoAnimationTime,step:function(t,i){e.positionElementsDuringAnimation(),e._isAnimation=!0},complete:function(){e._isAnimation=!1}}),t(e._playlist.playlist).stop().animate({opacity:0},{duration:e.options.videoAnimationTime,step:function(t,e){}})},c.fn.shrinkPlayer=function(){var e=this;"Right playlist"==this.options.playlist?t(e.element).stop().animate({width:e.mainContainer.width()-e._playlist.playlist.width()},{duration:e.options.videoAnimationTime,step:function(t,i){e.positionElementsDuringAnimation(),e.elementAD.width(e.element.width()),e.elementAD.height(e.element.height()),e._isAnimation=!0},complete:function(){e._isAnimation=!1}}):"Bottom playlist"==this.options.playlist&&t(e.element).stop().animate({height:e.mainContainer.height()-e._playlist.playlist.height()},{duration:e.options.videoAnimationTime,step:function(t,i){e.positionElementsDuringAnimation(),e.elementAD.width(e.element.width()),e.elementAD.height(e.element.height()),e._isAnimation=!0},complete:function(){e._isAnimation=!1}}),t(e._playlist.playlist).stop().animate({opacity:1},{duration:e.options.videoAnimationTime,step:function(t,e){}})},c.fn.positionOverScreenButtons=function(){this.element&&(this._inFullscreen?(this.sidebarBtn.hide(),this.screenBtnsWindow.css({right:0})):"Right playlist"==this.options.playlist?(this.sidebarBtn.show(),this.screenBtnsWindow.css(this.stretching?{right:this.sidebarBtn.width()+5}:{right:0})):"Bottom playlist"==this.options.playlist?(this.sidebarBtn.show(),this.screenBtnsWindow.css({right:this.sidebarBtn.width()+5})):(this.sidebarBtn.hide(),this.screenBtnsWindow.css({right:0})))},c.fn.setupButtons=function(){var e=this;if(this.controlsBtnsWrapperRight=t("<div></div>"),this.controlsBtnsWrapperRight.addClass("stellar_vp_controlsBtnsWrapperRight"),this.controls.append(this.controlsBtnsWrapperRight),this.playBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_controlsBtn_play").addClass("stellar_vp_playerElement").bind(e.CLICK_EV,function(){e.togglePlay()}),this.playBtn=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-play").attr("id","stellar_vp_playBtn"),this.playBtnWrapper.append(this.playBtn),this._playlist.controlsBtnsWrapperLeft.prepend(this.playBtnWrapper),this.rewindBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement").bind(e.CLICK_EV,function(){e.seek(0),e.play(),void 0!=e.youtubePlayer&&(e.youtubePlayer.seekTo(0),e.youtubePlayer.playVideo())}),this.rewindBtn=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_rewindBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-retweet"),this.rewindBtnWrapper.append(this.rewindBtn),this.shareBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement").bind(e.CLICK_EV,function(){e.toggleShareWindow(),e.toggleShareBtn()}),this.shareBtn=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_shareBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-external-link"),this.shareBtnWrapper.append(this.shareBtn),this.embedBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement").bind(e.CLICK_EV,function(){e.toggleEmbedWindow(),e.toggleEmbedBtn()}),this.embedBtn=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_embedBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-code"),this.embedBtnWrapper.append(this.embedBtn),this.qualityBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement").bind(e.CLICK_EV,function(){e.toggleQualityBtn(),e.toggleQualityWindow(),t(this).children(":first").toggleClass("fa-stellar-rotate-90")}),this.qualityBtn=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_qualityBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-cog"),this.qualityBtnWrapper.append(this.qualityBtn),this.HD_indicator=t("<div />").addClass("stellar_vp_HD_indicator").addClass("stellar-icon-general").addClass("stellar_vp_qualityWindowText").text("HD").hide(),this.qualityBtnWrapper.append(this.HD_indicator),this.downloadBtnLink=t("<a />").attr("href",this._playlist.videos_array[this._playlist.videoid].video_path_mp4HD).attr("download","").hide(),this.downloadBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement").bind(e.CLICK_EV,function(){}),this.downloadBtnLink.append(this.downloadBtnWrapper),this.downloadBtn=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_downloadBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-download"),this.downloadBtnWrapper.append(this.downloadBtn),"HTML5"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=this.options.videoType||!this._playlist.videos_array[this._playlist.videoid].enable_mp4_download&&"yes"!=this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||this.downloadBtnLink.show(),e.options.shuffle?(this.shuffleBtnEnabled=!1,this.toggleShuffleBtn()):this.shuffleBtnEnabled=!1,"Play next video"==e.options.onFinish?(this.toggleAutoplayBtnEnabled=!1,this.toggleAutoplayBtn()):this.toggleAutoplayBtnEnabled=!1,this.playButtonScreen=t("<div />"),this.playButtonScreen.addClass("stellar_vp_playButtonScreen").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-playScreen "+this.options.instanceTheme).hide(),this.playButtonScreen.bind(this.CLICK_EV,t.proxy(function(){this.togglePlay()},this)),i.iOS()&&this.options.autoplay){var n=!0;this.iOSVolumeButtonScreen=t("<div />"),this.iOSVolumeButtonScreen.addClass("stellar_vp_iOSVolumeButtonScreen").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-iOSBtnScreen "+this.options.instanceTheme).addClass("pulse"),this.iOSVolumeButtonScreen.bind(this.CLICK_EV,t.proxy(function(){n&&(this.removeiOSAutoplay(),this.iOSVolumeButtonScreen.hide(),n=!1)},this)),this.element&&this.element.append(this.iOSVolumeButtonScreen)}this.element&&this.element.append(this.playButtonScreen),this.fsBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement").bind(this.CLICK_EV,t.proxy(function(){this.toggleFullScreen()},this)),this.fsEnter=t("<span />"),this.fsEnter.attr("aria-hidden","true").attr("id","stellar_vp_fsBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-desktop-expand"),this.fsBtnWrapper.append(this.fsEnter),this.fsEnterADBox=t("<div />").addClass("stellar_vp_fsEnterADBox").hide(),this.elementAD.append(this.fsEnterADBox),this.fsEnterAD=t("<span />"),this.fsEnterAD.attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-expandAD").bind(this.CLICK_EV,t.proxy(function(){this.toggleFullScreen()},this)).mouseover(function(){t(this).stop().animate({opacity:.75},200)}).mouseout(function(){t(this).stop().animate({opacity:1},200)}),this.fsEnterADBox.append(this.fsEnterAD),1!=this._playlist.videos_array[this._playlist.videoid].enable_mp4_download&&"yes"!=this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||this.controlsBtnsWrapperRight.append(this.downloadBtnLink),this.options.shareShow&&this.controlsBtnsWrapperRight.append(this.shareBtnWrapper),this.options.embedShow&&this.controlsBtnsWrapperRight.append(this.embedBtnWrapper),this.options.rewindShow&&this.controlsBtnsWrapperRight.append(this.rewindBtnWrapper),this.options.qualityShow&&this.controlsBtnsWrapperRight.append(this.qualityBtnWrapper),this.controlsBtnsWrapperRight.append(this.fsBtnWrapper),this.playButtonScreen.mouseover(function(){t(this).stop().animate({opacity:.85},200)}),this.playButtonScreen.mouseout(function(){t(this).stop().animate({opacity:1},200)})},c.fn.createInfoWindow=function(){this.infoWindow=t("<div />"),this.infoWindow.addClass("stellar_vp_infoWindow"),this.infoWindow.addClass("stellar_vp_bg "+this.options.instanceTheme),this.element&&this.element.append(this.infoWindow),this.infoBtnClose=t("<div />"),this.infoBtnClose.addClass("stellar_vp_btnClose stellar_vp_themeColorText"),this.infoWindow.append(this.infoBtnClose),this.infoBtnClose.css({bottom:0}),this.infoBtnCloseIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-times-circle").addClass("stellar_vp_themeColor"),this.infoBtnClose.append(this.infoBtnCloseIcon),this.infoBtn.bind(this.CLICK_EV,t.proxy(function(){this.toggleInfoWindow()},this)),this.infoBtnClose.bind(this.CLICK_EV,t.proxy(function(){this.toggleInfoWindow()},this)),this.infoBtnClose.mouseover(function(){t(this).stop().animate({opacity:.7},200)}),this.infoBtnClose.mouseout(function(){t(this).stop().animate({opacity:1},200)})},c.fn.createQualityWindow=function(){this.qualityWindow_mask=t("<div />"),this.qualityWindow_mask.addClass("stellar_vp_qualityWindowMask"),this.element&&this.element.append(this.qualityWindow_mask),this.qualityWindow=t("<div />"),this.qualityWindow.addClass("stellar_vp_qualityWindow"),this.qualityWindow.addClass("stellar_vp_bg "+this.options.instanceTheme),this.element&&this.qualityWindow_mask.append(this.qualityWindow),this.qualityWindow_mask.css({left:this.controlsBtnsWrapperRight.position().left+this.qualityBtnWrapper.position().left-50+16-4,bottom:this.controls.height()+6}).hide(),this.qualityWindow.css({top:200,opacity:0}),this.createQualityWindowByType(),this.positionQualityWindow()},c.fn.initStateYTQualityMenu=function(){switch(this.selectedYoutubeQuality||this.options.youtubeQuality){case"hd1080":t(".hd1080").append(this.qualityCheck),this.HD_indicator.show();break;case"hd720":t(".hd720").append(this.qualityCheck),this.HD_indicator.show();break;case"large":t(".large").append(this.qualityCheck),this.HD_indicator.hide();break;case"medium":t(".medium").append(this.qualityCheck),this.HD_indicator.hide();break;case"small":t(".small").append(this.qualityCheck),this.HD_indicator.hide();break;case"tiny":case"default":t(".default").append(this.qualityCheck),this.HD_indicator.hide()}},c.fn.initStateHTML5QualityMenu=function(){switch(this.selectedHTML5Quality||this.options.HTML5VideoQuality){case"HD":t(".HD").append(this.qualityCheck),this.HD_indicator.show();break;case"SD":t(".SD").append(this.qualityCheck),this.HD_indicator.hide()}},c.fn.updateYoutubeQuality=function(t){if(this.youtubePlayer.getPlaybackQuality()!=t)if("unknown"!=this.youtubePlayer.getPlaybackQuality()){var e=this.youtubePlayer.getCurrentTime();this.youtubePlayer.stopVideo(),this.youtubePlayer.setPlaybackQuality(t),this.youtubePlayer.playVideo(),this.youtubePlayer.seekTo(e)}else this.youtubePlayer.setPlaybackQuality(t)},c.fn.updateHTML5Quality=function(t){var e=this.video.getCurrentTime();if(this.pause(),this.myVideo.canPlayType&&this.myVideo.canPlayType("video/mp4").replace(/no/,""))switch(this.canPlay=!0,t){case"HD":this.video_path=this._playlist.videos_array[this._playlist.videoid].video_path_mp4HD;break;case"SD":this.video_path=this._playlist.videos_array[this._playlist.videoid].video_path_mp4SD}this.load(this.video_path,this._playlist.videoid),this.video.setCurrentTime(e),this.play()},c.fn.createQualityWindowByType=function(){var e=this;this.qualityWindow.html(""),"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||(this.qualityWindow.append('<div class="stellar_vp_list"><div class="stellar_vp_qualityListItem stellar_vp_playerElement hd1080"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">1080p</p><p class="stellar_vp_qualityHD stellar-icon-general stellar_vp_qualityWindowText">HD</p></div><div class="stellar_vp_qualityListItem stellar_vp_playerElement hd720"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">720p</p><p class="stellar_vp_qualityHD stellar-icon-general stellar_vp_qualityWindowText">HD</p></div><div class="stellar_vp_qualityListItem stellar_vp_playerElement large"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">480p</p></div><div class="stellar_vp_qualityListItem stellar_vp_playerElement medium"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">360p</p></div><div class="stellar_vp_qualityListItem stellar_vp_playerElement small"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">240p</p></div><div class="stellar_vp_qualityListItem stellar_vp_playerElement tiny"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">144p</p></div><div class="stellar_vp_qualityListItem stellar_vp_playerElement default"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">auto</p></div></div>'),this.qualityWindow_mask.css("height","170px")),"HTML5"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=this.options.videoType||(this.qualityWindow.append('<div class="stellar_vp_list"><div class="stellar_vp_qualityListItem stellar_vp_playerElement HD"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">HD</p><p class="stellar_vp_qualityHD stellar-icon-general stellar_vp_qualityWindowText">HD</p></div><div class="stellar_vp_qualityListItem stellar_vp_playerElement SD"><p class="stellar_vp_qualityNum stellar-icon-general stellar_vp_controlsColor stellar_vp_qualityWindowText '+this.options.instanceTheme+'">SD</p></div></div>'),this.qualityWindow_mask.css("height","50px")),this.qualityCheck=t("<span />").attr("aria-hidden","true").attr("id","qualityCheck").addClass("fa-stellar").addClass("fa-stellar-caret-right").addClass("stellar_vp_qualityCheck").addClass("stellar_vp_qualityListItem_activeColor "+this.options.instanceTheme),this.qualityListItem=t(".stellar_vp_qualityListItem"),t(this.qualityListItem).click(function(){t(".stellar_vp_qualityWindow").find(".stellar_vp_qualityListItem_activeColor "+e.options.instanceTheme).removeClass("stellar_vp_qualityListItem_activeColor "+e.options.instanceTheme),t(this).addClass("stellar_vp_qualityListItem_activeColor "+e.options.instanceTheme),t(this).append(e.qualityCheck),t(this).hasClass("hd1080")&&(e.selectedYoutubeQuality="hd1080",e.HD_indicator.show()),t(this).hasClass("hd720")&&(e.selectedYoutubeQuality="hd720",e.HD_indicator.show()),t(this).hasClass("large")&&(e.selectedYoutubeQuality="large",e.HD_indicator.hide()),t(this).hasClass("medium")&&(e.selectedYoutubeQuality="medium",e.HD_indicator.hide()),t(this).hasClass("small")&&(e.selectedYoutubeQuality="small",e.HD_indicator.hide()),t(this).hasClass("tiny")&&(e.selectedYoutubeQuality="tiny",e.HD_indicator.hide()),t(this).hasClass("default")&&(e.selectedYoutubeQuality="default"),t(this).hasClass("HD")&&(e.selectedHTML5Quality="HD",e.HD_indicator.show()),t(this).hasClass("SD")&&(e.selectedHTML5Quality="SD",e.HD_indicator.hide()),e.qualityOn=!0,e.toggleQualityWindow(),e.toggleQualityBtn(),"HTML5"==e._playlist.videos_array[e._playlist.videoid].videoType||"HTML5 (self-hosted)"==e.options.videoType?e.updateHTML5Quality(e.selectedHTML5Quality):"youtube"!=e._playlist.videos_array[e._playlist.videoid].videoType&&"YouTube"!=e.options.videoType||e.updateYoutubeQuality(e.selectedYoutubeQuality)}),"HTML5"==e._playlist.videos_array[e._playlist.videoid].videoType||"HTML5 (self-hosted)"==e.options.videoType?e.initStateHTML5QualityMenu():"youtube"!=e._playlist.videos_array[e._playlist.videoid].videoType&&"YouTube"!=e.options.videoType||e.initStateYTQualityMenu()},c.fn.onPlayerPlaybackQualityChange=function(){},c.fn.createEmbedWindow=function(){this.embedWindow=t("<div />"),this.embedWindow.addClass("stellar_vp_embedWindow stellar_vp_bg "+this.options.instanceTheme),this.element&&this.element.append(this.embedWindow),this.embedBtnClose=t("<div />"),this.embedBtnClose.addClass("stellar_vp_btnClose stellar_vp_themeColorText"),this.embedWindow.append(this.embedBtnClose),this.embedBtnClose.css({bottom:0}),this.embedWindow.css({top:-this.embedWindow.height()}),this.embedWindow.hide(),this.embedBtnCloseIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-times-circle").addClass("stellar_vp_themeColor"),this.embedBtnClose.append(this.embedBtnCloseIcon),this.embedBtnClose.bind(this.CLICK_EV,t.proxy(function(){this.toggleEmbedWindow(),this.toggleEmbedBtn()},this)),this.embedBtnClose.mouseover(function(){t(this).stop().animate({opacity:.7},200)}),this.embedBtnClose.mouseout(function(){t(this).stop().animate({opacity:1},200)})},c.fn.setupVideoTrack=function(){var e=this;this.videoTrackWrapper=t("<div />").addClass("stellar_vp_videoTrackWrapper").addClass("stellar_vp_playerElement"),this.controls.append(this.videoTrackWrapper),this.videoTrack=t("<div />"),this.videoTrack.addClass("stellar_vp_videoTrack").addClass("stellar_vp_videoTrack "+this.options.instanceTheme).addClass("stellar_vp_playerElement"),this.videoTrackWrapper.append(this.videoTrack),this.progressIdleTrack=t("<div />"),this.progressIdleTrack.addClass("stellar_vp_progressIdleTrack").addClass("stellar_vp_progressIdleTrack "+this.options.instanceTheme),this.options.showAllControls||this.progressIdleTrack.hide(),this.progressIdleTrack.css({bottom:-e.options.progressBarThicknessOnMouseover}),this.element.append(this.progressIdleTrack),this.progressIdleDownload=t("<div />"),this.progressIdleDownload.addClass("stellar_vp_progressIdleDownload").addClass("stellar_vp_progressIdleDownload "+this.options.instanceTheme),this.progressIdleDownload.css("width",0),this.progressIdleTrack.append(this.progressIdleDownload),this.progressIdle=t("<div />"),this.progressIdle.addClass("stellar_vp_progressIdle stellar_vp_themeColor"),this.progressIdleTrack.append(this.progressIdle),this.progressIdle.css("width",0),t(this.videoTrack).css({height:this.options.progressBarThickness,marginTop:-this.options.progressBarThickness}),t(this.progressIdleTrack).css({height:this.options.progressBarThickness,marginTop:-this.options.progressBarThickness}),this.progressADBg=t("<div />"),this.progressADBg.addClass("stellar_vp_progressADBg").hide(),this.elementAD.append(this.progressADBg),this.progressAD=t("<div />"),this.progressAD.addClass("stellar_vp_progressAD"),this.progressADBg.append(this.progressAD),this.videoTrackDownload=t("<div />"),this.videoTrackDownload.addClass("stellar_vp_videoTrackDownload").addClass("stellar_vp_videoTrackDownload "+this.options.instanceTheme),this.videoTrackDownload.css("width",0),this.videoTrack.append(this.videoTrackDownload),this.videoTrackProgress=t("<div />"),this.videoTrackProgress.addClass("stellar_vp_Progress stellar_vp_themeColor"),this.videoTrackProgress.css("width",0),this.videoTrack.append(this.videoTrackProgress),this.toolTip=t("<div />").addClass("stellar_vp_toolTip"),this.toolTip.addClass("stellar_vp_controlsColor "+this.options.instanceTheme),this.toolTip.addClass("stellar_vp_bg "+this.options.instanceTheme),this.toolTip.hide(),this.toolTip.css({opacity:0,top:e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()}),this.toolTip[0].style.setProperty("font-size",e.options.tooltipFontSize+"px","important"),this.mainContainer.append(this.toolTip),t(this.mainContainer).find(".stellar_vp_playerElement").bind("mousemove mouseenter click",function(i){e.toolTip.css("left",""),e.toolTip.css("right",""),e.toolTip.css("bottom",""),e.toolTip.css("top","");var n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2;if(t(this).hasClass("stellar_vp_videoTrackWrapper")){var o=(r=i.pageX-e.videoTrackWrapper.offset().left)/e.videoTrackWrapper.width();"youtube"==e._playlist.videos_array[e._playlist.videoid].videoType||"YouTube"==e.options.videoType?e.toolTip.text(e.secondsFormat(e.youtubePlayer.getDuration()*o)):"HTML5"!=e._playlist.videos_array[e._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=e.options.videoType||e.toolTip.text(e.secondsFormat(e.video.duration*o)),e.toolTip.css("left",n+t(this).position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.options.progressBarThicknessOnMouseover),r<=0?e.toolTip.hide():e.toolTip.show()}else if(t(this).hasClass("stellar_vp_volumeTrackWrapper")){var r;o=(r=i.pageX-e.volumeTrackWrapper.offset().left)/e.volumeTrackWrapper.width(),r>=0&&r<=e.volumeTrackWrapper.width()&&e.toolTip.text(e.options.volumeTooltipTxt+" "+Math.ceil(100*o)+"%"),e.toolTip.css("left",n+t(this).position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show()}else t(this).children().hasClass("fa-stellar-play")||t(this).children().hasClass("fa-stellar-play-zoom")?(e.toolTip.text(e.options.playBtnTooltipTxt),e.toolTip.css("left",0),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-play").addClass("fa-stellar-play-zoom"),e.mouseOverPlayBtn=!0):t(this).children().hasClass("fa-stellar-pause")||t(this).children().hasClass("fa-stellar-pause-zoom")?(e.toolTip.text(e.options.pauseBtnTooltipTxt),e.toolTip.css("left",0),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-pause").addClass("fa-stellar-pause-zoom"),e.mouseOverPlayBtn=!0):t(this).children().hasClass("fa-stellar-retweet")||t(this).children().hasClass("fa-stellar-retweet-zoom")?(e.toolTip.text(e.options.rewindBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e.controlsBtnsWrapperRight.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-retweet").addClass("fa-stellar-retweet-zoom")):t(this).children().hasClass("fa-stellar-external-link")||t(this).children().hasClass("fa-stellar-external-link-zoom")?(e.toolTip.text(e.options.shareBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e.controlsBtnsWrapperRight.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-external-link").addClass("fa-stellar-external-link-zoom")):t(this).children().hasClass("fa-stellar-code")||t(this).children().hasClass("fa-stellar-code-zoom")?(e.toolTip.text(e.options.embedBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e.controlsBtnsWrapperRight.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-code").addClass("fa-stellar-code-zoom")):t(this).children().hasClass("fa-stellar-download")||t(this).children().hasClass("fa-stellar-download-zoom")?(e.toolTip.text(e.options.downloadVideoBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e.controlsBtnsWrapperRight.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-download").addClass("fa-stellar-download-zoom")):t(this).children().hasClass("fa-stellar-cog")||t(this).children().hasClass("fa-stellar-cog-zoom")?(e.toolTip.text(e.qualityBtnEnabled?e.options.qualityBtnOpenedTooltipTxt:e.options.qualityBtnClosedTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e.controlsBtnsWrapperRight.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children(":first").removeClass("fa-stellar-cog").addClass("fa-stellar-cog-zoom")):t(this).children().hasClass("fa-stellar-random")||t(this).children().hasClass("fa-stellar-random-zoom")?(e.toolTip.text(e.shuffleBtnEnabled?e.options.shuffleBtnOnTooltipTxt:e.options.shuffleBtnOffTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.playlistControlsBtnsWrapperRight.position().left+t(this).position().left),"Right playlist"==e.options.playlist?e.toolTip.css("top",e._playlist.playlistBar.position().top+e._playlist.playlistBar.height()):"Bottom playlist"==e.options.playlist&&e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2),e.toolTip.show(),t(this).children().removeClass("fa-stellar-random").addClass("fa-stellar-random-zoom")):t(this).children().hasClass("fa-stellar-toggle-on")||t(this).children().hasClass("fa-stellar-toggle-on-zoom")?(e.toolTip.text(e.options.autoplayNextVideoInPlaylistOn),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.playlistControlsBtnsWrapperRight.position().left+t(this).position().left),"Right playlist"==e.options.playlist?e.toolTip.css("top",e._playlist.playlistBar.position().top+e._playlist.playlistBar.height()):"Bottom playlist"==e.options.playlist&&e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2),e.toolTip.show(),t(this).children().removeClass("fa-stellar-toggle-on").addClass("fa-stellar-toggle-on-zoom")):t(this).children().hasClass("fa-stellar-toggle-off")||t(this).children().hasClass("fa-stellar-toggle-off-zoom")?(e.toolTip.text(e.options.autoplayNextVideoInPlaylistOff),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.playlistControlsBtnsWrapperRight.position().left+t(this).position().left),"Right playlist"==e.options.playlist?e.toolTip.css("top",e._playlist.playlistBar.position().top+e._playlist.playlistBar.height()):"Bottom playlist"==e.options.playlist&&e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2),e.toolTip.show(),t(this).children().removeClass("fa-stellar-toggle-off").addClass("fa-stellar-toggle-off-zoom")):t(this).children().hasClass("fa-stellar-chevron-left")||t(this).children().hasClass("fa-stellar-chevron-left-zoom")?(e.toolTip.text(e.options.previousBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.playlistControlsBtnsWrapperLeft.position().left+t(this).position().left),"Right playlist"==e.options.playlist?e.toolTip.css("top",e._playlist.playlistBar.position().top+e._playlist.playlistBar.height()):"Bottom playlist"==e.options.playlist&&e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2),e.toolTip.show(),t(this).children().removeClass("fa-stellar-chevron-left").addClass("fa-stellar-chevron-left-zoom")):t(this).children().hasClass("fa-stellar-chevron-right")||t(this).children().hasClass("fa-stellar-chevron-right-zoom")?(e.toolTip.text(e.options.nextBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.playlistControlsBtnsWrapperLeft.position().left+t(this).position().left),"Right playlist"==e.options.playlist?e.toolTip.css("top",e._playlist.playlistBar.position().top+e._playlist.playlistBar.height()):"Bottom playlist"==e.options.playlist&&e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2),e.toolTip.show(),t(this).children().removeClass("fa-stellar-chevron-right").addClass("fa-stellar-chevron-right-zoom")):t(this).children().hasClass("fa-stellar-volume-up")||t(this).children().hasClass("fa-stellar-volume-up-zoom")?(e.toolTip.text(e.options.muteBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e._playlist.controlsBtnsWrapperLeft.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-volume-up").addClass("fa-stellar-volume-up-zoom")):t(this).children().hasClass("fa-stellar-volume-off")||t(this).children().hasClass("fa-stellar-volume-off-zoom")?(e.toolTip.text(e.options.unmuteBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e._playlist.controlsBtnsWrapperLeft.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-volume-off").addClass("fa-stellar-volume-off-zoom")):t(this).children().hasClass("fa-stellar-desktop-expand")||t(this).children().hasClass("fa-stellar-desktop-expand-zoom")?(e.toolTip.text(e.options.fullscreenBtnTooltipTxt),e.toolTip.css("left",e.element.width()-e.toolTip.outerWidth()),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-desktop-expand").addClass("fa-stellar-desktop-expand-zoom")):t(this).children().hasClass("fa-stellar-desktop-compress")||t(this).children().hasClass("fa-stellar-desktop-compress-zoom")?(e.toolTip.text(e.options.exitFullscreenBtnTooltipTxt),e.toolTip.css("left",e.element.width()-e.toolTip.outerWidth()),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-desktop-compress").addClass("fa-stellar-desktop-compress-zoom")):t(this).children().hasClass("fa-stellar-chevron-circle-right")||t(this).children().hasClass("fa-stellar-chevron-circle-right-zoom")?(e.toolTip.text(e.options.playlistBtnOpenedTooltipTxt),e.toolTip.css("left",e.mainContainer.width()-e.toolTip.outerWidth()),e.toolTip.css("top",e._playlist.playlistBar.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-chevron-circle-right").addClass("fa-stellar-chevron-circle-right-zoom")):t(this).children().hasClass("fa-stellar-chevron-circle-left")||t(this).children().hasClass("fa-stellar-chevron-circle-left-zoom")?(e.toolTip.text(e.options.playlistBtnClosedTooltipTxt),e.toolTip.css("left",e.mainContainer.width()-e.toolTip.outerWidth()),e.toolTip.css("top",e._playlist.playlistBar.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-chevron-circle-left").addClass("fa-stellar-chevron-circle-left-zoom")):t(this).children().hasClass("fa-stellar-info-circle")||t(this).children().hasClass("fa-stellar-info-circle-zoom")?(e.toolTip.text(e.options.infoBtnTooltipTxt),e.toolTip.css("left",e.screenBtnsWindow.position().left-e.toolTip.outerWidth()),e.toolTip.css("top",t(this).position().top+t(this).outerHeight(!0)/2-e.toolTip.outerHeight()/2),e.toolTip.show(),t(this).children().removeClass("fa-stellar-info-circle").addClass("fa-stellar-info-circle-zoom")):t(this).children().hasClass("fa-stellar-list")||t(this).children().hasClass("fa-stellar-list-zoom")?(e.toolTip.text(e.stretching?e.options.playlistBtnClosedTooltipTxt:e.options.playlistBtnOpenedTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e.controlsBtnsWrapperRight.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-list").addClass("fa-stellar-list-zoom")):t(this).children().hasClass("fa-stellar-facebook")||t(this).children().hasClass("fa-stellar-facebook-zoom")?(e.toolTip.text(e.options.facebookBtnTooltipTxt),e.toolTip.css("left",e.shareWindow_mask.position().left+t(this).position().left+t(this).outerWidth(!0)/2-e.toolTip.outerWidth()/2),e.toolTip.css("top",e.shareWindow_mask.position().top-e.toolTip.outerHeight()-5),e.toolTip.show(),t(this).children().removeClass("fa-stellar-facebook").addClass("fa-stellar-facebook-zoom")):t(this).children().hasClass("fa-stellar-twitter")||t(this).children().hasClass("fa-stellar-twitter-zoom")?(e.toolTip.text(e.options.twitterBtnTooltipTxt),e.toolTip.css("left",e.shareWindow_mask.position().left+t(this).position().left+t(this).outerWidth(!0)/2-e.toolTip.outerWidth()/2),e.toolTip.css("top",e.shareWindow_mask.position().top-e.toolTip.outerHeight()-5),e.toolTip.show(),t(this).children().removeClass("fa-stellar-twitter").addClass("fa-stellar-twitter-zoom")):t(this).children().hasClass("fa-stellar-google-plus")||t(this).children().hasClass("fa-stellar-google-plus-zoom")?(e.toolTip.text(e.options.googlePlusBtnTooltipTxt),e.toolTip.css("left",e.shareWindow_mask.position().left+t(this).position().left+t(this).outerWidth(!0)/2-e.toolTip.outerWidth()/2),e.toolTip.css("top",e.shareWindow_mask.position().top-e.toolTip.outerHeight()-5),e.toolTip.show(),t(this).children().removeClass("fa-stellar-google-plus").addClass("fa-stellar-google-plus-zoom")):t(this).children().hasClass("fa-stellar-step-forward")||t(this).children().hasClass("fa-stellar-step-forward-zoom")?(e.toolTip.text(e.options.nextBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+t(this).position().left+e._playlist.controlsBtnsWrapperLeft.position().left),e.toolTip.css("top",e.controls.position().top-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show(),t(this).children().removeClass("fa-stellar-step-forward").addClass("fa-stellar-step-forward-zoom")):t(this).children().hasClass("fa-stellar-step-backward")?(e.toolTip.text(e.options.firstBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.controlsBtnsWrapperLeft.position().left+t(this).position().left),e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show()):t(this).children().hasClass("fa-stellar-forward")?(e.toolTip.text(e.options.nextBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.controlsBtnsWrapperLeft.position().left+t(this).position().left),e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show()):t(this).children().hasClass("fa-stellar-backward")?(e.toolTip.text(e.options.previousBtnTooltipTxt),n=i.pageX-t(this).offset().left-e.toolTip.outerWidth()/2,e.toolTip.css("left",n+e._playlist.playlist.position().left+e._playlist.controlsBtnsWrapperLeft.position().left+t(this).position().left),e.toolTip.css("top",e.mainContainer.height()-e._playlist.playlistBar.height()-e.toolTip.outerHeight()-2-e.videoTrack.height()),e.toolTip.show()):t(this).children().hasClass("fa-stellar-search")&&(e.toolTip.text(""),e.toolTip.hide());e.toolTip.stop().animate({opacity:1},100)}),t(this.mainContainer).find(".stellar_vp_playerElement").bind("mouseout",function(i){t(e.toolTip).stop().animate({opacity:0},50,function(){e.toolTip.hide()}),t(e.mainContainer).find(".fa-stellar-retweet-zoom").removeClass("fa-stellar-retweet-zoom").addClass("fa-stellar-retweet"),t(e.mainContainer).find(".fa-stellar-download-zoom").removeClass("fa-stellar-download-zoom").addClass("fa-stellar-download"),t(e.mainContainer).find(".fa-stellar-code-zoom").removeClass("fa-stellar-code-zoom").addClass("fa-stellar-code"),t(e.mainContainer).find(".fa-stellar-external-link-zoom").removeClass("fa-stellar-external-link-zoom").addClass("fa-stellar-external-link"),t(e.mainContainer).find(".fa-stellar-list-zoom").removeClass("fa-stellar-list-zoom").addClass("fa-stellar-list"),t(e.mainContainer).find(".fa-stellar-cog-zoom").removeClass("fa-stellar-cog-zoom").addClass("fa-stellar-cog"),t(e.mainContainer).find(".fa-stellar-desktop-compress-zoom").removeClass("fa-stellar-desktop-compress-zoom").addClass("fa-stellar-desktop-compress"),t(e.mainContainer).find(".fa-stellar-desktop-expand-zoom").removeClass("fa-stellar-desktop-expand-zoom").addClass("fa-stellar-desktop-expand"),t(e.mainContainer).find(".fa-stellar-step-forward-zoom").removeClass("fa-stellar-step-forward-zoom").addClass("fa-stellar-step-forward"),t(e.mainContainer).find(".fa-stellar-volume-up-zoom").removeClass("fa-stellar-volume-up-zoom").addClass("fa-stellar-volume-up"),t(e.mainContainer).find(".fa-stellar-volume-off-zoom").removeClass("fa-stellar-volume-off-zoom").addClass("fa-stellar-volume-off"),t(e.mainContainer).find(".fa-stellar-play-zoom").removeClass("fa-stellar-play-zoom").addClass("fa-stellar-play"),t(e.mainContainer).find(".fa-stellar-pause-zoom").removeClass("fa-stellar-pause-zoom").addClass("fa-stellar-pause"),t(e.mainContainer).find(".fa-stellar-toggle-on-zoom").removeClass("fa-stellar-toggle-on-zoom").addClass("fa-stellar-toggle-on"),t(e.mainContainer).find(".fa-stellar-toggle-off-zoom").removeClass("fa-stellar-toggle-off-zoom").addClass("fa-stellar-toggle-off"),t(e.mainContainer).find(".fa-stellar-random-zoom").removeClass("fa-stellar-random-zoom").addClass("fa-stellar-random"),t(e.mainContainer).find(".fa-stellar-chevron-right-zoom").removeClass("fa-stellar-chevron-right-zoom").addClass("fa-stellar-chevron-right"),t(e.mainContainer).find(".fa-stellar-chevron-left-zoom").removeClass("fa-stellar-chevron-left-zoom").addClass("fa-stellar-chevron-left"),t(e.mainContainer).find(".fa-stellar-chevron-circle-right-zoom").removeClass("fa-stellar-chevron-circle-right-zoom").addClass("fa-stellar-chevron-circle-right"),t(e.mainContainer).find(".fa-stellar-chevron-circle-left-zoom").removeClass("fa-stellar-chevron-circle-left-zoom").addClass("fa-stellar-chevron-circle-left"),t(e.mainContainer).find(".fa-stellar-info-circle-zoom").removeClass("fa-stellar-info-circle-zoom").addClass("fa-stellar-info-circle"),t(e.mainContainer).find(".fa-stellar-facebook-zoom").removeClass("fa-stellar-facebook-zoom").addClass("fa-stellar-facebook"),t(e.mainContainer).find(".fa-stellar-twitter-zoom").removeClass("fa-stellar-twitter-zoom").addClass("fa-stellar-twitter"),t(e.mainContainer).find(".fa-stellar-google-plus-zoom").removeClass("fa-stellar-google-plus-zoom").addClass("fa-stellar-google-plus"),e.mouseOverPlayBtn=!1}),this.videoTrackWrapper.bind(e.CLICK_EV,function(i){if("youtube"==e._playlist.videos_array[e._playlist.videoid].videoType||"YouTube"==e.options.videoType){if(e.isMobile.any())var n=i.originalEvent.changedTouches[0].pageX-e.videoTrack.offset().left;else n=i.pageX-e.videoTrack.offset().left;e.videoTrackProgress.css("width",n);var o=n/e.videoTrack.width();e.youtubePlayer.seekTo(e.youtubePlayer.getDuration()*o)}else"HTML5"!=e._playlist.videos_array[e._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=e.options.videoType||(e.preloader.stop().animate({opacity:1},0,function(){t(this).show()}),n=e.isMobile.any()?i.originalEvent.changedTouches[0].pageX-e.videoTrack.offset().left:i.pageX-e.videoTrack.offset().left,e.videoTrackProgress.css("width",n),o=n/e.videoTrack.width(),e.video.setCurrentTime(e.video.duration*o))}),this.videoTrackWrapper.mouseover(function(){t(e.videoTrack).stop().animate({height:e.options.progressBarThicknessOnMouseover,marginTop:-e.options.progressBarThicknessOnMouseover},200)}),this.videoTrackWrapper.mouseout(function(){t(e.videoTrack).stop().animate({height:e.options.progressBarThickness,marginTop:-e.options.progressBarThickness},200)}),this.progressIdleTrack.bind(e.CLICK_EV,function(t){if(e.isMobile.any())var i=t.originalEvent.changedTouches[0].pageX;else i=t.pageX;e.progressIdle.css("width",i);var n=i/e.progressIdleTrack.width();e.video.setCurrentTime(e.video.duration*n)}),this.onloadeddata(t.proxy(function(){e.timeElapsed.text(this.secondsFormat(this.video.getCurrentTime())),e.timeTotal.text(e.secondsFormat(this.video.getEndTime()-this.video.getCurrentTime())),e.resizeVideoTrack(),e.loaded=!0,e.preloader.stop().animate({opacity:0},300,function(){t(this).hide()}),e.onprogress(t.proxy(function(t){e.html5STARTED=!0,e.video.buffered.length-1>=0&&(e.buffered=e.video.buffered.end(e.video.buffered.length-1)),e.downloadWidth=e.buffered/e.video.duration*e.videoTrack.width(),e.videoTrackDownload.css("width",e.downloadWidth),e.progressIdleDownloadWidth=e.buffered/e.video.duration*e.progressIdleTrack.width(),e.progressIdleDownload.css("width",e.progressIdleDownloadWidth)},e)),e.options.hideVideoSource&&e.videoElement.empty()},this)),this.ontimeupdate(t.proxy(function(){pw&&"AD 5 sec + Pieces After Effects project"!=e.options.videos[0].title&&"Pieces After Effects project"!=e.options.videos[0].title&&"AD 5 sec + Space Odyssey After Effects Project"!=e.options.videos[0].title&&"AD 5 sec Swimwear Spring Summer"!=e.options.videos[0].title&&"i Create"!=e.options.videos[0].title&&"Swimwear Spring Summer"!=e.options.videos[0].title&&"PLuFX50GllfgP_mecAi4LV7cYva-WLVnaM"!=e.options.youtubePlaylistID&&"Google drive video example"!=e.options.videos[0].title&&"LiveStreaming HLS m3u8 video example"!=e.options.videos[0].title&&"Youtube 360 VR video"!=e.options.videos[0].title&&(this.element.css({width:0,height:0}),this.elementAD.css({width:0,height:0}),this.playButtonScreen.hide(),t(this.element).find(".nowPlayingText").hide(),this.controls.hide()),this.preloader.stop().animate({opacity:0},300,function(){t(this).hide()}),this.progressWidth=this.video.currentTime/this.video.duration*this.videoTrack.width(),this.videoTrackProgress.css("width",this.progressWidth),this.progressIdleWidth=this.video.currentTime/this.video.duration*this.progressIdleTrack.width(),this.progressIdle.css("width",this.progressIdleWidth);var i=Math.floor(this.video.currentTime);if(0!==i&&i!==this.lastTriggerTime&&i%30==0&&(this.lastTriggerTime=Math.floor(this.video.currentTime),t(document).trigger("ss-video-loaded",[this])),e._playlist.videos_array[e._playlist.videoid].popupAdShow&&e.enablePopup(),e._playlist.videos_array[e._playlist.videoid].midroll_mp4&&e._playlist.videos_array[e._playlist.videoid].midroll_mp4[0]&&e.secondsFormat(e.video.getCurrentTime())==e._playlist.videos_array[e._playlist.videoid].midroll_mp4[0].displayTime){if(e.midrollPlayed)return;1!=e._playlist.videos_array[e._playlist.videoid].midrollAD&&"yes"!=e._playlist.videos_array[e._playlist.videoid].midrollAD||(e.myVideo.canPlayType&&e.myVideo.canPlayType("video/mp4").replace(/no/,"")&&(e.canPlay=!0,e.video_pathAD=e._playlist.videos_array[e._playlist.videoid].midroll_mp4),e.pause(),e.loadAD(e.video_pathAD,"midrollActive"),e.openAD())}if(e.secondsFormat(e.video.getCurrentTime())>=e.secondsFormat(e.video.getEndTime())&&e.video.getEndTime()>0){if(e.postrollPlayed)return;e.postrollPlayed=!0,1!=e._playlist.videos_array[e._playlist.videoid].postrollAD&&"yes"!=e._playlist.videos_array[e._playlist.videoid].postrollAD||(e.myVideo.canPlayType&&e.myVideo.canPlayType("video/mp4").replace(/no/,"")&&(e.canPlay=!0,e.video_pathAD=e._playlist.videos_array[e._playlist.videoid].postroll_mp4),e.pause(),e.loadAD(e.video_pathAD,"postrollActive"),e.openAD())}},this))},c.fn.createIntervalTrigger=function(){this.resetTrigger(),window.videoTimeoutInterval=setInterval(()=>{t(document).trigger("ss-video-loaded",[this])},3e4)},c.fn.resetTrigger=function(){window.videoTimeoutInterval&&(clearInterval(window.videoTimeoutInterval),delete window.videoTimeoutInterval)},c.fn.enablePopup=function(){"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||(this.secondsFormat(this.youtubePlayer.getCurrentTime())==this._playlist.videos_array[this._playlist.videoid].popupAdStartTime?(this.newAd(),this.adOn=!1,this.togglePopup()):this.secondsFormat(this.youtubePlayer.getCurrentTime())>=this._playlist.videos_array[this._playlist.videoid].popupAdEndTime&&(this.adOn=!0,this.togglePopup())),"HTML5"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=this.options.videoType||(this.secondsFormat(this.video.getCurrentTime())==this._playlist.videos_array[this._playlist.videoid].popupAdStartTime?(this.newAd(),this.adOn=!1,this.togglePopup()):this.secondsFormat(this.video.getCurrentTime())>=this._playlist.videos_array[this._playlist.videoid].popupAdEndTime&&(this.adOn=!0,this.togglePopup()))},c.fn.removeListenerProgressAD=function(){this.progressADBg.unbind(this.CLICK_EV),t(".stellar_vp_progressADBg").css("cursor","default")},c.fn.addListenerProgressAD=function(){var e=this;this.progressADBg.bind(e.CLICK_EV,function(i){if(e.isMobile.any())var n=i.originalEvent.changedTouches[0].pageX-e.progressADBg.offset().left;else n=i.pageX-e.progressADBg.offset().left;e.progressAD.css("width",n);var o=n/e.progressADBg.width();e.videoAD.setCurrentTime(e.videoAD.duration*o),e.preloaderAD.stop().animate({opacity:1},0,function(){t(this).show()})}),t(".stellar_vp_progressADBg").css("cursor","pointer")},c.fn.pw=function(){this.element.css({width:0,height:0}),t(".stellar_vp_videoPlayerAD").css({width:0,height:0,zIndex:0}),t(this.element).find("#ytWrapper").css("z-index",0),t(".stellar_vp_mainContainer ").hide()},c.fn.resetPlayer=function(){this.videoTrackDownload.css("width",0),this.videoTrackProgress.css("width",0),this.progressIdle.css("width",0),this.progressIdleDownload.css("width",0),this.timeElapsed.text("00:00"),this.timeTotal.text("00:00")},c.fn.resetPlayerAD=function(){this.progressAD.css("width",0),this.timeLeftInside.text("(00:00)"),this.options.allowSkipAd&&(this.skipAdBox.hide(),this.skipAdCount.hide()),this.fsEnterADBox.hide(),this.fsEnterADBox.hide(),this.toggleAdPlayBox.hide()},c.fn.setupVolumeTrack=function(){var e,n,o=this;this.volumeTrackWrapper=t("<div />"),this.volumeTrackWrapper.addClass("stellar_vp_volumeTrackWrapper").addClass("stellar_vp_playerElement"),this.controls.append(this.volumeTrackWrapper),this.volumeTrack=t("<div />"),this.volumeTrack.addClass("stellar_vp_volumeTrack").addClass("stellar_vp_volumeTrack "+this.options.instanceTheme).addClass("stellar_vp_playerElement"),this.volumeTrackWrapper.append(this.volumeTrack),this.volumeTrackProgress=t("<div />"),this.volumeTrackProgress.addClass("stellar_vp_Progress stellar_vp_themeColor"),this.volumeTrack.append(this.volumeTrackProgress),t(this.volumeTrack).css({height:this.options.progressBarThickness,marginTop:-this.options.progressBarThickness/2}),this.toolTipVolume=t("<div />"),this.toolTipVolume.addClass("stellar_vp_toolTipVolume"),this.toolTipVolume.hide(),this.toolTipVolume.css({opacity:0,bottom:50}),this.controls.append(this.toolTipVolume);var r=t("<div />");r.addClass("stellar_vp_toolTipTextVolume"),this.toolTipVolume.append(r);var a,s,l=t("<div />");l.addClass("stellar_vp_toolTipTriangleVolume"),this.toolTipVolume.append(l),this.unmuteBtnWrapper=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this._playlist.controlsBtnsWrapperLeft.append(this.unmuteBtnWrapper),this.unmuteBtn=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_unmuteBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-volume-up"),this.unmuteBtnWrapper.append(this.unmuteBtn),this.positionVolumeTrackWrapper(),o.muted=!1,this.initialVolumeProgressWidth=o.volumeTrackProgress.width(),i.iOS()&&o.options.autoplay&&(this.video.muted=!0,e=o.volumeTrackProgress.width(),o.volumeTrackProgress.css("width","0px"),t(o.mainContainer).find(".fa-stellar-volume-up").removeClass("fa-stellar-volume-up").addClass("fa-stellar-volume-off"),o.muted=!0),o.video.setVolume(1),this.unmuteBtnWrapper.bind(this.CLICK_EV,t.proxy(function(){o.muted?(t(o.mainContainer).find(".fa-stellar-volume-off").removeClass("fa-stellar-volume-off").addClass("fa-stellar-volume-up"),t(o.mainContainer).find(".fa-stellar-volume-off-zoom").removeClass("fa-stellar-volume-off-zoom").addClass("fa-stellar-volume-up-zoom"),o.volumeTrackProgress.stop().animate({width:e},200),n=e/o.volumeTrackWrapper.width(),"youtube"==o._playlist.videos_array[o._playlist.videoid].videoType||"YouTube"==o.options.videoType?o.youtubePlayer.setVolume(100*n):"HTML5"!=o._playlist.videos_array[o._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=o.options.videoType||o.video.setVolume(n),o.muted=!1,i.iOS()&&o.options.autoplay&&(this.video.muted=!1)):(e=o.volumeTrackProgress.width(),t(o.mainContainer).find(".fa-stellar-volume-up").removeClass("fa-stellar-volume-up").addClass("fa-stellar-volume-off"),t(o.mainContainer).find(".fa-stellar-volume-up-zoom").removeClass("fa-stellar-volume-up-zoom").addClass("fa-stellar-volume-off-zoom"),o.volumeTrackProgress.stop().animate({width:0},200),"youtube"==o._playlist.videos_array[o._playlist.videoid].videoType||"YouTube"==o.options.videoType?o.youtubePlayer.setVolume(0):"HTML5"!=o._playlist.videos_array[o._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=o.options.videoType||(bottomMargin=70),this.setVolume(0),o.muted=!0,i.iOS()&&o.options.autoplay&&(this.video.muted=!1))},this)),o.volumeTrackWrapper.bind(o.START_EV,function(e){t(o.mainContainer).find(".fa-stellar-volume-off").removeClass("fa-stellar-volume-off").addClass("fa-stellar-volume-up"),a=o.isMobile.any()?e.originalEvent.changedTouches[0].pageX-o.volumeTrackWrapper.offset().left:e.pageX-o.volumeTrackWrapper.offset().left,o.volPerc=a/(o.volumeTrackWrapper.width()+2),"youtube"==o._playlist.videos_array[o._playlist.videoid].videoType||"YouTube"==o.options.videoType?o.youtubePlayer.setVolume(100*o.volPerc):"HTML5"!=o._playlist.videos_array[o._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=o.options.videoType||o.video.setVolume(o.volPerc),o.volumeTrackProgress.stop().animate({width:a},200),o.muted=!1,t(document).bind(o.MOVE_EV,function(t){s=o.isMobile.any()?t.originalEvent.changedTouches[0].pageX-o.volumeTrackWrapper.offset().left:t.pageX-o.volumeTrackWrapper.offset().left,a!=s&&(o.isMobile.any()?o.volumeTrackProgress.css({width:t.originalEvent.changedTouches[0].pageX-o.volumeTrackWrapper.offset().left},0):o.volumeTrackProgress.css({width:t.pageX-o.volumeTrackWrapper.offset().left},0),o.volumeTrackProgress.width()>=o.volumeTrackWrapper.width()?o.volumeTrackProgress.css({width:o.volumeTrackWrapper.width()},0):o.volumeTrackProgress.width()<=0&&o.volumeTrackProgress.css({width:0},200),"youtube"==o._playlist.videos_array[o._playlist.videoid].videoType||"YouTube"==o.options.videoType?o.youtubePlayer.setVolume(o.volumeTrackProgress.width()/o.volumeTrackWrapper.width()*100):"HTML5"!=o._playlist.videos_array[o._playlist.videoid].videoType&&"HTML5 (self-hosted)"!=o.options.videoType||o.video.setVolume(o.volumeTrackProgress.width()/o.volumeTrackWrapper.width()))})}),t(document).bind(o.END_EV,function(e){t(document).unbind(o.MOVE_EV)})},c.fn.setupTiming=function(){var e=this;this.timeElapsed=t("<div />"),this.timeTotal=t("<div />"),this.timeLeftInside=t("<div />"),this.timeElapsed.text("00:00"),this.timeTotal.text("00:00"),this.timeLeftInside.text("(00:00)"),this.timeElapsed.addClass("stellar_vp_timeElapsed stellar_vp_time "+this.options.instanceTheme),this.timeTotal.addClass("stellar_vp_timeTotal stellar_vp_time "+this.options.instanceTheme),this.timeLeftInside.addClass("stellar_vp_timeLeftInside"),this.ontimeupdate(t.proxy(function(){this.timeElapsed.text(e.secondsFormat(this.video.getCurrentTime())),this.timeTotal.text(e.secondsFormat(this.video.getEndTime()-this.video.getCurrentTime()))},this)),this.videoElement.one("canplay",t.proxy(function(){this.videoElement.trigger("timeupdate")},this)),this.controls.append(this.timeElapsed),this.controls.append(this.timeTotal),this.timeElapsed.css({top:-e.options.progressBarThicknessOnMouseover-e.timeElapsed.height()}),this.timeTotal.css({top:-e.options.progressBarThicknessOnMouseover-e.timeTotal.height()})},c.fn.calculateYoutubeElapsedTime=function(t){this.timeElapsed.text(this.secondsFormat(t)),this.timeTotal.text(this.secondsFormat(this.youtubePlayer.getDuration()-t))},c.fn.calculateYoutubeTotalTime=function(t){this.timeTotal.text(this.secondsFormat(t))},c.fn.setupElements=function(){t(".stellar_vp_playerElement").on({mouseenter:function(){t(this).children(":first").toggleClass("stellar-icon-general-hover")},mouseleave:function(){t(this).children(":first").toggleClass("stellar-icon-general-hover")}}),t(".stellar_vp_themeColor").css({background:this.options.colorAccent}),t(".stellar_vp_themeColorText").css({color:this.options.colorAccent}),t(".stellar_vp_themeColorButton").css({color:this.options.colorAccent}),t(".fa-stellar-playScreen").css({color:this.options.colorAccent})},c.fn.setupControls=function(){this.setupTiming(),this.createVideoOverlay(),this.createInvisibleWrapper(),this.setupButtons(),this.setupButtonsOnScreen(),this.setupVolumeTrack(),this.createInfoWindow(),this.createInfoWindowContent(),this.createNowPlayingText(),this.createEmbedWindow(),this.createEmbedWindowContent(),this.setupVideoTrack(),this.resizeVideoTrack(),this.createPopup(),this.createLogo(),this.createQualityWindow(),this.options.allowSkipAd&&(this.createSkipAd(),this.createSkipAdCount()),this.createAdTogglePlay(),this.createVideoAdTitleInsideAD(),"closed"==this.options.playlistBehaviourOnPageload&&"vimeo"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"Vimeo"!=this.options.videoType&&this.toggleStretch(),this._playlist.videos_array.length>1&&this.createNextVideoBox(),this.setOrientation(),this.resizeAll()},c.fn.createVideoOverlay=function(){if(!(""==this.options.posterImg&&""==this.options.posterImgOnVideoFinish||this.options.autoplay)){var e=this;e.overlay=t("<div />"),e.overlay.addClass("stellar_vp_overlay"),e.element&&e.element.append(e.overlay);var i=document.createElement("img");if(i.onload=function(){e.posterImageW=this.width,e.posterImageH=this.height},i.src=e.options.posterImg,e.overlay.append(i),t(".stellar_vp_overlay img").attr("id","stellar_vp_overlayPoster"),this.playButtonPoster=t("<div />"),this.playButtonPoster.addClass("stellar_vp_playButtonPoster").attr("aria-hidden","true").addClass("fa-stellar").addClass("fa-stellar-playScreen "+this.options.instanceTheme),"youtube"==this._playlist.videos_array[this._playlist.videoid].videoType||"YouTube"==e.options.videoType)var n=setInterval(function(){e._playlist.YTAPI_onPlayerReady&&(e.addPlayButtonPosterListener(),clearInterval(n))},100);else this.addPlayButtonPosterListener();this.element&&this.element.append(this.playButtonPoster),""==this.options.posterImg&&(this.overlay&&this.overlay.hide(),this.playButtonPoster&&this.playButtonPoster.hide())}},c.fn.addPlayButtonPosterListener=function(){this.playButtonPoster.bind(this.CLICK_EV,t.proxy(function(){this.hideOverlay()},this))},c.fn.createInvisibleWrapper=function(){this.invisibleWrapper=t("<div />").addClass("stellar_vp_invisibleWrapper").hide(),this.element&&this.element.append(this.invisibleWrapper)},c.fn.positionPoster=function(t){},c.fn.resizeVideoTrack=function(){this.videoTrack.css({left:0,width:"100%"})},c.fn.removeHTML5elements=function(){this.videoElement&&(this.pause(),this.playButtonScreen.hide(),"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||(t(this.embedWindow).animate({opacity:1},500,function(){t(this).hide()}),this.embedOn=!1))},c.fn.showHTML5elements=function(){this.videoElement&&(this.video.poster="",this.preloader.show(),this.logoImg.show(),this.playButtonScreen.show(),this.options.showAllControls?this.options.showAllControls&&this.controls.show():(this.controls.hide(),this.progressIdleTrack.hide(),this.nowPlayingTitle.hide(),this.screenBtnsWindow.hide()))},c.fn.generateRandomNumber=function(){this.rand=Math.floor(Math.random()*this.options.videos.length+0)},c.fn.getGlobalPrerollRandomNumber=function(){return this.randomGlobalPrerollNum=Math.floor(Math.random()*this.globalPrerollAds_arr.length)},c.fn.setPlaylistItem=function(e){this._playlist.playlistContent.mCustomScrollbar("scrollTo",this._playlist.item_array[e]),this.mainContainer.find(".stellar_vp_nowPlayingIndicator").hide(),this.mainContainer.find(".stellar_vp_thumbnail_imageSelected").removeClass("stellar_vp_thumbnail_imageSelected").addClass("stellar_vp_thumbnail_image"),t(this._playlist.item_array[e]).find(".stellar_vp_nowPlayingIndicator").show(),t(this._playlist.item_array[e]).find(".stellar_vp_thumbnail_image").removeClass("stellar_vp_thumbnail_image").addClass("stellar_vp_thumbnail_imageSelected"),this.mainContainer.find(".stellar_vp_itemSelected").removeClass("stellar_vp_itemSelected").addClass("stellar_vp_itemUnselected"),t(this._playlist.item_array[e]).removeClass("stellar_vp_itemUnselected").addClass("stellar_vp_itemSelected"),this.mainContainer.find(".stellar_vp_infoTitle").html(this._playlist.videos_array[e].title),this.mainContainer.find(".stellar_vp_infoText").html(this._playlist.videos_array[e].info_text),this.mainContainer.find(".stellar_vp_nowPlayingText").html(this._playlist.videos_array[e].title),this.nowPlayingTitleW=this.nowPlayingTitle.width()},c.fn.showCustomControls=function(){this.controls.css({zIndex:2147483647}),this.screenBtnsWindow.css({zIndex:2147483647}),this.nowPlayingTitle.css({zIndex:2147483647}),this.progressIdleTrack&&this.progressIdleTrack.css({zIndex:2147483647})},c.fn.hideCustomControls=function(){this.controls.css({zIndex:200}),this.screenBtnsWindow&&this.screenBtnsWindow.css({zIndex:200}),this.nowPlayingTitle.css({zIndex:200}),this.progressIdleTrack&&this.progressIdleTrack.css({zIndex:200})},c.fn.playVideoById=function(e){if(this.volPerc=this.volumeTrackProgress.width()/this.volumeTrackWrapper.width(),this.hideOverlay(),this.midrollPlayed=!1,this.postrollPlayed=!1,this.manageButtonsByVideoType(),this.positionShareMask(),this.createQualityWindowByType(),this.options.nextShow&&(this.nextVideoBoxTitle.html(""),this.nextVideoBoxTitle.append(e>this._playlist.videos_array.length-1?'<p class="stellar_vp_nextVideoBoxTitle">'+this._playlist.videos_array[e].title+"</p>":e==this._playlist.videos_array.length-1?'<p class="stellar_vp_nextVideoBoxTitle">'+this._playlist.videos_array[0].title+"</p>":'<p class="stellar_vp_nextVideoBoxTitle">'+this._playlist.videos_array[e+1].title+"</p>"),t(this.nextVideoBoxTitle).find(".stellar_vp_nextVideoBoxTitle").addClass("stellar_vp_controlsColor "+this.options.instanceTheme),this.updateNextBtnImg()),this._playlist.countTxtWrapper.find(".stellar_vp_countVideoInPlaylistText").html(e+1+" "+this.options.countVideos+" "+this._playlist.videos_array.length),this.updateEmbedText2(),i.iOS()&&this.options.autoplay&&this.removeiOSAutoplay(),"HTML5"==this._playlist.videos_array[e].videoType||"HTML5 (self-hosted)"==this.options.videoType){if(this.video.setVolume(this.volPerc),this.element.css("visibility","visible"),this.closeAD(),this.showVideoElements(),this._playlist.videoAdPlayed=!1,this.ytWrapper.css({zIndex:0}),this.ytWrapper.css({visibility:"hidden"}),this.imageWrapper.css({zIndex:0}),this.imageWrapper.css({visibility:"hidden"}),this.showHTML5elements(),this.resizeAll(),void 0!=this.youtubePlayer&&this._playlist.youtubePLAYING&&(this.youtubePlayer.stopVideo(),this.youtubePlayer.clearVideo()),this.myVideo.canPlayType&&this.myVideo.canPlayType("video/mp4").replace(/no/,"")){switch(this.canPlay=!0,this.selectedHTML5Quality||this.options.HTML5VideoQuality){case"HD":this.video_path=this._playlist.videos_array[e].video_path_mp4HD;break;case"SD":this.video_path=this._playlist.videos_array[e].video_path_mp4SD}this.video_pathAD=this.options.showGlobalPrerollAds?this.globalPrerollAds_arr[this.getGlobalPrerollRandomNumber()]:this._playlist.videos_array[e].preroll_mp4}this.load(this.video_path,e),this.play(),(1==this._playlist.videos_array[e].prerollAD||"yes"==this._playlist.videos_array[e].prerollAD||this.options.showGlobalPrerollAds)&&(this.pause(),this.loadAD(this.video_pathAD,"prerollActive"),this.openAD()),this.loaded=!1}else if("youtube"==this._playlist.videos_array[e].videoType||"YouTube"==this.options.videoType){if(this.showCustomControls(),void 0!=this.youtubePlayer&&this.youtubePlayer.setVolume(100*this.volPerc),"default controls"==this.options.youtubeControls?this.element.css("visibility","hidden"):"custom controls"==this.options.youtubeControls&&this.element.css("visibility","visible"),this.hideVideoElements(),this.closeAD(),this._playlist.videoAdPlayed=!1,this.preloader.stop().animate({opacity:0},0,function(){t(this).hide()}),this.ytWrapper.css({zIndex:501}),this.ytWrapper.css({visibility:"visible"}),this.imageWrapper.css({zIndex:0}),this.imageWrapper.css({visibility:"hidden"}),this.removeHTML5elements(),void 0!=this.youtubePlayer){this.youtubePlayer.setSize("100%","100%");var n=parseInt(this._playlist.videos_array[e].youtubeIDStartSeconds);""==n&&(n=0),this.isMobile.any()?this.youtubePlayer.cueVideoById(this._playlist.videos_array[e].youtubeID,n):(this.youtubePlayer.loadVideoById(this._playlist.videos_array[e].youtubeID,n),this.youtubePlayer.playVideo())}this.youtubePlayer.setPlaybackQuality(this.selectedYoutubeQuality||this.options.youtubeQuality),this.resizeAll()}this._playlist.videos_array[e].imageUrl&&(this.imageWrapper.css({zIndex:502}),this.imageWrapper.css({visibility:"visible"}),t(this.imageDisplayed).src="#",t(this.imageDisplayed).removeAttr("src"),this.imageDisplayed.src=this._playlist.videos_array[e].imageUrl)},c.fn.removeiOSAutoplay=function(){this.videoElement.removeAttr("muted"),this.videoElement.muted=!1,this.video.muted=!1,this.volumeTrackProgress.css({width:this.initialVolumeProgressWidth}),t(this.mainContainer).find(".fa-stellar-volume-off").removeClass("fa-stellar-volume-off").addClass("fa-stellar-volume-up"),this.muted=!1,this.video.setVolume(1),this.iOSVolumeButtonScreen.hide()},c.fn.manageButtonsByVideoType=function(){"HTML5"==this._playlist.videos_array[this._playlist.videoid].videoType||"HTML5 (self-hosted)"==this.options.videoType?1==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download||"yes"==this._playlist.videos_array[this._playlist.videoid].enable_mp4_download?(this.downloadBtnLink.prependTo(this.controlsBtnsWrapperRight),this.downloadBtnLink.attr("href",this._playlist.videos_array[this._playlist.videoid].video_path_mp4HD)):this.downloadBtnLink.remove():"youtube"!=this._playlist.videos_array[this._playlist.videoid].videoType&&"YouTube"!=this.options.videoType||void 0!=this.downloadBtnLink&&this.downloadBtnLink.hide()},c.fn.setImageTimer=function(){var t=this;clearTimeout(t.image_timeout),t.image_timeout=setTimeout(function(){t.randEnd=Math.floor(Math.random()*t.options.videos.length),t._playlist.videoid=t.shuffleBtnEnabled?t.randEnd:parseInt(t._playlist.videoid)+1,t._playlist.videos_array.length==t._playlist.videoid&&(t._playlist.videoid=0),t.setPlaylistItem(t._playlist.videoid),t.playVideoById(t._playlist.videoid)},1e3*t._playlist.videos_array[t._playlist.videoid].imageTimer)},c.fn.setSkipTimer=function(){if(this.options.showGlobalPrerollAds)this.counter=this.options.globalPrerollAdsSkipTimer-Math.round(this.videoAD.getCurrentTime());else{var t=this.video_pathAD||this._playlist.video_pathAD;t==this._playlist.videos_array[this._playlist.videoid].preroll_mp4&&(this.counter=this._playlist.videos_array[this._playlist.videoid].prerollSkipTimer-Math.round(this.videoAD.getCurrentTime())),t==this._playlist.videos_array[this._playlist.videoid].midroll_mp4&&(this.counter=this._playlist.videos_array[this._playlist.videoid].midrollSkipTimer-Math.round(this.videoAD.getCurrentTime())),t==this._playlist.videos_array[this._playlist.videoid].postroll_mp4&&(this.counter=this._playlist.videos_array[this._playlist.videoid].postrollSkipTimer-Math.round(this.videoAD.getCurrentTime()))}},c.fn.showPoster2=function(){this.mainContainer.find(".stellar_vp_overlay img").attr("src",this.options.posterImgOnVideoFinish),this.overlay&&this.overlay.show(),this.playButtonPoster&&this.playButtonPoster.show(),this.playButtonScreen&&this.playButtonScreen.hide(),this.poster2Showing=!0},c.fn.setOrientation=function(){switch(this.options.playerOrientation){case"RTL":this.mainContainer.find(".stellar_vp_title").addClass("elite_vp_RTL"),this.mainContainer.find(".stellar_vp_description").addClass("elite_vp_RTL"),this.mainContainer.find(".stellar_vp_infoTitle").addClass("elite_vp_RTL"),this.mainContainer.find(".stellar_vp_infoText").addClass("elite_vp_RTL"),this.mainContainer.find(".stellar_vp_nowPlayingText").addClass("elite_vp_RTL"),this.mainContainer.find(".stellar_vp_embedTitle2").addClass("elite_vp_RTL"),this.mainContainer.find(".stellar_vp_embedTitle3").addClass("elite_vp_RTL");break;case"LTL":this.mainContainer.find(".stellar_vp_title").addClass("elite_vp_LTR"),this.mainContainer.find(".stellar_vp_description").addClass("elite_vp_LTR"),this.mainContainer.find(".stellar_vp_infoTitle").addClass("elite_vp_LTR"),this.mainContainer.find(".stellar_vp_infoText").addClass("elite_vp_LTR"),this.mainContainer.find(".stellar_vp_nowPlayingText").addClass("elite_vp_LTR"),this.mainContainer.find(".stellar_vp_embedTitle2").addClass("elite_vp_LTR"),this.mainContainer.find(".stellar_vp_embedTitle3").addClass("elite_vp_LTR")}},c.fn.setupEvents=function(){var e=this;this.onpause(t.proxy(function(){this.element.addClass("vp_paused"),this.element.removeClass("stellar_vp_playing"),this.change("vp_paused")},this)),this.onplay(t.proxy(function(){this.element.removeClass("vp_paused"),this.element.addClass("stellar_vp_playing"),this.change("stellar_vp_playing")},this)),t(e.videoElementAD).bind("ended",function(){e.closeAD(),e._playlist.videoAdPlayed=!0}),t(e.videoElementAD).bind("loadeddata",function(){e.preloader.stop().animate({opacity:0},300,function(){t(this).hide()}),e.preloaderAD.stop().animate({opacity:0},300,function(){t(this).hide()}),e.options.hideVideoSource&&e.videoElementAD.empty(),clearInterval(e.myInterval),e.myInterval=setInterval(function(){e.isPaused&&!e.options.allowSkipAd||(e.setSkipTimer(),t(e.skipAdCountContentLeft).find(".stellar_vp_skipAdCountTitle").text(e.options.skipAdText+" "+e.counter+" s"),0==e.counter&&(e.toggleSkipAdCount(),e.skipBoxOn=!1,e.toggleSkipAdBox(),clearInterval(e.myInterval)))},1e3)}),t(e.videoElementAD).bind("pause",function(){e.isPaused=!0}),t(e.videoElementAD).bind("play",function(){e.isPaused=!1}),t(e.videoElementAD).bind("timeupdate",function(){e.timeLeftInside.text("(-"+e.secondsFormat(e.videoAD.getEndTime()-e.videoAD.getCurrentTime())+")"),e.progressWidthAD=e.videoAD.currentTime/e.videoAD.duration*e.elementAD.width(),e.progressAD.css("width",e.progressWidthAD),e.preloaderAD.stop().animate({opacity:0},300,function(){t(this).hide()})}),this.onended(t.proxy(function(){e.midrollPlayed=!1,e.postrollPlayed=!1,e.randEnd=Math.floor(Math.random()*e.options.videos.length+0),t(document).trigger("ss-video-ended",[e]),this._playlist.videoid=parseInt(this._playlist.videoid)+1,this._playlist.videos_array.length==this._playlist.videoid&&(this._playlist.videoid=0),e.preloader&&e.preloader.stop().animate({opacity:1},0,function(){t(this).show()}),"Play next video"==e.options.onFinish&&e.toggleAutoplayBtnEnabled?(e._playlist.videoAdPlayed=!1,e.shuffleBtnEnabled?(e.setPlaylistItem(e.randEnd),e._playlist.videoid=e.randEnd):e.setPlaylistItem(e._playlist.videoid),e.playVideoById(e._playlist.videoid),e.setPlaylistItem(e.shuffleBtnEnabled?e.randEnd:e._playlist.videoid)):"Restart video"==e.options.onFinish?(this.resetPlayer(),this.seek(0),this.play(),this.preloader.hide()):"Stop video"!=e.options.onFinish&&e.toggleAutoplayBtnEnabled||(this.pause(),this.preloader.hide(),""!=this.options.posterImgOnVideoFinish&&(this.resetPlayer(),this.seek(0),this.pause(),this.showPoster2()))},this)),this.oncanplay(t.proxy(function(){this.canPlay=!0,this.controls.removeClass("stellar_vp_disabled")},this)),this.mainContainer.parent().hover(function(t){}),this.mainContainer.parent().hover(function(){t(document).keydown(t.proxy(function(t){if(32==t.keyCode)return e.togglePlay(),!1},this))},function(){t(document).unbind("keydown")})},window.Video=c}(jQuery);var PLAYER=PLAYER||{};PLAYER.Playlist=function(t,e,i,n,o,r,a,s,l,d,c,u,h,p,f,m){var g=this;switch(this.VIDEO=e,this.element=o,this.youtube_array=f,""==i.youtubePlaylistID&&""==i.youtubeChannelID||(i.videos=g.youtube_array),this.canPlay=l,this.CLICK_EV=d,this.params=c,this.isMobile=m,this.preloader=r,this.preloaderAD=a,this.options=i,this.mainContainer=n,this.videoid="VIDEOID",this.adStartTime="ADSTARTTIME",this.videoAdPlayed=!1,this.rand=Math.floor(Math.random()*i.videos.length+0),this.ytQuality=i.youtubeQuality,this.youtubeSTARTED=!1,this.deviceAgent=h,this.agentID=p,this.YTAPI_onPlayerReady=!1,this.scrollingIsOn=!1,this.itemHoverOn=!1,this.playlist=t("<div />"),this.playlistContent=t("<div />"),this.playlistBar=t("<div />"),this.playlistBar.addClass("stellar_vp_bg "+this.options.instanceTheme),this.playlist.append(this.playlistBar),this.playlistBarSearch=t("<div />"),this.playlistBarSearch.addClass("stellar_vp_bg "+this.options.instanceTheme),this.playlist.append(this.playlistBarSearch),this.nextTxtWrapper=t("<div />"),this.playlistBar.append(this.nextTxtWrapper),this.nextTxtWrapper.append('<p class="stellar_vp_nextVideoInPlaylistText stellar_vp_controlsColor '+g.options.instanceTheme+'">'+g.options.nextVideoInPlaylistText+"</p>"),this.countTxtWrapper=t("<div />").addClass("stellar_vp_countTxtWrapper"),this.countTxtWrapper.append('<p class="stellar_vp_countVideoInPlaylistText stellar_vp_controlsColor '+g.options.instanceTheme+'">1 of 20</p>'),this.controlsBtnsWrapperLeft=t("<div />"),this.controlsBtnsWrapperLeft.addClass("stellar_vp_controlsBtnsWrapperLeft"),this.VIDEO.controls.append(this.controlsBtnsWrapperLeft),this.lastBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-step-forward").attr("id","stellar_vp_lastBtn"),this.firstBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-step-backward").attr("id","stellar_vp_firstBtn"),this.nextBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-step-forward").attr("id","stellar_vp_nextBtn"),this.nextBtnIcon2=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-chevron-right").attr("id","stellar_vp_nextBtn2"),this.previousBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-chevron-left").attr("id","stellar_vp_previousBtn"),this.shuffleBtnIcon=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_shuffleBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-random").addClass("stellar_vp_playerElement"),this.toggleAutoplayBtnIcon=t("<span />").attr("aria-hidden","true").attr("id","stellar_vp_toggleAutoplayBtn").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-toggle-on").addClass("stellar_vp_playerElement"),this.searchBtnIcon=t("<span />").attr("aria-hidden","true").addClass("fa-stellar").addClass("stellar-icon-general").addClass("stellar_vp_controlsColor "+this.options.instanceTheme).addClass("fa-stellar-search").attr("id","stellar_vp_searchBtn"),this.lastBtn=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.lastBtn.append(this.lastBtnIcon),this.firstBtn=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.firstBtn.append(this.firstBtnIcon),this.nextBtn=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.nextBtn.append(this.nextBtnIcon),this.nextBtn2=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.nextBtn2.append(this.nextBtnIcon2),this.previousBtn=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.previousBtn.append(this.previousBtnIcon),this.shuffleBtn=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.shuffleBtn.append(this.shuffleBtnIcon),this.toggleAutoplayBtn=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.toggleAutoplayBtn.append(this.toggleAutoplayBtnIcon),this.searchBtn=t("<div />").addClass("stellar_vp_controlsBtn").addClass("stellar_vp_playerElement"),this.searchBtn.append(this.searchBtnIcon),this.options.nextShow&&this.controlsBtnsWrapperLeft.append(this.nextBtn),this.playlistControlsBtnsWrapperRight=t("<div />"),this.playlistBar.append(this.playlistControlsBtnsWrapperRight),this.playlistControlsBtnsWrapperLeft=t("<div />"),this.playlistBar.append(this.playlistControlsBtnsWrapperLeft),this.playlistControlsBtnsWrapperSearch=t("<div />"),this.playlistBarSearch.append(this.playlistControlsBtnsWrapperSearch),this.playlistControlsBtnsWrapperRight.append(this.shuffleBtn),this.playlistControlsBtnsWrapperRight.append(this.toggleAutoplayBtn),this.playlistControlsBtnsWrapperLeft.append(this.previousBtn),this.playlistControlsBtnsWrapperLeft.append(this.countTxtWrapper),this.playlistControlsBtnsWrapperLeft.append(this.nextBtn2),this.playlistControlsBtnsWrapperSearch.append(this.searchBtn),this.options.playlist){case"Right playlist":this.playlist.attr("id","stellar_vp_playlist"),this.playlist.addClass("stellar_vp_playlist "+this.options.instanceTheme),this.playlistContent.attr("id",g.options.instanceName+"stellar_vp_playlistContent"),this.playlistBar.addClass("stellar_vp_playlistBar"),this.playlistBarSearch.addClass("stellar_vp_playlistBarSearch"),this.searchBtn.append('<input type="text" id="stellar_vp_input" class="stellar_vp_themeColorThumbBorder stellar_vp_controlsColor '+g.options.instanceTheme+'" placeholder="'+this.options.playlistSearchText+'">'),this.nextTxtWrapper.addClass("stellar_vp_nextTxtWrapper"),this.playlistControlsBtnsWrapperSearch.addClass("stellar_vp_playlistControlsBtnsWrapperSearch"),this.playlistControlsBtnsWrapperRight.addClass("stellar_vp_playlistControlsBtnsWrapperRight"),this.playlistControlsBtnsWrapperLeft.addClass("stellar_vp_playlistControlsBtnsWrapperLeft");break;case"Bottom playlist":this.playlist.attr("id","stellar_vp_playlist_bottom"),this.playlist.addClass("stellar_vp_playlist "+this.options.instanceTheme),this.playlistContent.attr("id",g.options.instanceName+"stellar_vp_playlistContent_bottom"),this.playlistBar.addClass("stellar_vp_playlistBar_bottom"),this.playlistBarSearch.addClass("stellar_vp_playlistBarSearch_bottom"),this.searchBtn.append('<input type="text" id="stellar_vp_input" class="stellar_vp_themeColorThumbBorder stellar_vp_controlsColor '+g.options.instanceTheme+'" placeholder="'+this.options.playlistSearchText+'">'),this.nextTxtWrapper.addClass("stellar_vp_nextTxtWrapper_bottom"),this.playlistControlsBtnsWrapperSearch.addClass("stellar_vp_playlistControlsBtnsWrapperSearch_bottom"),this.playlistControlsBtnsWrapperRight.addClass("stellar_vp_playlistControlsBtnsWrapperRight_bottom"),this.playlistControlsBtnsWrapperLeft.addClass("stellar_vp_playlistControlsBtnsWrapperLeft_bottom")}g.videos_array=new Array,g.item_array=new Array,this.vimeoWrapper=t("<div></div>"),this.vimeoWrapper.attr("id","stellar_vp_vimeoWrapper"),g.element&&g.element.append(g.vimeoWrapper),t("#stellar_vp_vimeoWrapper").html('<iframe id="vimeo_video" src="" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');var v=0;function y(t){}function b(t){g.videoAdPlayed=!1,g.randEnd=Math.floor(Math.random()*i.videos.length+0),"Right playlist"==i.playlist||"Bottom playlist"==i.playlist||"Off"==i.playlist?(g.videoid=parseInt(g.videoid)+1,g.videos_array.length==g.videoid&&(g.videoid=0),"Play next video"==i.onFinish&&g.toggleAutoplayBtnEnabled?(g.VIDEO.shuffleBtnEnabled?(g.VIDEO.setPlaylistItem(g.randEnd),g.videoid=g.randEnd):g.VIDEO.setPlaylistItem(g.videoid),g.VIDEO.playVideoById(g.videoid)):"Restart video"==i.onFinish?g.vimeoPlayer.play():"Stop video"==i.onFinish&&""!=i.posterImgOnVideoFinish&&g.VIDEO.showPoster2()):"Restart video"==i.onFinish&&g.vimeoPlayer.play()}function _(t,e){g.vimeo_time=Math.floor(t.seconds),g.vimeo_duration=Math.floor(t.duration),0!=g.vimeo_time||1!=g.videos_array[g.videoid].prerollAD&&"yes"!=g.videos_array[g.videoid].prerollAD||(g.VIDEO.videoAdStarted=!0,g.videoAdPlayed?g.vimeoPlayer.play():(g.vimeoPlayer.pause(),s.canPlayType&&s.canPlayType("video/mp4").replace(/no/,"")&&(this.canPlay=!0,g.video_pathAD=g.videos_array[g.videoid].preroll_mp4),g.VIDEO.loadAD(g.video_pathAD,"prerollActive"),g.VIDEO.openAD())),g.tim=setInterval(function(){if("HTML5"!=i.videos[g.videoid].videoType&&"HTML5 (self-hosted)"!=i.videoType){if(g.VIDEO.secondsFormat(g.vimeo_time)==g.videos_array[g.videoid].midrollAD_displayTime){if(g.VIDEO.midrollPlayed)return;g.VIDEO.midrollPlayed=!0,1!=g.videos_array[g.videoid].midrollAD&&"yes"!=g.videos_array[g.videoid].midrollAD||(s.canPlayType&&s.canPlayType("video/mp4").replace(/no/,"")&&(g.canPlay=!0,g.video_pathAD=g.videos_array[g.videoid].midroll_mp4),g.vimeoPlayer.pause(),g.VIDEO.loadAD(g.video_pathAD,"midrollActive"),g.VIDEO.openAD())}if(g.VIDEO.secondsFormat(g.vimeo_time)>=g.VIDEO.secondsFormat(g.vimeo_duration-1)&&g.vimeo_duration>0){if(g.VIDEO.postrollPlayed)return;g.VIDEO.postrollPlayed=!0,1!=g.videos_array[g.videoid].postrollAD&&"yes"!=g.videos_array[g.videoid].postrollAD||(s.canPlayType&&s.canPlayType("video/mp4").replace(/no/,"")&&(g.canPlay=!0,g.video_pathAD=g.videos_array[g.videoid].postroll_mp4),g.vimeoPlayer.pause(),g.VIDEO.loadAD(g.video_pathAD,"postrollActive"),g.VIDEO.openAD())}}},50),g.videos_array[g.videoid].popupAdShow&&g.VIDEO.enablePopup()}function w(){g.vimeoIframe=t("#vimeo_video")[0],g.vimeoPlayer=new Vimeo.Player(g.vimeoIframe),g.vimeoPlayer.on("pause",y),g.vimeoPlayer.on("ended",b),g.vimeoPlayer.on("timeupdate",_),u&&"AD 5 sec + Pieces After Effects project"!=g.options.videos[0].title&&"Pieces After Effects project"!=g.options.videos[0].title&&"AD 5 sec + Space Odyssey After Effects Project"!=g.options.videos[0].title&&"AD 5 sec Swimwear Spring Summer"!=g.options.videos[0].title&&"i Create"!=g.options.videos[0].title&&"Swimwear Spring Summer"!=g.options.videos[0].title&&"PLuFX50GllfgP_mecAi4LV7cYva-WLVnaM"!=g.options.youtubePlaylistID&&"Google drive video example"!=g.options.videos[0].title&&"LiveStreaming HLS m3u8 video example"!=g.options.videos[0].title&&"Youtube 360 VR video"!=g.options.videos[0].title&&(g.VIDEO.pw(),g.vimeoWrapper.css({zIndex:0}),t("iframe#vimeo_video").attr("src",""))}function x(){g.isMobile.any()?document.getElementById("vimeo_video").src=i.loadRandomVideoOnStart?g.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+g.videos_array[g.rand].vimeoID+"?autoplay=0?api=1&player_id=vimeo_video&color="+i.vimeoColor:g.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+g.videos_array[g.videoid].vimeoID+"?autoplay=0?api=1&player_id=vimeo_video&color="+i.vimeoColor:document.getElementById("vimeo_video").src=i.autoplay?i.loadRandomVideoOnStart?g.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+g.videos_array[g.rand].vimeoID+"?autoplay=1?api=1&player_id=vimeo_video&color="+i.vimeoColor:g.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+g.videos_array[g.videoid].vimeoID+"?autoplay=1?api=1&player_id=vimeo_video&color="+i.vimeoColor:i.loadRandomVideoOnStart?g.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+g.videos_array[g.rand].vimeoID+"?autoplay=0?api=1&player_id=vimeo_video&color="+i.vimeoColor:g.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+g.videos_array[g.videoid].vimeoID+"?autoplay=0?api=1&player_id=vimeo_video&color="+i.vimeoColor}this.onPlayerReady=function(t){if(g.YTAPI_onPlayerReady=!0,"youtube"==i.videos[g.videoid].videoType||"YouTube"==i.videoType){var e;g.VIDEO.playButtonScreen.hide(),i.loadRandomVideoOnStart?""==(e=parseInt(g.videos_array[g.rand].youtubeIDStartSeconds))&&(e=0):""==(e=parseInt(g.videos_array[g.videoid].youtubeIDStartSeconds))&&(e=0);var n=!1,o=window.navigator.userAgent,r=o.indexOf("MSIE "),a=o.indexOf("Trident/");(r>-1||a>-1)&&(n=!0),n?(g.VIDEO.youtubePlayer.loadVideoById(i.loadRandomVideoOnStart?g.videos_array[g.rand].youtubeID:g.videos_array[g.videoid].youtubeID,e),g.VIDEO.youtubePlayer.pauseVideo()):g.VIDEO.youtubePlayer.cueVideoById(i.loadRandomVideoOnStart?g.videos_array[g.rand].youtubeID:g.videos_array[g.videoid].youtubeID,e),g.VIDEO.youtubePlayer.setPlaybackQuality(g.ytQuality),i.autoplay&&(g.isMobile.any()||g.VIDEO.youtubePlayer.playVideo()),g.VIDEO.resizeAll(),u&&"AD 5 sec + Pieces After Effects project"!=g.options.videos[0].title&&"Pieces After Effects project"!=g.options.videos[0].title&&"AD 5 sec + Space Odyssey After Effects Project"!=g.options.videos[0].title&&"AD 5 sec Swimwear Spring Summer"!=g.options.videos[0].title&&"i Create"!=g.options.videos[0].title&&"Swimwear Spring Summer"!=g.options.videos[0].title&&"PLuFX50GllfgP_mecAi4LV7cYva-WLVnaM"!=g.options.youtubePlaylistID&&"Google drive video example"!=g.options.videos[0].title&&"LiveStreaming HLS m3u8 video example"!=g.options.videos[0].title&&"Youtube 360 VR video"!=g.options.videos[0].title&&(g.VIDEO.pw(),void 0!=g.VIDEO.youtubePlayer&&(g.VIDEO.youtubePlayer.stopVideo(),g.VIDEO.youtubePlayer.clearVideo(),g.VIDEO.youtubePlayer.setSize(1,1))),g.popupTimer=setInterval(function(){g.videos_array[g.videoid].popupAdShow&&g.VIDEO.enablePopup()},1e3)}},this.onPlayerStateChange=function(t){var n=Math.floor(g.VIDEO.youtubePlayer.getCurrentTime());if(g.VIDEO.calculateYoutubeTotalTime(g.VIDEO.youtubePlayer.getDuration()),1===t.data&&0==n&&(g.youtubeSTARTED=!0),1===t.data)g.isMobile.any()&&g.VIDEO.playButtonScreen.addClass("stellar_vp_playButtonScreenHide"),o.removeClass("vp_paused"),o.addClass("stellar_vp_playing"),e.change("stellar_vp_playing"),g.VIDEO.play(),g._timer=setInterval(function(){if("HTML5"!=i.videos[g.videoid].videoType&&"HTML5 (self-hosted)"!=i.videoType){g.progressWidth=g.VIDEO.youtubePlayer.getCurrentTime()/g.VIDEO.youtubePlayer.getDuration()*g.VIDEO.videoTrack.width(),g.VIDEO.videoTrackProgress.css("width",g.progressWidth),g.progressIdleWidth=g.VIDEO.youtubePlayer.getCurrentTime()/g.VIDEO.youtubePlayer.getDuration()*g.VIDEO.progressIdleTrack.width(),g.VIDEO.progressIdle.css("width",g.progressIdleWidth),g.VIDEO.calculateYoutubeElapsedTime(g.VIDEO.youtubePlayer.getCurrentTime());var t=parseInt(g.videos_array[g.videoid].youtubeIDEndSeconds);if(""==t&&(t=0),parseInt(g.VIDEO.youtubePlayer.getCurrentTime())==t&&g.VIDEO.youtubePlayer.stopVideo(),g.buffered=g.VIDEO.youtubePlayer.getVideoLoadedFraction(),g.downloadWidth=g.buffered*g.VIDEO.videoTrack.width(),g.VIDEO.videoTrackDownload.css("width",g.downloadWidth),g.progressIdleDownloadWidth=g.buffered*g.VIDEO.progressIdleTrack.width(),g.VIDEO.progressIdleDownload.css("width",g.progressIdleDownloadWidth),g.VIDEO.secondsFormat(g.VIDEO.youtubePlayer.getCurrentTime())==g.videos_array[g.videoid].midrollAD_displayTime){if(g.VIDEO.midrollPlayed)return;g.VIDEO.midrollPlayed=!0,1!=g.videos_array[g.videoid].midrollAD&&"yes"!=g.videos_array[g.videoid].midrollAD||(s.canPlayType&&s.canPlayType("video/mp4").replace(/no/,"")&&(g.canPlay=!0,g.video_pathAD=g.videos_array[g.videoid].midroll_mp4),g.VIDEO.youtubePlayer.pauseVideo(),g.VIDEO.loadAD(g.video_pathAD,"midrollActive"),g.VIDEO.openAD())}if(g.VIDEO.secondsFormat(g.VIDEO.youtubePlayer.getCurrentTime())>=g.VIDEO.secondsFormat(g.VIDEO.youtubePlayer.getDuration()-1)&&g.VIDEO.youtubePlayer.getDuration()>0){if(g.VIDEO.postrollPlayed)return;g.VIDEO.postrollPlayed=!0,1!=g.videos_array[g.videoid].postrollAD&&"yes"!=g.videos_array[g.videoid].postrollAD||(s.canPlayType&&s.canPlayType("video/mp4").replace(/no/,"")&&(g.canPlay=!0,g.video_pathAD=g.videos_array[g.videoid].postroll_mp4),g.VIDEO.youtubePlayer.pauseVideo(),g.VIDEO.loadAD(g.video_pathAD,"postrollActive"),g.VIDEO.openAD())}}},50);else if(2===t.data)clearInterval(g._timer),o.addClass("vp_paused"),o.removeClass("stellar_vp_playing"),e.change("vp_paused"),g.VIDEO.pause();else if(0===t.data)if(g.VIDEO.midrollPlayed=!1,g.VIDEO.postrollPlayed=!1,g.randEnd=Math.floor(Math.random()*i.videos.length+0),g.videoAdPlayed=!1,g.videoid=parseInt(g.videoid)+1,g.videos_array.length==g.videoid&&(g.videoid=0),"Play next video"==i.onFinish&&g.VIDEO.toggleAutoplayBtnEnabled)g.VIDEO.shuffleBtnEnabled?(g.VIDEO.setPlaylistItem(g.randEnd),g.videoid=g.randEnd):g.VIDEO.setPlaylistItem(g.videoid),g.VIDEO.playVideoById(g.videoid);else if("Restart video"==i.onFinish)void 0!=g.VIDEO.youtubePlayer&&(g.VIDEO.youtubePlayer.seekTo(0),g.VIDEO.youtubePlayer.playVideo());else if("Stop video"==i.onFinish&&""!=i.posterImgOnVideoFinish&&(g.VIDEO.showPoster2(),"youtube"==i.videos[g.videoid].videoType||"YouTube"==i.videoType)){if(g.VIDEO.closeAD(),g.videoAdPlayed=!1,g.VIDEO.ytWrapper.css({zIndex:501}),g.VIDEO.ytWrapper.css({visibility:"visible"}),g.VIDEO.removeHTML5elements(),void 0!=g.VIDEO.youtubePlayer){var r=parseInt(g.videos_array[g.videoid].youtubeIDStartSeconds);""==r&&(r=0),g.VIDEO.youtubePlayer.cueVideoById(g.videos_array[g.videoid].youtubeID,r),g.isMobile.any()||g.VIDEO.youtubePlayer.pauseVideo()}g.VIDEO.youtubePlayer.setPlaybackQuality(g.ytQuality)}if(1!==t.data||0!=n||1!=g.videos_array[g.videoid].prerollAD&&"yes"!=g.videos_array[g.videoid].prerollAD&&!g.options.showGlobalPrerollAds)t.data!=YT.PlayerState.PLAYING&&t.data!=YT.PlayerState.CUED||(g.youtubePLAYING=!0);else if(g.VIDEO.videoAdStarted=!0,g.videoAdPlayed)g.VIDEO.youtubePlayer.playVideo();else{if(g.VIDEO.youtubePlayer.pauseVideo(),s.canPlayType&&s.canPlayType("video/mp4").replace(/no/,"")&&(this.canPlay=!0,g.video_pathAD=i.showGlobalPrerollAds?g.VIDEO.globalPrerollAds_arr[g.VIDEO.getGlobalPrerollRandomNumber()]:g.videos_array[g.videoid].preroll_mp4),g.VIDEO.poster2Showing)return;g.VIDEO.loadAD(g.video_pathAD,"prerollActive"),g.VIDEO.openAD()}};var T=-1;switch(t(i.videos).each(function(){var e={id:T+=1,title:this.title,videoType:this.videoType,youtubeID:this.youtubeID,youtubeIDStartSeconds:this.youtubeIDStartSeconds,youtubeIDEndSeconds:this.youtubeIDEndSeconds,vimeoID:this.vimeoID,video_path_mp4HD:this.mp4HD,video_path_mp4SD:this.mp4SD,enable_mp4_download:this.enable_mp4_download,imageUrl:this.imageUrl,imageTimer:this.imageTimer,prerollAD:this.prerollAD,prerollGotoLink:this.prerollGotoLink,preroll_mp4:this.preroll_mp4,prerollSkipTimer:this.prerollSkipTimer,midrollAD:this.midrollAD,midrollAD_displayTime:this.midrollAD_displayTime,midrollGotoLink:this.midrollGotoLink,midroll_mp4:this.midroll_mp4,midrollSkipTimer:this.midrollSkipTimer,postrollAD:this.postrollAD,postrollGotoLink:this.postrollGotoLink,postroll_mp4:this.postroll_mp4,postrollSkipTimer:this.postrollSkipTimer,popupImg:this.popupImg,popupAdShow:this.popupAdShow,popupAdStartTime:this.popupAdStartTime,popupAdEndTime:this.popupAdEndTime,popupAdGoToLink:this.popupAdGoToLink,description:this.description,thumbnail_image:this.thumbImg,info_text:this.info,currentTime:this.currentTime};g.videos_array.push(e),g.itemHoverBox=t("<div />"),g.itemHoverBox.addClass("stellar_vp_itemHoverBox"),g.itemHoverBox.css({opacity:0}),g.nowPlayingIndicatorIcon=t("<span />").attr("aria-hidden","true").addClass("stellar_vp_nowPlayingIndicator").addClass("fa-stellar").addClass("stellar_vp_themeColorText").addClass("fa-stellar-play-indicator").attr("id","stellar_vp_nowPlayingIndicator").hide(),g.itemLeft=t("<div />"),g.itemLeft.addClass("stellar_vp_itemLeft stellar_vp_themeColorThumbBorder"),g.i=document.createElement("img"),g.i.onload=function(){g.thumbImageW=this.width,g.thumbImageH=this.height},g.i.src=e.thumbnail_image,"youtube"!=i.videos[T].videoType&&"YouTube"!=i.videoType||"auto"!=e.thumbnail_image&&""!=e.thumbnail_image||(g.i.src="http://img.youtube.com/vi/"+i.videos[T].youtubeID+"/1.jpg"),g.itemLeft.append(g.i),g.itemLeft.append(g.itemHoverBox),g.itemLeft.append(g.nowPlayingIndicatorIcon),t(g.i).addClass("stellar_vp_thumbnail_image");var n='<div class="stellar_vp_itemRight"><div class="stellar_vp_title stellar_vp_themeColorText">'+e.title+'</div><div class="stellar_vp_description stellar_vp_controlsColor '+g.options.instanceTheme+'"> '+e.description+"</div></div>",o='<div class="stellar_vp_itemRight_bottom"><div class="stellar_vp_title stellar_vp_themeColorText">'+e.title+'</div><div class="stellar_vp_description stellar_vp_controlsColor '+g.options.instanceTheme+'"> '+e.description+"</div></div>";switch(i.playlist){case"Right playlist":g.item=t("<div />"),g.item.addClass("stellar_vp_item").css("top",String(v)+"px"),g.item_array.push(g.item),g.item.addClass("stellar_vp_itemUnselected "+g.options.instanceTheme),g.item.append(g.itemLeft),g.item.append(n),v+=88;break;case"Bottom playlist":g.item=t("<div />"),g.item.addClass("stellar_vp_item").css("left",String(0)+"px"),g.item_array.push(g.item),g.item.addClass("stellar_vp_itemUnselected "+g.options.instanceTheme),g.item.css("display","inline-flex"),g.item.append(g.itemLeft),g.item.append(o)}g.playlistContent.append(g.item),void 0!=g.item&&(g.item.bind(g.CLICK_EV,function(){g.scrollingIsOn&&g.isMobile.any()||(g.preloader&&g.preloader.stop().animate({opacity:1},0,function(){t(this).show()}),g.videoid=e.id,g.VIDEO.setPlaylistItem(g.videoid),g.VIDEO.resetPlayer(),g.VIDEO.resetPlayerAD(),g.VIDEO.resizeAll(),"vimeo"!=i.videos[g.videoid].videoType&&"Vimeo"!=i.videoType||(x(),w()),g.VIDEO.playVideoById(g.videoid),g.youtubeSTARTED=!1,u&&"AD 5 sec + Pieces After Effects project"!=g.options.videos[0].title&&"Pieces After Effects project"!=g.options.videos[0].title&&"AD 5 sec + Space Odyssey After Effects Project"!=g.options.videos[0].title&&"AD 5 sec Swimwear Spring Summer"!=g.options.videos[0].title&&"i Create"!=g.options.videos[0].title&&"Swimwear Spring Summer"!=g.options.videos[0].title&&"PLuFX50GllfgP_mecAi4LV7cYva-WLVnaM"!=g.options.youtubePlaylistID&&"Google drive video example"!=g.options.videos[0].title&&g.VIDEO.pw())}),g.item.bind("mouseenter",function(){t(this).find(".stellar_vp_itemHoverBox").stop().animate({opacity:1},200,function(){}),t(this).find(".stellar_vp_thumbnail_image").css({"-webkit-transform":"scale(1.2)","-moz-transform":"scale(1.2)","-ms-transform":"scale(1.2)","-o-transform":"scale(1.2)",transform:"scale(1.2)"})}),g.item.bind("mouseleave",function(){t(this).find(".stellar_vp_itemHoverBox").stop().animate({opacity:0},200,function(){}),t(this).find(".stellar_vp_thumbnail_image").css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)"})}))}),g.videoid=i.loadRandomVideoOnStart?g.rand:i.playSpecificVideo,g.params.id&&(g.videoid=g.rand=parseInt(g.params.id)),g.options.playlist){case"Right playlist":case"Bottom playlist":i.loadRandomVideoOnStart?(t(g.item_array[g.rand]).removeClass("stellar_vp_itemUnselected "+this.options.instanceTheme).addClass("stellar_vp_itemSelected "+this.options.instanceTheme),g.item_array[g.rand].find(".stellar_vp_thumbnail_image").removeClass("stellar_vp_thumbnail_image").addClass("stellar_vp_thumbnail_imageSelected")):(t(g.item_array[g.videoid]).removeClass("stellar_vp_itemUnselected "+this.options.instanceTheme).addClass("stellar_vp_itemSelected "+this.options.instanceTheme),g.item_array[g.videoid].find(".stellar_vp_thumbnail_image").removeClass("stellar_vp_thumbnail_image").addClass("stellar_vp_thumbnail_imageSelected"))}if(t(g.playlistContent).mCustomScrollbar("scrollTo",g.item_array[g.videoid]),t(function(t){g.mainContainer.find("#stellar_vp_input").on("keyup",function(){var e,i,n;for(e=document.getElementById("stellar_vp_input").value.toUpperCase(),i=document.getElementById("mCSB_1_container").getElementsByClassName("stellar_vp_item"),n=0;n<i.length;n++)i[n].getElementsByClassName("stellar_vp_title")[0].innerHTML.toUpperCase().indexOf(e)>-1?(t(i[n]).show(),t(i[n]).stop().animate({opacity:1},300)):t(i[n]).stop().animate({opacity:0},300,function(){t(this).hide()});t(g.playlistContent).mCustomScrollbar("scrollTo","first")})}),g.countTxtWrapper.find(".stellar_vp_countVideoInPlaylistText").html(g.videoid+1+" "+g.options.countVideos+" "+g.item_array.length),"youtube"==i.videos[g.videoid].videoType||"YouTube"==i.videoType)g.VIDEO.imageWrapper.css({zIndex:0}),g.VIDEO.imageWrapper.css({visibility:"none"}),g.VIDEO.hideVideoElements(),g.preloader.stop().animate({opacity:0},0,function(){t(this).hide()}),g.VIDEO.ytWrapper.css({zIndex:501}),g.VIDEO.ytWrapper.css({visibility:"visible"}),g.vimeoWrapper.css({zIndex:0});else if("HTML5"==i.videos[g.videoid].videoType||"HTML5 (self-hosted)"==i.videoType){if(g.VIDEO.imageWrapper.css({zIndex:0}),g.VIDEO.imageWrapper.css({visibility:"none"}),g.VIDEO.ytWrapper.css({zIndex:0}),g.VIDEO.ytWrapper.css({visibility:"hidden"}),g.vimeoWrapper.css({zIndex:0}),s.canPlayType&&s.canPlayType("video/mp4").replace(/no/,""))if(this.canPlay=!0,i.loadRandomVideoOnStart){switch(i.HTML5VideoQuality){case"HD":g.video_path=g.videos_array[g.rand].video_path_mp4HD;break;case"SD":g.video_path=g.videos_array[g.rand].video_path_mp4SD}g.video_pathAD=g.videos_array[g.rand].preroll_mp4}else{switch(i.HTML5VideoQuality){case"HD":g.video_path=g.videos_array[g.videoid].video_path_mp4HD;break;case"SD":g.video_path=g.videos_array[g.videoid].video_path_mp4SD}g.video_pathAD=g.videos_array[g.videoid].preroll_mp4}g.VIDEO.load(g.video_path,"0")}else"vimeo"!=i.videos[g.videoid].videoType&&"Vimeo"!=i.videoType||(g.VIDEO.imageWrapper.css({zIndex:0}),g.VIDEO.imageWrapper.css({visibility:"none"}),g.VIDEO.hideCustomControls(),g.VIDEO.hideVideoElements(),g.preloader.stop().animate({opacity:0},700,function(){t(this).hide()}),g.vimeoWrapper.css({zIndex:501}),x(),w());i.videos[g.videoid].imageUrl&&(g.VIDEO.imageWrapper.css({zIndex:502}),g.VIDEO.imageWrapper.css({visibility:"visible"}),g.VIDEO.imageDisplayed.src=g.videos_array[g.videoid].imageUrl,t(g.VIDEO.imageDisplayed).on("load",function(){i.autoplay&&g.VIDEO.setImageTimer()})),g.nextBtn.bind(g.CLICK_EV,function(){g.VIDEO.shuffleBtnEnabled?(g.VIDEO.generateRandomNumber(),g.videoid=g.VIDEO.rand,g.VIDEO.setPlaylistItem(g.videoid)):(g.videoid=g.videoid+1,g.videoid>=i.videos.length&&(g.videoid=0),g.VIDEO.setPlaylistItem(g.videoid)),g.VIDEO.playVideoById(g.videoid)}),g.nextBtn2.bind(g.CLICK_EV,function(){g.VIDEO.shuffleBtnEnabled?(g.VIDEO.generateRandomNumber(),g.videoid=g.VIDEO.rand,g.VIDEO.setPlaylistItem(g.videoid)):(g.videoid=g.videoid+1,g.videoid>=i.videos.length&&(g.videoid=0),g.VIDEO.setPlaylistItem(g.videoid)),g.VIDEO.playVideoById(g.videoid)}),g.previousBtn.bind(g.CLICK_EV,function(){g.VIDEO.shuffleBtnEnabled?(g.VIDEO.generateRandomNumber(),g.videoid=g.VIDEO.rand,g.VIDEO.setPlaylistItem(g.videoid)):(g.videoid=g.videoid-1,g.videoid<0&&(g.videoid=i.videos.length-1),g.VIDEO.setPlaylistItem(g.videoid)),g.VIDEO.playVideoById(g.videoid)}),g.shuffleBtn.bind(g.CLICK_EV,function(){g.VIDEO.toggleShuffleBtn()}),g.toggleAutoplayBtn.bind(g.CLICK_EV,function(){g.VIDEO.toggleAutoplayBtn()}),g.lastBtn.bind(g.CLICK_EV,function(){t(g.playlistContent).mCustomScrollbar("scrollTo","last")}),g.firstBtn.bind(g.CLICK_EV,function(){t(g.playlistContent).mCustomScrollbar("scrollTo","first")}),g.totalWidth=i.videoPlayerWidth,g.totalHeight=i.videoPlayerHeight,"Right playlist"!=i.playlist&&"Bottom playlist"!=i.playlist||g.element&&(n.append(g.playlist),g.playlist.append(g.playlistContent)),this.playlistW=this.playlist.width(),this.playlistH=this.playlist.height(),"Right playlist"==i.playlist?(g.playlistContent.css("height",String(v)+"px"),g.playerWidth=g.totalWidth-g.playlist.width(),g.playerHeight=g.totalHeight-g.playlist.height(),g.playlist.css({height:"100%",top:0}),g.playlistContent.height(n.height()-44-44),t(g.playlistContent).mCustomScrollbar({axis:"y",theme:g.options.playlistScrollType,scrollButtons:{enable:!0},callbacks:{onScrollStart:function(){g.scrollingIsOn=!0},onScroll:function(){g.scrollingIsOn=!1}}})):"Bottom playlist"==i.playlist&&(g.playlistContent.css("width",String(0)+"px"),g.playerWidth=g.totalWidth,g.playerHeight=g.totalHeight-g.playlist.height(),g.playlist.css({left:0,width:"100%",bottom:0}),g.playlistContent.width(n.width()),t(g.playlistContent).mCustomScrollbar({axis:"x",theme:g.options.playlistScrollType,scrollButtons:{enable:!0},callbacks:{onScrollStart:function(){g.scrollingIsOn=!0},onScroll:function(){g.scrollingIsOn=!1}},advanced:{autoExpandHorizontalScroll:!0},setHeight:"auto",setWidth:"auto"})),t(g.playlistContent).mCustomScrollbar("scrollTo",g.item_array[g.videoid])},PLAYER.Playlist.prototype={},PLAYER.Playlist.prototype.hidePlaylist=function(){this.playlist.hide()},PLAYER.Playlist.prototype.showPlaylist=function(){this.playlist.show()},PLAYER.Playlist.prototype.resizePlaylist=function(t,e){switch(this.options.playlist){case"Right playlist":this.playlist.css({right:0,height:"100%"}),this.playlistContent.css({position:"absolute",top:44,height:this.mainContainer.height()-44,width:"100%"}),this.playlistContent.height(this.mainContainer.height()-this.playlistBar.height()-this.playlistBarSearch.height());break;case"Bottom playlist":this.playlist.css({left:0,width:"100%",bottom:0}),this.playlistContent.height(this.playlist.height()-this.playlistBar.height())}},PLAYER.Playlist.prototype.playYoutube=function(t){var e=parseInt(this.videos_array[t].youtubeIDStartSeconds);""==e&&(e=0),void 0!=this.VIDEO.youtubePlayer&&(this.VIDEO.youtubePlayer.cueVideoById(this.videos_array[t].youtubeID,this.videos_array[t].youtubeIDStartSeconds),this.VIDEO.youtubePlayer.setPlaybackQuality(this.ytQuality),this.preloader.hide(),this.VIDEO.ytWrapper.css({zIndex:501}),this.VIDEO.ytWrapper.css({visibility:"visible"}),this.isMobile.any()||this.VIDEO.youtubePlayer.playVideo()),this.VIDEO.resizeAll()},PLAYER.Playlist.prototype.playVimeo=function(t){this.preloader.hide(),this.vimeoWrapper.css({zIndex:501}),this.isMobile.any()?document.getElementById("vimeo_video").src=self.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+this.videos_array[t].vimeoID+"?autoplay=0?api=1&player_id=vimeo_video&color="+this.options.vimeoColor:document.getElementById("vimeo_video").src=self.VIDEO.vimeoProtocol+"://player.vimeo.com/video/"+this.videos_array[t].vimeoID+"?autoplay=1?api=1&player_id=vimeo_video&color="+this.options.vimeoColor};var enableInlineVideo=function(){function t(t,e,i,n){function o(e){!!t[i]==!!n&&e.stopImmediatePropagation(),delete t[i]}return t.addEventListener(e,o,!1),o}function e(t,e,i,n){function o(t){i[e]=t}n&&o(t[e]),Object.defineProperty(t,e,{get:function(){return i[e]},set:o})}function i(t,e,i){i.addEventListener(e,function(){return t.dispatchEvent(new Event(e))})}function n(t,e){Promise.resolve().then(function(){t.dispatchEvent(new Event(e))})}function o(t,e,i){(s||0)+200<Date.now()&&(t["bfred-it:iphone-inline-video:event"]=!0,s=Date.now()),i||(t.currentTime=e),d[++c%3]=100*e|0}function r(){var t=this["bfred-it:iphone-inline-video"];this.webkitDisplayingFullscreen?this["bfred-it:iphone-inline-video:nativeplay"]():("data:"!==t.driver.src&&0===this.buffered.length&&(o(this,0,!0),t.driver.src=this.childNodes[0].src),this.paused&&(t.paused=!1,0===this.buffered.length&&this.load(),t.driver.play(),t.updater.start(),t.hasAudio||(n(this,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&n(this,"playing"))))}function a(t){var e=this["bfred-it:iphone-inline-video"];e.driver.pause(),e.updater.stop(),this.webkitDisplayingFullscreen&&this["bfred-it:iphone-inline-video:nativepause"](),e.paused&&!t||(e.paused=!0,e.hasAudio||n(this,"pause"),this.ended&&(this["bfred-it:iphone-inline-video:event"]=!0,n(this,"ended")))}var s,l="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,d=[],c=0;return function(s,c){if(void 0===c&&(c={}),!s["bfred-it:iphone-inline-video"]&&(c.everywhere||l&&(c.iPad||c.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))){!s.paused&&s.webkitDisplayingFullscreen&&s.pause(),function(t,e){var r=t["bfred-it:iphone-inline-video"]={};r.paused=!0,r.hasAudio=e,r.video=t,r.updater=function(t,e,i,n){function o(i){r=e(o,n),t(i-(a||i)),a=i}var r,a;return{start:function(){r||o(0)},stop:function(){i(r),r=null,a=0}}}((function(t){this.video.readyState>=this.video.HAVE_FUTURE_DATA?(this.hasAudio||(this.driver.currentTime=this.video.currentTime+t*this.video.playbackRate/1e3,this.video.loop&&this.driver.currentTime>=this.video.duration&&(this.driver.currentTime=0)),o(this.video,this.driver.currentTime)):this.video.networkState===this.video.NETWORK_IDLE&&0===this.video.buffered.length&&this.video.load(),this.video.ended&&(delete this.video["bfred-it:iphone-inline-video:event"],this.video.pause(!0))}).bind(r),requestAnimationFrame,cancelAnimationFrame),e?r.driver=function(t){var e=new Audio;return i(t,"play",e),i(t,"playing",e),i(t,"pause",e),e.crossOrigin=t.crossOrigin,void 0!=t.childNodes[0]&&(e.src=t.childNodes[0].src||t.currentSrc||"data:"),e}(t):(t.addEventListener("canplay",function(){t.paused||n(t,"playing")}),r.driver={src:t.childNodes[0].src||t.currentSrc||"data:",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,r.driver.currentTime>=r.video.duration&&o(t,0)},get ended(){return r.driver.currentTime>=r.video.duration}}),t.addEventListener("emptied",function(){var e=!r.driver.src||"data:"===r.driver.src;r.driver.src&&r.driver.src!==t.childNodes[0].src&&(o(t,0,!0),r.driver.src=t.childNodes[0].src,e?r.driver.play():r.updater.stop())},!1),t.addEventListener("webkitbeginfullscreen",function(){t.paused?e&&0===r.driver.buffered.length&&r.driver.load():(t.pause(),t["bfred-it:iphone-inline-video:nativeplay"]())}),e&&(t.addEventListener("webkitendfullscreen",function(){r.driver.currentTime=t.currentTime}),t.addEventListener("seeking",function(){0>d.indexOf(100*t.currentTime|0)&&(r.driver.currentTime=t.currentTime)}))}(s,!s.muted);var u=s["bfred-it:iphone-inline-video"];s["bfred-it:iphone-inline-video:nativeplay"]=s.play,s["bfred-it:iphone-inline-video:nativepause"]=s.pause,s.play=r,s.pause=a,e(s,"paused",u.driver),e(s,"muted",u.driver,!0),e(s,"playbackRate",u.driver,!0),e(s,"ended",u.driver),e(s,"loop",u.driver,!0),t(s,"seeking"),t(s,"seeked"),t(s,"timeupdate","bfred-it:iphone-inline-video:event",!1),t(s,"ended","bfred-it:iphone-inline-video:event",!1),s.classList.add("IIV"),s.muted&&s.autoplay&&s.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}}();!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(function(){try{return require("moment")}catch(t){}}()):"function"==typeof define&&define.amd?define(["require"],function(t){return e(function(){try{return t("moment")}catch(t){}}())}):(t=t||self).Chart=e(t.moment)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e,i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=(function(t){var e={};for(var n in i)i.hasOwnProperty(n)&&(e[i[n]]=n);var o=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var r in o)if(o.hasOwnProperty(r)){if(!("channels"in o[r]))throw new Error("missing channels property: "+r);if(!("labels"in o[r]))throw new Error("missing channel labels property: "+r);if(o[r].labels.length!==o[r].channels)throw new Error("channel and label counts mismatch: "+r);var a=o[r].channels,s=o[r].labels;delete o[r].channels,delete o[r].labels,Object.defineProperty(o[r],"channels",{value:a}),Object.defineProperty(o[r],"labels",{value:s})}o.rgb.hsl=function(t){var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,a=Math.min(n,o,r),s=Math.max(n,o,r),l=s-a;return s===a?e=0:n===s?e=(o-r)/l:o===s?e=2+(r-n)/l:r===s&&(e=4+(n-o)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(a+s)/2,[e,100*(s===a?0:i<=.5?l/(s+a):l/(2-s-a)),100*i]},o.rgb.hsv=function(t){var e,i,n,o,r,a=t[0]/255,s=t[1]/255,l=t[2]/255,d=Math.max(a,s,l),c=d-Math.min(a,s,l),u=function(t){return(d-t)/6/c+.5};return 0===c?o=r=0:(r=c/d,e=u(a),i=u(s),n=u(l),a===d?o=n-i:s===d?o=1/3+e-n:l===d&&(o=2/3+i-e),o<0?o+=1:o>1&&(o-=1)),[360*o,100*r,100*d]},o.rgb.hwb=function(t){var e=t[0],i=t[1],n=t[2];return[o.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(i,n))*100,100*(n=1-1/255*Math.max(e,Math.max(i,n)))]},o.rgb.cmyk=function(t){var e,i=t[0]/255,n=t[1]/255,o=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-o)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]},o.rgb.keyword=function(t){var n=e[t];if(n)return n;var o,r,a,s=1/0;for(var l in i)if(i.hasOwnProperty(l)){var d=(r=t,a=i[l],Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)+Math.pow(r[2]-a[2],2));d<s&&(s=d,o=l)}return o},o.keyword.rgb=function(t){return i[t]},o.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]},o.rgb.lab=function(t){var e=o.rgb.xyz(t),i=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},o.hsl.rgb=function(t){var e,i,n,o,r,a=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[r=255*l,r,r];e=2*l-(i=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var d=0;d<3;d++)(n=a+1/3*-(d-1))<0&&n++,n>1&&n--,o[d]=255*(r=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e);return o},o.hsl.hsv=function(t){var e=t[0],i=t[1]/100,n=t[2]/100,o=i,r=Math.max(n,.01);return i*=(n*=2)<=1?n:2-n,o*=r<=1?r:2-r,[e,100*(0===n?2*o/(r+o):2*i/(n+i)),(n+i)/2*100]},o.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,o=Math.floor(e)%6,r=e-Math.floor(e),a=255*n*(1-i),s=255*n*(1-i*r),l=255*n*(1-i*(1-r));switch(n*=255,o){case 0:return[n,l,a];case 1:return[s,n,a];case 2:return[a,n,l];case 3:return[a,s,n];case 4:return[l,a,n];case 5:return[n,a,s]}},o.hsv.hsl=function(t){var e,i,n,o=t[0],r=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return n=(2-r)*a,i=r*s,[o,100*(i=(i/=(e=(2-r)*s)<=1?e:2-e)||0),100*(n/=2)]},o.hwb.rgb=function(t){var e,i,n,o,r,a,s,l=t[0]/360,d=t[1]/100,c=t[2]/100,u=d+c;switch(u>1&&(d/=u,c/=u),i=1-c,n=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(n=1-n),o=d+n*(i-d),e){default:case 6:case 0:r=i,a=o,s=d;break;case 1:r=o,a=i,s=d;break;case 2:r=d,a=i,s=o;break;case 3:r=d,a=o,s=i;break;case 4:r=o,a=d,s=i;break;case 5:r=i,a=d,s=o}return[255*r,255*a,255*s]},o.cmyk.rgb=function(t){var e=t[1]/100,i=t[2]/100,n=t[3]/100;return[255*(1-Math.min(1,t[0]/100*(1-n)+n)),255*(1-Math.min(1,e*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n))]},o.xyz.rgb=function(t){var e,i,n,o=t[0]/100,r=t[1]/100,a=t[2]/100;return i=-.9689*o+1.8758*r+.0415*a,n=.0557*o+-.204*r+1.057*a,e=(e=3.2406*o+-1.5372*r+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]},o.xyz.lab=function(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},o.lab.xyz=function(t){var e,i,n;e=t[1]/500+(i=(t[0]+16)/116),n=i-t[2]/200;var o=Math.pow(i,3),r=Math.pow(e,3),a=Math.pow(n,3);return i=o>.008856?o:(i-16/116)/7.787,e=r>.008856?r:(e-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[e*=95.047,i*=100,n*=108.883]},o.lab.lch=function(t){var e,i=t[0],n=t[1],o=t[2];return(e=360*Math.atan2(o,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+o*o),e]},o.lch.lab=function(t){var e,i=t[1];return e=t[2]/360*2*Math.PI,[t[0],i*Math.cos(e),i*Math.sin(e)]},o.rgb.ansi16=function(t){var e=t[0],i=t[1],n=t[2],r=1 in arguments?arguments[1]:o.rgb.hsv(t)[2];if(0===(r=Math.round(r/50)))return 30;var a=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===r&&(a+=60),a},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){var e=t[0],i=t[1],n=t[2];return e===i&&i===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},o.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},o.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];3===e[0].length&&(i=i.split("").map(function(t){return t+t}).join(""));var n=parseInt(i,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(t){var e,i=t[0]/255,n=t[1]/255,o=t[2]/255,r=Math.max(Math.max(i,n),o),a=Math.min(Math.min(i,n),o),s=r-a;return e=s<=0?0:r===i?(n-o)/s%6:r===n?2+(o-i)/s:4+(i-n)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},o.hsl.hcg=function(t){var e,i=t[1]/100,n=t[2]/100,o=0;return(e=n<.5?2*i*n:2*i*(1-n))<1&&(o=(n-.5*e)/(1-e)),[t[0],100*e,100*o]},o.hsv.hcg=function(t){var e=t[2]/100,i=t[1]/100*e,n=0;return i<1&&(n=(e-i)/(1-i)),[t[0],100*i,100*n]},o.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,n=t[2]/100;if(0===i)return[255*n,255*n,255*n];var o,r=[0,0,0],a=e%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return[255*(i*r[0]+(o=(1-i)*n)),255*(i*r[1]+o),255*(i*r[2]+o)]},o.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),n=0;return i>0&&(n=e/i),[t[0],100*n,100*i]},o.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],100*n,100*i]},o.hcg.hwb=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},o.hwb.hcg=function(t){var e=1-t[2]/100,i=e-t[1]/100,n=0;return i<1&&(n=(e-i)/(1-i)),[t[0],100*i,100*n]},o.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},o.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},o.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},o.gray.hsl=o.gray.hsv=function(t){return[0,0,t[0]]},o.gray.hwb=function(t){return[0,100,t[0]]},o.gray.cmyk=function(t){return[0,0,0,t[0]]},o.gray.lab=function(t){return[t[0],0,0]},o.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},o.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}(e={exports:{}}),e.exports);function o(t,e){return function(i){return e(t(i))}}function r(t,e){for(var i=[e[t].parent,t],r=n[e[t].parent][t],a=e[t].parent;e[a].parent;)i.unshift(e[a].parent),r=o(n[e[a].parent][a],r),a=e[a].parent;return r.conversion=i,r}var a={};Object.keys(n).forEach(function(t){a[t]={},Object.defineProperty(a[t],"channels",{value:n[t].channels}),Object.defineProperty(a[t],"labels",{value:n[t].labels});var e=function(t){for(var e=function(t){var e=function(){for(var t={},e=Object.keys(n),i=e.length,o=0;o<i;o++)t[e[o]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var o=i.pop(),r=Object.keys(n[o]),a=r.length,s=0;s<a;s++){var l=r[s],d=e[l];-1===d.distance&&(d.distance=e[o].distance+1,d.parent=o,i.unshift(l))}return e}(t),i={},o=Object.keys(e),a=o.length,s=0;s<a;s++){var l=o[s];null!==e[l].parent&&(i[l]=r(l,e))}return i}(t);Object.keys(e).forEach(function(i){var n=e[i];a[t][i]=function(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var n=i.length,o=0;o<n;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(n),a[t][i].raw=function(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)})});var s=a,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},d={getRgba:c,getHsla:u,getRgb:function(t){var e=c(t);return e&&e.slice(0,3)},getHsl:function(t){var e=u(t);return e&&e.slice(0,3)},getHwb:h,getAlpha:function(t){var e=c(t);return e?e[3]:(e=u(t))?e[3]:(e=h(t))?e[3]:void 0},hexString:function(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+v(t[0])+v(t[1])+v(t[2])+(e>=0&&e<1?v(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?p(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:p,percentString:function(t,e){return e<1||t[3]&&t[3]<1?f(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:f,hslString:function(t,e){return e<1||t[3]&&t[3]<1?m(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:m,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return y[t.slice(0,3)]}};function c(t){if(t){var e=[0,0,0],i=1,n=t.match(/^#([a-fA-F0-9]{3,4})$/i),o="";if(n){o=(n=n[1])[3];for(var r=0;r<e.length;r++)e[r]=parseInt(n[r]+n[r],16);o&&(i=Math.round(parseInt(o+o,16)/255*100)/100)}else if(n=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(o=n[2],n=n[1],r=0;r<e.length;r++)e[r]=parseInt(n.slice(2*r,2*r+2),16);o&&(i=Math.round(parseInt(o,16)/255*100)/100)}else if(n=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<e.length;r++)e[r]=parseInt(n[r+1]);i=parseFloat(n[4])}else if(n=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<e.length;r++)e[r]=Math.round(2.55*parseFloat(n[r+1]));i=parseFloat(n[4])}else if(n=t.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(e=l[n[1]]))return}for(r=0;r<e.length;r++)e[r]=g(e[r],0,255);return i=i||0==i?g(i,0,1):1,e[3]=i,e}}function u(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[g(parseInt(e[1]),0,360),g(parseFloat(e[2]),0,100),g(parseFloat(e[3]),0,100),g(isNaN(i)?1:i,0,1)]}}}function h(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[g(parseInt(e[1]),0,360),g(parseFloat(e[2]),0,100),g(parseFloat(e[3]),0,100),g(isNaN(i)?1:i,0,1)]}}}function p(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function f(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function m(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function g(t,e,i){return Math.min(Math.max(e,t),i)}function v(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var y={};for(var b in l)y[l[b]]=b;var _=function(t){return t instanceof _?t:this instanceof _?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=d.getRgba(t))?this.setValues("rgb",e):(e=d.getHsla(t))?this.setValues("hsl",e):(e=d.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new _(t);var e};_.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return d.hexString(this.values.rgb)},rgbString:function(){return d.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return d.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return d.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return d.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return d.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return d.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return d.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,i=(e[0]+t)%360;return e[0]=i<0?360+i:i,this.setValues("hsl",e),this},mix:function(t,e){var i=t,n=void 0===e?.5:e,o=2*n-1,r=this.alpha()-i.alpha(),a=((o*r==-1?o:(o+r)/(1+o*r))+1)/2,s=1-a;return this.rgb(a*this.red()+s*i.red(),a*this.green()+s*i.green(),a*this.blue()+s*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var t,e,i=new _,n=this.values,o=i.values;for(var r in n)n.hasOwnProperty(r)&&("[object Array]"===(e={}.toString.call(t=n[r]))?o[r]=t.slice(0):"[object Number]"===e?o[r]=t:console.error("unexpected color value:",t));return i}},_.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},_.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},_.prototype.getValues=function(t){for(var e=this.values,i={},n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];return 1!==e.alpha&&(i.a=e.alpha),i},_.prototype.setValues=function(t,e){var i,n,o=this.values,r=this.spaces,a=this.maxes,l=1;if(this.valid=!0,"alpha"===t)l=e;else if(e.length)o[t]=e.slice(0,t.length),l=e[t.length];else if(void 0!==e[t.charAt(0)]){for(i=0;i<t.length;i++)o[t][i]=e[t.charAt(i)];l=e.a}else if(void 0!==e[r[t][0]]){var d=r[t];for(i=0;i<t.length;i++)o[t][i]=e[d[i]];l=e.alpha}if(o.alpha=Math.max(0,Math.min(1,void 0===l?o.alpha:l)),"alpha"===t)return!1;for(i=0;i<t.length;i++)n=Math.max(0,Math.min(a[t][i],o[t][i])),o[t][i]=Math.round(n);for(var c in r)c!==t&&(o[c]=s[t][c](o[t]));return!0},_.prototype.setSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i),this)},_.prototype.setChannel=function(t,e,i){var n=this.values[t];return void 0===i?n[e]:i===n[e]?this:(n[e]=i,this.setValues(t,n),this)},"undefined"!=typeof window&&(window.Color=_);var w,x=_,T={noop:function(){},uid:(w=0,function(){return w++}),isNullOrUndef:function(t){return null===t||"undefined"==typeof t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return"undefined"==typeof t?e:t},valueAtIndexOrDefault:function(t,e,i){return T.valueOrDefault(T.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)},each:function(t,e,i,n){var o,r,a;if(T.isArray(t))if(r=t.length,n)for(o=r-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<r;o++)e.call(i,t[o],o);else if(T.isObject(t))for(r=(a=Object.keys(t)).length,o=0;o<r;o++)e.call(i,t[a[o]],a[o])},arrayEquals:function(t,e){var i,n,o,r;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(r=e[i],(o=t[i])instanceof Array&&r instanceof Array){if(!T.arrayEquals(o,r))return!1}else if(o!==r)return!1;return!0},clone:function(t){if(T.isArray(t))return t.map(T.clone);if(T.isObject(t)){for(var e={},i=Object.keys(t),n=i.length,o=0;o<n;++o)e[i[o]]=T.clone(t[i[o]]);return e}return t},_merger:function(t,e,i,n){var o=e[t],r=i[t];T.isObject(o)&&T.isObject(r)?T.merge(o,r,n):e[t]=T.clone(r)},_mergerIf:function(t,e,i){var n=e[t],o=i[t];T.isObject(n)&&T.isObject(o)?T.mergeIf(n,o):e.hasOwnProperty(t)||(e[t]=T.clone(o))},merge:function(t,e,i){var n,o,r,a,s,l=T.isArray(e)?e:[e],d=l.length;if(!T.isObject(t))return t;for(n=(i=i||{}).merger||T._merger,o=0;o<d;++o)if(T.isObject(e=l[o]))for(s=0,a=(r=Object.keys(e)).length;s<a;++s)n(r[s],t,e,i);return t},mergeIf:function(t,e){return T.merge(t,e,{merger:T._mergerIf})},extend:Object.assign||function(t){return T.merge(t,[].slice.call(arguments,1),{merger:function(t,e,i){e[t]=i[t]}})},inherits:function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=T.inherits,t&&T.extend(i.prototype,t),i.__super__=e.prototype,i},_deprecated:function(t,e,i,n){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')}},C=T;T.callCallback=T.callback,T.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},T.getValueOrDefault=T.valueOrDefault,T.getValueAtIndexOrDefault=T.valueAtIndexOrDefault;var k={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.45),n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-k.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*k.easeInBounce(2*t):.5*k.easeOutBounce(2*t-1)+.5}},E={effects:k};C.easingEffects=k;var S=Math.PI,A=S/180,O=2*S,I=S/2,D=S/4,P=2*S/3,L={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,o,r){if(r){var a=Math.min(r,o/2,n/2),s=e+a,l=i+a,d=e+n-a,c=i+o-a;t.moveTo(e,l),s<d&&l<c?(t.arc(s,l,a,-S,-I),t.arc(d,l,a,-I,0),t.arc(d,c,a,0,I),t.arc(s,c,a,I,S)):s<d?(t.moveTo(s,i),t.arc(d,l,a,-I,I),t.arc(s,l,a,I,S+I)):l<c?(t.arc(s,l,a,-S,0),t.arc(s,c,a,0,S)):t.arc(s,l,a,-S,S),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,n,o)},drawPoint:function(t,e,i,n,o,r){var a,s,l,d,c,u=(r||0)*A;if(e&&"object"==typeof e&&("[object HTMLImageElement]"===(a=e.toString())||"[object HTMLCanvasElement]"===a))return t.save(),t.translate(n,o),t.rotate(u),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(i)||i<=0)){switch(t.beginPath(),e){default:t.arc(n,o,i,0,O),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(u)*i,o-Math.cos(u)*i),u+=P,t.lineTo(n+Math.sin(u)*i,o-Math.cos(u)*i),u+=P,t.lineTo(n+Math.sin(u)*i,o-Math.cos(u)*i),t.closePath();break;case"rectRounded":d=i-(c=.516*i),s=Math.cos(u+D)*d,l=Math.sin(u+D)*d,t.arc(n-s,o-l,c,u-S,u-I),t.arc(n+l,o-s,c,u-I,u),t.arc(n+s,o+l,c,u,u+I),t.arc(n-l,o+s,c,u+I,u+S),t.closePath();break;case"rect":if(!r){d=Math.SQRT1_2*i,t.rect(n-d,o-d,2*d,2*d);break}u+=D;case"rectRot":s=Math.cos(u)*i,l=Math.sin(u)*i,t.moveTo(n-s,o-l),t.lineTo(n+l,o-s),t.lineTo(n+s,o+l),t.lineTo(n-l,o+s),t.closePath();break;case"crossRot":u+=D;case"cross":s=Math.cos(u)*i,l=Math.sin(u)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s);break;case"star":s=Math.cos(u)*i,l=Math.sin(u)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s),u+=D,s=Math.cos(u)*i,l=Math.sin(u)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l),t.moveTo(n+l,o-s),t.lineTo(n-l,o+s);break;case"line":s=Math.cos(u)*i,l=Math.sin(u)*i,t.moveTo(n-s,o-l),t.lineTo(n+s,o+l);break;case"dash":t.moveTo(n,o),t.lineTo(n+Math.cos(u)*i,o+Math.sin(u)*i)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var o=i.steppedLine;if(o){if("middle"===o){var r=(e.x+i.x)/2;t.lineTo(r,n?i.y:e.y),t.lineTo(r,n?e.y:i.y)}else"after"===o&&!n||"after"!==o&&n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}else i.tension?t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):t.lineTo(i.x,i.y)}},R=L;C.clear=L.clear,C.drawRoundedRectangle=function(t){t.beginPath(),L.roundedRect.apply(L,arguments)};var B={_set:function(t,e){return C.merge(this[t]||(this[t]={}),e)}};B._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var N=B,M=C.valueOrDefault,F={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,i,n,o;return C.isObject(t)?(e=+t.top||0,i=+t.right||0,n=+t.bottom||0,o=+t.left||0):e=i=n=o=+t||0,{top:e,right:i,bottom:n,left:o,height:e+n,width:o+i}},_parseFont:function(t){var e=N.global,i=M(t.fontSize,e.defaultFontSize),n={family:M(t.fontFamily,e.defaultFontFamily),lineHeight:C.options.toLineHeight(M(t.lineHeight,e.defaultLineHeight),i),size:i,style:M(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return n.string=function(t){return!t||C.isNullOrUndef(t.size)||C.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n},resolve:function(t,e,i,n){var o,r,a,s=!0;for(o=0,r=t.length;o<r;++o)if(void 0!==(a=t[o])&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==i&&C.isArray(a)&&(a=a[i],s=!1),void 0!==a))return n&&!s&&(n.cacheable=!1),a}},j={_factorize:function(t){var e,i=[],n=Math.sqrt(t);for(e=1;e<n;e++)t%e==0&&(i.push(e),i.push(t/e));return n===(0|n)&&i.push(n),i.sort(function(t,e){return t-e}).pop(),i},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,i=Math.round(e);return t===Math.pow(10,i)?i:e}},W=j;C.log10=j.log10;var z=C,H=R,q=F,V=W;z.easing=E,z.canvas=H,z.options=q,z.math=V,z.rtl={getRtlAdapter:function(t,e,i){return t?function(t,e){return{x:function(i){return t+t+e-i},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}}(e,i):{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},overrideTextDirection:function(t,e){var i,n;"ltr"!==e&&"rtl"!==e||(n=[(i=t.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};var U=function(t){z.extend(this,t),this.initialize.apply(this,arguments)};z.extend(U.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=z.extend({},t._model)),t._start={},t},transition:function(t){var e=this,i=e._model,n=e._start,o=e._view;return i&&1!==t?(o||(o=e._view={}),n||(n=e._start={}),function(t,e,i,n){var o,r,a,s,l,d,c,u,h,p=Object.keys(i);for(o=0,r=p.length;o<r;++o)if(d=i[a=p[o]],e.hasOwnProperty(a)||(e[a]=d),(s=e[a])!==d&&"_"!==a[0]){if(t.hasOwnProperty(a)||(t[a]=s),(c=typeof d)==typeof(l=t[a]))if("string"===c){if((u=x(l)).valid&&(h=x(d)).valid){e[a]=h.mix(u,n).rgbString();continue}}else if(z.isFinite(l)&&z.isFinite(d)){e[a]=l+(d-l)*n;continue}e[a]=d}}(n,o,i,t),e):(e._view=z.extend({},i),e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return z.isNumber(this._model.x)&&z.isNumber(this._model.y)}}),U.extend=z.inherits;var G=U,$=G.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),K=$;Object.defineProperty($.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty($.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),N._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:z.noop,onComplete:z.noop}});var Y={animations:[],request:null,addAnimation:function(t,e,i,n){var o,r,a=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=i,n||(t.animating=!0),o=0,r=a.length;o<r;++o)if(a[o].chart===t)return void(a[o]=e);a.push(e),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=z.findIndex(this.animations,function(e){return e.chart===t});-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=z.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,i,n,o=this.animations,r=0;r<o.length;)e=(t=o[r]).chart,i=t.numSteps,n=Math.floor((Date.now()-t.startTime)/t.duration*i)+1,t.currentStep=Math.min(n,i),z.callback(t.render,[e,t],e),z.callback(t.onAnimationProgress,[t],e),t.currentStep>=i?(z.callback(t.onAnimationComplete,[t],e),e.animating=!1,o.splice(r,1)):++r}},X=z.options.resolve,Q=["push","pop","shift","splice","unshift"];function Z(t,e){var i=t._chartjs;if(i){var n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(Q.forEach(function(e){delete t[e]}),delete t._chartjs)}}var J=function(t,e){this.initialize(t,e)};z.extend(J.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var i=this;i.chart=t,i.index=e,i.linkScales(),i.addElements(),i._type=i.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this.getMeta(),e=this.chart,i=e.scales,n=this.getDataset(),o=e.options.scales;null!==t.xAxisID&&t.xAxisID in i&&!n.xAxisID||(t.xAxisID=n.xAxisID||o.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in i&&!n.yAxisID||(t.yAxisID=n.yAxisID||o.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&Z(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,i=this.getMeta(),n=this.getDataset().data||[],o=i.data;for(t=0,e=n.length;t<e;++t)o[t]=o[t]||this.createMetaData(t);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,i=this,n=i.getDataset(),o=n.data||(n.data=[]);i._data!==o&&(i._data&&Z(i._data,i),o&&Object.isExtensible(o)&&(e=i,(t=o)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Q.forEach(function(e){var i="onData"+e.charAt(0).toUpperCase()+e.slice(1),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),o=n.apply(this,e);return z.each(t._chartjs.listeners,function(t){"function"==typeof t[i]&&t[i].apply(t,e)}),o}})}))),i._data=o),i.resyncElements()},_configure:function(){this._config=z.merge({},[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(t,e,i){"_meta"!==t&&"data"!==t&&z._merger(t,e,i)}})},_update:function(t){this._configure(),this._cachedDataOpts=null,this.update(t)},update:z.noop,transition:function(t){for(var e=this.getMeta(),i=e.data||[],n=i.length,o=0;o<n;++o)i[o].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],i=e.length,n=0;for(t.dataset&&t.dataset.draw();n<i;++n)e[n].draw()},getStyle:function(t){var e,i=this.getMeta(),n=i.dataset;return this._configure(),!1!==(e=n&&void 0===t?this._resolveDatasetElementOptions(n||{}):this._resolveDataElementOptions(i.data[t=t||0]||{},t)).fill&&null!==e.fill||(e.backgroundColor="rgba(0,0,0,0)"),e},_resolveDatasetElementOptions:function(t,e){var i,n,o,r,a=this,s=a.chart,l=a._config,d=t.custom||{},c=s.options.elements[a.datasetElementType.prototype._type]||{},u=a._datasetElementOptions,h={},p={chart:s,dataset:a.getDataset(),datasetIndex:a.index,hover:e};for(i=0,n=u.length;i<n;++i)o=u[i],r=e?"hover"+o.charAt(0).toUpperCase()+o.slice(1):o,h[o]=X([d[r],l[r],c[r]],p);return h},_resolveDataElementOptions:function(t,e){var i=this,n=t&&t.custom,o=i._cachedDataOpts;if(o&&!n)return o;var r,a,s,l,d=i.chart,c=i._config,u=d.options.elements[i.dataElementType.prototype._type]||{},h=i._dataElementOptions,p={},f={chart:d,dataIndex:e,dataset:i.getDataset(),datasetIndex:i.index},m={cacheable:!n};if(n=n||{},z.isArray(h))for(a=0,s=h.length;a<s;++a)p[l=h[a]]=X([n[l],c[l],u[l]],f,e,m);else for(a=0,s=(r=Object.keys(h)).length;a<s;++a)p[l=r[a]]=X([n[l],c[h[l]],c[l],u[l]],f,e,m);return m.cacheable&&(i._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(t){z.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},o=t._model,r=z.getHoverColor;t.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=X([n.hoverBackgroundColor,e.hoverBackgroundColor,r(o.backgroundColor)],void 0,i),o.borderColor=X([n.hoverBorderColor,e.hoverBorderColor,r(o.borderColor)],void 0,i),o.borderWidth=X([n.hoverBorderWidth,e.hoverBorderWidth,o.borderWidth],void 0,i)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,i,n,o,r,a=this.getMeta().dataset,s={};if(a){for(r=a._model,o=this._resolveDatasetElementOptions(a,!0),t=0,e=(n=Object.keys(o)).length;t<e;++t)s[i=n[t]]=r[i],r[i]=o[i];a.$previousStyle=s}},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,i=t.data.length,n=e.length;n<i?t.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),J.extend=z.inherits;var tt=J,et=2*Math.PI;function it(t,e){var i=e.startAngle,n=e.endAngle,o=e.pixelMargin,r=o/e.outerRadius,a=e.x,s=e.y;t.beginPath(),t.arc(a,s,e.outerRadius,i-r,n+r),e.innerRadius>o?t.arc(a,s,e.innerRadius-o,n+(r=o/e.innerRadius),i-r,!0):t.arc(a,s,o,n+Math.PI/2,i-Math.PI/2),t.closePath(),t.clip()}N._set("global",{elements:{arc:{backgroundColor:N.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var nt=G.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var i=this._view;if(i){for(var n=z.getAngleFromPoint(i,{x:t,y:e}),o=n.angle,r=n.distance,a=i.startAngle,s=i.endAngle;s<a;)s+=et;for(;o>s;)o-=et;for(;o<a;)o+=et;return o>=a&&o<=s&&r>=i.innerRadius&&r<=i.outerRadius}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t,e=this._chart.ctx,i=this._view,n="inner"===i.borderAlign?.33:0,o={x:i.x,y:i.y,innerRadius:i.innerRadius,outerRadius:Math.max(i.outerRadius-n,0),pixelMargin:n,startAngle:i.startAngle,endAngle:i.endAngle,fullCircles:Math.floor(i.circumference/et)};if(e.save(),e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,o.fullCircles){for(o.endAngle=o.startAngle+et,e.beginPath(),e.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),e.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),e.closePath(),t=0;t<o.fullCircles;++t)e.fill();o.endAngle=o.startAngle+i.circumference%et}e.beginPath(),e.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),e.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),e.closePath(),e.fill(),i.borderWidth&&function(t,e,i){var n="inner"===e.borderAlign;n?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),i.fullCircles&&function(t,e,i,n){var o,r=i.endAngle;for(n&&(i.endAngle=i.startAngle+et,it(t,i),i.endAngle=r,i.endAngle===i.startAngle&&i.fullCircles&&(i.endAngle+=et,i.fullCircles--)),t.beginPath(),t.arc(i.x,i.y,i.innerRadius,i.startAngle+et,i.startAngle,!0),o=0;o<i.fullCircles;++o)t.stroke();for(t.beginPath(),t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.startAngle+et),o=0;o<i.fullCircles;++o)t.stroke()}(t,e,i,n),n&&it(t,i),t.beginPath(),t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.endAngle),t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),t.closePath(),t.stroke()}(e,i,o),e.restore()}}),ot=z.valueOrDefault,rt=N.global.defaultColor;N._set("global",{elements:{line:{tension:.4,backgroundColor:rt,borderWidth:3,borderColor:rt,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var at=G.extend({_type:"line",draw:function(){var t,e,i,n=this,o=n._view,r=n._chart.ctx,a=o.spanGaps,s=n._children.slice(),l=N.global,d=l.elements.line,c=-1,u=n._loop;if(s.length){if(n._loop){for(t=0;t<s.length;++t)if(e=z.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),u=a;break}u&&s.push(s[0])}for(r.save(),r.lineCap=o.borderCapStyle||d.borderCapStyle,r.setLineDash&&r.setLineDash(o.borderDash||d.borderDash),r.lineDashOffset=ot(o.borderDashOffset,d.borderDashOffset),r.lineJoin=o.borderJoinStyle||d.borderJoinStyle,r.lineWidth=ot(o.borderWidth,d.borderWidth),r.strokeStyle=o.borderColor||l.defaultColor,r.beginPath(),(i=s[0]._view).skip||(r.moveTo(i.x,i.y),c=0),t=1;t<s.length;++t)i=s[t]._view,e=-1===c?z.previousItem(s,t):s[c],i.skip||(c!==t-1&&!a||-1===c?r.moveTo(i.x,i.y):z.canvas.lineTo(r,e._view,i),c=t);u&&r.closePath(),r.stroke(),r.restore()}}}),st=z.valueOrDefault,lt=N.global.defaultColor;function dt(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}N._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:lt,borderColor:lt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var ct=G.extend({_type:"point",inRange:function(t,e){var i=this._view;return!!i&&Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:dt,inXRange:dt,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,i=this._chart.ctx,n=e.pointStyle,o=e.rotation,r=e.radius,a=e.x,s=e.y,l=N.global,d=l.defaultColor;e.skip||(void 0===t||z.canvas._isPointInArea(e,t))&&(i.strokeStyle=e.borderColor||d,i.lineWidth=st(e.borderWidth,l.elements.point.borderWidth),i.fillStyle=e.backgroundColor||d,z.canvas.drawPoint(i,n,r,a,s,o))}}),ut=N.global.defaultColor;function ht(t){return t&&void 0!==t.width}function pt(t){var e,i,n,o,r;return ht(t)?(e=t.x-(r=t.width/2),i=t.x+r,n=Math.min(t.y,t.base),o=Math.max(t.y,t.base)):(r=t.height/2,e=Math.min(t.x,t.base),i=Math.max(t.x,t.base),n=t.y-r,o=t.y+r),{left:e,top:n,right:i,bottom:o}}function ft(t,e,i){return t===e?i:t===i?e:t}function mt(t,e,i){var n=null===e,o=null===i,r=!(!t||n&&o)&&pt(t);return r&&(n||e>=r.left&&e<=r.right)&&(o||i>=r.top&&i<=r.bottom)}N._set("global",{elements:{rectangle:{backgroundColor:ut,borderColor:ut,borderSkipped:"bottom",borderWidth:0}}});var gt={},vt=at,yt=ct,bt=G.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,e=this._view,i=function(t){var e=pt(t),i=e.right-e.left,n=e.bottom-e.top,o=function(t,e,i){var n,o,r,a,s=t.borderWidth,l=function(t){var e=t.borderSkipped,i={};return e?(t.horizontal?t.base>t.x&&(e=ft(e,"left","right")):t.base<t.y&&(e=ft(e,"bottom","top")),i[e]=!0,i):i}(t);return z.isObject(s)?(n=+s.top||0,o=+s.right||0,r=+s.bottom||0,a=+s.left||0):n=o=r=a=+s||0,{t:l.top||n<0?0:n>i?i:n,r:l.right||o<0?0:o>e?e:o,b:l.bottom||r<0?0:r>i?i:r,l:l.left||a<0?0:a>e?e:a}}(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b}}}(e),n=i.outer,o=i.inner;t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.w,n.h),n.w===o.w&&n.h===o.h||(t.save(),t.beginPath(),t.rect(n.x,n.y,n.w,n.h),t.clip(),t.fillStyle=e.borderColor,t.rect(o.x,o.y,o.w,o.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return mt(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return ht(i)?mt(i,t,null):mt(i,null,e)},inXRange:function(t){return mt(this._view,t,null)},inYRange:function(t){return mt(this._view,null,t)},getCenterPoint:function(){var t,e,i=this._view;return ht(i)?(t=i.x,e=(i.y+i.base)/2):(t=(i.x+i.base)/2,e=i.y),{x:t,y:e}},getArea:function(){var t=this._view;return ht(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}});gt.Arc=nt,gt.Line=vt,gt.Point=yt,gt.Rectangle=bt;var _t=z._deprecated,wt=z.valueOrDefault;N._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),N._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var xt=tt.extend({dataElementType:gt.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,i=this;tt.prototype.initialize.apply(i,arguments),(t=i.getMeta()).stack=i.getDataset().stack,t.bar=!0,e=i._getIndexScale().options,_t("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),_t("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),_t("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),_t("bar chart",i._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),_t("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,i=n.length;e<i;++e)this.updateElement(n[e],e,t)},updateElement:function(t,e,i){var n=this,o=n.getMeta(),r=n.getDataset(),a=n._resolveDataElementOptions(t,e);t._xScale=n.getScaleForId(o.xAxisID),t._yScale=n.getScaleForId(o.yAxisID),t._datasetIndex=n.index,t._index=e,t._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:r.label,label:n.chart.data.labels[e]},z.isArray(r.data[e])&&(t._model.borderSkipped=null),n._updateElementGeometry(t,e,i,a),t.pivot()},_updateElementGeometry:function(t,e,i,n){var o=this,r=t._model,a=o._getValueScale(),s=a.getBasePixel(),l=a.isHorizontal(),d=o._ruler||o.getRuler(),c=o.calculateBarValuePixels(o.index,e,n),u=o.calculateBarIndexPixels(o.index,e,d,n);r.horizontal=l,r.base=i?s:c.base,r.x=l?i?s:c.head:u.center,r.y=l?u.center:i?s:c.head,r.height=l?u.size:void 0,r.width=l?void 0:u.size},_getStacks:function(t){var e,i,n=this._getIndexScale(),o=n._getMatchingVisibleMetas(this._type),r=n.options.stacked,a=o.length,s=[];for(e=0;e<a&&(i=o[e],(!1===r||-1===s.indexOf(i.stack)||void 0===r&&void 0===i.stack)&&s.push(i.stack),i.index!==t);++e);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t),n=void 0!==e?i.indexOf(e):-1;return-1===n?i.length-1:n},getRuler:function(){var t,e,i=this._getIndexScale(),n=[];for(t=0,e=this.getMeta().data.length;t<e;++t)n.push(i.getPixelForValue(null,t,this.index));return{pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this.getStackCount(),scale:i}},calculateBarValuePixels:function(t,e,i){var n,o,r,a,s,l,d,c=this.chart,u=this._getValueScale(),h=u.isHorizontal(),p=c.data.datasets,f=u._getMatchingVisibleMetas(this._type),m=u._parseValue(p[t].data[e]),g=i.minBarLength,v=u.options.stacked,y=this.getMeta().stack,b=void 0===m.start?0:m.max>=0&&m.min>=0?m.min:m.max,_=void 0===m.start?m.end:m.max>=0&&m.min>=0?m.max-m.min:m.min-m.max,w=f.length;if(v||void 0===v&&void 0!==y)for(n=0;n<w&&(o=f[n]).index!==t;++n)o.stack===y&&(r=void 0===(d=u._parseValue(p[o.index].data[e])).start?d.end:d.min>=0&&d.max>=0?d.max:d.min,(m.min<0&&r<0||m.max>=0&&r>0)&&(b+=r));return a=u.getPixelForValue(b),l=(s=u.getPixelForValue(b+_))-a,void 0!==g&&Math.abs(l)<g&&(l=g,s=_>=0&&!h||_<0&&h?a-g:a+g),{size:l,base:a,head:s,center:s+l/2}},calculateBarIndexPixels:function(t,e,i,n){var o="flex"===n.barThickness?function(t,e,i){var n,o=e.pixels,r=o[t],a=t>0?o[t-1]:null,s=t<o.length-1?o[t+1]:null,l=i.categoryPercentage;return null===a&&(a=r-(null===s?e.end-e.start:s-r)),null===s&&(s=r+r-a),n=r-(r-Math.min(a,s))/2*l,{chunk:Math.abs(s-a)/2*l/e.stackCount,ratio:i.barPercentage,start:n}}(e,i,n):function(t,e,i){var n,o,r=i.barThickness,a=e.stackCount,s=e.pixels[t],l=z.isNullOrUndef(r)?function(t,e){var i,n,o,r,a=t._length;for(o=1,r=e.length;o<r;++o)a=Math.min(a,Math.abs(e[o]-e[o-1]));for(o=0,r=t.getTicks().length;o<r;++o)n=t.getPixelForTick(o),a=o>0?Math.min(a,Math.abs(n-i)):a,i=n;return a}(e.scale,e.pixels):-1;return z.isNullOrUndef(r)?(n=l*i.categoryPercentage,o=i.barPercentage):(n=r*a,o=1),{chunk:n/a,ratio:o,start:s-n/2}}(e,i,n),r=this.getStackIndex(t,this.getMeta().stack),a=o.start+o.chunk*r+o.chunk/2,s=Math.min(wt(n.maxBarThickness,1/0),o.chunk*o.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),o=i.length,r=0;for(z.canvas.clipArea(t.ctx,t.chartArea);r<o;++r){var a=e._parseValue(n.data[r]);isNaN(a.min)||isNaN(a.max)||i[r].draw()}z.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var t=z.extend({},tt.prototype._resolveDataElementOptions.apply(this,arguments)),e=this._getIndexScale().options,i=this._getValueScale().options;return t.barPercentage=wt(e.barPercentage,t.barPercentage),t.barThickness=wt(e.barThickness,t.barThickness),t.categoryPercentage=wt(e.categoryPercentage,t.categoryPercentage),t.maxBarThickness=wt(e.maxBarThickness,t.maxBarThickness),t.minBarLength=wt(i.minBarLength,t.minBarLength),t}}),Tt=z.valueOrDefault,Ct=z.options.resolve;N._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": ("+t.xLabel+", "+t.yLabel+", "+e.datasets[t.datasetIndex].data[t.index].r+")"}}}});var kt=tt.extend({dataElementType:gt.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var e=this,i=e.getMeta();z.each(i.data,function(i,n){e.updateElement(i,n,t)})},updateElement:function(t,e,i){var n=this,o=n.getMeta(),r=t.custom||{},a=n.getScaleForId(o.xAxisID),s=n.getScaleForId(o.yAxisID),l=n._resolveDataElementOptions(t,e),d=n.getDataset().data[e],c=n.index,u=i?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof d?d:NaN,e,c),h=i?s.getBasePixel():s.getPixelForValue(d,e,c);t._xScale=a,t._yScale=s,t._options=l,t._datasetIndex=c,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:r.skip||isNaN(u)||isNaN(h),x:u,y:h},t.pivot()},setHoverStyle:function(t){var e=t._model,i=t._options,n=z.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Tt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Tt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Tt(i.hoverBorderWidth,i.borderWidth),e.radius=i.radius+i.hoverRadius},_resolveDataElementOptions:function(t,e){var i=this,n=i.chart,o=i.getDataset(),r=t.custom||{},a=o.data[e]||{},s=tt.prototype._resolveDataElementOptions.apply(i,arguments),l={chart:n,dataIndex:e,dataset:o,datasetIndex:i.index};return i._cachedDataOpts===s&&(s=z.extend({},s)),s.radius=Ct([r.radius,a.r,i._config.radius,n.options.elements.point.radius],l,e),s}}),Et=z.valueOrDefault,St=Math.PI,At=2*St,Ot=St/2;N._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,i,n,o=document.createElement("ul"),r=t.data,a=r.datasets,s=r.labels;if(o.setAttribute("class",t.id+"-legend"),a.length)for(e=0,i=a[0].data.length;e<i;++e)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[e],s[e]&&n.appendChild(document.createTextNode(s[e]));return o.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(i,n){var o=t.getDatasetMeta(0),r=o.controller.getStyle(n);return{text:i,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(e.datasets[0].data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var i,n,o,r=e.index,a=this.chart;for(i=0,n=(a.data.datasets||[]).length;i<n;++i)(o=a.getDatasetMeta(i)).data[r]&&(o.data[r].hidden=!o.data[r].hidden);a.update()}},cutoutPercentage:50,rotation:-Ot,circumference:At,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index],n=": "+e.datasets[t.datasetIndex].data[t.index];return z.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var It=tt.extend({dataElementType:gt.Arc,linkScales:z.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&++e;return e},update:function(t){var e,i,n=this,o=n.chart,r=o.chartArea,a=o.options,s=1,l=1,d=0,c=0,u=n.getMeta(),h=u.data,p=a.cutoutPercentage/100||0,f=a.circumference,m=n._getRingWeight(n.index);if(f<At){var g=a.rotation%At,v=(g+=g>=St?-At:g<-St?At:0)+f,y=Math.cos(g),b=Math.sin(g),_=Math.cos(v),w=Math.sin(v),x=g<=0&&v>=0||v>=At,T=g<=Ot&&v>=Ot||v>=At+Ot,C=g<=-Ot&&v>=-Ot||v>=St+Ot,k=g===-St||v>=St?-1:Math.min(y,y*p,_,_*p),E=C?-1:Math.min(b,b*p,w,w*p),S=x?1:Math.max(y,y*p,_,_*p),A=T?1:Math.max(b,b*p,w,w*p);s=(S-k)/2,l=(A-E)/2,d=-(S+k)/2,c=-(A+E)/2}for(e=0,i=h.length;e<i;++e)h[e]._options=n._resolveDataElementOptions(h[e],e);for(o.borderWidth=n.getMaxBorderWidth(),o.outerRadius=Math.max(Math.min((r.right-r.left-o.borderWidth)/s,(r.bottom-r.top-o.borderWidth)/l)/2,0),o.innerRadius=Math.max(o.outerRadius*p,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),o.offsetX=d*o.outerRadius,o.offsetY=c*o.outerRadius,u.total=n.calculateTotal(),n.outerRadius=o.outerRadius-o.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-o.radiusLength*m,0),e=0,i=h.length;e<i;++e)n.updateElement(h[e],e,t)},updateElement:function(t,e,i){var n=this,o=n.chart,r=o.chartArea,a=o.options,s=a.animation,l=(r.left+r.right)/2,d=(r.top+r.bottom)/2,c=a.rotation,u=a.rotation,h=n.getDataset(),p=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(h.data[e])*(a.circumference/At),f=t._options||{};z.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,borderAlign:f.borderAlign,x:l+o.offsetX,y:d+o.offsetY,startAngle:c,endAngle:u,circumference:p,outerRadius:i&&s.animateScale?0:n.outerRadius,innerRadius:i&&s.animateScale?0:n.innerRadius,label:z.valueAtIndexOrDefault(h.label,e,o.data.labels[e])}});var m=t._model;i&&s.animateRotate||(m.startAngle=0===e?a.rotation:n.getMeta().data[e-1]._model.endAngle,m.endAngle=m.startAngle+m.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),i=this.getMeta(),n=0;return z.each(i.data,function(i,o){t=e.data[o],isNaN(t)||i.hidden||(n+=Math.abs(t))}),n},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?At*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,i,n,o,r,a,s,l,d=0,c=this.chart;if(!t)for(e=0,i=c.data.datasets.length;e<i;++e)if(c.isDatasetVisible(e)){t=(n=c.getDatasetMeta(e)).data,e!==this.index&&(r=n.controller);break}if(!t)return 0;for(e=0,i=t.length;e<i;++e)o=t[e],r?(r._configure(),a=r._resolveDataElementOptions(o,e)):a=o._options,"inner"!==a.borderAlign&&(d=(l=a.hoverBorderWidth)>(d=(s=a.borderWidth)>d?s:d)?l:d);return d},setHoverStyle:function(t){var e=t._model,i=t._options,n=z.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Et(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Et(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Et(i.hoverBorderWidth,i.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e},_getRingWeight:function(t){return Math.max(Et(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});N._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),N._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Dt=xt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Pt=z.valueOrDefault,Lt=z.options.resolve,Rt=z.canvas._isPointInArea;function Bt(t,e){var i=t&&t.options.ticks||{},n=i.reverse,o=void 0===i.min?e:0,r=void 0===i.max?e:0;return{start:n?r:o,end:n?o:r}}N._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Nt=tt.extend({datasetElementType:gt.Line,dataElementType:gt.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,i,n=this,o=n.getMeta(),r=o.dataset,a=o.data||[],s=n._config,l=n._showLine=Pt(s.showLine,n.chart.options.showLines);for(n._xScale=n.getScaleForId(o.xAxisID),n._yScale=n.getScaleForId(o.yAxisID),l&&(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),r._scale=n._yScale,r._datasetIndex=n.index,r._children=a,r._model=n._resolveDatasetElementOptions(r),r.pivot()),e=0,i=a.length;e<i;++e)n.updateElement(a[e],e,t);for(l&&0!==r._model.tension&&n.updateBezierControlPoints(),e=0,i=a.length;e<i;++e)a[e].pivot()},updateElement:function(t,e,i){var n,o,r=this,a=r.getMeta(),s=t.custom||{},l=r.getDataset(),d=r.index,c=l.data[e],u=r._xScale,h=r._yScale,p=a.dataset._model,f=r._resolveDataElementOptions(t,e);n=u.getPixelForValue("object"==typeof c?c:NaN,e,d),o=i?h.getBasePixel():r.calculatePointY(c,e,d),t._xScale=u,t._yScale=h,t._options=f,t._datasetIndex=d,t._index=e,t._model={x:n,y:o,skip:s.skip||isNaN(n)||isNaN(o),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:Pt(s.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(t){var e,i,n,o,r,a,s,l,d,c=this,u=c._config,h=t.custom||{},p=c.chart.options,f=p.elements.line,m=tt.prototype._resolveDatasetElementOptions.apply(c,arguments);return m.spanGaps=Pt(u.spanGaps,p.spanGaps),m.tension=Pt(u.lineTension,f.tension),m.steppedLine=Lt([h.steppedLine,u.steppedLine,f.stepped]),m.clip=(e=Pt(u.clip,(a=c._yScale,l=Bt(c._xScale,s=m.borderWidth/2),{top:(d=Bt(a,s)).end,right:l.end,bottom:d.start,left:l.start})),z.isObject(e)?(i=e.top,n=e.right,o=e.bottom,r=e.left):i=n=o=r=e,{top:i,right:n,bottom:o,left:r}),m},calculatePointY:function(t,e,i){var n,o,r,a,s,l,d=this.chart,c=this._yScale,u=0,h=0;if(c.options.stacked){for(a=+c.getRightValue(t),l=(s=d._getSortedVisibleDatasetMetas()).length,n=0;n<l&&(o=s[n]).index!==i;++n)"line"===o.type&&o.yAxisID===c.id&&((r=+c.getRightValue(d.data.datasets[o.index].data[e]))<0?h+=r||0:u+=r||0);return c.getPixelForValue(a<0?h+a:u+a)}return c.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,i,n,o=this.chart,r=this.getMeta(),a=r.dataset._model,s=o.chartArea,l=r.data||[];function d(t,e,i){return Math.max(Math.min(t,i),e)}if(a.spanGaps&&(l=l.filter(function(t){return!t._model.skip})),"monotone"===a.cubicInterpolationMode)z.splineCurveMonotone(l);else for(t=0,e=l.length;t<e;++t)i=l[t]._model,n=z.splineCurve(z.previousItem(l,t)._model,i,z.nextItem(l,t)._model,a.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(o.options.elements.line.capBezierPoints)for(t=0,e=l.length;t<e;++t)Rt(i=l[t]._model,s)&&(t>0&&Rt(l[t-1]._model,s)&&(i.controlPointPreviousX=d(i.controlPointPreviousX,s.left,s.right),i.controlPointPreviousY=d(i.controlPointPreviousY,s.top,s.bottom)),t<l.length-1&&Rt(l[t+1]._model,s)&&(i.controlPointNextX=d(i.controlPointNextX,s.left,s.right),i.controlPointNextY=d(i.controlPointNextY,s.top,s.bottom)))},draw:function(){var t,e=this.chart,i=this.getMeta(),n=i.data||[],o=e.chartArea,r=e.canvas,a=0,s=n.length;for(this._showLine&&(z.canvas.clipArea(e.ctx,{left:!1===(t=i.dataset._model.clip).left?0:o.left-t.left,right:!1===t.right?r.width:o.right+t.right,top:!1===t.top?0:o.top-t.top,bottom:!1===t.bottom?r.height:o.bottom+t.bottom}),i.dataset.draw(),z.canvas.unclipArea(e.ctx));a<s;++a)n[a].draw(o)},setHoverStyle:function(t){var e=t._model,i=t._options,n=z.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Pt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Pt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Pt(i.hoverBorderWidth,i.borderWidth),e.radius=Pt(i.hoverRadius,i.radius)}}),Mt=z.options.resolve;N._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,i,n,o=document.createElement("ul"),r=t.data,a=r.datasets,s=r.labels;if(o.setAttribute("class",t.id+"-legend"),a.length)for(e=0,i=a[0].data.length;e<i;++e)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[e],s[e]&&n.appendChild(document.createTextNode(s[e]));return o.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(i,n){var o=t.getDatasetMeta(0),r=o.controller.getStyle(n);return{text:i,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(e.datasets[0].data[n])||o.data[n].hidden,index:n}}):[]}},onClick:function(t,e){var i,n,o,r=e.index,a=this.chart;for(i=0,n=(a.data.datasets||[]).length;i<n;++i)(o=a.getDatasetMeta(i)).data[r].hidden=!o.data[r].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var Ft=tt.extend({dataElementType:gt.Arc,linkScales:z.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,i,n,o=this,r=o.getDataset(),a=o.getMeta(),s=o.chart.options.startAngle||0,l=o._starts=[],d=o._angles=[],c=a.data;for(o._updateRadius(),a.count=o.countVisibleElements(),e=0,i=r.data.length;e<i;e++)l[e]=s,n=o._computeAngle(e),d[e]=n,s+=n;for(e=0,i=c.length;e<i;++e)c[e]._options=o._resolveDataElementOptions(c[e],e),o.updateElement(c[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,i=e.chartArea,n=e.options,o=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(o/2,0),e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this,o=n.chart,r=n.getDataset(),a=o.options,s=a.animation,l=o.scale,d=o.data.labels,c=l.xCenter,u=l.yCenter,h=a.startAngle,p=t.hidden?0:l.getDistanceFromCenterForValue(r.data[e]),f=n._starts[e],m=f+(t.hidden?0:n._angles[e]),g=s.animateScale?0:l.getDistanceFromCenterForValue(r.data[e]),v=t._options||{};z.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:c,y:u,innerRadius:0,outerRadius:i?g:p,startAngle:i&&s.animateRotate?h:f,endAngle:i&&s.animateRotate?h:m,label:z.valueAtIndexOrDefault(d,e,d[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),i=0;return z.each(e.data,function(e,n){isNaN(t.data[n])||e.hidden||i++}),i},setHoverStyle:function(t){var e=t._model,i=t._options,n=z.getHoverColor,o=z.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=o(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=o(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=o(i.hoverBorderWidth,i.borderWidth)},_computeAngle:function(t){var e=this,i=this.getMeta().count,n=e.getDataset(),o=e.getMeta();return isNaN(n.data[t])||o.data[t].hidden?0:Mt([e.chart.options.elements.arc.angle,2*Math.PI/i],{chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index},t)}});N._set("pie",z.clone(N.doughnut)),N._set("pie",{cutoutPercentage:0});var jt=It,Wt=z.valueOrDefault;N._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var zt=tt.extend({datasetElementType:gt.Line,dataElementType:gt.Point,linkScales:z.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,i,n=this,o=n.getMeta(),r=o.dataset,a=o.data||[],s=n.chart.scale,l=n._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),r._scale=s,r._datasetIndex=n.index,r._children=a,r._loop=!0,r._model=n._resolveDatasetElementOptions(r),r.pivot(),e=0,i=a.length;e<i;++e)n.updateElement(a[e],e,t);for(n.updateBezierControlPoints(),e=0,i=a.length;e<i;++e)a[e].pivot()},updateElement:function(t,e,i){var n=this,o=t.custom||{},r=n.getDataset(),a=n.chart.scale,s=a.getPointPositionForValue(e,r.data[e]),l=n._resolveDataElementOptions(t,e),d=n.getMeta().dataset._model,c=i?a.xCenter:s.x,u=i?a.yCenter:s.y;t._scale=a,t._options=l,t._datasetIndex=n.index,t._index=e,t._model={x:c,y:u,skip:o.skip||isNaN(c)||isNaN(u),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Wt(o.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this._config,e=this.chart.options,i=tt.prototype._resolveDatasetElementOptions.apply(this,arguments);return i.spanGaps=Wt(t.spanGaps,e.spanGaps),i.tension=Wt(t.lineTension,e.elements.line.tension),i},updateBezierControlPoints:function(){var t,e,i,n,o=this.getMeta(),r=this.chart.chartArea,a=o.data||[];function s(t,e,i){return Math.max(Math.min(t,i),e)}for(o.dataset._model.spanGaps&&(a=a.filter(function(t){return!t._model.skip})),t=0,e=a.length;t<e;++t)i=a[t]._model,n=z.splineCurve(z.previousItem(a,t,!0)._model,i,z.nextItem(a,t,!0)._model,i.tension),i.controlPointPreviousX=s(n.previous.x,r.left,r.right),i.controlPointPreviousY=s(n.previous.y,r.top,r.bottom),i.controlPointNextX=s(n.next.x,r.left,r.right),i.controlPointNextY=s(n.next.y,r.top,r.bottom)},setHoverStyle:function(t){var e=t._model,i=t._options,n=z.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Wt(i.hoverBackgroundColor,n(i.backgroundColor)),e.borderColor=Wt(i.hoverBorderColor,n(i.borderColor)),e.borderWidth=Wt(i.hoverBorderWidth,i.borderWidth),e.radius=Wt(i.hoverRadius,i.radius)}});N._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),N._set("global",{datasets:{scatter:{showLine:!1}}});var Ht={bar:xt,bubble:kt,doughnut:It,horizontalBar:Dt,line:Nt,polarArea:Ft,pie:jt,radar:zt,scatter:Nt};function qt(t,e){return t.native?{x:t.x,y:t.y}:z.getRelativePosition(t,e)}function Vt(t,e){var i,n,o,r,a,s,l=t._getSortedVisibleDatasetMetas();for(n=0,r=l.length;n<r;++n)for(o=0,a=(i=l[n].data).length;o<a;++o)(s=i[o])._view.skip||e(s)}function Ut(t,e){var i=[];return Vt(t,function(t){t.inRange(e.x,e.y)&&i.push(t)}),i}function Gt(t,e,i,n){var o=Number.POSITIVE_INFINITY,r=[];return Vt(t,function(t){if(!i||t.inRange(e.x,e.y)){var a=t.getCenterPoint(),s=n(e,a);s<o?(r=[t],o=s):s===o&&r.push(t)}}),r}function $t(t){var e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){var o=e?Math.abs(t.x-n.x):0,r=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Kt(t,e,i){var n=qt(e,t);i.axis=i.axis||"x";var o=$t(i.axis),r=i.intersect?Ut(t,n):Gt(t,n,!1,o),a=[];return r.length?(t._getSortedVisibleDatasetMetas().forEach(function(t){var e=t.data[r[0]._index];e&&!e._view.skip&&a.push(e)}),a):[]}var Yt={modes:{single:function(t,e){var i=qt(e,t),n=[];return Vt(t,function(t){if(t.inRange(i.x,i.y))return n.push(t),n}),n.slice(0,1)},label:Kt,index:Kt,dataset:function(t,e,i){var n=qt(e,t);i.axis=i.axis||"xy";var o=$t(i.axis),r=i.intersect?Ut(t,n):Gt(t,n,!1,o);return r.length>0&&(r=t.getDatasetMeta(r[0]._datasetIndex).data),r},"x-axis":function(t,e){return Kt(t,e,{intersect:!1})},point:function(t,e){return Ut(t,qt(e,t))},nearest:function(t,e,i){var n=qt(e,t);i.axis=i.axis||"xy";var o=$t(i.axis);return Gt(t,n,i.intersect,o)},x:function(t,e,i){var n=qt(e,t),o=[],r=!1;return Vt(t,function(t){t.inXRange(n.x)&&o.push(t),t.inRange(n.x,n.y)&&(r=!0)}),i.intersect&&!r&&(o=[]),o},y:function(t,e,i){var n=qt(e,t),o=[],r=!1;return Vt(t,function(t){t.inYRange(n.y)&&o.push(t),t.inRange(n.x,n.y)&&(r=!0)}),i.intersect&&!r&&(o=[]),o}}},Xt=z.extend;function Qt(t,e){return z.where(t,function(t){return t.pos===e})}function Zt(t,e){return t.sort(function(t,i){var n=e?i:t,o=e?t:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function Jt(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function te(t,e,i){var n,o,r=i.box,a=t.maxPadding;if(i.size&&(t[i.pos]-=i.size),i.size=i.horizontal?r.height:r.width,t[i.pos]+=i.size,r.getPadding){var s=r.getPadding();a.top=Math.max(a.top,s.top),a.left=Math.max(a.left,s.left),a.bottom=Math.max(a.bottom,s.bottom),a.right=Math.max(a.right,s.right)}if(n=e.outerWidth-Jt(a,t,"left","right"),o=e.outerHeight-Jt(a,t,"top","bottom"),n!==t.w||o!==t.h)return t.w=n,t.h=o,i.horizontal?n!==t.w:o!==t.h}function ee(t,e){var i,n=e.maxPadding;return i={left:0,top:0,right:0,bottom:0},(t?["left","right"]:["top","bottom"]).forEach(function(t){i[t]=Math.max(e[t],n[t])}),i}function ie(t,e,i){var n,o,r,a,s,l,d=[];for(n=0,o=t.length;n<o;++n)(a=(r=t[n]).box).update(r.width||e.w,r.height||e.h,ee(r.horizontal,e)),te(e,i,r)&&(l=!0,d.length&&(s=!0)),a.fullWidth||d.push(r);return s&&ie(d,e,i)||l}function ne(t,e,i){var n,o,r,a,s=i.padding,l=e.x,d=e.y;for(n=0,o=t.length;n<o;++n)a=(r=t[n]).box,r.horizontal?(a.left=a.fullWidth?s.left:e.left,a.right=a.fullWidth?i.outerWidth-s.right:e.left+e.w,a.top=d,a.bottom=d+a.height,a.width=a.right-a.left,d=a.bottom):(a.left=l,a.right=l+a.width,a.top=e.top,a.bottom=e.top+e.h,a.height=a.bottom-a.top,l=a.right);e.x=l,e.y=d}N._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var oe,re={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure:function(t,e,i){for(var n,o=["fullWidth","position","weight"],r=o.length,a=0;a<r;++a)i.hasOwnProperty(n=o[a])&&(e[n]=i[n])},update:function(t,e,i){if(t){var n=z.options.toPadding((t.options.layout||{}).padding),o=e-n.width,r=i-n.height,a=(h=Zt(Qt(u=function(t){var e,i,n,o=[];for(e=0,i=(t||[]).length;e<i;++e)o.push({index:e,box:n=t[e],pos:n.position,horizontal:n.isHorizontal(),weight:n.weight});return o}(t.boxes),"left"),!0),p=Zt(Qt(u,"right")),f=Zt(Qt(u,"top"),!0),m=Zt(Qt(u,"bottom")),{leftAndTop:h.concat(f),rightAndBottom:p.concat(m),chartArea:Qt(u,"chartArea"),vertical:h.concat(p),horizontal:f.concat(m)}),s=a.vertical,l=a.horizontal,d=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:o,vBoxMaxWidth:o/2/s.length,hBoxMaxHeight:r/2}),c=Xt({maxPadding:Xt({},n),w:o,h:r,x:n.left,y:n.top},n);!function(t,e){var i,n,o;for(i=0,n=t.length;i<n;++i)(o=t[i]).width=o.horizontal?o.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,o.height=o.horizontal&&e.hBoxMaxHeight}(s.concat(l),d),ie(s,c,d),ie(l,c,d)&&ie(s,c,d),function(t){var e=t.maxPadding;function i(i){var n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(c),ne(a.leftAndTop,c,d),c.x+=c.w,c.y+=c.h,ne(a.rightAndBottom,c,d),t.chartArea={left:c.left,top:c.top,right:c.left+c.w,bottom:c.top+c.h},z.each(a.chartArea,function(e){var i=e.box;Xt(i,t.chartArea),i.update(c.w,c.h)})}var u,h,p,f,m}},ae=(oe=Object.freeze({__proto__:null,default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&oe.default||oe,se=["animationstart","webkitAnimationStart"],le={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function de(t,e){var i=z.getStyle(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var ce=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function ue(t,e,i){t.addEventListener(e,i,ce)}function he(t,e,i){t.removeEventListener(e,i,ce)}function pe(t,e,i,n,o){return{type:t,chart:e,native:o||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function fe(t){var e=document.createElement("div");return e.className=t||"",e}var me={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;!function(t,e){var i=t.$chartjs||(t.$chartjs={});if(!i.containsStyles){i.containsStyles=!0,e="/* Chart.js */\n"+e;var n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(e)),t.appendChild(n)}}(e.host?e:document.head,ae)}},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(this._ensureLoaded(t),function(t,e){var i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===o||""===o){var r=de(t,"width");void 0!==r&&(t.width=r)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var a=de(t,"height");void 0!==r&&(t.height=a)}}(t,e),i):null},releaseContext:function(t){var e=t.canvas;if(e.$chartjs){var i=e.$chartjs.initial;["height","width"].forEach(function(t){var n=i[t];z.isNullOrUndef(n)?e.removeAttribute(t):e.setAttribute(t,n)}),z.each(i.style||{},function(t,i){e.style[i]=t}),e.width=e.width,delete e.$chartjs}},addEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var o=i.$chartjs||(i.$chartjs={});ue(n,e,(o.proxies||(o.proxies={}))[t.id+"_"+e]=function(e){i(function(t,e){var i=le[t.type]||t.type,n=z.getRelativePosition(t,e);return pe(i,e,n.x,n.y,t)}(e,t))})}else!function(t,e,i){var n,o,r,a,s=t.$chartjs||(t.$chartjs={}),l=s.resizer=function(t){var e=fe("chartjs-size-monitor"),i=fe("chartjs-size-monitor-expand"),n=fe("chartjs-size-monitor-shrink");i.appendChild(fe()),n.appendChild(fe()),e.appendChild(i),e.appendChild(n),e._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var o=function(){e._reset(),t()};return ue(i,"scroll",o.bind(i,"expand")),ue(n,"scroll",o.bind(n,"shrink")),e}((n=function(){if(s.resizer){var n=i.options.maintainAspectRatio&&t.parentNode,o=n?n.clientWidth:0;e(pe("resize",i)),n&&n.clientWidth<o&&i.canvas&&e(pe("resize",i))}},r=!1,a=[],function(){a=Array.prototype.slice.call(arguments),o=o||this,r||(r=!0,z.requestAnimFrame.call(window,function(){r=!1,n.apply(o,a)}))}));!function(t,e){var i=t.$chartjs||(t.$chartjs={}),n=i.renderProxy=function(t){"chartjs-render-animation"===t.animationName&&e()};z.each(se,function(e){ue(t,e,n)}),i.reflow=!!t.offsetParent,t.classList.add("chartjs-render-monitor")}(t,function(){if(s.resizer){var e=t.parentNode;e&&e!==l.parentNode&&e.insertBefore(l,e.firstChild),l._reset()}})}(n,i,t)},removeEventListener:function(t,e,i){var n,o,r,a=t.canvas;if("resize"!==e){var s=((i.$chartjs||{}).proxies||{})[t.id+"_"+e];s&&he(a,e,s)}else r=(o=(n=a).$chartjs||{}).resizer,delete o.resizer,function(t){var e=t.$chartjs||{},i=e.renderProxy;i&&(z.each(se,function(e){he(t,e,i)}),delete e.renderProxy),t.classList.remove("chartjs-render-monitor")}(n),r&&r.parentNode&&r.parentNode.removeChild(r)}};z.addEvent=ue,z.removeEvent=he;var ge=z.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},me._enabled?me:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}});N._set("global",{plugins:{}});var ve={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach(function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n,o,r,a,s,l=this.descriptors(t),d=l.length;for(n=0;n<d;++n)if("function"==typeof(s=(r=(o=l[n]).plugin)[e])&&((a=[t].concat(i||[])).push(o.options),!1===s.apply(r,a)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var i=[],n=[],o=t&&t.config||{},r=o.options&&o.options.plugins||{};return this._plugins.concat(o.plugins||[]).forEach(function(t){if(-1===i.indexOf(t)){var e=t.id,o=r[e];!1!==o&&(!0===o&&(o=z.clone(N.global.plugins[e])),i.push(t),n.push({plugin:t,options:o||{}}))}}),e.descriptors=n,e.id=this._cacheId,n},_invalidate:function(t){delete t.$plugins}},ye={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e,this.defaults[t]=z.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?z.merge({},[N.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=z.extend(this.defaults[t],e))},addScalesToLayout:function(t){z.each(t.scales,function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,re.addBox(t,e)})}},be=z.valueOrDefault,_e=z.rtl.getRtlAdapter;N._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:z.noop,title:function(t,e){var i="",n=e.labels,o=n?n.length:0;if(t.length>0){var r=t[0];r.label?i=r.label:r.xLabel?i=r.xLabel:o>0&&r.index<o&&(i=n[r.index])}return i},afterTitle:z.noop,beforeBody:z.noop,beforeLabel:z.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";return i&&(i+=": "),z.isNullOrUndef(t.value)?i+=t.yLabel:i+=t.value,i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:z.noop,afterBody:z.noop,beforeFooter:z.noop,footer:z.noop,afterFooter:z.noop}}});var we={average:function(t){if(!t.length)return!1;var e,i,n=0,o=0,r=0;for(e=0,i=t.length;e<i;++e){var a=t[e];if(a&&a.hasValue()){var s=a.tooltipPosition();n+=s.x,o+=s.y,++r}}return{x:n/r,y:o/r}},nearest:function(t,e){var i,n,o,r=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){var l=t[i];if(l&&l.hasValue()){var d=l.getCenterPoint(),c=z.distanceBetweenPoints(e,d);c<s&&(s=c,o=l)}}if(o){var u=o.tooltipPosition();r=u.x,a=u.y}return{x:r,y:a}}};function xe(t,e){return e&&(z.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Te(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ce(t){var e=N.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:be(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:be(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:be(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:be(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:be(t.titleFontStyle,e.defaultFontStyle),titleFontSize:be(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:be(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:be(t.footerFontStyle,e.defaultFontStyle),footerFontSize:be(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function ke(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function Ee(t){return xe([],Te(t))}var Se=G.extend({initialize:function(){this._model=Ce(this._options),this._lastActive=[]},getTitle:function(){var t=this._options.callbacks,e=t.beforeTitle.apply(this,arguments),i=t.title.apply(this,arguments),n=t.afterTitle.apply(this,arguments),o=[];return xe(o=xe(o=xe(o,Te(e)),Te(i)),Te(n))},getBeforeBody:function(){return Ee(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var i=this,n=i._options.callbacks,o=[];return z.each(t,function(t){var r={before:[],lines:[],after:[]};xe(r.before,Te(n.beforeLabel.call(i,t,e))),xe(r.lines,n.label.call(i,t,e)),xe(r.after,Te(n.afterLabel.call(i,t,e))),o.push(r)}),o},getAfterBody:function(){return Ee(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this._options.callbacks,e=t.beforeFooter.apply(this,arguments),i=t.footer.apply(this,arguments),n=t.afterFooter.apply(this,arguments),o=[];return xe(o=xe(o=xe(o,Te(e)),Te(i)),Te(n))},update:function(t){var e,i,n,o,r,a,s,l,d,c,u=this,h=u._options,p=u._model,f=u._model=Ce(h),m=u._active,g=u._data,v={xAlign:p.xAlign,yAlign:p.yAlign},y={x:p.x,y:p.y},b={width:p.width,height:p.height},_={x:p.caretX,y:p.caretY};if(m.length){f.opacity=1;var w=[],x=[];_=we[h.position].call(u,m,u._eventPosition);var T=[];for(e=0,i=m.length;e<i;++e)T.push((o=void 0,r=void 0,l=void 0,d=void 0,c=void 0,o=(n=m[e])._xScale,r=n._yScale||n._scale,a=n._index,d=(l=n._chart.getDatasetMeta(s=n._datasetIndex).controller)._getIndexScale(),c=l._getValueScale(),{xLabel:o?o.getLabelForIndex(a,s):"",yLabel:r?r.getLabelForIndex(a,s):"",label:d?""+d.getLabelForIndex(a,s):"",value:c?""+c.getLabelForIndex(a,s):"",index:a,datasetIndex:s,x:n._model.x,y:n._model.y}));h.filter&&(T=T.filter(function(t){return h.filter(t,g)})),h.itemSort&&(T=T.sort(function(t,e){return h.itemSort(t,e,g)})),z.each(T,function(t){w.push(h.callbacks.labelColor.call(u,t,u._chart)),x.push(h.callbacks.labelTextColor.call(u,t,u._chart))}),f.title=u.getTitle(T,g),f.beforeBody=u.getBeforeBody(T,g),f.body=u.getBody(T,g),f.afterBody=u.getAfterBody(T,g),f.footer=u.getFooter(T,g),f.x=_.x,f.y=_.y,f.caretPadding=h.caretPadding,f.labelColors=w,f.labelTextColors=x,f.dataPoints=T,y=function(t,e,i,n){var o=t.x,r=t.y,a=t.caretPadding,s=i.xAlign,l=i.yAlign,d=t.caretSize+a,c=t.cornerRadius+a;return"right"===s?o-=e.width:"center"===s&&((o-=e.width/2)+e.width>n.width&&(o=n.width-e.width),o<0&&(o=0)),"top"===l?r+=d:r-="bottom"===l?e.height+d:e.height/2,"center"===l?"left"===s?o+=d:"right"===s&&(o-=d):"left"===s?o-=c:"right"===s&&(o+=c),{x:o,y:r}}(f,b=function(t,e){var i=t._chart.ctx,n=2*e.yPadding,o=0,r=e.body,a=r.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);a+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,d=e.titleFontSize,c=e.bodyFontSize,u=e.footerFontSize;n+=s*d,n+=s?(s-1)*e.titleSpacing:0,n+=s?e.titleMarginBottom:0,n+=a*c,n+=a?(a-1)*e.bodySpacing:0,n+=l?e.footerMarginTop:0,n+=l*u,n+=l?(l-1)*e.footerSpacing:0;var h=0,p=function(t){o=Math.max(o,i.measureText(t).width+h)};return i.font=z.fontString(d,e._titleFontStyle,e._titleFontFamily),z.each(e.title,p),i.font=z.fontString(c,e._bodyFontStyle,e._bodyFontFamily),z.each(e.beforeBody.concat(e.afterBody),p),h=e.displayColors?c+2:0,z.each(r,function(t){z.each(t.before,p),z.each(t.lines,p),z.each(t.after,p)}),h=0,i.font=z.fontString(u,e._footerFontStyle,e._footerFontFamily),z.each(e.footer,p),{width:o+=2*e.xPadding,height:n}}(this,f),v=function(t,e){var i,n,o,r,a,s=t._model,l=t._chart,d=t._chart.chartArea,c="center",u="center";s.y<e.height?u="top":s.y>l.height-e.height&&(u="bottom");var h=(d.left+d.right)/2,p=(d.top+d.bottom)/2;"center"===u?(i=function(t){return t<=h},n=function(t){return t>h}):(i=function(t){return t<=e.width/2},n=function(t){return t>=l.width-e.width/2}),o=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},r=function(t){return t-e.width-s.caretSize-s.caretPadding<0},a=function(t){return t<=p?"top":"bottom"},i(s.x)?(c="left",o(s.x)&&(c="center",u=a(s.y))):n(s.x)&&(c="right",r(s.x)&&(c="center",u=a(s.y)));var f=t._options;return{xAlign:f.xAlign?f.xAlign:c,yAlign:f.yAlign?f.yAlign:u}}(this,b),u._chart)}else f.opacity=0;return f.xAlign=v.xAlign,f.yAlign=v.yAlign,f.x=y.x,f.y=y.y,f.width=b.width,f.height=b.height,f.caretX=_.x,f.caretY=_.y,u._model=f,t&&h.custom&&h.custom.call(u,f),u},drawCaret:function(t,e){var i=this._chart.ctx,n=this.getCaretPosition(t,e,this._view);i.lineTo(n.x1,n.y1),i.lineTo(n.x2,n.y2),i.lineTo(n.x3,n.y3)},getCaretPosition:function(t,e,i){var n,o,r,a,s,l,d=i.caretSize,c=i.cornerRadius,u=i.xAlign,h=i.yAlign,p=t.x,f=t.y,m=e.width,g=e.height;if("center"===h)s=f+g/2,"left"===u?(o=(n=p)-d,r=n,a=s+d,l=s-d):(o=(n=p+m)+d,r=n,a=s-d,l=s+d);else if("left"===u?(n=(o=p+c+d)-d,r=o+d):"right"===u?(n=(o=p+m-c-d)-d,r=o+d):(n=(o=i.caretX)-d,r=o+d),"top"===h)s=(a=f)-d,l=a;else{s=(a=f+g)+d,l=a;var v=r;r=n,n=v}return{x1:n,x2:o,x3:r,y1:a,y2:s,y3:l}},drawTitle:function(t,e,i){var n,o,r,a=e.title,s=a.length;if(s){var l=_e(e.rtl,e.x,e.width);for(t.x=ke(e,e._titleAlign),i.textAlign=l.textAlign(e._titleAlign),i.textBaseline="middle",n=e.titleFontSize,o=e.titleSpacing,i.fillStyle=e.titleFontColor,i.font=z.fontString(n,e._titleFontStyle,e._titleFontFamily),r=0;r<s;++r)i.fillText(a[r],l.x(t.x),t.y+n/2),t.y+=n+o,r+1===s&&(t.y+=e.titleMarginBottom-o)}},drawBody:function(t,e,i){var n,o,r,a,s,l,d,c,u=e.bodyFontSize,h=e.bodySpacing,p=e._bodyAlign,f=e.body,m=e.displayColors,g=0,v=m?ke(e,"left"):0,y=_e(e.rtl,e.x,e.width),b=function(e){i.fillText(e,y.x(t.x+g),t.y+u/2),t.y+=u+h},_=y.textAlign(p);for(i.textAlign=p,i.textBaseline="middle",i.font=z.fontString(u,e._bodyFontStyle,e._bodyFontFamily),t.x=ke(e,_),i.fillStyle=e.bodyFontColor,z.each(e.beforeBody,b),g=m&&"right"!==_?"center"===p?u/2+1:u+2:0,s=0,d=f.length;s<d;++s){for(n=f[s],r=e.labelColors[s],i.fillStyle=o=e.labelTextColors[s],z.each(n.before,b),l=0,c=(a=n.lines).length;l<c;++l){if(m){var w=y.x(v);i.fillStyle=e.legendColorBackground,i.fillRect(y.leftForLtr(w,u),t.y,u,u),i.lineWidth=1,i.strokeStyle=r.borderColor,i.strokeRect(y.leftForLtr(w,u),t.y,u,u),i.fillStyle=r.backgroundColor,i.fillRect(y.leftForLtr(y.xPlus(w,1),u-2),t.y+1,u-2,u-2),i.fillStyle=o}b(a[l])}z.each(n.after,b)}g=0,z.each(e.afterBody,b),t.y-=h},drawFooter:function(t,e,i){var n,o,r=e.footer,a=r.length;if(a){var s=_e(e.rtl,e.x,e.width);for(t.x=ke(e,e._footerAlign),t.y+=e.footerMarginTop,i.textAlign=s.textAlign(e._footerAlign),i.textBaseline="middle",n=e.footerFontSize,i.fillStyle=e.footerFontColor,i.font=z.fontString(n,e._footerFontStyle,e._footerFontFamily),o=0;o<a;++o)i.fillText(r[o],s.x(t.x),t.y+n/2),t.y+=n+e.footerSpacing}},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,i.lineWidth=e.borderWidth;var o=e.xAlign,r=e.yAlign,a=t.x,s=t.y,l=n.width,d=n.height,c=e.cornerRadius;i.beginPath(),i.moveTo(a+c,s),"top"===r&&this.drawCaret(t,n),i.lineTo(a+l-c,s),i.quadraticCurveTo(a+l,s,a+l,s+c),"center"===r&&"right"===o&&this.drawCaret(t,n),i.lineTo(a+l,s+d-c),i.quadraticCurveTo(a+l,s+d,a+l-c,s+d),"bottom"===r&&this.drawCaret(t,n),i.lineTo(a+c,s+d),i.quadraticCurveTo(a,s+d,a,s+d-c),"center"===r&&"left"===o&&this.drawCaret(t,n),i.lineTo(a,s+c),i.quadraticCurveTo(a,s,a+c,s),i.closePath(),i.fill(),e.borderWidth>0&&i.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var i={width:e.width,height:e.height},n={x:e.x,y:e.y},o=Math.abs(e.opacity<.001)?0:e.opacity;this._options.enabled&&(e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length)&&(t.save(),t.globalAlpha=o,this.drawBackground(n,e,t,i),n.y+=e.yPadding,z.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),z.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===t.type?i._active=[]:(i._active=i._chart.getElementsAtEventForMode(t,n.mode,n),n.reverse&&i._active.reverse()),(e=!z.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0),i.pivot())),e}});Se.positioners=we;var Ae=z.valueOrDefault;function Oe(){return z.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){if("xAxes"===t||"yAxes"===t){var o,r,a,s=i[t].length;for(e[t]||(e[t]=[]),o=0;o<s;++o)r=Ae((a=i[t][o]).type,"xAxes"===t?"category":"linear"),o>=e[t].length&&e[t].push({}),z.merge(e[t][o],!e[t][o].type||a.type&&a.type!==e[t][o].type?[ye.getScaleDefaults(r),a]:a)}else z._merger(t,e,i,n)}})}function Ie(){return z.merge({},[].slice.call(arguments),{merger:function(t,e,i,n){var o=e[t]||{},r=i[t];"scales"===t?e[t]=Oe(o,r):"scale"===t?e[t]=z.merge(o,[ye.getScaleDefaults(r.type),r]):z._merger(t,e,i,n)}})}function De(t,e,i){var n,o=function(t){return t.id===n};do{n=e+i++}while(z.findIndex(t,o)>=0);return n}function Pe(t){return"top"===t||"bottom"===t}function Le(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}N._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Re=function(t,e){return this.construct(t,e),this};z.extend(Re.prototype,{construct:function(t,e){var i=this;e=function(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=Ie(N.global,N[t.type],t.options||{}),t}(e);var n=ge.acquireContext(t,e),o=n&&n.canvas,r=o&&o.height,a=o&&o.width;i.id=z.uid(),i.ctx=n,i.canvas=o,i.config=e,i.width=a,i.height=r,i.aspectRatio=r?a/r:null,i.options=e.options,i._bufferedRender=!1,i._layers=[],i.chart=i,i.controller=i,Re.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}}),n&&o?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return ve.notify(t,"beforeInit"),z.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),ve.notify(t,"afterInit"),t},clear:function(){return z.canvas.clear(this),this},stop:function(){return Y.cancelAnimation(this),this},resize:function(t){var e=this,i=e.options,n=e.canvas,o=i.maintainAspectRatio&&e.aspectRatio||null,r=Math.max(0,Math.floor(z.getMaximumWidth(n))),a=Math.max(0,Math.floor(o?r/o:z.getMaximumHeight(n)));if((e.width!==r||e.height!==a)&&(n.width=e.width=r,n.height=e.height=a,n.style.width=r+"px",n.style.height=a+"px",z.retinaScale(e,i.devicePixelRatio),!t)){var s={width:r,height:a};ve.notify(e,"resize",[s]),i.onResize&&i.onResize(e,s),e.stop(),e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},i=t.scale;z.each(e.xAxes,function(t,i){t.id||(t.id=De(e.xAxes,"x-axis-",i))}),z.each(e.yAxes,function(t,i){t.id||(t.id=De(e.yAxes,"y-axis-",i))}),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,i=t.scales||{},n=[],o=Object.keys(i).reduce(function(t,e){return t[e]=!1,t},{});e.scales&&(n=n.concat((e.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(e.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))),e.scale&&n.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),z.each(n,function(e){var n=e.options,r=n.id,a=Ae(n.type,e.dtype);Pe(n.position)!==Pe(e.dposition)&&(n.position=e.dposition),o[r]=!0;var s=null;if(r in i&&i[r].type===a)(s=i[r]).options=n,s.ctx=t.ctx,s.chart=t;else{var l=ye.getScaleConstructor(a);if(!l)return;s=new l({id:r,type:a,options:n,ctx:t.ctx,chart:t}),i[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)}),z.each(o,function(t,e){t||delete i[e]}),t.scales=i,ye.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,i=this,n=[],o=i.data.datasets;for(t=0,e=o.length;t<e;t++){var r=o[t],a=i.getDatasetMeta(t),s=r.type||i.config.type;if(a.type&&a.type!==s&&(i.destroyDatasetMeta(t),a=i.getDatasetMeta(t)),a.type=s,a.order=r.order||0,a.index=t,a.controller)a.controller.updateIndex(t),a.controller.linkScales();else{var l=Ht[a.type];if(void 0===l)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(i,t),n.push(a.controller)}}return n},resetElements:function(){var t=this;z.each(t.data.datasets,function(e,i){t.getDatasetMeta(i).controller.reset()},t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,i,n,o,r=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),o=(n=r).options,z.each(n.scales,function(t){re.removeBox(n,t)}),o=Ie(N.global,N[n.config.type],o),n.options=n.config.options=o,n.ensureScalesHaveIDs(),n.buildOrUpdateScales(),n.tooltip._options=o.tooltips,n.tooltip.initialize(),ve._invalidate(r),!1!==ve.notify(r,"beforeUpdate")){r.tooltip._data=r.data;var a=r.buildOrUpdateControllers();for(e=0,i=r.data.datasets.length;e<i;e++)r.getDatasetMeta(e).controller.buildOrUpdateElements();r.updateLayout(),r.options.animation&&r.options.animation.duration&&z.each(a,function(t){t.reset()}),r.updateDatasets(),r.tooltip.initialize(),r.lastActive=[],ve.notify(r,"afterUpdate"),r._layers.sort(Le("z","_idx")),r._bufferedRender?r._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:r.render(t)}},updateLayout:function(){var t=this;!1!==ve.notify(t,"beforeLayout")&&(re.update(this,this.width,this.height),t._layers=[],z.each(t.boxes,function(e){e._configure&&e._configure(),t._layers.push.apply(t._layers,e._layers())},t),t._layers.forEach(function(t,e){t._idx=e}),ve.notify(t,"afterScaleUpdate"),ve.notify(t,"afterLayout"))},updateDatasets:function(){if(!1!==ve.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);ve.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),i={meta:e,index:t};!1!==ve.notify(this,"beforeDatasetUpdate",[i])&&(e.controller._update(),ve.notify(this,"afterDatasetUpdate",[i]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var i=e.options.animation,n=Ae(t.duration,i&&i.duration),o=t.lazy;if(!1!==ve.notify(e,"beforeRender")){var r=function(t){ve.notify(e,"afterRender"),z.callback(i&&i.onComplete,[t],e)};if(i&&n){var a=new K({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=e.currentStep,n=i/e.numSteps;t.draw((0,z.easing.effects[e.easing])(n),n,i)},onAnimationProgress:i.onProgress,onAnimationComplete:r});Y.addAnimation(e,a,n,o)}else e.draw(),r(new K({numSteps:0,chart:e}));return e}},draw:function(t){var e,i,n=this;if(n.clear(),z.isNullOrUndef(t)&&(t=1),n.transition(t),!(n.width<=0||n.height<=0)&&!1!==ve.notify(n,"beforeDraw",[t])){for(i=n._layers,e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(n.chartArea);for(n.drawDatasets(t);e<i.length;++e)i[e].draw(n.chartArea);n._drawTooltip(t),ve.notify(n,"afterDraw",[t])}},transition:function(t){for(var e=0,i=(this.data.datasets||[]).length;e<i;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,i,n=[];for(e=0,i=(this.data.datasets||[]).length;e<i;++e)t&&!this.isDatasetVisible(e)||n.push(this.getDatasetMeta(e));return n.sort(Le("order","index")),n},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,i;if(!1!==ve.notify(this,"beforeDatasetsDraw",[t])){for(i=(e=this._getSortedVisibleDatasetMetas()).length-1;i>=0;--i)this.drawDataset(e[i],t);ve.notify(this,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var i={meta:t,index:t.index,easingValue:e};!1!==ve.notify(this,"beforeDatasetDraw",[i])&&(t.controller.draw(e),ve.notify(this,"afterDatasetDraw",[i]))},_drawTooltip:function(t){var e=this.tooltip,i={tooltip:e,easingValue:t};!1!==ve.notify(this,"beforeTooltipDraw",[i])&&(e.draw(),ve.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(t){return Yt.modes.single(this,t)},getElementsAtEvent:function(t){return Yt.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return Yt.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,i){var n=Yt.modes[e];return"function"==typeof n?n(this,t,i):[]},getDatasetAtEvent:function(t){return Yt.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var i=e._meta[this.id];return i||(i=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e.order||0,index:t}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,i=this.data.datasets.length;e<i;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,i=this.data.datasets[t],n=i._meta&&i._meta[e];n&&(n.controller.destroy(),delete i._meta[e])},destroy:function(){var t,e,i=this,n=i.canvas;for(i.stop(),t=0,e=i.data.datasets.length;t<e;++t)i.destroyDatasetMeta(t);n&&(i.unbindEvents(),z.canvas.clear(i),ge.releaseContext(i.ctx),i.canvas=null,i.ctx=null),ve.notify(i,"destroy"),delete Re.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Se({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},i=function(){t.eventHandler.apply(t,arguments)};z.each(t.options.events,function(n){ge.addEventListener(t,n,i),e[n]=i}),t.options.responsive&&(ge.addEventListener(t,"resize",i=function(){t.resize()}),e.resize=i)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,z.each(e,function(e,i){ge.removeEventListener(t,i,e)}))},updateHoverStyle:function(t,e,i){var n,o,r,a=i?"set":"remove";for(o=0,r=t.length;o<r;++o)(n=t[o])&&this.getDatasetMeta(n._datasetIndex).controller[a+"HoverStyle"](n);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+a+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,i=e.tooltip;if(!1!==ve.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var n=e.handleEvent(t);i&&(n=i._start?i.handleEvent(t):n|i.handleEvent(t)),ve.notify(e,"afterEvent",[t]);var o=e._bufferedRequest;return o?e.render(o):n&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,i=this,n=i.options||{},o=n.hover;return i.lastActive=i.lastActive||[],i.active="mouseout"===t.type?[]:i.getElementsAtEventForMode(t,o.mode,o),z.callback(n.onHover||n.hover.onHover,[t.native,i.active],i),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(i,t.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,o.mode,!1),i.active.length&&o.mode&&i.updateHoverStyle(i.active,o.mode,!0),e=!z.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,e}}),Re.instances={};var Be=Re;function Ne(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Me(t){this.options=t||{}}Re.Controller=Re,Re.types={},z.configMerge=Ie,z.scaleMerge=Oe,z.extend(Me.prototype,{formats:Ne,parse:Ne,format:Ne,add:Ne,diff:Ne,startOf:Ne,endOf:Ne,_create:function(t){return t}}),Me.override=function(t){z.extend(Me.prototype,t)};var Fe={_date:Me},je={formatters:{values:function(t){return z.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&t!==Math.floor(t)&&(n=t-Math.floor(t));var o=z.log10(Math.abs(n)),r="";if(0!==t)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var a=z.log10(Math.abs(t)),s=Math.floor(a)-Math.floor(o);s=Math.max(Math.min(s,20),0),r=t.toExponential(s)}else{var l=-1*Math.floor(o);l=Math.max(Math.min(l,20),0),r=t.toFixed(l)}else r="0";return r},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(z.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===e||e===i.length-1?t.toExponential():""}}},We=z.isArray,ze=z.isNullOrUndef,He=z.valueOrDefault,qe=z.valueAtIndexOrDefault;function Ve(t,e,i){var n,o=t.getTicks().length,r=Math.min(e,o-1),a=t.getPixelForTick(r),s=t._startPixel,l=t._endPixel;if(!(i&&(n=1===o?Math.max(a-s,l-a):0===e?(t.getPixelForTick(1)-a)/2:(a-t.getPixelForTick(r-1))/2,(a+=r<e?n:-n)<s-1e-6||a>l+1e-6)))return a}function Ue(t){return t.drawTicks?t.tickMarkLength:0}function Ge(t){var e,i;return t.display?(e=z.options._parseFont(t),i=z.options.toPadding(t.padding),e.lineHeight+i.height):0}function $e(t,e){return z.extend(z.options._parseFont({fontFamily:He(e.fontFamily,t.fontFamily),fontSize:He(e.fontSize,t.fontSize),fontStyle:He(e.fontStyle,t.fontStyle),lineHeight:He(e.lineHeight,t.lineHeight)}),{color:z.options.resolve([e.fontColor,t.fontColor,N.global.defaultFontColor])})}function Ke(t){var e=$e(t,t.minor);return{minor:e,major:t.major.enabled?$e(t,t.major):e}}function Ye(t){var e,i,n,o=[];for(i=0,n=t.length;i<n;++i)"undefined"!=typeof(e=t[i])._index&&o.push(e);return o}function Xe(t,e,i,n){var o,r,a,s,l=He(i,0),d=Math.min(He(n,t.length),t.length),c=0;for(e=Math.ceil(e),n&&(e=(o=n-i)/Math.floor(o/e)),s=l;s<0;)c++,s=Math.round(l+c*e);for(r=Math.max(l,0);r<d;r++)a=t[r],r===s?(a._index=r,c++,s=Math.round(l+c*e)):delete a.label}N._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:je.formatters.values,minor:{},major:{}}});var Qe=G.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},mergeTicksOptions:function(){},beforeUpdate:function(){z.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n,o,r,a,s,l=this,d=l.options.ticks,c=d.sampleSize;if(l.beforeUpdate(),l.maxWidth=t,l.maxHeight=e,l.margins=z.extend({left:0,right:0,top:0,bottom:0},i),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),a=l.buildTicks()||[],(!(a=l.afterBuildTicks(a)||a)||!a.length)&&l.ticks)for(a=[],n=0,o=l.ticks.length;n<o;++n)a.push({value:l.ticks[n],major:!1});return l._ticks=a,r=l._convertTicksToLabels((s=c<a.length)?function(t,e){for(var i=[],n=t.length/c,o=0,r=t.length;o<r;o+=n)i.push(t[Math.floor(o)]);return i}(a):a),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=d.display&&(d.autoSkip||"auto"===d.source)?l._autoSkip(a):a,s&&(r=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=r,l.afterUpdate(),l.minSize},_configure:function(){var t,e,i=this,n=i.options.ticks.reverse;i.isHorizontal()?(t=i.left,e=i.right):(t=i.top,e=i.bottom,n=!n),i._startPixel=t,i._endPixel=e,i._reversePixels=n,i._length=e-t},afterUpdate:function(){z.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){z.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){z.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){z.callback(this.options.beforeDataLimits,[this])},determineDataLimits:z.noop,afterDataLimits:function(){z.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){z.callback(this.options.beforeBuildTicks,[this])},buildTicks:z.noop,afterBuildTicks:function(t){var e=this;return We(t)&&t.length?z.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=z.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){z.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){z.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){z.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,i,n,o,r,a,s=this,l=s.options,d=l.ticks,c=s.getTicks().length,u=d.minRotation||0,h=d.maxRotation,p=u;!s._isVisible()||!d.display||u>=h||c<=1||!s.isHorizontal()?s.labelRotation=u:(e=(t=s._getLabelSizes()).widest.width,i=t.highest.height-t.highest.offset,n=Math.min(s.maxWidth,s.chart.width-e),e+6>(o=l.offset?s.maxWidth/c:n/(c-1))&&(o=n/(c-(l.offset?.5:1)),r=s.maxHeight-Ue(l.gridLines)-d.padding-Ge(l.scaleLabel),a=Math.sqrt(e*e+i*i),p=z.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/o,1)),Math.asin(Math.min(r/a,1))-Math.asin(i/a))),p=Math.max(u,Math.min(h,p))),s.labelRotation=p)},afterCalculateTickRotation:function(){z.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){z.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},i=t.chart,n=t.options,o=n.ticks,r=n.scaleLabel,a=n.gridLines,s=t._isVisible(),l="bottom"===n.position,d=t.isHorizontal();if(d?e.width=t.maxWidth:s&&(e.width=Ue(a)+Ge(r)),d?s&&(e.height=Ue(a)+Ge(r)):e.height=t.maxHeight,o.display&&s){var c=Ke(o),u=t._getLabelSizes(),h=u.first,p=u.last,f=u.widest,m=u.highest,g=.4*c.minor.lineHeight,v=o.padding;if(d){var y=0!==t.labelRotation,b=z.toRadians(t.labelRotation),_=Math.cos(b),w=Math.sin(b);e.height=Math.min(t.maxHeight,e.height+(w*f.width+_*(m.height-(y?m.offset:0))+(y?0:g))+v);var x,T,C=t.getPixelForTick(0)-t.left,k=t.right-t.getPixelForTick(t.getTicks().length-1);y?(x=l?_*h.width+w*h.offset:w*(h.height-h.offset),T=l?w*(p.height-p.offset):_*p.width+w*p.offset):(x=h.width/2,T=p.width/2),t.paddingLeft=Math.max((x-C)*t.width/(t.width-C),0)+3,t.paddingRight=Math.max((T-k)*t.width/(t.width-k),0)+3}else e.width=Math.min(t.maxWidth,e.width+(o.mirror?0:f.width+v+g)),t.paddingTop=h.height/2,t.paddingBottom=p.height/2}t.handleMargins(),d?(t.width=t._length=i.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=i.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){z.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(ze(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,i,n,o=this;for(o.ticks=t.map(function(t){return t.value}),o.beforeTickToLabelConversion(),e=o.convertTicksToLabels(t)||o.ticks,o.afterTickToLabelConversion(),i=0,n=t.length;i<n;++i)t[i].label=e[i];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=function(t,e,i,n){var o,r,a,s,l,d,c,u,h,p,f,m,g,v=i.length,y=[],b=[],_=[];for(o=0;o<v;++o){if(s=i[o].label,t.font=d=(l=i[o].major?e.major:e.minor).string,c=n[d]=n[d]||{data:{},gc:[]},u=l.lineHeight,h=p=0,ze(s)||We(s)){if(We(s))for(r=0,a=s.length;r<a;++r)ze(f=s[r])||We(f)||(h=z.measureText(t,c.data,c.gc,h,f),p+=u)}else h=z.measureText(t,c.data,c.gc,h,s),p=u;y.push(h),b.push(p),_.push(u/2)}function w(t){return{width:y[t]||0,height:b[t]||0,offset:_[t]||0}}return function(t,e){z.each(t,function(t){var i,n=t.gc,o=n.length/2;if(o>e){for(i=0;i<o;++i)delete t.data[n[i]];n.splice(0,o)}})}(n,v),m=y.indexOf(Math.max.apply(null,y)),g=b.indexOf(Math.max.apply(null,b)),{first:w(0),last:w(v-1),widest:w(m),highest:w(g)}}(t.ctx,Ke(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,i,n,o;return We(t)?(e=+this.getRightValue(t[0]),i=+this.getRightValue(t[1]),n=Math.min(e,i),o=Math.max(e,i)):(e=void 0,i=t=+this.getRightValue(t),n=t,o=t),{min:n,max:o,start:e,end:i}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:z.noop,getPixelForValue:z.noop,getValueForPixel:z.noop,getPixelForTick:function(t){var e=this.options.offset,i=this._ticks.length,n=1/Math.max(i-(e?0:1),1);return t<0||t>i-1?null:this.getPixelForDecimal(t*n+(e?n/2:0))},getPixelForDecimal:function(t){return this._reversePixels&&(t=1-t),this._startPixel+t*this._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,i,n,o,r=this.options.ticks,a=r.maxTicksLimit||this._length/this._tickSize()+1,s=r.major.enabled?function(t){var e,i,n=[];for(e=0,i=t.length;e<i;e++)t[e].major&&n.push(e);return n}(t):[],l=s.length,d=s[0],c=s[l-1];if(l>a)return function(t,e,i){var n,o,r=0,a=e[0];for(i=Math.ceil(i),n=0;n<t.length;n++)o=t[n],n===a?(o._index=n,a=e[++r*i]):delete o.label}(t,s,l/a),Ye(t);if(n=function(t,e,i,n){var o,r,a,s,l=function(t){var e,i,n=t.length;if(n<2)return!1;for(i=t[0],e=1;e<n;++e)if(t[e]-t[e-1]!==i)return!1;return i}(t),d=(e.length-1)/n;if(!l)return Math.max(d,1);for(a=0,s=(o=z.math._factorize(l)).length-1;a<s;a++)if((r=o[a])>d)return r;return Math.max(d,1)}(s,t,0,a),l>0){for(e=0,i=l-1;e<i;e++)Xe(t,n,s[e],s[e+1]);return Xe(t,n,z.isNullOrUndef(o=l>1?(c-d)/(l-1):null)?0:d-o,d),Xe(t,n,c,z.isNullOrUndef(o)?t.length:c+o),Ye(t)}return Xe(t,n),Ye(t)},_tickSize:function(){var t=this.options.ticks,e=z.toRadians(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,s=o?o.highest.height+r:0;return this.isHorizontal()?s*i>a*n?a/i:s/n:s*n<a*i?s/i:a/n},_isVisible:function(){var t,e,i,n=this.chart,o=this.options.display;if("auto"!==o)return!!o;for(t=0,e=n.data.datasets.length;t<e;++t)if(n.isDatasetVisible(t)&&((i=n.getDatasetMeta(t)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(t){var e,i,n,o,r,a,s,l,d,c,u,h,p,f,m,g,v,y=this,b=y.chart,_=y.options,w=_.gridLines,x=_.position,T=w.offsetGridLines,C=y.isHorizontal(),k=y._ticksToDraw,E=k.length+(T?1:0),S=Ue(w),A=[],O=w.drawBorder?qe(w.lineWidth,0,0):0,I=O/2,D=z._alignPixel,P=function(t){return D(b,t,O)};for("top"===x?(e=P(y.bottom),s=y.bottom-S,d=e-I,u=P(t.top)+I,p=t.bottom):"bottom"===x?(e=P(y.top),u=t.top,p=P(t.bottom)-I,s=e+I,d=y.top+S):"left"===x?(e=P(y.right),a=y.right-S,l=e-I,c=P(t.left)+I,h=t.right):(e=P(y.left),c=t.left,h=P(t.right)-I,a=e+I,l=y.left+S),i=0;i<E;++i)ze((n=k[i]||{}).label)&&i<k.length||(i===y.zeroLineIndex&&_.offset===T?(f=w.zeroLineWidth,m=w.zeroLineColor,g=w.zeroLineBorderDash||[],v=w.zeroLineBorderDashOffset||0):(f=qe(w.lineWidth,i,1),m=qe(w.color,i,"rgba(0,0,0,0.1)"),g=w.borderDash||[],v=w.borderDashOffset||0),void 0!==(o=Ve(y,n._index||i,T))&&(r=D(b,o,f),C?a=l=c=h=r:s=d=u=p=r,A.push({tx1:a,ty1:s,tx2:l,ty2:d,x1:c,y1:u,x2:h,y2:p,width:f,color:m,borderDash:g,borderDashOffset:v})));return A.ticksLength=E,A.borderValue=e,A},_computeLabelItems:function(){var t,e,i,n,o,r,a,s,l,d,c,u,h=this,p=h.options,f=p.ticks,m=p.position,g=f.mirror,v=h.isHorizontal(),y=h._ticksToDraw,b=Ke(f),_=f.padding,w=Ue(p.gridLines),x=-z.toRadians(h.labelRotation),T=[];for("top"===m?(r=h.bottom-w-_,a=x?"left":"center"):"bottom"===m?(r=h.top+w+_,a=x?"right":"center"):"left"===m?(o=h.right-(g?0:w)-_,a=g?"left":"right"):(o=h.left+(g?0:w)+_,a=g?"right":"left"),t=0,e=y.length;t<e;++t)ze(n=(i=y[t]).label)||(s=h.getPixelForTick(i._index||t)+f.labelOffset,d=(l=i.major?b.major:b.minor).lineHeight,c=We(n)?n.length:1,v?(o=s,u="top"===m?((x?1:.5)-c)*d:(x?0:.5)*d):(r=s,u=(1-c)*d/2),T.push({x:o,y:r,rotation:x,label:n,font:l,textOffset:u,textAlign:a}));return T},_drawGrid:function(t){var e=this,i=e.options.gridLines;if(i.display){var n,o,r,a,s,l=e.ctx,d=e.chart,c=z._alignPixel,u=i.drawBorder?qe(i.lineWidth,0,0):0,h=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(r=0,a=h.length;r<a;++r)o=(s=h[r]).color,(n=s.width)&&o&&(l.save(),l.lineWidth=n,l.strokeStyle=o,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),i.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),i.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(u){var p,f,m,g,v=u,y=qe(i.lineWidth,h.ticksLength-1,1),b=h.borderValue;e.isHorizontal()?(p=c(d,e.left,v)-v/2,f=c(d,e.right,y)+y/2,m=g=b):(m=c(d,e.top,v)-v/2,g=c(d,e.bottom,y)+y/2,p=f=b),l.lineWidth=u,l.strokeStyle=qe(i.color,0),l.beginPath(),l.moveTo(p,m),l.lineTo(f,g),l.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,i,n,o,r,a,s,l,d=t.ctx,c=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,n=c.length;e<n;++e){if(a=(r=c[e]).font,d.save(),d.translate(r.x,r.y),d.rotate(r.rotation),d.font=a.string,d.fillStyle=a.color,d.textBaseline="middle",d.textAlign=r.textAlign,l=r.textOffset,We(s=r.label))for(i=0,o=s.length;i<o;++i)d.fillText(""+s[i],0,l),l+=a.lineHeight;else d.fillText(s,0,l);d.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,i=t.options,n=i.scaleLabel;if(n.display){var o,r,a=He(n.fontColor,N.global.defaultFontColor),s=z.options._parseFont(n),l=z.options.toPadding(n.padding),d=s.lineHeight/2,c=i.position,u=0;if(t.isHorizontal())o=t.left+t.width/2,r="bottom"===c?t.bottom-d-l.bottom:t.top+d+l.top;else{var h="left"===c;o=h?t.left+d+l.top:t.right-d-l.top,r=t.top+t.height/2,u=h?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(o,r),e.rotate(u),e.textAlign="center",e.textBaseline="middle",e.fillStyle=a,e.font=s.string,e.fillText(n.labelString,0,0),e.restore()}},draw:function(t){this._isVisible()&&(this._drawGrid(t),this._drawTitle(),this._drawLabels())},_layers:function(){var t=this,e=t.options,i=e.ticks&&e.ticks.z||0,n=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&i!==n&&t.draw===t._draw?[{z:n,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:i,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:i,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var e=this,i=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter(function(n){return(!t||n.type===t)&&(i?n.xAxisID===e.id:n.yAxisID===e.id)})}});Qe.prototype._draw=Qe.prototype.draw;var Ze=Qe,Je=z.isNullOrUndef,ti=Ze.extend({determineDataLimits:function(){var t,e=this,i=e._getLabels(),n=e.options.ticks,o=n.min,r=n.max,a=0,s=i.length-1;void 0!==o&&(t=i.indexOf(o))>=0&&(a=t),void 0!==r&&(t=i.indexOf(r))>=0&&(s=t),e.minIndex=a,e.maxIndex=s,e.min=i[a],e.max=i[s]},buildTicks:function(){var t=this._getLabels(),e=this.minIndex,i=this.maxIndex;this.ticks=0===e&&i===t.length-1?t:t.slice(e,i+1)},getLabelForIndex:function(t,e){var i=this.chart;return i.getDatasetMeta(e).controller._getValueScaleId()===this.id?this.getRightValue(i.data.datasets[e].data[t]):this._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,i=t.ticks;Ze.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),i&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(i.length-(e?0:1),1))},getPixelForValue:function(t,e,i){var n,o,r,a=this;return Je(e)||Je(i)||(t=a.chart.data.datasets[i].data[e]),Je(t)||(n=a.isHorizontal()?t.x:t.y),(void 0!==n||void 0!==t&&isNaN(e))&&(o=a._getLabels(),t=z.valueOrDefault(n,t),e=-1!==(r=o.indexOf(t))?r:e,isNaN(e)&&(e=t)),a.getPixelForDecimal((e-a._startValue)/a._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange);return Math.min(Math.max(e,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}});ti._defaults={position:"bottom"};var ei=z.isNullOrUndef,ii=Ze.extend({getRightValue:function(t){return"string"==typeof t?+t:Ze.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var i=z.sign(t.min),n=z.sign(t.max);i<0&&n<0?t.max=0:i>0&&n>0&&(t.min=0)}var o=void 0!==e.min||void 0!==e.suggestedMin,r=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(t.min=null===t.min?e.suggestedMin:Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(t.max=null===t.max?e.suggestedMax:Math.max(t.max,e.suggestedMax)),o!==r&&t.min>=t.max&&(o?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,i=e.stepSize,n=e.maxTicksLimit;return i?t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(t=this._computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:z.noop,buildTicks:function(){var t=this,e=t.options.ticks,i=t.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:e.min,max:e.max,precision:e.precision,stepSize:z.valueOrDefault(e.fixedStepSize,e.stepSize)},o=t.ticks=function(e,i){var o,r,a,s,l=[],d=n.stepSize,c=d||1,u=n.maxTicks-1,h=n.min,p=n.max,f=n.precision,m=t.min,g=t.max,v=z.niceNum((g-m)/u/c)*c;if(v<1e-14&&ei(h)&&ei(p))return[m,g];(s=Math.ceil(g/v)-Math.floor(m/v))>u&&(v=z.niceNum(s*v/u/c)*c),d||ei(f)?o=Math.pow(10,z._decimalPlaces(v)):(o=Math.pow(10,f),v=Math.ceil(v*o)/o),r=Math.floor(m/v)*v,a=Math.ceil(g/v)*v,d&&(!ei(h)&&z.almostWhole(h/v,v/1e3)&&(r=h),!ei(p)&&z.almostWhole(p/v,v/1e3)&&(a=p)),s=z.almostEquals(s=(a-r)/v,Math.round(s),v/1e3)?Math.round(s):Math.ceil(s),r=Math.round(r*o)/o,a=Math.round(a*o)/o,l.push(ei(h)?r:h);for(var y=1;y<s;++y)l.push(Math.round((r+y*v)*o)/o);return l.push(ei(p)?a:p),l}();t.handleDirectionalChanges(),t.max=z.max(o),t.min=z.min(o),e.reverse?(o.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),Ze.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,i=e.getTicks(),n=e.min,o=e.max;Ze.prototype._configure.call(e),e.options.offset&&i.length&&(n-=t=(o-n)/Math.max(i.length-1,1)/2,o+=t),e._startValue=n,e._endValue=o,e._valueRange=o-n}}),ni={position:"left",ticks:{callback:je.formatters.linear}};function oi(t,e,i,n){var o,r,a=t.options,s=function(t,e,i){var n=[i.type,void 0===a.stacked&&void 0===i.stack?i.index:"",i.stack].join(".");return void 0===t[n]&&(t[n]={pos:[],neg:[]}),t[n]}(e,0,i),l=s.pos,d=s.neg,c=n.length;for(o=0;o<c;++o)r=t._parseValue(n[o]),isNaN(r.min)||isNaN(r.max)||i.data[o].hidden||(l[o]=l[o]||0,d[o]=d[o]||0,a.relativePoints?l[o]=100:r.min<0||r.max<0?d[o]+=r.min:l[o]+=r.max)}function ri(t,e,i){var n,o,r=i.length;for(n=0;n<r;++n)o=t._parseValue(i[n]),isNaN(o.min)||isNaN(o.max)||e.data[n].hidden||(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}var ai=ii.extend({determineDataLimits:function(){var t,e,i,n,o=this,r=o.options,a=o.chart.data.datasets,s=o._getMatchingVisibleMetas(),l=r.stacked,d={},c=s.length;if(o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,void 0===l)for(t=0;!l&&t<c;++t)l=void 0!==(e=s[t]).stack;for(t=0;t<c;++t)i=a[(e=s[t]).index].data,l?oi(o,d,e,i):ri(o,e,i);z.each(d,function(t){n=t.pos.concat(t.neg),o.min=Math.min(o.min,z.min(n)),o.max=Math.max(o.max,z.max(n))}),o.min=z.isFinite(o.min)&&!isNaN(o.min)?o.min:0,o.max=z.isFinite(o.max)&&!isNaN(o.max)?o.max:1,o.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=z.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){return this.getPixelForDecimal((+this.getRightValue(t)-this._startValue)/this._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}});ai._defaults=ni;var si=z.valueOrDefault,li=z.math.log10,di={position:"left",ticks:{callback:je.formatters.logarithmic}};function ci(t,e){return z.isFinite(t)&&t>=0?t:e}var ui=Ze.extend({determineDataLimits:function(){var t,e,i,n,o,r,a=this,s=a.options,l=a.chart,d=l.data.datasets,c=a.isHorizontal();function u(t){return c?t.xAxisID===a.id:t.yAxisID===a.id}a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,a.minNotZero=Number.POSITIVE_INFINITY;var h=s.stacked;if(void 0===h)for(t=0;t<d.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&u(e)&&void 0!==e.stack){h=!0;break}if(s.stacked||h){var p={};for(t=0;t<d.length;t++){var f=[(e=l.getDatasetMeta(t)).type,void 0===s.stacked&&void 0===e.stack?t:"",e.stack].join(".");if(l.isDatasetVisible(t)&&u(e))for(void 0===p[f]&&(p[f]=[]),o=0,r=(n=d[t].data).length;o<r;o++){var m=p[f];i=a._parseValue(n[o]),isNaN(i.min)||isNaN(i.max)||e.data[o].hidden||i.min<0||i.max<0||(m[o]=m[o]||0,m[o]+=i.max)}}z.each(p,function(t){if(t.length>0){var e=z.min(t),i=z.max(t);a.min=Math.min(a.min,e),a.max=Math.max(a.max,i)}})}else for(t=0;t<d.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&u(e))for(o=0,r=(n=d[t].data).length;o<r;o++)i=a._parseValue(n[o]),isNaN(i.min)||isNaN(i.max)||e.data[o].hidden||i.min<0||i.max<0||(a.min=Math.min(i.min,a.min),a.max=Math.max(i.max,a.max),0!==i.min&&(a.minNotZero=Math.min(i.min,a.minNotZero)));a.min=z.isFinite(a.min)?a.min:null,a.max=z.isFinite(a.max)?a.max:null,a.minNotZero=z.isFinite(a.minNotZero)?a.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=ci(e.min,t.min),t.max=ci(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(li(t.min))-1),t.max=Math.pow(10,Math.floor(li(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(li(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(li(t.min))+1):10),null===t.minNotZero&&(t.minNotZero=t.min>0?t.min:t.max<1?Math.pow(10,Math.floor(li(t.max))):1)},buildTicks:function(){var t=this,e=t.options.ticks,i=!t.isHorizontal(),n={min:ci(e.min),max:ci(e.max)},o=t.ticks=function(t,e){var i,n,o=[],r=si(t.min,Math.pow(10,Math.floor(li(e.min)))),a=Math.floor(li(e.max)),s=Math.ceil(e.max/Math.pow(10,a));0===r?(i=Math.floor(li(e.minNotZero)),n=Math.floor(e.minNotZero/Math.pow(10,i)),o.push(r),r=n*Math.pow(10,i)):(i=Math.floor(li(r)),n=Math.floor(r/Math.pow(10,i)));var l=i<0?Math.pow(10,Math.abs(i)):1;do{o.push(r),10==++n&&(n=1,l=++i>=0?1:l),r=Math.round(n*Math.pow(10,i)*l)/l}while(i<a||i===a&&n<s);var d=si(t.max,r);return o.push(d),o}(n,t);t.max=z.max(o),t.min=z.min(o),e.reverse?(i=!i,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i&&o.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Ze.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(li(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,i=0;Ze.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),i=si(t.options.ticks.fontSize,N.global.defaultFontSize)/t._length),t._startValue=li(e),t._valueOffset=i,t._valueRange=(li(t.max)-li(e))/(1-i)},getPixelForValue:function(t){var e=this,i=0;return(t=+e.getRightValue(t))>e.min&&t>0&&(i=(li(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(i)},getValueForPixel:function(t){var e=this,i=e.getDecimalForPixel(t);return 0===i&&0===e.min?0:Math.pow(10,e._startValue+(i-e._valueOffset)*e._valueRange)}});ui._defaults=di;var hi=z.valueOrDefault,pi=z.valueAtIndexOrDefault,fi=z.options.resolve,mi={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:je.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function gi(t){var e=t.ticks;return e.display&&t.display?hi(e.fontSize,N.global.defaultFontSize)+2*e.backdropPaddingY:0}function vi(t,e,i,n,o){return t===n||t===o?{start:e-i/2,end:e+i/2}:t<n||t>o?{start:e-i,end:e}:{start:e,end:e+i}}function yi(t){return 0===t||180===t?"center":t<180?"left":"right"}function bi(t,e,i,n){var o,r,a=i.y+n/2;if(z.isArray(e))for(o=0,r=e.length;o<r;++o)t.fillText(e[o],i.x,a),a+=n;else t.fillText(e,i.x,a)}function _i(t,e,i){90===t||270===t?i.y-=e.h/2:(t>270||t<90)&&(i.y-=e.h)}function wi(t){return z.isNumber(t)?t:0}var xi=ii.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=gi(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;z.each(e.data.datasets,function(o,r){if(e.isDatasetVisible(r)){var a=e.getDatasetMeta(r);z.each(o.data,function(e,o){var r=+t.getRightValue(e);isNaN(r)||a.data[o].hidden||(i=Math.min(r,i),n=Math.max(r,n))})}}),t.min=i===Number.POSITIVE_INFINITY?0:i,t.max=n===Number.NEGATIVE_INFINITY?0:n,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/gi(this.options))},convertTicksToLabels:function(){var t=this;ii.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(function(){var e=z.callback(t.options.pointLabels.callback,arguments,t);return e||0===e?e:""})},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,i,n,o=z.options._parseFont(t.options.pointLabels),r={l:0,r:t.width,t:0,b:t.height-t.paddingTop},a={};t.ctx.font=o.string,t._pointLabelSizes=[];var s,l,d,c=t.chart.data.labels.length;for(e=0;e<c;e++){n=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=o.lineHeight,i=z.isArray(d=t.pointLabels[e])?{w:z.longestText(s,s.font,d),h:d.length*l}:{w:s.measureText(d).width,h:l},t._pointLabelSizes[e]=i;var u=t.getIndexAngle(e),h=z.toDegrees(u)%360,p=vi(h,n.x,i.w,0,180),f=vi(h,n.y,i.h,90,270);p.start<r.l&&(r.l=p.start,a.l=u),p.end>r.r&&(r.r=p.end,a.r=u),f.start<r.t&&(r.t=f.start,a.t=u),f.end>r.b&&(r.b=f.end,a.b=u)}t.setReductions(t.drawingArea,r,a)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,i){var n=this,o=e.l/Math.sin(i.l),r=Math.max(e.r-n.width,0)/Math.sin(i.r),a=-e.t/Math.cos(i.t),s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=wi(o),r=wi(r),a=wi(a),s=wi(s),n.drawingArea=Math.min(Math.floor(t-(o+r)/2),Math.floor(t-(a+s)/2)),n.setCenterPoint(o,r,a,s)},setCenterPoint:function(t,e,i,n){var o=this,r=i+o.drawingArea,a=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((t+o.drawingArea+(o.width-e-o.drawingArea))/2+o.left),o.yCenter=Math.floor((r+a)/2+o.top+o.paddingTop)},getIndexAngle:function(t){var e=this.chart,i=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(i<0?i+360:i)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(z.isNullOrUndef(t))return NaN;var i=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*i:(t-e.min)*i},getPointPosition:function(t,e){var i=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this.min,i=this.max;return this.getPointPositionForValue(t||0,this.beginAtZero?0:e<0&&i<0?i:e>0&&i>0?e:0)},_drawGrid:function(){var t,e,i,n=this,o=n.ctx,r=n.options,a=r.gridLines,s=r.angleLines,l=hi(s.lineWidth,a.lineWidth),d=hi(s.color,a.color);if(r.pointLabels.display&&function(t){var e=t.ctx,i=t.options,n=i.pointLabels,o=gi(i),r=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),a=z.options._parseFont(n);e.save(),e.font=a.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=t.getPointPosition(s,r+(0===s?o/2:0)+5),d=pi(n.fontColor,s,N.global.defaultFontColor);e.fillStyle=d;var c=t.getIndexAngle(s),u=z.toDegrees(c);e.textAlign=yi(u),_i(u,t._pointLabelSizes[s],l),bi(e,t.pointLabels[s],l,a.lineHeight)}e.restore()}(n),a.display&&z.each(n.ticks,function(t,i){0!==i&&(e=n.getDistanceFromCenterForValue(n.ticksAsNumbers[i]),function(t,e,i,n){var o,r=t.ctx,a=e.circular,s=t.chart.data.labels.length,l=pi(e.color,n-1),d=pi(e.lineWidth,n-1);if((a||s)&&l&&d){if(r.save(),r.strokeStyle=l,r.lineWidth=d,r.setLineDash&&(r.setLineDash(e.borderDash||[]),r.lineDashOffset=e.borderDashOffset||0),r.beginPath(),a)r.arc(t.xCenter,t.yCenter,i,0,2*Math.PI);else{o=t.getPointPosition(0,i),r.moveTo(o.x,o.y);for(var c=1;c<s;c++)o=t.getPointPosition(c,i),r.lineTo(o.x,o.y)}r.closePath(),r.stroke(),r.restore()}}(n,a,e,i))}),s.display&&l&&d){for(o.save(),o.lineWidth=l,o.strokeStyle=d,o.setLineDash&&(o.setLineDash(fi([s.borderDash,a.borderDash,[]])),o.lineDashOffset=fi([s.borderDashOffset,a.borderDashOffset,0])),t=n.chart.data.labels.length-1;t>=0;t--)e=n.getDistanceFromCenterForValue(r.ticks.reverse?n.min:n.max),i=n.getPointPosition(t,e),o.beginPath(),o.moveTo(n.xCenter,n.yCenter),o.lineTo(i.x,i.y),o.stroke();o.restore()}},_drawLabels:function(){var t=this,e=t.ctx,i=t.options.ticks;if(i.display){var n,o,r=t.getIndexAngle(0),a=z.options._parseFont(i),s=hi(i.fontColor,N.global.defaultFontColor);e.save(),e.font=a.string,e.translate(t.xCenter,t.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",z.each(t.ticks,function(r,l){(0!==l||i.reverse)&&(n=t.getDistanceFromCenterForValue(t.ticksAsNumbers[l]),i.showLabelBackdrop&&(o=e.measureText(r).width,e.fillStyle=i.backdropColor,e.fillRect(-o/2-i.backdropPaddingX,-n-a.size/2-i.backdropPaddingY,o+2*i.backdropPaddingX,a.size+2*i.backdropPaddingY)),e.fillStyle=s,e.fillText(r,0,-n))}),e.restore()}},_drawTitle:z.noop});xi._defaults=mi;var Ti=z._deprecated,Ci=z.options.resolve,ki=z.valueOrDefault,Ei=Number.MIN_SAFE_INTEGER||-9007199254740991,Si=Number.MAX_SAFE_INTEGER||9007199254740991,Ai={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Oi=Object.keys(Ai);function Ii(t,e){return t-e}function Di(t){return z.valueOrDefault(t.time.min,t.ticks.min)}function Pi(t){return z.valueOrDefault(t.time.max,t.ticks.max)}function Li(t,e,i,n){var o=function(t,e,i){for(var n,o,r,a=0,s=t.length-1;a>=0&&a<=s;){if(r=t[n=a+s>>1],!(o=t[n-1]||null))return{lo:null,hi:r};if(r[e]<i)a=n+1;else{if(!(o[e]>i))return{lo:o,hi:r};s=n-1}}return{lo:r,hi:null}}(t,e,i),r=o.lo?o.hi?o.lo:t[t.length-2]:t[0],a=o.lo?o.hi?o.hi:t[t.length-1]:t[1],s=a[e]-r[e];return r[n]+(a[n]-r[n])*(s?(i-r[e])/s:0)}function Ri(t,e){var i=t._adapter,n=t.options.time,o=n.parser,r=o||n.format,a=e;return"function"==typeof o&&(a=o(a)),z.isFinite(a)||(a="string"==typeof r?i.parse(a,r):i.parse(a)),null!==a?+a:(o||"function"!=typeof r||(a=r(e),z.isFinite(a)||(a=i.parse(a))),a)}function Bi(t,e){if(z.isNullOrUndef(e))return null;var i=t.options.time,n=Ri(t,t.getRightValue(e));return null===n?n:(i.round&&(n=+t._adapter.startOf(n,i.round)),n)}function Ni(t,e,i,n){var o,r,a=Oi.length;for(o=Oi.indexOf(t);o<a-1;++o)if((r=Ai[Oi[o]]).common&&Math.ceil((i-e)/((r.steps?r.steps:Si)*r.size))<=n)return Oi[o];return Oi[a-1]}function Mi(t,e,i){var n,o,r=[],a={},s=e.length;for(n=0;n<s;++n)a[o=e[n]]=n,r.push({value:o,major:!1});return 0!==s&&i?function(t,e,i,n){var o,r,a=t._adapter,s=+a.startOf(e[0].value,n),l=e[e.length-1].value;for(o=s;o<=l;o=+a.add(o,1,n))(r=i[o])>=0&&(e[r].major=!0);return e}(t,r,a,i):r}var Fi=Ze.extend({initialize:function(){this.mergeTicksOptions(),Ze.prototype.initialize.call(this)},update:function(){var t=this.options,e=t.time||(t.time={}),i=this._adapter=new Fe._date(t.adapters.date);return Ti("time scale",e.format,"time.format","time.parser"),Ti("time scale",e.min,"time.min","ticks.min"),Ti("time scale",e.max,"time.max","ticks.max"),z.mergeIf(e.displayFormats,i.formats()),Ze.prototype.update.apply(this,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),Ze.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,i,n,o,r,a,s=this,l=s.chart,d=s._adapter,c=s.options,u=c.time.unit||"day",h=Si,p=Ei,f=[],m=[],g=[],v=s._getLabels();for(t=0,i=v.length;t<i;++t)g.push(Bi(s,v[t]));for(t=0,i=(l.data.datasets||[]).length;t<i;++t)if(l.isDatasetVisible(t))if(z.isObject((o=l.data.datasets[t].data)[0]))for(m[t]=[],e=0,n=o.length;e<n;++e)r=Bi(s,o[e]),f.push(r),m[t][e]=r;else m[t]=g.slice(0),a||(f=f.concat(g),a=!0);else m[t]=[];g.length&&(h=Math.min(h,g[0]),p=Math.max(p,g[g.length-1])),f.length&&(f=i>1?function(t){var e,i,n,o={},r=[];for(e=0,i=t.length;e<i;++e)o[n=t[e]]||(o[n]=!0,r.push(n));return r}(f).sort(Ii):f.sort(Ii),h=Math.min(h,f[0]),p=Math.max(p,f[f.length-1])),h=Bi(s,Di(c))||h,p=Bi(s,Pi(c))||p,h=h===Si?+d.startOf(Date.now(),u):h,p=p===Ei?+d.endOf(Date.now(),u)+1:p,s.min=Math.min(h,p),s.max=Math.max(h+1,p),s._table=[],s._timestamps={data:f,datasets:m,labels:g}},buildTicks:function(){var t,e,i,n=this,o=n.min,r=n.max,a=n.options,s=a.ticks,l=a.time,d=n._timestamps,c=[],u=n.getLabelCapacity(o),h=s.source,p=a.distribution;for(d="data"===h||"auto"===h&&"series"===p?d.data:"labels"===h?d.labels:function(t,e,i,o){var r,a=n._adapter,s=n.options,l=s.time,d=l.unit||Ni(l.minUnit,e,i,o),c=Ci([l.stepSize,l.unitStepSize,1]),u="week"===d&&l.isoWeekday,h=e,p=[];if(u&&(h=+a.startOf(h,"isoWeek",u)),h=+a.startOf(h,u?"day":d),a.diff(i,e,d)>1e5*c)throw e+" and "+i+" are too far apart with stepSize of "+c+" "+d;for(r=h;r<i;r=+a.add(r,c,d))p.push(r);return r!==i&&"ticks"!==s.bounds||p.push(r),p}(0,o,r,u),"ticks"===a.bounds&&d.length&&(o=d[0],r=d[d.length-1]),o=Bi(n,Di(a))||o,r=Bi(n,Pi(a))||r,t=0,e=d.length;t<e;++t)(i=d[t])>=o&&i<=r&&c.push(i);return n.min=o,n.max=r,n._unit=l.unit||(s.autoSkip?Ni(l.minUnit,n.min,n.max,u):function(t,e,i,n,o){var r,a;for(r=Oi.length-1;r>=Oi.indexOf(i);r--)if(Ai[a=Oi[r]].common&&t._adapter.diff(o,n,a)>=e-1)return a;return Oi[i?Oi.indexOf(i):0]}(n,c.length,l.minUnit,n.min,n.max)),n._majorUnit=s.major.enabled&&"year"!==n._unit?function(t){for(var e=Oi.indexOf(n._unit)+1,i=Oi.length;e<i;++e)if(Ai[Oi[e]].common)return Oi[e]}():void 0,n._table=function(t,e,i,n){if("linear"===n||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var o,r,a,s,l,d=[],c=[e];for(o=0,r=t.length;o<r;++o)(s=t[o])>e&&s<i&&c.push(s);for(c.push(i),o=0,r=c.length;o<r;++o)l=c[o+1],s=c[o],void 0!==(a=c[o-1])&&void 0!==l&&Math.round((l+a)/2)===s||d.push({time:s,pos:o/(r-1)});return d}(n._timestamps.data,o,r,p),n._offsets=function(t,e,i,n,o){var r,a,s=0,l=0;return o.offset&&e.length&&(r=Li(t,"time",e[0],"pos"),s=1===e.length?1-r:(Li(t,"time",e[1],"pos")-r)/2,a=Li(t,"time",e[e.length-1],"pos"),l=1===e.length?a:(a-Li(t,"time",e[e.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}(n._table,c,0,0,a),s.reverse&&c.reverse(),Mi(n,c,n._majorUnit)},getLabelForIndex:function(t,e){var i=this,n=i._adapter,o=i.chart.data,r=i.options.time,a=o.labels&&t<o.labels.length?o.labels[t]:"",s=o.datasets[e].data[t];return z.isObject(s)&&(a=i.getRightValue(s)),r.tooltipFormat?n.format(Ri(i,a),r.tooltipFormat):"string"==typeof a?a:n.format(Ri(i,a),r.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var o=this.options,r=o.time.displayFormats,a=this._majorUnit,s=r[a],l=i[e],d=o.ticks,c=a&&s&&l&&l.major,u=this._adapter.format(t,n||(c?s:r[this._unit])),h=c?d.major:d.minor,p=Ci([h.callback,h.userCallback,d.callback,d.userCallback]);return p?p(u,e,i):u},convertTicksToLabels:function(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(this.tickFormatFunction(t[e].value,e,t));return n},getPixelForOffset:function(t){var e=this._offsets,i=Li(this._table,"time",t,"pos");return this.getPixelForDecimal((e.start+i)*e.factor)},getPixelForValue:function(t,e,i){var n=null;if(void 0!==e&&void 0!==i&&(n=this._timestamps.datasets[i][e]),null===n&&(n=Bi(this,t)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end,n=Li(this._table,"pos",i,"time");return this._adapter._create(n)},_getLabelSize:function(t){var e=this.options.ticks,i=this.ctx.measureText(t).width,n=z.toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),r=Math.sin(n),a=ki(e.fontSize,N.global.defaultFontSize);return{w:i*o+a*r,h:i*r+a*o}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,i=e.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,r=e.tickFormatFunction(t,0,Mi(e,[t],e._majorUnit),o),a=e._getLabelSize(r),s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h);return e.options.offset&&s--,s>0?s:1}});Fi._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var ji={category:ti,linear:ai,logarithmic:ui,radialLinear:xi,time:Fi},Wi={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Fe._date.override("function"==typeof t?{_id:"moment",formats:function(){return Wi},parse:function(e,i){return"string"==typeof e&&"string"==typeof i?e=t(e,i):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,i){return t(e).format(i)},add:function(e,i,n){return t(e).add(i,n).valueOf()},diff:function(e,i,n){return t(e).diff(t(i),n)},startOf:function(e,i,n){return e=t(e),"isoWeek"===i?e.isoWeekday(n).valueOf():e.startOf(i).valueOf()},endOf:function(e,i){return t(e).endOf(i).valueOf()},_create:function(e){return t(e)}}:{}),N._set("global",{plugins:{filler:{propagate:!0}}});var zi={dataset:function(t){var e=t.fill,i=t.chart,n=i.getDatasetMeta(e),o=n&&i.isDatasetVisible(e)&&n.dataset._children||[],r=o.length||0;return r?function(t,e){return e<r&&o[e]._view||null}:null},boundary:function(t){var e=t.boundary,i=e?e.x:null,n=e?e.y:null;return z.isArray(e)?function(t,i){return e[i]}:function(t){return{x:null===i?t.x:i,y:null===n?t.y:n}}}};function Hi(t,e,i){var n,o=t._model||{},r=o.fill;if(void 0===r&&(r=!!o.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(n=parseFloat(r,10),isFinite(n)&&Math.floor(n)===n)return"-"!==r[0]&&"+"!==r[0]||(n=e+n),!(n===e||n<0||n>=i)&&n;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function qi(t){return(t.el._scale||{}).getPointPositionForValue?function(t){var e,i,n,o,r,a=t.el._scale,s=a.options,l=a.chart.data.labels.length,d=t.fill,c=[];if(!l)return null;for(e=s.ticks.reverse?a.max:a.min,i=s.ticks.reverse?a.min:a.max,n=a.getPointPositionForValue(0,e),o=0;o<l;++o)r="start"===d||"end"===d?a.getPointPositionForValue(o,"start"===d?e:i):a.getBasePosition(o),s.gridLines.circular&&(r.cx=n.x,r.cy=n.y,r.angle=a.getIndexAngle(o)-Math.PI/2),c.push(r);return c}(t):function(t){var e,i=t.el._model||{},n=t.el._scale||{},o=t.fill,r=null;if(isFinite(o))return null;if("start"===o?r=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===o?r=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?r=i.scaleZero:n.getBasePixel&&(r=n.getBasePixel()),void 0!==r&&null!==r){if(void 0!==r.x&&void 0!==r.y)return r;if(z.isFinite(r))return{x:(e=n.isHorizontal())?r:null,y:e?null:r}}return null}(t)}function Vi(t,e,i){var n,o=t[e].fill,r=[e];if(!i)return o;for(;!1!==o&&-1===r.indexOf(o);){if(!isFinite(o))return o;if(!(n=t[o]))return!1;if(n.visible)return o;r.push(o),o=n.fill}return!1}function Ui(t){var e=t.fill,i="dataset";return!1===e?null:(isFinite(e)||(i="boundary"),zi[i](t))}function Gi(t){return t&&!t.skip}function $i(t,e,i,n,o){var r,a,s,l;if(n&&o){for(t.moveTo(e[0].x,e[0].y),r=1;r<n;++r)z.canvas.lineTo(t,e[r-1],e[r]);if(void 0===i[0].angle)for(t.lineTo(i[o-1].x,i[o-1].y),r=o-1;r>0;--r)z.canvas.lineTo(t,i[r],i[r-1],!0);else for(a=i[0].cx,s=i[0].cy,l=Math.sqrt(Math.pow(i[0].x-a,2)+Math.pow(i[0].y-s,2)),r=o-1;r>0;--r)t.arc(a,s,l,i[r].angle,i[r-1].angle,!0)}}function Ki(t,e,i,n,o,r){var a,s,l,d,c,u,h,p,f=e.length,m=n.spanGaps,g=[],v=[],y=0,b=0;for(t.beginPath(),a=0,s=f;a<s;++a)c=i(d=e[l=a%f]._view,l,n),u=Gi(d),h=Gi(c),r&&void 0===p&&u&&(s=f+(p=a+1)),u&&h?(y=g.push(d),b=v.push(c)):y&&b&&(m?(u&&g.push(d),h&&v.push(c)):($i(t,g,v,y,b),y=b=0,g=[],v=[]));$i(t,g,v,y,b),t.closePath(),t.fillStyle=o,t.fill()}var Yi={id:"filler",afterDatasetsUpdate:function(t,e){var i,n,o,r,a=(t.data.datasets||[]).length,s=e.propagate,l=[];for(n=0;n<a;++n)r=null,(o=(i=t.getDatasetMeta(n)).dataset)&&o._model&&o instanceof gt.Line&&(r={visible:t.isDatasetVisible(n),fill:Hi(o,n,a),chart:t,el:o}),i.$filler=r,l.push(r);for(n=0;n<a;++n)(r=l[n])&&(r.fill=Vi(l,n,s),r.boundary=qi(r),r.mapper=Ui(r))},beforeDatasetsDraw:function(t){var e,i,n,o,r,a,s,l=t._getSortedVisibleDatasetMetas(),d=t.ctx;for(i=l.length-1;i>=0;--i)(e=l[i].$filler)&&e.visible&&(o=(n=e.el)._view,r=n._children||[],a=e.mapper,s=o.backgroundColor||N.global.defaultColor,a&&s&&r.length&&(z.canvas.clipArea(d,t.chartArea),Ki(d,r,a,o,s,n._loop),z.canvas.unclipArea(d)))}},Xi=z.rtl.getRtlAdapter,Qi=z.noop,Zi=z.valueOrDefault;function Ji(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}N._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var i=e.datasetIndex,n=this.chart,o=n.getDatasetMeta(i);o.hidden=null===o.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,i=t.options.legend||{},n=i.labels&&i.labels.usePointStyle;return t._getSortedDatasetMetas().map(function(i){var o=i.controller.getStyle(n?0:void 0);return{text:e[i.index].label,fillStyle:o.backgroundColor,hidden:!t.isDatasetVisible(i.index),lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,pointStyle:o.pointStyle,rotation:o.rotation,datasetIndex:i.index}},this)}}},legendCallback:function(t){var e,i,n,o=document.createElement("ul"),r=t.data.datasets;for(o.setAttribute("class",t.id+"-legend"),e=0,i=r.length;e<i;e++)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[e].backgroundColor,r[e].label&&n.appendChild(document.createTextNode(r[e].label));return o.outerHTML}});var tn=G.extend({initialize:function(t){z.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:Qi,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Qi,beforeSetDimensions:Qi,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Qi,beforeBuildLabels:Qi,buildLabels:function(){var t=this,e=t.options.labels||{},i=z.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(i=i.filter(function(i){return e.filter(i,t.chart.data)})),t.options.reverse&&i.reverse(),t.legendItems=i},afterBuildLabels:Qi,beforeFit:Qi,fit:function(){var t=this,e=t.options,i=e.labels,n=e.display,o=t.ctx,r=z.options._parseFont(i),a=r.size,s=t.legendHitBoxes=[],l=t.minSize,d=t.isHorizontal();if(d?(l.width=t.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=t.maxHeight),n){if(o.font=r.string,d){var c=t.lineWidths=[0],u=0;o.textAlign="left",o.textBaseline="middle",z.each(t.legendItems,function(t,e){var n=Ji(i,a)+a/2+o.measureText(t.text).width;(0===e||c[c.length-1]+n+2*i.padding>l.width)&&(u+=a+i.padding,c[c.length-(e>0?0:1)]=0),s[e]={left:0,top:0,width:n,height:a},c[c.length-1]+=n+i.padding}),l.height+=u}else{var h=i.padding,p=t.columnWidths=[],f=t.columnHeights=[],m=i.padding,g=0,v=0;z.each(t.legendItems,function(t,e){var n=Ji(i,a)+a/2+o.measureText(t.text).width;e>0&&v+a+2*h>l.height&&(m+=g+i.padding,p.push(g),f.push(v),g=0,v=0),g=Math.max(g,n),v+=a+h,s[e]={left:0,top:0,width:n,height:a}}),m+=g,p.push(g),f.push(v),l.width+=m}t.width=l.width,t.height=l.height}else t.width=l.width=t.height=l.height=0},afterFit:Qi,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,i=e.labels,n=N.global,o=n.defaultColor,r=n.elements.line,a=t.height,s=t.columnHeights,l=t.width,d=t.lineWidths;if(e.display){var c,u=Xi(e.rtl,t.left,t.minSize.width),h=t.ctx,p=Zi(i.fontColor,n.defaultFontColor),f=z.options._parseFont(i),m=f.size;h.textAlign=u.textAlign("left"),h.textBaseline="middle",h.lineWidth=.5,h.strokeStyle=p,h.fillStyle=p,h.font=f.string;var g=Ji(i,m),v=t.legendHitBoxes,y=function(t,n){switch(e.align){case"start":return i.padding;case"end":return t-n;default:return(t-n+i.padding)/2}},b=t.isHorizontal();c=b?{x:t.left+y(l,d[0]),y:t.top+i.padding,line:0}:{x:t.left+i.padding,y:t.top+y(a,s[0]),line:0},z.rtl.overrideTextDirection(t.ctx,e.textDirection);var _=m+i.padding;z.each(t.legendItems,function(e,n){var p=h.measureText(e.text).width,f=g+m/2+p,w=c.x,x=c.y;u.setWidth(t.minSize.width),b?n>0&&w+f+i.padding>t.left+t.minSize.width&&(x=c.y+=_,c.line++,w=c.x=t.left+y(l,d[c.line])):n>0&&x+_>t.top+t.minSize.height&&(w=c.x=w+t.columnWidths[c.line]+i.padding,c.line++,x=c.y=t.top+y(a,s[c.line]));var T=u.x(w);!function(t,e,n){if(!(isNaN(g)||g<=0)){h.save();var a=Zi(n.lineWidth,r.borderWidth);if(h.fillStyle=Zi(n.fillStyle,o),h.lineCap=Zi(n.lineCap,r.borderCapStyle),h.lineDashOffset=Zi(n.lineDashOffset,r.borderDashOffset),h.lineJoin=Zi(n.lineJoin,r.borderJoinStyle),h.lineWidth=a,h.strokeStyle=Zi(n.strokeStyle,o),h.setLineDash&&h.setLineDash(Zi(n.lineDash,r.borderDash)),i&&i.usePointStyle){var s=g*Math.SQRT2/2,l=u.xPlus(t,g/2);z.canvas.drawPoint(h,n.pointStyle,s,l,e+m/2,n.rotation)}else h.fillRect(u.leftForLtr(t,g),e,g,m),0!==a&&h.strokeRect(u.leftForLtr(t,g),e,g,m);h.restore()}}(T,x,e),v[n].left=u.leftForLtr(T,v[n].width),v[n].top=x,function(t,e,i,n){var o=m/2,r=u.xPlus(T,g+o),a=e+o;h.fillText(i.text,r,a),i.hidden&&(h.beginPath(),h.lineWidth=2,h.moveTo(r,a),h.lineTo(u.xPlus(r,n),a),h.stroke())}(0,x,e,p),b?c.x+=f+i.padding:c.y+=_}),z.rtl.restoreTextDirection(t.ctx,e.textDirection)}},_getLegendItemAt:function(t,e){var i,n,o,r=this;if(t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom)for(o=r.legendHitBoxes,i=0;i<o.length;++i)if(t>=(n=o[i]).left&&t<=n.left+n.width&&e>=n.top&&e<=n.top+n.height)return r.legendItems[i];return null},handleEvent:function(t){var e,i=this,n=i.options,o="mouseup"===t.type?"click":t.type;if("mousemove"===o){if(!n.onHover&&!n.onLeave)return}else{if("click"!==o)return;if(!n.onClick)return}e=i._getLegendItemAt(t.x,t.y),"click"===o?e&&n.onClick&&n.onClick.call(i,t.native,e):(n.onLeave&&e!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,t.native,i._hoveredItem),i._hoveredItem=e),n.onHover&&e&&n.onHover.call(i,t.native,e))}});function en(t,e){var i=new tn({ctx:t.ctx,options:e,chart:t});re.configure(t,i,e),re.addBox(t,i),t.legend=i}var nn={id:"legend",_element:tn,beforeInit:function(t){var e=t.options.legend;e&&en(t,e)},beforeUpdate:function(t){var e=t.options.legend,i=t.legend;e?(z.mergeIf(e,N.global.legend),i?(re.configure(t,i,e),i.options=e):en(t,e)):i&&(re.removeBox(t,i),delete t.legend)},afterEvent:function(t,e){var i=t.legend;i&&i.handleEvent(e)}},on=z.noop;N._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var rn=G.extend({initialize:function(t){z.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:on,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:on,beforeSetDimensions:on,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:on,beforeBuildLabels:on,buildLabels:on,afterBuildLabels:on,beforeFit:on,fit:function(){var t,e=this,i=e.options,n=e.minSize={},o=e.isHorizontal();i.display?(t=(z.isArray(i.text)?i.text.length:1)*z.options._parseFont(i).lineHeight+2*i.padding,e.width=n.width=o?e.maxWidth:t,e.height=n.height=o?t:e.maxHeight):e.width=n.width=e.height=n.height=0},afterFit:on,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,i=t.options;if(i.display){var n,o,r,a=z.options._parseFont(i),s=a.lineHeight,l=s/2+i.padding,d=0,c=t.top,u=t.left,h=t.bottom,p=t.right;e.fillStyle=z.valueOrDefault(i.fontColor,N.global.defaultFontColor),e.font=a.string,t.isHorizontal()?(o=u+(p-u)/2,r=c+l,n=p-u):(o="left"===i.position?u+l:p-l,r=c+(h-c)/2,n=h-c,d=Math.PI*("left"===i.position?-.5:.5)),e.save(),e.translate(o,r),e.rotate(d),e.textAlign="center",e.textBaseline="middle";var f=i.text;if(z.isArray(f))for(var m=0,g=0;g<f.length;++g)e.fillText(f[g],0,m,n),m+=s;else e.fillText(f,0,0,n);e.restore()}}});function an(t,e){var i=new rn({ctx:t.ctx,options:e,chart:t});re.configure(t,i,e),re.addBox(t,i),t.titleBlock=i}var sn={},ln=Yi,dn=nn,cn={id:"title",_element:rn,beforeInit:function(t){var e=t.options.title;e&&an(t,e)},beforeUpdate:function(t){var e=t.options.title,i=t.titleBlock;e?(z.mergeIf(e,N.global.title),i?(re.configure(t,i,e),i.options=e):an(t,e)):i&&(re.removeBox(t,i),delete t.titleBlock)}};for(var un in sn.filler=ln,sn.legend=dn,sn.title=cn,Be.helpers=z,function(){function t(t,e,i){var n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}function e(t){return void 0!==t&&null!==t&&"none"!==t}function i(i,n,o){var r=document.defaultView,a=z._getParentNode(i),s=r.getComputedStyle(i)[n],l=r.getComputedStyle(a)[n],d=e(s),c=e(l),u=Number.POSITIVE_INFINITY;return d||c?Math.min(d?t(s,i,o):u,c?t(l,a,o):u):"none"}z.where=function(t,e){if(z.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];return z.each(t,function(t){e(t)&&i.push(t)}),i},z.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=void 0===i?t:i;for(var n=0,o=t.length;n<o;++n)if(e.call(i,t[n],n,t))return n;return-1},z.findNextWhere=function(t,e,i){z.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<t.length;n++){var o=t[n];if(e(o))return o}},z.findPreviousWhere=function(t,e,i){z.isNullOrUndef(i)&&(i=t.length);for(var n=i-1;n>=0;n--){var o=t[n];if(e(o))return o}},z.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},z.almostEquals=function(t,e,i){return Math.abs(t-e)<i},z.almostWhole=function(t,e){var i=Math.round(t);return i-e<=t&&i+e>=t},z.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},z.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},z.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},z.toRadians=function(t){return t*(Math.PI/180)},z.toDegrees=function(t){return t*(180/Math.PI)},z._decimalPlaces=function(t){if(z.isFinite(t)){for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i}},z.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*Math.PI&&(r+=2*Math.PI),{angle:r,distance:o}},z.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},z.aliasPixel=function(t){return t%2==0?0:.5},z._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio,o=i/2;return Math.round((e-o)*n)/n+o},z.splineCurve=function(t,e,i,n){var o=t.skip?e:t,r=e,a=i.skip?e:i,s=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),l=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),d=s/(s+l),c=l/(s+l),u=n*(d=isNaN(d)?0:d),h=n*(c=isNaN(c)?0:c);return{previous:{x:r.x-u*(a.x-o.x),y:r.y-u*(a.y-o.y)},next:{x:r.x+h*(a.x-o.x),y:r.y+h*(a.y-o.y)}}},z.EPSILON=Number.EPSILON||1e-14,z.splineCurveMonotone=function(t){var e,i,n,o,r,a,s,l,d,c=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),u=c.length;for(e=0;e<u;++e)if(!(n=c[e]).model.skip){if(i=e>0?c[e-1]:null,(o=e<u-1?c[e+1]:null)&&!o.model.skip){var h=o.model.x-n.model.x;n.deltaK=0!==h?(o.model.y-n.model.y)/h:0}n.mK=!i||i.model.skip?n.deltaK:!o||o.model.skip?i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?0:(i.deltaK+n.deltaK)/2}for(e=0;e<u-1;++e)o=c[e+1],(n=c[e]).model.skip||o.model.skip||(z.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=o.mK=0:(r=n.mK/n.deltaK,a=o.mK/n.deltaK,(l=Math.pow(r,2)+Math.pow(a,2))<=9||(s=3/Math.sqrt(l),n.mK=r*s*n.deltaK,o.mK=a*s*n.deltaK)));for(e=0;e<u;++e)(n=c[e]).model.skip||(i=e>0?c[e-1]:null,o=e<u-1?c[e+1]:null,i&&!i.model.skip&&(n.model.controlPointPreviousX=n.model.x-(d=(n.model.x-i.model.x)/3),n.model.controlPointPreviousY=n.model.y-d*n.mK),o&&!o.model.skip&&(n.model.controlPointNextX=n.model.x+(d=(o.model.x-n.model.x)/3),n.model.controlPointNextY=n.model.y+d*n.mK))},z.nextItem=function(t,e,i){return i?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},z.previousItem=function(t,e,i){return i?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},z.niceNum=function(t,e){var i=Math.floor(z.log10(t)),n=t/Math.pow(10,i);return(e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},z.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},z.getRelativePosition=function(t,e){var i,n,o=t.originalEvent||t,r=t.target||t.srcElement,a=r.getBoundingClientRect(),s=o.touches;s&&s.length>0?(i=s[0].clientX,n=s[0].clientY):(i=o.clientX,n=o.clientY);var l=parseFloat(z.getStyle(r,"padding-left")),d=parseFloat(z.getStyle(r,"padding-top")),c=parseFloat(z.getStyle(r,"padding-right")),u=parseFloat(z.getStyle(r,"padding-bottom")),h=a.bottom-a.top-d-u;return{x:i=Math.round((i-a.left-l)/(a.right-a.left-l-c)*r.width/e.currentDevicePixelRatio),y:n=Math.round((n-a.top-d)/h*r.height/e.currentDevicePixelRatio)}},z.getConstraintWidth=function(t){return i(t,"max-width","clientWidth")},z.getConstraintHeight=function(t){return i(t,"max-height","clientHeight")},z._calculatePadding=function(t,e,i){return(e=z.getStyle(t,e)).indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)},z._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},z.getMaximumWidth=function(t){var e=z._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth,n=i-z._calculatePadding(e,"padding-left",i)-z._calculatePadding(e,"padding-right",i),o=z.getConstraintWidth(t);return isNaN(o)?n:Math.min(n,o)},z.getMaximumHeight=function(t){var e=z._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight,n=i-z._calculatePadding(e,"padding-top",i)-z._calculatePadding(e,"padding-bottom",i),o=z.getConstraintHeight(t);return isNaN(o)?n:Math.min(n,o)},z.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},z.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=t.canvas,o=t.height,r=t.width;n.height=o*i,n.width=r*i,t.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=o+"px",n.style.width=r+"px")}},z.fontString=function(t,e,i){return e+" "+t+"px "+i},z.longestText=function(t,e,i,n){var o=(n=n||{}).data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(o=n.data={},r=n.garbageCollect=[],n.font=e),t.font=e;var a,s,l,d,c,u=0,h=i.length;for(a=0;a<h;a++)if(void 0!==(d=i[a])&&null!==d&&!0!==z.isArray(d))u=z.measureText(t,o,r,u,d);else if(z.isArray(d))for(s=0,l=d.length;s<l;s++)void 0===(c=d[s])||null===c||z.isArray(c)||(u=z.measureText(t,o,r,u,c));var p=r.length/2;if(p>i.length){for(a=0;a<p;a++)delete o[r[a]];r.splice(0,p)}return u},z.measureText=function(t,e,i,n,o){var r=e[o];return r||(r=e[o]=t.measureText(o).width,i.push(o)),r>n&&(n=r),n},z.numberOfLabelLines=function(t){var e=1;return z.each(t,function(t){z.isArray(t)&&t.length>e&&(e=t.length)}),e},z.color=x?function(t){return t instanceof CanvasGradient&&(t=N.global.defaultColor),x(t)}:function(t){return console.error("Color.js not found!"),t},z.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:z.color(t).saturate(.5).darken(.1).rgbString()}}(),Be._adapters=Fe,Be.Animation=K,Be.animationService=Y,Be.controllers=Ht,Be.DatasetController=tt,Be.defaults=N,Be.Element=G,Be.elements=gt,Be.Interaction=Yt,Be.layouts=re,Be.platform=ge,Be.plugins=ve,Be.Scale=Ze,Be.scaleService=ye,Be.Ticks=je,Be.Tooltip=Se,Be.helpers.each(ji,function(t,e){Be.scaleService.registerScaleType(e,t,t._defaults)}),sn)sn.hasOwnProperty(un)&&Be.plugins.register(sn[un]);Be.platform.initialize();var hn=Be;return"undefined"!=typeof window&&(window.Chart=Be),Be.Chart=Be,Be.Legend=sn.legend._element,Be.Title=sn.title._element,Be.pluginService=Be.plugins,Be.PluginBase=Be.Element.extend({}),Be.canvasHelpers=Be.helpers.canvas,Be.layoutService=Be.layouts,Be.LinearScaleBase=ii,Be.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(t){Be[t]=function(e,i){return new Be(e,Be.helpers.merge(i||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}}),hn}),function(t){"use strict";var e=function(i){var n=e.defaults,o=e.services;return this.each(function(){var e=t(this),r={url:e.data("url"),title:e.data("title"),services:e.data("services")},a=t.extend({},n,r,i),s=a.services.match(/\S+/g),l=e.find("ul.sharebox-buttons");l.length||(l=t("<ul></ul>").addClass("sharebox-buttons").appendTo(e)),t.each(s,function(e,i){i=i.replace("google+","google-plus");var n=o[i];if(n){var r=l.find("li.share-"+i);r.length||(r=t("<li></li>").addClass("share-"+i).appendTo(l)),r.append(t("<a></a>").attr({href:t.isFunction(n.url)?n.url(a):n.url,title:n.label||i}).data({width:n.width,height:n.height}).click(function(){return n.click.call(this,a)}).append(t("<i></i>")))}})}),this};e.popup=function(e){var i=t(this),n=i.attr("href"),o=i.data("width")||400,r=i.data("height")||300;return window.open(n,"share","menubar=no,status=no,resizable=yes,menubar=no,width={WIDTH},height={HEIGHT}".replace("{WIDTH}",o).replace("{HEIGHT}",r)),!1},e.defaults={url:document.location.href,title:t(document).attr("title"),services:"google+ twitter facebook"},e.services={digg:{label:"Digg",width:720,height:320,url:function(t){return"https://digg.com/submit?url={URL}&title={TITLE}".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},facebook:{label:"Facebook",width:500,height:300,url:function(t){return"https://www.facebook.com/sharer/sharer.php?u={URL}&t={TITLE}".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},"google-plus":{label:"Google+",width:500,height:460,url:function(t){return"https://plus.google.com/share?url={URL}".replace("{URL}",encodeURIComponent(t.url))},click:e.popup},linkedin:{label:"LinkedIn",width:500,height:400,url:function(t){return"https://www.linkedin.com/shareArticle?mini=true&url={URL}&title={TITLE}&summary=&source=".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},pinterest:{label:"Pinterest",width:500,height:300,url:function(t){return"https://pinterest.com/pin/create/link/?url={URL}&description={TITLE}".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},pocket:{label:"Pocket",width:null,height:null,url:function(t){return"https://getpocket.com/save?url={URL}&title={TITLE}".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},reddit:{label:"Reddit",width:500,height:300,url:function(t){return"https://reddit.com/submit?url={URL}&title={TITLE}".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},stumbleupon:{label:"StumbleUpon",width:500,height:300,url:function(t){return"https://www.stumbleupon.com/submit?url={URL}&title={TITLE}".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},tumblr:{label:"Tumblr",width:500,height:300,url:function(t){return"https://www.tumblr.com/share/link?url={URL}&name={TITLE}&description=".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},twitter:{label:"Twitter",width:500,height:300,url:function(t){return"https://twitter.com/intent/tweet?url={URL}&text={TITLE}".replace("{URL}",encodeURIComponent(t.url)).replace("{TITLE}",encodeURIComponent(t.title))},click:e.popup},print:{label:"Print",url:"#",click:function(){return window.print(),!1}}},t.fn.sharebox=e}(jQuery);